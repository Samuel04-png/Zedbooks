var use=Object.defineProperty;var BM=t=>{throw TypeError(t)};var dse=(t,e,n)=>e in t?use(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var UM=(t,e,n)=>dse(t,typeof e!="symbol"?e+"":e,n),D1=(t,e,n)=>e.has(t)||BM("Cannot "+n);var te=(t,e,n)=>(D1(t,e,"read from private field"),n?n.call(t):e.get(t)),Nt=(t,e,n)=>e.has(t)?BM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(D1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ht=(t,e,n)=>(D1(t,e,"access private method"),n);var Fb=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return te(t,e,r)}});function hse(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Vb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vz={exports:{}},J_={},xz={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=Symbol.for("react.element"),fse=Symbol.for("react.portal"),mse=Symbol.for("react.fragment"),pse=Symbol.for("react.strict_mode"),gse=Symbol.for("react.profiler"),yse=Symbol.for("react.provider"),vse=Symbol.for("react.context"),xse=Symbol.for("react.forward_ref"),bse=Symbol.for("react.suspense"),wse=Symbol.for("react.memo"),jse=Symbol.for("react.lazy"),zM=Symbol.iterator;function _se(t){return t===null||typeof t!="object"?null:(t=zM&&t[zM]||t["@@iterator"],typeof t=="function"?t:null)}var bz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wz=Object.assign,jz={};function Dp(t,e,n){this.props=t,this.context=e,this.refs=jz,this.updater=n||bz}Dp.prototype.isReactComponent={};Dp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _z(){}_z.prototype=Dp.prototype;function tk(t,e,n){this.props=t,this.context=e,this.refs=jz,this.updater=n||bz}var nk=tk.prototype=new _z;nk.constructor=tk;wz(nk,Dp.prototype);nk.isPureReactComponent=!0;var qM=Array.isArray,Nz=Object.prototype.hasOwnProperty,rk={current:null},Sz={key:!0,ref:!0,__self:!0,__source:!0};function Ez(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Nz.call(e,r)&&!Sz.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ox,type:t,key:a,ref:o,props:i,_owner:rk.current}}function Nse(t,e){return{$$typeof:Ox,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ox}function Sse(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WM=/\/+/g;function M1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sse(""+t.key):e.toString(36)}function B0(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ox:case fse:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+M1(o,0):r,qM(i)?(n="",t!=null&&(n=t.replace(WM,"$&/")+"/"),B0(i,e,n,"",function(u){return u})):i!=null&&(sk(i)&&(i=Nse(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(WM,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qM(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+M1(a,l);o+=B0(a,e,n,c,i)}else if(c=_se(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+M1(a,l++),o+=B0(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bb(t,e,n){if(t==null)return t;var r=[],i=0;return B0(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Ese(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zs={current:null},U0={transition:null},Ase={ReactCurrentDispatcher:Zs,ReactCurrentBatchConfig:U0,ReactCurrentOwner:rk};function Az(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:Bb,forEach:function(t,e,n){Bb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bb(t,function(){e++}),e},toArray:function(t){return Bb(t,function(e){return e})||[]},only:function(t){if(!sk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Yt.Component=Dp;Yt.Fragment=mse;Yt.Profiler=gse;Yt.PureComponent=tk;Yt.StrictMode=pse;Yt.Suspense=bse;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ase;Yt.act=Az;Yt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wz({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=rk.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Nz.call(e,c)&&!Sz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ox,type:t.type,key:i,ref:a,props:r,_owner:o}};Yt.createContext=function(t){return t={$$typeof:vse,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yse,_context:t},t.Consumer=t};Yt.createElement=Ez;Yt.createFactory=function(t){var e=Ez.bind(null,t);return e.type=t,e};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(t){return{$$typeof:xse,render:t}};Yt.isValidElement=sk;Yt.lazy=function(t){return{$$typeof:jse,_payload:{_status:-1,_result:t},_init:Ese}};Yt.memo=function(t,e){return{$$typeof:wse,type:t,compare:e===void 0?null:e}};Yt.startTransition=function(t){var e=U0.transition;U0.transition={};try{t()}finally{U0.transition=e}};Yt.unstable_act=Az;Yt.useCallback=function(t,e){return Zs.current.useCallback(t,e)};Yt.useContext=function(t){return Zs.current.useContext(t)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(t){return Zs.current.useDeferredValue(t)};Yt.useEffect=function(t,e){return Zs.current.useEffect(t,e)};Yt.useId=function(){return Zs.current.useId()};Yt.useImperativeHandle=function(t,e,n){return Zs.current.useImperativeHandle(t,e,n)};Yt.useInsertionEffect=function(t,e){return Zs.current.useInsertionEffect(t,e)};Yt.useLayoutEffect=function(t,e){return Zs.current.useLayoutEffect(t,e)};Yt.useMemo=function(t,e){return Zs.current.useMemo(t,e)};Yt.useReducer=function(t,e,n){return Zs.current.useReducer(t,e,n)};Yt.useRef=function(t){return Zs.current.useRef(t)};Yt.useState=function(t){return Zs.current.useState(t)};Yt.useSyncExternalStore=function(t,e,n){return Zs.current.useSyncExternalStore(t,e,n)};Yt.useTransition=function(){return Zs.current.useTransition()};Yt.version="18.3.1";xz.exports=Yt;var j=xz.exports;const $=xn(j),ik=hse({__proto__:null,default:$},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tse=j,Cse=Symbol.for("react.element"),Pse=Symbol.for("react.fragment"),Ise=Object.prototype.hasOwnProperty,kse=Tse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rse={key:!0,ref:!0,__self:!0,__source:!0};function Tz(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ise.call(e,r)&&!Rse.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Cse,type:t,key:a,ref:o,props:i,_owner:kse.current}}J_.Fragment=Pse;J_.jsx=Tz;J_.jsxs=Tz;vz.exports=J_;var s=vz.exports,Cz={exports:{}},Wi={},Pz={exports:{}},Iz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,R){var W=D.length;D.push(R);e:for(;0<W;){var J=W-1>>>1,oe=D[J];if(0<i(oe,R))D[J]=R,D[W]=oe,W=J;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var R=D[0],W=D.pop();if(W!==R){D[0]=W;e:for(var J=0,oe=D.length,Ae=oe>>>1;J<Ae;){var z=2*(J+1)-1,ie=D[z],ve=z+1,xe=D[ve];if(0>i(ie,W))ve<oe&&0>i(xe,ie)?(D[J]=xe,D[ve]=W,J=ve):(D[J]=ie,D[z]=W,J=z);else if(ve<oe&&0>i(xe,W))D[J]=xe,D[ve]=W,J=ve;else break e}}return R}function i(D,R){var W=D.sortIndex-R.sortIndex;return W!==0?W:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=D)r(u),R.sortIndex=R.expirationTime,e(c,R);else break;R=n(u)}}function C(D){if(p=!1,w(D),!v)if(n(c)!==null)v=!0,U(S);else{var R=n(u);R!==null&&V(C,R.startTime-D)}}function S(D,R){v=!1,p&&(p=!1,b(g),g=-1),m=!0;var W=f;try{for(w(R),h=n(c);h!==null&&(!(h.expirationTime>R)||D&&!A());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var oe=J(h.expirationTime<=R);R=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&r(c),w(R)}else r(c);h=n(c)}if(h!==null)var Ae=!0;else{var z=n(u);z!==null&&V(C,z.startTime-R),Ae=!1}return Ae}finally{h=null,f=W,m=!1}}var P=!1,_=null,g=-1,T=5,E=-1;function A(){return!(t.unstable_now()-E<T)}function I(){if(_!==null){var D=t.unstable_now();E=D;var R=!0;try{R=_(!0,D)}finally{R?k():(P=!1,_=null)}}else P=!1}var k;if(typeof x=="function")k=function(){x(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=I,k=function(){B.postMessage(null)}}else k=function(){y(I,0)};function U(D){_=D,P||(P=!0,k())}function V(D,R){g=y(function(){D(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var W=f;f=R;try{return D()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=f;f=D;try{return R()}finally{f=W}},t.unstable_scheduleCallback=function(D,R,W){var J=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,D={id:d++,callback:R,priorityLevel:D,startTime:W,expirationTime:oe,sortIndex:-1},W>J?(D.sortIndex=W,e(u,D),n(c)===null&&D===n(u)&&(p?(b(g),g=-1):p=!0,V(C,W-J))):(D.sortIndex=oe,e(c,D),v||m||(v=!0,U(S))),D},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(D){var R=f;return function(){var W=f;f=R;try{return D.apply(this,arguments)}finally{f=W}}}})(Iz);Pz.exports=Iz;var Ose=Pz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dse=j,zi=Ose;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kz=new Set,tv={};function qh(t,e){Dm(t,e),Dm(t+"Capture",e)}function Dm(t,e){for(tv[t]=e,t=0;t<e.length;t++)kz.add(e[t])}var Ll=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),WA=Object.prototype.hasOwnProperty,Mse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HM={},KM={};function Lse(t){return WA.call(KM,t)?!0:WA.call(HM,t)?!1:Mse.test(t)?KM[t]=!0:(HM[t]=!0,!1)}function $se(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fse(t,e,n,r){if(e===null||typeof e>"u"||$se(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Js(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fs[t]=new Js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fs[e]=new Js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fs[t]=new Js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fs[t]=new Js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fs[t]=new Js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fs[t]=new Js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fs[t]=new Js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fs[t]=new Js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fs[t]=new Js(t,5,!1,t.toLowerCase(),null,!1,!1)});var ak=/[\-:]([a-z])/g;function ok(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ak,ok);fs[e]=new Js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ak,ok);fs[e]=new Js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ak,ok);fs[e]=new Js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fs[t]=new Js(t,1,!1,t.toLowerCase(),null,!1,!1)});fs.xlinkHref=new Js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fs[t]=new Js(t,1,!1,t.toLowerCase(),null,!0,!0)});function lk(t,e,n,r){var i=fs.hasOwnProperty(e)?fs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fse(e,n,i,r)&&(n=null),r||i===null?Lse(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sc=Dse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ub=Symbol.for("react.element"),If=Symbol.for("react.portal"),kf=Symbol.for("react.fragment"),ck=Symbol.for("react.strict_mode"),HA=Symbol.for("react.profiler"),Rz=Symbol.for("react.provider"),Oz=Symbol.for("react.context"),uk=Symbol.for("react.forward_ref"),KA=Symbol.for("react.suspense"),GA=Symbol.for("react.suspense_list"),dk=Symbol.for("react.memo"),Oc=Symbol.for("react.lazy"),Dz=Symbol.for("react.offscreen"),GM=Symbol.iterator;function Rg(t){return t===null||typeof t!="object"?null:(t=GM&&t[GM]||t["@@iterator"],typeof t=="function"?t:null)}var sr=Object.assign,L1;function cy(t){if(L1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L1=e&&e[1]||""}return`
`+L1+t}var $1=!1;function F1(t,e){if(!t||$1)return"";$1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{$1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cy(t):""}function Vse(t){switch(t.tag){case 5:return cy(t.type);case 16:return cy("Lazy");case 13:return cy("Suspense");case 19:return cy("SuspenseList");case 0:case 2:case 15:return t=F1(t.type,!1),t;case 11:return t=F1(t.type.render,!1),t;case 1:return t=F1(t.type,!0),t;default:return""}}function YA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kf:return"Fragment";case If:return"Portal";case HA:return"Profiler";case ck:return"StrictMode";case KA:return"Suspense";case GA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oz:return(t.displayName||"Context")+".Consumer";case Rz:return(t._context.displayName||"Context")+".Provider";case uk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dk:return e=t.displayName||null,e!==null?e:YA(t.type)||"Memo";case Oc:e=t._payload,t=t._init;try{return YA(t(e))}catch{}}return null}function Bse(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return YA(e);case 8:return e===ck?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Use(t){var e=Mz(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zb(t){t._valueTracker||(t._valueTracker=Use(t))}function Lz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mz(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _w(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function QA(t,e){var n=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $z(t,e){e=e.checked,e!=null&&lk(t,"checked",e,!1)}function XA(t,e){$z(t,e);var n=Pu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ZA(t,e.type,n):e.hasOwnProperty("defaultValue")&&ZA(t,e.type,Pu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ZA(t,e,n){(e!=="number"||_w(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uy=Array.isArray;function em(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pu(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function JA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(uy(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pu(n)}}function Fz(t,e){var n=Pu(e.value),r=Pu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qb,Bz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qb=qb||document.createElement("div"),qb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nv(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ey={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zse=["Webkit","ms","Moz","O"];Object.keys(Ey).forEach(function(t){zse.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ey[e]=Ey[t]})});function Uz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ey.hasOwnProperty(t)&&Ey[t]?(""+e).trim():e+"px"}function zz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Uz(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qse=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tT(t,e){if(e){if(qse[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function nT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rT=null;function hk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sT=null,tm=null,nm=null;function JM(t){if(t=Lx(t)){if(typeof sT!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=sN(e),sT(t.stateNode,t.type,e))}}function qz(t){tm?nm?nm.push(t):nm=[t]:tm=t}function Wz(){if(tm){var t=tm,e=nm;if(nm=tm=null,JM(t),e)for(t=0;t<e.length;t++)JM(e[t])}}function Hz(t,e){return t(e)}function Kz(){}var V1=!1;function Gz(t,e,n){if(V1)return t(e,n);V1=!0;try{return Hz(t,e,n)}finally{V1=!1,(tm!==null||nm!==null)&&(Kz(),Wz())}}function rv(t,e){var n=t.stateNode;if(n===null)return null;var r=sN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var iT=!1;if(Ll)try{var Og={};Object.defineProperty(Og,"passive",{get:function(){iT=!0}}),window.addEventListener("test",Og,Og),window.removeEventListener("test",Og,Og)}catch{iT=!1}function Wse(t,e,n,r,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ay=!1,Nw=null,Sw=!1,aT=null,Hse={onError:function(t){Ay=!0,Nw=t}};function Kse(t,e,n,r,i,a,o,l,c){Ay=!1,Nw=null,Wse.apply(Hse,arguments)}function Gse(t,e,n,r,i,a,o,l,c){if(Kse.apply(this,arguments),Ay){if(Ay){var u=Nw;Ay=!1,Nw=null}else throw Error(Oe(198));Sw||(Sw=!0,aT=u)}}function Wh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eL(t){if(Wh(t)!==t)throw Error(Oe(188))}function Yse(t){var e=t.alternate;if(!e){if(e=Wh(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return eL(i),t;if(a===r)return eL(i),e;a=a.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function Qz(t){return t=Yse(t),t!==null?Xz(t):null}function Xz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xz(t);if(e!==null)return e;t=t.sibling}return null}var Zz=zi.unstable_scheduleCallback,tL=zi.unstable_cancelCallback,Qse=zi.unstable_shouldYield,Xse=zi.unstable_requestPaint,xr=zi.unstable_now,Zse=zi.unstable_getCurrentPriorityLevel,fk=zi.unstable_ImmediatePriority,Jz=zi.unstable_UserBlockingPriority,Ew=zi.unstable_NormalPriority,Jse=zi.unstable_LowPriority,eq=zi.unstable_IdlePriority,eN=null,Lo=null;function eie(t){if(Lo&&typeof Lo.onCommitFiberRoot=="function")try{Lo.onCommitFiberRoot(eN,t,void 0,(t.current.flags&128)===128)}catch{}}var no=Math.clz32?Math.clz32:rie,tie=Math.log,nie=Math.LN2;function rie(t){return t>>>=0,t===0?32:31-(tie(t)/nie|0)|0}var Wb=64,Hb=4194304;function dy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Aw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=dy(l):(a&=o,a!==0&&(r=dy(a)))}else o=n&~i,o!==0?r=dy(o):a!==0&&(r=dy(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-no(e),i=1<<n,r|=t[n],e&=~i;return r}function sie(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iie(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-no(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=sie(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function oT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tq(){var t=Wb;return Wb<<=1,!(Wb&4194240)&&(Wb=64),t}function B1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dx(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-no(e),t[e]=n}function aie(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-no(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function mk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-no(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _n=0;function nq(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rq,pk,sq,iq,aq,lT=!1,Kb=[],hu=null,fu=null,mu=null,sv=new Map,iv=new Map,Fc=[],oie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nL(t,e){switch(t){case"focusin":case"focusout":hu=null;break;case"dragenter":case"dragleave":fu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":sv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iv.delete(e.pointerId)}}function Dg(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Lx(e),e!==null&&pk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lie(t,e,n,r,i){switch(e){case"focusin":return hu=Dg(hu,t,e,n,r,i),!0;case"dragenter":return fu=Dg(fu,t,e,n,r,i),!0;case"mouseover":return mu=Dg(mu,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return sv.set(a,Dg(sv.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,iv.set(a,Dg(iv.get(a)||null,t,e,n,r,i)),!0}return!1}function oq(t){var e=Md(t.target);if(e!==null){var n=Wh(e);if(n!==null){if(e=n.tag,e===13){if(e=Yz(n),e!==null){t.blockedOn=e,aq(t.priority,function(){sq(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function z0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rT=r,n.target.dispatchEvent(r),rT=null}else return e=Lx(n),e!==null&&pk(e),t.blockedOn=n,!1;e.shift()}return!0}function rL(t,e,n){z0(t)&&n.delete(e)}function cie(){lT=!1,hu!==null&&z0(hu)&&(hu=null),fu!==null&&z0(fu)&&(fu=null),mu!==null&&z0(mu)&&(mu=null),sv.forEach(rL),iv.forEach(rL)}function Mg(t,e){t.blockedOn===e&&(t.blockedOn=null,lT||(lT=!0,zi.unstable_scheduleCallback(zi.unstable_NormalPriority,cie)))}function av(t){function e(i){return Mg(i,t)}if(0<Kb.length){Mg(Kb[0],t);for(var n=1;n<Kb.length;n++){var r=Kb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hu!==null&&Mg(hu,t),fu!==null&&Mg(fu,t),mu!==null&&Mg(mu,t),sv.forEach(e),iv.forEach(e),n=0;n<Fc.length;n++)r=Fc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fc.length&&(n=Fc[0],n.blockedOn===null);)oq(n),n.blockedOn===null&&Fc.shift()}var rm=sc.ReactCurrentBatchConfig,Tw=!0;function uie(t,e,n,r){var i=_n,a=rm.transition;rm.transition=null;try{_n=1,gk(t,e,n,r)}finally{_n=i,rm.transition=a}}function die(t,e,n,r){var i=_n,a=rm.transition;rm.transition=null;try{_n=4,gk(t,e,n,r)}finally{_n=i,rm.transition=a}}function gk(t,e,n,r){if(Tw){var i=cT(t,e,n,r);if(i===null)X1(t,e,r,Cw,n),nL(t,r);else if(lie(i,t,e,n,r))r.stopPropagation();else if(nL(t,r),e&4&&-1<oie.indexOf(t)){for(;i!==null;){var a=Lx(i);if(a!==null&&rq(a),a=cT(t,e,n,r),a===null&&X1(t,e,r,Cw,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else X1(t,e,r,null,n)}}var Cw=null;function cT(t,e,n,r){if(Cw=null,t=hk(r),t=Md(t),t!==null)if(e=Wh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cw=t,null}function lq(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zse()){case fk:return 1;case Jz:return 4;case Ew:case Jse:return 16;case eq:return 536870912;default:return 16}default:return 16}}var ru=null,yk=null,q0=null;function cq(){if(q0)return q0;var t,e=yk,n=e.length,r,i="value"in ru?ru.value:ru.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return q0=i.slice(t,1<r?1-r:void 0)}function W0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gb(){return!0}function sL(){return!1}function Hi(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gb:sL,this.isPropagationStopped=sL,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gb)},persist:function(){},isPersistent:Gb}),e}var Mp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vk=Hi(Mp),Mx=sr({},Mp,{view:0,detail:0}),hie=Hi(Mx),U1,z1,Lg,tN=sr({},Mx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lg&&(Lg&&t.type==="mousemove"?(U1=t.screenX-Lg.screenX,z1=t.screenY-Lg.screenY):z1=U1=0,Lg=t),U1)},movementY:function(t){return"movementY"in t?t.movementY:z1}}),iL=Hi(tN),fie=sr({},tN,{dataTransfer:0}),mie=Hi(fie),pie=sr({},Mx,{relatedTarget:0}),q1=Hi(pie),gie=sr({},Mp,{animationName:0,elapsedTime:0,pseudoElement:0}),yie=Hi(gie),vie=sr({},Mp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xie=Hi(vie),bie=sr({},Mp,{data:0}),aL=Hi(bie),wie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_ie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nie(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_ie[t])?!!e[t]:!1}function xk(){return Nie}var Sie=sr({},Mx,{key:function(t){if(t.key){var e=wie[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=W0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jie[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xk,charCode:function(t){return t.type==="keypress"?W0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eie=Hi(Sie),Aie=sr({},tN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oL=Hi(Aie),Tie=sr({},Mx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xk}),Cie=Hi(Tie),Pie=sr({},Mp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iie=Hi(Pie),kie=sr({},tN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rie=Hi(kie),Oie=[9,13,27,32],bk=Ll&&"CompositionEvent"in window,Ty=null;Ll&&"documentMode"in document&&(Ty=document.documentMode);var Die=Ll&&"TextEvent"in window&&!Ty,uq=Ll&&(!bk||Ty&&8<Ty&&11>=Ty),lL=" ",cL=!1;function dq(t,e){switch(t){case"keyup":return Oie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hq(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rf=!1;function Mie(t,e){switch(t){case"compositionend":return hq(e);case"keypress":return e.which!==32?null:(cL=!0,lL);case"textInput":return t=e.data,t===lL&&cL?null:t;default:return null}}function Lie(t,e){if(Rf)return t==="compositionend"||!bk&&dq(t,e)?(t=cq(),q0=yk=ru=null,Rf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uq&&e.locale!=="ko"?null:e.data;default:return null}}var $ie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$ie[t.type]:e==="textarea"}function fq(t,e,n,r){qz(r),e=Pw(e,"onChange"),0<e.length&&(n=new vk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cy=null,ov=null;function Fie(t){Nq(t,0)}function nN(t){var e=Mf(t);if(Lz(e))return t}function Vie(t,e){if(t==="change")return e}var mq=!1;if(Ll){var W1;if(Ll){var H1="oninput"in document;if(!H1){var dL=document.createElement("div");dL.setAttribute("oninput","return;"),H1=typeof dL.oninput=="function"}W1=H1}else W1=!1;mq=W1&&(!document.documentMode||9<document.documentMode)}function hL(){Cy&&(Cy.detachEvent("onpropertychange",pq),ov=Cy=null)}function pq(t){if(t.propertyName==="value"&&nN(ov)){var e=[];fq(e,ov,t,hk(t)),Gz(Fie,e)}}function Bie(t,e,n){t==="focusin"?(hL(),Cy=e,ov=n,Cy.attachEvent("onpropertychange",pq)):t==="focusout"&&hL()}function Uie(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nN(ov)}function zie(t,e){if(t==="click")return nN(e)}function qie(t,e){if(t==="input"||t==="change")return nN(e)}function Wie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oo=typeof Object.is=="function"?Object.is:Wie;function lv(t,e){if(oo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!WA.call(e,i)||!oo(t[i],e[i]))return!1}return!0}function fL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mL(t,e){var n=fL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fL(n)}}function gq(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gq(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yq(){for(var t=window,e=_w();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_w(t.document)}return e}function wk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hie(t){var e=yq(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gq(n.ownerDocument.documentElement,n)){if(r!==null&&wk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=mL(n,a);var o=mL(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kie=Ll&&"documentMode"in document&&11>=document.documentMode,Of=null,uT=null,Py=null,dT=!1;function pL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dT||Of==null||Of!==_w(r)||(r=Of,"selectionStart"in r&&wk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Py&&lv(Py,r)||(Py=r,r=Pw(uT,"onSelect"),0<r.length&&(e=new vk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Of)))}function Yb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Df={animationend:Yb("Animation","AnimationEnd"),animationiteration:Yb("Animation","AnimationIteration"),animationstart:Yb("Animation","AnimationStart"),transitionend:Yb("Transition","TransitionEnd")},K1={},vq={};Ll&&(vq=document.createElement("div").style,"AnimationEvent"in window||(delete Df.animationend.animation,delete Df.animationiteration.animation,delete Df.animationstart.animation),"TransitionEvent"in window||delete Df.transitionend.transition);function rN(t){if(K1[t])return K1[t];if(!Df[t])return t;var e=Df[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vq)return K1[t]=e[n];return t}var xq=rN("animationend"),bq=rN("animationiteration"),wq=rN("animationstart"),jq=rN("transitionend"),_q=new Map,gL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gu(t,e){_q.set(t,e),qh(e,[t])}for(var G1=0;G1<gL.length;G1++){var Y1=gL[G1],Gie=Y1.toLowerCase(),Yie=Y1[0].toUpperCase()+Y1.slice(1);Gu(Gie,"on"+Yie)}Gu(xq,"onAnimationEnd");Gu(bq,"onAnimationIteration");Gu(wq,"onAnimationStart");Gu("dblclick","onDoubleClick");Gu("focusin","onFocus");Gu("focusout","onBlur");Gu(jq,"onTransitionEnd");Dm("onMouseEnter",["mouseout","mouseover"]);Dm("onMouseLeave",["mouseout","mouseover"]);Dm("onPointerEnter",["pointerout","pointerover"]);Dm("onPointerLeave",["pointerout","pointerover"]);qh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qh("onBeforeInput",["compositionend","keypress","textInput","paste"]);qh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qie=new Set("cancel close invalid load scroll toggle".split(" ").concat(hy));function yL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gse(r,e,void 0,t),t.currentTarget=null}function Nq(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;yL(i,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;yL(i,l,u),a=c}}}if(Sw)throw t=aT,Sw=!1,aT=null,t}function Un(t,e){var n=e[gT];n===void 0&&(n=e[gT]=new Set);var r=t+"__bubble";n.has(r)||(Sq(e,t,2,!1),n.add(r))}function Q1(t,e,n){var r=0;e&&(r|=4),Sq(n,t,r,e)}var Qb="_reactListening"+Math.random().toString(36).slice(2);function cv(t){if(!t[Qb]){t[Qb]=!0,kz.forEach(function(n){n!=="selectionchange"&&(Qie.has(n)||Q1(n,!1,t),Q1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qb]||(e[Qb]=!0,Q1("selectionchange",!1,e))}}function Sq(t,e,n,r){switch(lq(e)){case 1:var i=uie;break;case 4:i=die;break;default:i=gk}n=i.bind(null,e,n,t),i=void 0,!iT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function X1(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Md(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}Gz(function(){var u=a,d=hk(n),h=[];e:{var f=_q.get(t);if(f!==void 0){var m=vk,v=t;switch(t){case"keypress":if(W0(n)===0)break e;case"keydown":case"keyup":m=Eie;break;case"focusin":v="focus",m=q1;break;case"focusout":v="blur",m=q1;break;case"beforeblur":case"afterblur":m=q1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=iL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Cie;break;case xq:case bq:case wq:m=yie;break;case jq:m=Iie;break;case"scroll":m=hie;break;case"wheel":m=Rie;break;case"copy":case"cut":case"paste":m=xie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=oL}var p=(e&4)!==0,y=!p&&t==="scroll",b=p?f!==null?f+"Capture":null:f;p=[];for(var x=u,w;x!==null;){w=x;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=rv(x,b),C!=null&&p.push(uv(x,C,w)))),y)break;x=x.return}0<p.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==rT&&(v=n.relatedTarget||n.fromElement)&&(Md(v)||v[$l]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Md(v):null,v!==null&&(y=Wh(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=iL,C="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(p=oL,C="onPointerLeave",b="onPointerEnter",x="pointer"),y=m==null?f:Mf(m),w=v==null?f:Mf(v),f=new p(C,x+"leave",m,n,d),f.target=y,f.relatedTarget=w,C=null,Md(d)===u&&(p=new p(b,x+"enter",v,n,d),p.target=w,p.relatedTarget=y,C=p),y=C,m&&v)t:{for(p=m,b=v,x=0,w=p;w;w=df(w))x++;for(w=0,C=b;C;C=df(C))w++;for(;0<x-w;)p=df(p),x--;for(;0<w-x;)b=df(b),w--;for(;x--;){if(p===b||b!==null&&p===b.alternate)break t;p=df(p),b=df(b)}p=null}else p=null;m!==null&&vL(h,f,m,p,!1),v!==null&&y!==null&&vL(h,y,v,p,!0)}}e:{if(f=u?Mf(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=Vie;else if(uL(f))if(mq)S=qie;else{S=Uie;var P=Bie}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=zie);if(S&&(S=S(t,u))){fq(h,S,n,d);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&ZA(f,"number",f.value)}switch(P=u?Mf(u):window,t){case"focusin":(uL(P)||P.contentEditable==="true")&&(Of=P,uT=u,Py=null);break;case"focusout":Py=uT=Of=null;break;case"mousedown":dT=!0;break;case"contextmenu":case"mouseup":case"dragend":dT=!1,pL(h,n,d);break;case"selectionchange":if(Kie)break;case"keydown":case"keyup":pL(h,n,d)}var _;if(bk)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Rf?dq(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(uq&&n.locale!=="ko"&&(Rf||g!=="onCompositionStart"?g==="onCompositionEnd"&&Rf&&(_=cq()):(ru=d,yk="value"in ru?ru.value:ru.textContent,Rf=!0)),P=Pw(u,g),0<P.length&&(g=new aL(g,t,null,n,d),h.push({event:g,listeners:P}),_?g.data=_:(_=hq(n),_!==null&&(g.data=_)))),(_=Die?Mie(t,n):Lie(t,n))&&(u=Pw(u,"onBeforeInput"),0<u.length&&(d=new aL("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}Nq(h,e)})}function uv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=rv(t,n),a!=null&&r.unshift(uv(t,a,i)),a=rv(t,e),a!=null&&r.push(uv(t,a,i))),t=t.return}return r}function df(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vL(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=rv(n,a),c!=null&&o.unshift(uv(n,c,l))):i||(c=rv(n,a),c!=null&&o.push(uv(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xie=/\r\n?/g,Zie=/\u0000|\uFFFD/g;function xL(t){return(typeof t=="string"?t:""+t).replace(Xie,`
`).replace(Zie,"")}function Xb(t,e,n){if(e=xL(e),xL(t)!==e&&n)throw Error(Oe(425))}function Iw(){}var hT=null,fT=null;function mT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pT=typeof setTimeout=="function"?setTimeout:void 0,Jie=typeof clearTimeout=="function"?clearTimeout:void 0,bL=typeof Promise=="function"?Promise:void 0,eae=typeof queueMicrotask=="function"?queueMicrotask:typeof bL<"u"?function(t){return bL.resolve(null).then(t).catch(tae)}:pT;function tae(t){setTimeout(function(){throw t})}function Z1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),av(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);av(e)}function pu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lp=Math.random().toString(36).slice(2),Co="__reactFiber$"+Lp,dv="__reactProps$"+Lp,$l="__reactContainer$"+Lp,gT="__reactEvents$"+Lp,nae="__reactListeners$"+Lp,rae="__reactHandles$"+Lp;function Md(t){var e=t[Co];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$l]||n[Co]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wL(t);t!==null;){if(n=t[Co])return n;t=wL(t)}return e}t=n,n=t.parentNode}return null}function Lx(t){return t=t[Co]||t[$l],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function sN(t){return t[dv]||null}var yT=[],Lf=-1;function Yu(t){return{current:t}}function Hn(t){0>Lf||(t.current=yT[Lf],yT[Lf]=null,Lf--)}function Mn(t,e){Lf++,yT[Lf]=t.current,t.current=e}var Iu={},Os=Yu(Iu),yi=Yu(!1),fh=Iu;function Mm(t,e){var n=t.type.contextTypes;if(!n)return Iu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vi(t){return t=t.childContextTypes,t!=null}function kw(){Hn(yi),Hn(Os)}function jL(t,e,n){if(Os.current!==Iu)throw Error(Oe(168));Mn(Os,e),Mn(yi,n)}function Eq(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,Bse(t)||"Unknown",i));return sr({},n,r)}function Rw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Iu,fh=Os.current,Mn(Os,t),Mn(yi,yi.current),!0}function _L(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=Eq(t,e,fh),r.__reactInternalMemoizedMergedChildContext=t,Hn(yi),Hn(Os),Mn(Os,t)):Hn(yi),Mn(yi,n)}var yl=null,iN=!1,J1=!1;function Aq(t){yl===null?yl=[t]:yl.push(t)}function sae(t){iN=!0,Aq(t)}function Qu(){if(!J1&&yl!==null){J1=!0;var t=0,e=_n;try{var n=yl;for(_n=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yl=null,iN=!1}catch(i){throw yl!==null&&(yl=yl.slice(t+1)),Zz(fk,Qu),i}finally{_n=e,J1=!1}}return null}var $f=[],Ff=0,Ow=null,Dw=0,ea=[],ta=0,mh=null,wl=1,jl="";function Ad(t,e){$f[Ff++]=Dw,$f[Ff++]=Ow,Ow=t,Dw=e}function Tq(t,e,n){ea[ta++]=wl,ea[ta++]=jl,ea[ta++]=mh,mh=t;var r=wl;t=jl;var i=32-no(r)-1;r&=~(1<<i),n+=1;var a=32-no(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wl=1<<32-no(e)+i|n<<i|r,jl=a+t}else wl=1<<a|n<<i|r,jl=t}function jk(t){t.return!==null&&(Ad(t,1),Tq(t,1,0))}function _k(t){for(;t===Ow;)Ow=$f[--Ff],$f[Ff]=null,Dw=$f[--Ff],$f[Ff]=null;for(;t===mh;)mh=ea[--ta],ea[ta]=null,jl=ea[--ta],ea[ta]=null,wl=ea[--ta],ea[ta]=null}var Fi=null,Di=null,Qn=!1,Ua=null;function Cq(t,e){var n=sa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fi=t,Di=pu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fi=t,Di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mh!==null?{id:wl,overflow:jl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fi=t,Di=null,!0):!1;default:return!1}}function vT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xT(t){if(Qn){var e=Di;if(e){var n=e;if(!NL(t,e)){if(vT(t))throw Error(Oe(418));e=pu(n.nextSibling);var r=Fi;e&&NL(t,e)?Cq(r,n):(t.flags=t.flags&-4097|2,Qn=!1,Fi=t)}}else{if(vT(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,Qn=!1,Fi=t}}}function SL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fi=t}function Zb(t){if(t!==Fi)return!1;if(!Qn)return SL(t),Qn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mT(t.type,t.memoizedProps)),e&&(e=Di)){if(vT(t))throw Pq(),Error(Oe(418));for(;e;)Cq(t,e),e=pu(e.nextSibling)}if(SL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Di=pu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Di=null}}else Di=Fi?pu(t.stateNode.nextSibling):null;return!0}function Pq(){for(var t=Di;t;)t=pu(t.nextSibling)}function Lm(){Di=Fi=null,Qn=!1}function Nk(t){Ua===null?Ua=[t]:Ua.push(t)}var iae=sc.ReactCurrentBatchConfig;function $g(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function Jb(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EL(t){var e=t._init;return e(t._payload)}function Iq(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=xu(b,x),b.index=0,b.sibling=null,b}function a(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,C){return x===null||x.tag!==6?(x=aE(w,b.mode,C),x.return=b,x):(x=i(x,w),x.return=b,x)}function c(b,x,w,C){var S=w.type;return S===kf?d(b,x,w.props.children,C,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Oc&&EL(S)===x.type)?(C=i(x,w.props),C.ref=$g(b,x,w),C.return=b,C):(C=Z0(w.type,w.key,w.props,null,b.mode,C),C.ref=$g(b,x,w),C.return=b,C)}function u(b,x,w,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=oE(w,b.mode,C),x.return=b,x):(x=i(x,w.children||[]),x.return=b,x)}function d(b,x,w,C,S){return x===null||x.tag!==7?(x=ih(w,b.mode,C,S),x.return=b,x):(x=i(x,w),x.return=b,x)}function h(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=aE(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ub:return w=Z0(x.type,x.key,x.props,null,b.mode,w),w.ref=$g(b,null,x),w.return=b,w;case If:return x=oE(x,b.mode,w),x.return=b,x;case Oc:var C=x._init;return h(b,C(x._payload),w)}if(uy(x)||Rg(x))return x=ih(x,b.mode,w,null),x.return=b,x;Jb(b,x)}return null}function f(b,x,w,C){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(b,x,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ub:return w.key===S?c(b,x,w,C):null;case If:return w.key===S?u(b,x,w,C):null;case Oc:return S=w._init,f(b,x,S(w._payload),C)}if(uy(w)||Rg(w))return S!==null?null:d(b,x,w,C,null);Jb(b,w)}return null}function m(b,x,w,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,l(x,b,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ub:return b=b.get(C.key===null?w:C.key)||null,c(x,b,C,S);case If:return b=b.get(C.key===null?w:C.key)||null,u(x,b,C,S);case Oc:var P=C._init;return m(b,x,w,P(C._payload),S)}if(uy(C)||Rg(C))return b=b.get(w)||null,d(x,b,C,S,null);Jb(x,C)}return null}function v(b,x,w,C){for(var S=null,P=null,_=x,g=x=0,T=null;_!==null&&g<w.length;g++){_.index>g?(T=_,_=null):T=_.sibling;var E=f(b,_,w[g],C);if(E===null){_===null&&(_=T);break}t&&_&&E.alternate===null&&e(b,_),x=a(E,x,g),P===null?S=E:P.sibling=E,P=E,_=T}if(g===w.length)return n(b,_),Qn&&Ad(b,g),S;if(_===null){for(;g<w.length;g++)_=h(b,w[g],C),_!==null&&(x=a(_,x,g),P===null?S=_:P.sibling=_,P=_);return Qn&&Ad(b,g),S}for(_=r(b,_);g<w.length;g++)T=m(_,b,g,w[g],C),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?g:T.key),x=a(T,x,g),P===null?S=T:P.sibling=T,P=T);return t&&_.forEach(function(A){return e(b,A)}),Qn&&Ad(b,g),S}function p(b,x,w,C){var S=Rg(w);if(typeof S!="function")throw Error(Oe(150));if(w=S.call(w),w==null)throw Error(Oe(151));for(var P=S=null,_=x,g=x=0,T=null,E=w.next();_!==null&&!E.done;g++,E=w.next()){_.index>g?(T=_,_=null):T=_.sibling;var A=f(b,_,E.value,C);if(A===null){_===null&&(_=T);break}t&&_&&A.alternate===null&&e(b,_),x=a(A,x,g),P===null?S=A:P.sibling=A,P=A,_=T}if(E.done)return n(b,_),Qn&&Ad(b,g),S;if(_===null){for(;!E.done;g++,E=w.next())E=h(b,E.value,C),E!==null&&(x=a(E,x,g),P===null?S=E:P.sibling=E,P=E);return Qn&&Ad(b,g),S}for(_=r(b,_);!E.done;g++,E=w.next())E=m(_,b,g,E.value,C),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?g:E.key),x=a(E,x,g),P===null?S=E:P.sibling=E,P=E);return t&&_.forEach(function(I){return e(b,I)}),Qn&&Ad(b,g),S}function y(b,x,w,C){if(typeof w=="object"&&w!==null&&w.type===kf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ub:e:{for(var S=w.key,P=x;P!==null;){if(P.key===S){if(S=w.type,S===kf){if(P.tag===7){n(b,P.sibling),x=i(P,w.props.children),x.return=b,b=x;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Oc&&EL(S)===P.type){n(b,P.sibling),x=i(P,w.props),x.ref=$g(b,P,w),x.return=b,b=x;break e}n(b,P);break}else e(b,P);P=P.sibling}w.type===kf?(x=ih(w.props.children,b.mode,C,w.key),x.return=b,b=x):(C=Z0(w.type,w.key,w.props,null,b.mode,C),C.ref=$g(b,x,w),C.return=b,b=C)}return o(b);case If:e:{for(P=w.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=i(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=oE(w,b.mode,C),x.return=b,b=x}return o(b);case Oc:return P=w._init,y(b,x,P(w._payload),C)}if(uy(w))return v(b,x,w,C);if(Rg(w))return p(b,x,w,C);Jb(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,w),x.return=b,b=x):(n(b,x),x=aE(w,b.mode,C),x.return=b,b=x),o(b)):n(b,x)}return y}var $m=Iq(!0),kq=Iq(!1),Mw=Yu(null),Lw=null,Vf=null,Sk=null;function Ek(){Sk=Vf=Lw=null}function Ak(t){var e=Mw.current;Hn(Mw),t._currentValue=e}function bT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sm(t,e){Lw=t,Sk=Vf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mi=!0),t.firstContext=null)}function pa(t){var e=t._currentValue;if(Sk!==t)if(t={context:t,memoizedValue:e,next:null},Vf===null){if(Lw===null)throw Error(Oe(308));Vf=t,Lw.dependencies={lanes:0,firstContext:t}}else Vf=Vf.next=t;return e}var Ld=null;function Tk(t){Ld===null?Ld=[t]:Ld.push(t)}function Rq(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tk(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fl(t,r)}function Fl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dc=!1;function Ck(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fl(t,n)}return i=r.interleaved,i===null?(e.next=e,Tk(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fl(t,n)}function H0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mk(t,n)}}function AL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $w(t,e,n,r){var i=t.updateQueue;Dc=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,p=l;switch(f=e,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=sr({},h,f);break e;case 2:Dc=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);gh|=o,t.lanes=o,t.memoizedState=h}}function TL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var $x={},$o=Yu($x),hv=Yu($x),fv=Yu($x);function $d(t){if(t===$x)throw Error(Oe(174));return t}function Pk(t,e){switch(Mn(fv,e),Mn(hv,t),Mn($o,$x),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eT(e,t)}Hn($o),Mn($o,e)}function Fm(){Hn($o),Hn(hv),Hn(fv)}function Dq(t){$d(fv.current);var e=$d($o.current),n=eT(e,t.type);e!==n&&(Mn(hv,t),Mn($o,n))}function Ik(t){hv.current===t&&(Hn($o),Hn(hv))}var tr=Yu(0);function Fw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eE=[];function kk(){for(var t=0;t<eE.length;t++)eE[t]._workInProgressVersionPrimary=null;eE.length=0}var K0=sc.ReactCurrentDispatcher,tE=sc.ReactCurrentBatchConfig,ph=0,rr=null,$r=null,Xr=null,Vw=!1,Iy=!1,mv=0,aae=0;function vs(){throw Error(Oe(321))}function Rk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oo(t[n],e[n]))return!1;return!0}function Ok(t,e,n,r,i,a){if(ph=a,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,K0.current=t===null||t.memoizedState===null?uae:dae,t=n(r,i),Iy){a=0;do{if(Iy=!1,mv=0,25<=a)throw Error(Oe(301));a+=1,Xr=$r=null,e.updateQueue=null,K0.current=hae,t=n(r,i)}while(Iy)}if(K0.current=Bw,e=$r!==null&&$r.next!==null,ph=0,Xr=$r=rr=null,Vw=!1,e)throw Error(Oe(300));return t}function Dk(){var t=mv!==0;return mv=0,t}function jo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?rr.memoizedState=Xr=t:Xr=Xr.next=t,Xr}function ga(){if($r===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=$r.next;var e=Xr===null?rr.memoizedState:Xr.next;if(e!==null)Xr=e,$r=t;else{if(t===null)throw Error(Oe(310));$r=t,t={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Xr===null?rr.memoizedState=Xr=t:Xr=Xr.next=t}return Xr}function pv(t,e){return typeof e=="function"?e(t):e}function nE(t){var e=ga(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=$r,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ph&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,rr.lanes|=d,gh|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,oo(r,e.memoizedState)||(mi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,rr.lanes|=a,gh|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rE(t){var e=ga(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);oo(a,e.memoizedState)||(mi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Mq(){}function Lq(t,e){var n=rr,r=ga(),i=e(),a=!oo(r.memoizedState,i);if(a&&(r.memoizedState=i,mi=!0),r=r.queue,Mk(Vq.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Xr!==null&&Xr.memoizedState.tag&1){if(n.flags|=2048,gv(9,Fq.bind(null,n,r,i,e),void 0,null),Jr===null)throw Error(Oe(349));ph&30||$q(n,e,i)}return i}function $q(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fq(t,e,n,r){e.value=n,e.getSnapshot=r,Bq(e)&&Uq(t)}function Vq(t,e,n){return n(function(){Bq(e)&&Uq(t)})}function Bq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oo(t,n)}catch{return!0}}function Uq(t){var e=Fl(t,1);e!==null&&ro(e,t,1,-1)}function CL(t){var e=jo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:t},e.queue=t,t=t.dispatch=cae.bind(null,rr,t),[e.memoizedState,t]}function gv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zq(){return ga().memoizedState}function G0(t,e,n,r){var i=jo();rr.flags|=t,i.memoizedState=gv(1|e,n,void 0,r===void 0?null:r)}function aN(t,e,n,r){var i=ga();r=r===void 0?null:r;var a=void 0;if($r!==null){var o=$r.memoizedState;if(a=o.destroy,r!==null&&Rk(r,o.deps)){i.memoizedState=gv(e,n,a,r);return}}rr.flags|=t,i.memoizedState=gv(1|e,n,a,r)}function PL(t,e){return G0(8390656,8,t,e)}function Mk(t,e){return aN(2048,8,t,e)}function qq(t,e){return aN(4,2,t,e)}function Wq(t,e){return aN(4,4,t,e)}function Hq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kq(t,e,n){return n=n!=null?n.concat([t]):null,aN(4,4,Hq.bind(null,e,t),n)}function Lk(){}function Gq(t,e){var n=ga();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yq(t,e){var n=ga();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qq(t,e,n){return ph&21?(oo(n,e)||(n=tq(),rr.lanes|=n,gh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mi=!0),t.memoizedState=n)}function oae(t,e){var n=_n;_n=n!==0&&4>n?n:4,t(!0);var r=tE.transition;tE.transition={};try{t(!1),e()}finally{_n=n,tE.transition=r}}function Xq(){return ga().memoizedState}function lae(t,e,n){var r=vu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zq(t))Jq(e,n);else if(n=Rq(t,e,n,r),n!==null){var i=Qs();ro(n,t,r,i),e9(n,e,r)}}function cae(t,e,n){var r=vu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zq(t))Jq(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,oo(l,o)){var c=e.interleaved;c===null?(i.next=i,Tk(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Rq(t,e,i,r),n!==null&&(i=Qs(),ro(n,t,r,i),e9(n,e,r))}}function Zq(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function Jq(t,e){Iy=Vw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mk(t,n)}}var Bw={readContext:pa,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},uae={readContext:pa,useCallback:function(t,e){return jo().memoizedState=[t,e===void 0?null:e],t},useContext:pa,useEffect:PL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,G0(4194308,4,Hq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return G0(4194308,4,t,e)},useInsertionEffect:function(t,e){return G0(4,2,t,e)},useMemo:function(t,e){var n=jo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lae.bind(null,rr,t),[r.memoizedState,t]},useRef:function(t){var e=jo();return t={current:t},e.memoizedState=t},useState:CL,useDebugValue:Lk,useDeferredValue:function(t){return jo().memoizedState=t},useTransition:function(){var t=CL(!1),e=t[0];return t=oae.bind(null,t[1]),jo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rr,i=jo();if(Qn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),Jr===null)throw Error(Oe(349));ph&30||$q(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,PL(Vq.bind(null,r,a,t),[t]),r.flags|=2048,gv(9,Fq.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=jo(),e=Jr.identifierPrefix;if(Qn){var n=jl,r=wl;n=(r&~(1<<32-no(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=mv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dae={readContext:pa,useCallback:Gq,useContext:pa,useEffect:Mk,useImperativeHandle:Kq,useInsertionEffect:qq,useLayoutEffect:Wq,useMemo:Yq,useReducer:nE,useRef:zq,useState:function(){return nE(pv)},useDebugValue:Lk,useDeferredValue:function(t){var e=ga();return Qq(e,$r.memoizedState,t)},useTransition:function(){var t=nE(pv)[0],e=ga().memoizedState;return[t,e]},useMutableSource:Mq,useSyncExternalStore:Lq,useId:Xq,unstable_isNewReconciler:!1},hae={readContext:pa,useCallback:Gq,useContext:pa,useEffect:Mk,useImperativeHandle:Kq,useInsertionEffect:qq,useLayoutEffect:Wq,useMemo:Yq,useReducer:rE,useRef:zq,useState:function(){return rE(pv)},useDebugValue:Lk,useDeferredValue:function(t){var e=ga();return $r===null?e.memoizedState=t:Qq(e,$r.memoizedState,t)},useTransition:function(){var t=rE(pv)[0],e=ga().memoizedState;return[t,e]},useMutableSource:Mq,useSyncExternalStore:Lq,useId:Xq,unstable_isNewReconciler:!1};function Ma(t,e){if(t&&t.defaultProps){e=sr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:sr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oN={isMounted:function(t){return(t=t._reactInternals)?Wh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qs(),i=vu(t),a=Cl(r,i);a.payload=e,n!=null&&(a.callback=n),e=gu(t,a,i),e!==null&&(ro(e,t,i,r),H0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qs(),i=vu(t),a=Cl(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=gu(t,a,i),e!==null&&(ro(e,t,i,r),H0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qs(),r=vu(t),i=Cl(n,r);i.tag=2,e!=null&&(i.callback=e),e=gu(t,i,r),e!==null&&(ro(e,t,r,n),H0(e,t,r))}};function IL(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!lv(n,r)||!lv(i,a):!0}function t9(t,e,n){var r=!1,i=Iu,a=e.contextType;return typeof a=="object"&&a!==null?a=pa(a):(i=vi(e)?fh:Os.current,r=e.contextTypes,a=(r=r!=null)?Mm(t,i):Iu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function kL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oN.enqueueReplaceState(e,e.state,null)}function jT(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ck(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=pa(a):(a=vi(e)?fh:Os.current,i.context=Mm(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(wT(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oN.enqueueReplaceState(i,i.state,null),$w(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vm(t,e){try{var n="",r=e;do n+=Vse(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function sE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _T(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fae=typeof WeakMap=="function"?WeakMap:Map;function n9(t,e,n){n=Cl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zw||(zw=!0,RT=r),_T(t,e)},n}function r9(t,e,n){n=Cl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_T(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){_T(t,e),typeof r!="function"&&(yu===null?yu=new Set([this]):yu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function RL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fae;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Aae.bind(null,t,e,n),e.then(t,t))}function OL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DL(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cl(-1,1),e.tag=2,gu(n,e,1))),n.lanes|=1),t)}var mae=sc.ReactCurrentOwner,mi=!1;function Us(t,e,n,r){e.child=t===null?kq(e,null,n,r):$m(e,t.child,n,r)}function ML(t,e,n,r,i){n=n.render;var a=e.ref;return sm(e,i),r=Ok(t,e,n,r,a,i),n=Dk(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vl(t,e,i)):(Qn&&n&&jk(e),e.flags|=1,Us(t,e,r,i),e.child)}function LL(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Wk(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,s9(t,e,a,r,i)):(t=Z0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:lv,n(o,r)&&t.ref===e.ref)return Vl(t,e,i)}return e.flags|=1,t=xu(a,r),t.ref=e.ref,t.return=e,e.child=t}function s9(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(lv(a,r)&&t.ref===e.ref)if(mi=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(mi=!0);else return e.lanes=t.lanes,Vl(t,e,i)}return NT(t,e,n,r,i)}function i9(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Uf,Ci),Ci|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mn(Uf,Ci),Ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Mn(Uf,Ci),Ci|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Mn(Uf,Ci),Ci|=r;return Us(t,e,i,n),e.child}function a9(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function NT(t,e,n,r,i){var a=vi(n)?fh:Os.current;return a=Mm(e,a),sm(e,i),n=Ok(t,e,n,r,a,i),r=Dk(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vl(t,e,i)):(Qn&&r&&jk(e),e.flags|=1,Us(t,e,n,i),e.child)}function $L(t,e,n,r,i){if(vi(n)){var a=!0;Rw(e)}else a=!1;if(sm(e,i),e.stateNode===null)Y0(t,e),t9(e,n,r),jT(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pa(u):(u=vi(n)?fh:Os.current,u=Mm(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&kL(e,o,r,u),Dc=!1;var f=e.memoizedState;o.state=f,$w(e,r,o,i),c=e.memoizedState,l!==r||f!==c||yi.current||Dc?(typeof d=="function"&&(wT(e,n,d,r),c=e.memoizedState),(l=Dc||IL(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Oq(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ma(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pa(c):(c=vi(n)?fh:Os.current,c=Mm(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&kL(e,o,r,c),Dc=!1,f=e.memoizedState,o.state=f,$w(e,r,o,i);var v=e.memoizedState;l!==h||f!==v||yi.current||Dc?(typeof m=="function"&&(wT(e,n,m,r),v=e.memoizedState),(u=Dc||IL(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ST(t,e,n,r,a,i)}function ST(t,e,n,r,i,a){a9(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_L(e,n,!1),Vl(t,e,a);r=e.stateNode,mae.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$m(e,t.child,null,a),e.child=$m(e,null,l,a)):Us(t,e,l,a),e.memoizedState=r.state,i&&_L(e,n,!0),e.child}function o9(t){var e=t.stateNode;e.pendingContext?jL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jL(t,e.context,!1),Pk(t,e.containerInfo)}function FL(t,e,n,r,i){return Lm(),Nk(i),e.flags|=256,Us(t,e,n,r),e.child}var ET={dehydrated:null,treeContext:null,retryLane:0};function AT(t){return{baseLanes:t,cachePool:null,transitions:null}}function l9(t,e,n){var r=e.pendingProps,i=tr.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Mn(tr,i&1),t===null)return xT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=uN(o,r,0,null),t=ih(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=AT(n),e.memoizedState=ET,t):$k(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pae(t,e,o,r,l,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=xu(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=xu(l,a):(a=ih(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?AT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=ET,r}return a=t.child,t=a.sibling,r=xu(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $k(t,e){return e=uN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function e0(t,e,n,r){return r!==null&&Nk(r),$m(e,t.child,null,n),t=$k(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pae(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=sE(Error(Oe(422))),e0(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=uN({mode:"visible",children:r.children},i,0,null),a=ih(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&$m(e,t.child,null,o),e.child.memoizedState=AT(o),e.memoizedState=ET,a);if(!(e.mode&1))return e0(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Oe(419)),r=sE(a,r,void 0),e0(t,e,o,r)}if(l=(o&t.childLanes)!==0,mi||l){if(r=Jr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fl(t,i),ro(r,t,i,-1))}return qk(),r=sE(Error(Oe(421))),e0(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Tae.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Di=pu(i.nextSibling),Fi=e,Qn=!0,Ua=null,t!==null&&(ea[ta++]=wl,ea[ta++]=jl,ea[ta++]=mh,wl=t.id,jl=t.overflow,mh=e),e=$k(e,r.children),e.flags|=4096,e)}function VL(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bT(t.return,e,n)}function iE(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function c9(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Us(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VL(t,n,e);else if(t.tag===19)VL(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mn(tr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fw(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),iE(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fw(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}iE(e,!0,n,null,a);break;case"together":iE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Y0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=xu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gae(t,e,n){switch(e.tag){case 3:o9(e),Lm();break;case 5:Dq(e);break;case 1:vi(e.type)&&Rw(e);break;case 4:Pk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Mn(Mw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Mn(tr,tr.current&1),e.flags|=128,null):n&e.child.childLanes?l9(t,e,n):(Mn(tr,tr.current&1),t=Vl(t,e,n),t!==null?t.sibling:null);Mn(tr,tr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c9(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,i9(t,e,n)}return Vl(t,e,n)}var u9,TT,d9,h9;u9=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};TT=function(){};d9=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$d($o.current);var a=null;switch(n){case"input":i=QA(t,i),r=QA(t,r),a=[];break;case"select":i=sr({},i,{value:void 0}),r=sr({},r,{value:void 0}),a=[];break;case"textarea":i=JA(t,i),r=JA(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Iw)}tT(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tv.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tv.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Un("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};h9=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fg(t,e){if(!Qn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yae(t,e,n){var r=e.pendingProps;switch(_k(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(e),null;case 1:return vi(e.type)&&kw(),xs(e),null;case 3:return r=e.stateNode,Fm(),Hn(yi),Hn(Os),kk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ua!==null&&(MT(Ua),Ua=null))),TT(t,e),xs(e),null;case 5:Ik(e);var i=$d(fv.current);if(n=e.type,t!==null&&e.stateNode!=null)d9(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return xs(e),null}if(t=$d($o.current),Zb(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Co]=e,r[dv]=a,t=(e.mode&1)!==0,n){case"dialog":Un("cancel",r),Un("close",r);break;case"iframe":case"object":case"embed":Un("load",r);break;case"video":case"audio":for(i=0;i<hy.length;i++)Un(hy[i],r);break;case"source":Un("error",r);break;case"img":case"image":case"link":Un("error",r),Un("load",r);break;case"details":Un("toggle",r);break;case"input":YM(r,a),Un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Un("invalid",r);break;case"textarea":XM(r,a),Un("invalid",r)}tT(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xb(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xb(r.textContent,l,t),i=["children",""+l]):tv.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Un("scroll",r)}switch(n){case"input":zb(r),QM(r,a,!0);break;case"textarea":zb(r),ZM(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Iw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Co]=e,t[dv]=r,u9(t,e,!1,!1),e.stateNode=t;e:{switch(o=nT(n,r),n){case"dialog":Un("cancel",t),Un("close",t),i=r;break;case"iframe":case"object":case"embed":Un("load",t),i=r;break;case"video":case"audio":for(i=0;i<hy.length;i++)Un(hy[i],t);i=r;break;case"source":Un("error",t),i=r;break;case"img":case"image":case"link":Un("error",t),Un("load",t),i=r;break;case"details":Un("toggle",t),i=r;break;case"input":YM(t,r),i=QA(t,r),Un("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=sr({},r,{value:void 0}),Un("invalid",t);break;case"textarea":XM(t,r),i=JA(t,r),Un("invalid",t);break;default:i=r}tT(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?zz(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bz(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&nv(t,c):typeof c=="number"&&nv(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(tv.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Un("scroll",t):c!=null&&lk(t,a,c,o))}switch(n){case"input":zb(t),QM(t,r,!1);break;case"textarea":zb(t),ZM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pu(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?em(t,!!r.multiple,a,!1):r.defaultValue!=null&&em(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Iw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xs(e),null;case 6:if(t&&e.stateNode!=null)h9(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=$d(fv.current),$d($o.current),Zb(e)){if(r=e.stateNode,n=e.memoizedProps,r[Co]=e,(a=r.nodeValue!==n)&&(t=Fi,t!==null))switch(t.tag){case 3:Xb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xb(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Co]=e,e.stateNode=r}return xs(e),null;case 13:if(Hn(tr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qn&&Di!==null&&e.mode&1&&!(e.flags&128))Pq(),Lm(),e.flags|=98560,a=!1;else if(a=Zb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Oe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Oe(317));a[Co]=e}else Lm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xs(e),a=!1}else Ua!==null&&(MT(Ua),Ua=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?Br===0&&(Br=3):qk())),e.updateQueue!==null&&(e.flags|=4),xs(e),null);case 4:return Fm(),TT(t,e),t===null&&cv(e.stateNode.containerInfo),xs(e),null;case 10:return Ak(e.type._context),xs(e),null;case 17:return vi(e.type)&&kw(),xs(e),null;case 19:if(Hn(tr),a=e.memoizedState,a===null)return xs(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Fg(a,!1);else{if(Br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fw(t),o!==null){for(e.flags|=128,Fg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mn(tr,tr.current&1|2),e.child}t=t.sibling}a.tail!==null&&xr()>Bm&&(e.flags|=128,r=!0,Fg(a,!1),e.lanes=4194304)}else{if(!r)if(t=Fw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Qn)return xs(e),null}else 2*xr()-a.renderingStartTime>Bm&&n!==1073741824&&(e.flags|=128,r=!0,Fg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=xr(),e.sibling=null,n=tr.current,Mn(tr,r?n&1|2:n&1),e):(xs(e),null);case 22:case 23:return zk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(xs(e),e.subtreeFlags&6&&(e.flags|=8192)):xs(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function vae(t,e){switch(_k(e),e.tag){case 1:return vi(e.type)&&kw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fm(),Hn(yi),Hn(Os),kk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ik(e),null;case 13:if(Hn(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));Lm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Hn(tr),null;case 4:return Fm(),null;case 10:return Ak(e.type._context),null;case 22:case 23:return zk(),null;case 24:return null;default:return null}}var t0=!1,Es=!1,xae=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Bf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cr(t,e,r)}else n.current=null}function CT(t,e,n){try{n()}catch(r){cr(t,e,r)}}var BL=!1;function bae(t,e){if(hT=Tw,t=yq(),wk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fT={focusedElem:t,selectionRange:n},Tw=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,y=v.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ma(e.type,p),y);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(C){cr(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return v=BL,BL=!1,v}function ky(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&CT(e,n,a)}i=i.next}while(i!==r)}}function lN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function PT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f9(t){var e=t.alternate;e!==null&&(t.alternate=null,f9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Co],delete e[dv],delete e[gT],delete e[nae],delete e[rae])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function m9(t){return t.tag===5||t.tag===3||t.tag===4}function UL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function IT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Iw));else if(r!==4&&(t=t.child,t!==null))for(IT(t,e,n),t=t.sibling;t!==null;)IT(t,e,n),t=t.sibling}function kT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kT(t,e,n),t=t.sibling;t!==null;)kT(t,e,n),t=t.sibling}var os=null,Fa=!1;function bc(t,e,n){for(n=n.child;n!==null;)p9(t,e,n),n=n.sibling}function p9(t,e,n){if(Lo&&typeof Lo.onCommitFiberUnmount=="function")try{Lo.onCommitFiberUnmount(eN,n)}catch{}switch(n.tag){case 5:Es||Bf(n,e);case 6:var r=os,i=Fa;os=null,bc(t,e,n),os=r,Fa=i,os!==null&&(Fa?(t=os,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):os.removeChild(n.stateNode));break;case 18:os!==null&&(Fa?(t=os,n=n.stateNode,t.nodeType===8?Z1(t.parentNode,n):t.nodeType===1&&Z1(t,n),av(t)):Z1(os,n.stateNode));break;case 4:r=os,i=Fa,os=n.stateNode.containerInfo,Fa=!0,bc(t,e,n),os=r,Fa=i;break;case 0:case 11:case 14:case 15:if(!Es&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&CT(n,e,o),i=i.next}while(i!==r)}bc(t,e,n);break;case 1:if(!Es&&(Bf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){cr(n,e,l)}bc(t,e,n);break;case 21:bc(t,e,n);break;case 22:n.mode&1?(Es=(r=Es)||n.memoizedState!==null,bc(t,e,n),Es=r):bc(t,e,n);break;default:bc(t,e,n)}}function zL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xae),e.forEach(function(r){var i=Cae.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ca(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:os=l.stateNode,Fa=!1;break e;case 3:os=l.stateNode.containerInfo,Fa=!0;break e;case 4:os=l.stateNode.containerInfo,Fa=!0;break e}l=l.return}if(os===null)throw Error(Oe(160));p9(a,o,i),os=null,Fa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){cr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g9(e,t),e=e.sibling}function g9(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ca(e,t),wo(t),r&4){try{ky(3,t,t.return),lN(3,t)}catch(p){cr(t,t.return,p)}try{ky(5,t,t.return)}catch(p){cr(t,t.return,p)}}break;case 1:Ca(e,t),wo(t),r&512&&n!==null&&Bf(n,n.return);break;case 5:if(Ca(e,t),wo(t),r&512&&n!==null&&Bf(n,n.return),t.flags&32){var i=t.stateNode;try{nv(i,"")}catch(p){cr(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&$z(i,a),nT(l,o);var u=nT(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?zz(i,h):d==="dangerouslySetInnerHTML"?Bz(i,h):d==="children"?nv(i,h):lk(i,d,h,u)}switch(l){case"input":XA(i,a);break;case"textarea":Fz(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?em(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?em(i,!!a.multiple,a.defaultValue,!0):em(i,!!a.multiple,a.multiple?[]:"",!1))}i[dv]=a}catch(p){cr(t,t.return,p)}}break;case 6:if(Ca(e,t),wo(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(p){cr(t,t.return,p)}}break;case 3:if(Ca(e,t),wo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{av(e.containerInfo)}catch(p){cr(t,t.return,p)}break;case 4:Ca(e,t),wo(t);break;case 13:Ca(e,t),wo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Bk=xr())),r&4&&zL(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Es=(u=Es)||d,Ca(e,t),Es=u):Ca(e,t),wo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(tt=t,d=t.child;d!==null;){for(h=tt=d;tt!==null;){switch(f=tt,m=f.child,f.tag){case 0:case 11:case 14:case 15:ky(4,f,f.return);break;case 1:Bf(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(p){cr(r,n,p)}}break;case 5:Bf(f,f.return);break;case 22:if(f.memoizedState!==null){WL(h);continue}}m!==null?(m.return=f,tt=m):WL(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Uz("display",o))}catch(p){cr(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){cr(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ca(e,t),wo(t),r&4&&zL(t);break;case 21:break;default:Ca(e,t),wo(t)}}function wo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(m9(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nv(i,""),r.flags&=-33);var a=UL(t);kT(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=UL(t);IT(t,l,o);break;default:throw Error(Oe(161))}}catch(c){cr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wae(t,e,n){tt=t,y9(t)}function y9(t,e,n){for(var r=(t.mode&1)!==0;tt!==null;){var i=tt,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||t0;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Es;l=t0;var u=Es;if(t0=o,(Es=c)&&!u)for(tt=i;tt!==null;)o=tt,c=o.child,o.tag===22&&o.memoizedState!==null?HL(i):c!==null?(c.return=o,tt=c):HL(i);for(;a!==null;)tt=a,y9(a),a=a.sibling;tt=i,t0=l,Es=u}qL(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,tt=a):qL(t)}}function qL(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Es||lN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Es)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ma(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&TL(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TL(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&av(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Es||e.flags&512&&PT(e)}catch(f){cr(e,e.return,f)}}if(e===t){tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}}function WL(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,tt=n;break}tt=e.return}}function HL(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lN(4,e)}catch(c){cr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){cr(e,i,c)}}var a=e.return;try{PT(e)}catch(c){cr(e,a,c)}break;case 5:var o=e.return;try{PT(e)}catch(c){cr(e,o,c)}}}catch(c){cr(e,e.return,c)}if(e===t){tt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,tt=l;break}tt=e.return}}var jae=Math.ceil,Uw=sc.ReactCurrentDispatcher,Fk=sc.ReactCurrentOwner,oa=sc.ReactCurrentBatchConfig,cn=0,Jr=null,Tr=null,hs=0,Ci=0,Uf=Yu(0),Br=0,yv=null,gh=0,cN=0,Vk=0,Ry=null,ci=null,Bk=0,Bm=1/0,pl=null,zw=!1,RT=null,yu=null,n0=!1,su=null,qw=0,Oy=0,OT=null,Q0=-1,X0=0;function Qs(){return cn&6?xr():Q0!==-1?Q0:Q0=xr()}function vu(t){return t.mode&1?cn&2&&hs!==0?hs&-hs:iae.transition!==null?(X0===0&&(X0=tq()),X0):(t=_n,t!==0||(t=window.event,t=t===void 0?16:lq(t.type)),t):1}function ro(t,e,n,r){if(50<Oy)throw Oy=0,OT=null,Error(Oe(185));Dx(t,n,r),(!(cn&2)||t!==Jr)&&(t===Jr&&(!(cn&2)&&(cN|=n),Br===4&&Vc(t,hs)),xi(t,r),n===1&&cn===0&&!(e.mode&1)&&(Bm=xr()+500,iN&&Qu()))}function xi(t,e){var n=t.callbackNode;iie(t,e);var r=Aw(t,t===Jr?hs:0);if(r===0)n!==null&&tL(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tL(n),e===1)t.tag===0?sae(KL.bind(null,t)):Aq(KL.bind(null,t)),eae(function(){!(cn&6)&&Qu()}),n=null;else{switch(nq(r)){case 1:n=fk;break;case 4:n=Jz;break;case 16:n=Ew;break;case 536870912:n=eq;break;default:n=Ew}n=S9(n,v9.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function v9(t,e){if(Q0=-1,X0=0,cn&6)throw Error(Oe(327));var n=t.callbackNode;if(im()&&t.callbackNode!==n)return null;var r=Aw(t,t===Jr?hs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ww(t,r);else{e=r;var i=cn;cn|=2;var a=b9();(Jr!==t||hs!==e)&&(pl=null,Bm=xr()+500,sh(t,e));do try{Sae();break}catch(l){x9(t,l)}while(!0);Ek(),Uw.current=a,cn=i,Tr!==null?e=0:(Jr=null,hs=0,e=Br)}if(e!==0){if(e===2&&(i=oT(t),i!==0&&(r=i,e=DT(t,i))),e===1)throw n=yv,sh(t,0),Vc(t,r),xi(t,xr()),n;if(e===6)Vc(t,r);else{if(i=t.current.alternate,!(r&30)&&!_ae(i)&&(e=Ww(t,r),e===2&&(a=oT(t),a!==0&&(r=a,e=DT(t,a))),e===1))throw n=yv,sh(t,0),Vc(t,r),xi(t,xr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:Td(t,ci,pl);break;case 3:if(Vc(t,r),(r&130023424)===r&&(e=Bk+500-xr(),10<e)){if(Aw(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pT(Td.bind(null,t,ci,pl),e);break}Td(t,ci,pl);break;case 4:if(Vc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-no(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jae(r/1960))-r,10<r){t.timeoutHandle=pT(Td.bind(null,t,ci,pl),r);break}Td(t,ci,pl);break;case 5:Td(t,ci,pl);break;default:throw Error(Oe(329))}}}return xi(t,xr()),t.callbackNode===n?v9.bind(null,t):null}function DT(t,e){var n=Ry;return t.current.memoizedState.isDehydrated&&(sh(t,e).flags|=256),t=Ww(t,e),t!==2&&(e=ci,ci=n,e!==null&&MT(e)),t}function MT(t){ci===null?ci=t:ci.push.apply(ci,t)}function _ae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!oo(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vc(t,e){for(e&=~Vk,e&=~cN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-no(e),r=1<<n;t[n]=-1,e&=~r}}function KL(t){if(cn&6)throw Error(Oe(327));im();var e=Aw(t,0);if(!(e&1))return xi(t,xr()),null;var n=Ww(t,e);if(t.tag!==0&&n===2){var r=oT(t);r!==0&&(e=r,n=DT(t,r))}if(n===1)throw n=yv,sh(t,0),Vc(t,e),xi(t,xr()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Td(t,ci,pl),xi(t,xr()),null}function Uk(t,e){var n=cn;cn|=1;try{return t(e)}finally{cn=n,cn===0&&(Bm=xr()+500,iN&&Qu())}}function yh(t){su!==null&&su.tag===0&&!(cn&6)&&im();var e=cn;cn|=1;var n=oa.transition,r=_n;try{if(oa.transition=null,_n=1,t)return t()}finally{_n=r,oa.transition=n,cn=e,!(cn&6)&&Qu()}}function zk(){Ci=Uf.current,Hn(Uf)}function sh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jie(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(_k(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kw();break;case 3:Fm(),Hn(yi),Hn(Os),kk();break;case 5:Ik(r);break;case 4:Fm();break;case 13:Hn(tr);break;case 19:Hn(tr);break;case 10:Ak(r.type._context);break;case 22:case 23:zk()}n=n.return}if(Jr=t,Tr=t=xu(t.current,null),hs=Ci=e,Br=0,yv=null,Vk=cN=gh=0,ci=Ry=null,Ld!==null){for(e=0;e<Ld.length;e++)if(n=Ld[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Ld=null}return t}function x9(t,e){do{var n=Tr;try{if(Ek(),K0.current=Bw,Vw){for(var r=rr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vw=!1}if(ph=0,Xr=$r=rr=null,Iy=!1,mv=0,Fk.current=null,n===null||n.return===null){Br=1,yv=e,Tr=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=hs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=OL(o);if(m!==null){m.flags&=-257,DL(m,o,l,a,e),m.mode&1&&RL(a,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var p=new Set;p.add(c),e.updateQueue=p}else v.add(c);break e}else{if(!(e&1)){RL(a,u,e),qk();break e}c=Error(Oe(426))}}else if(Qn&&l.mode&1){var y=OL(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),DL(y,o,l,a,e),Nk(Vm(c,l));break e}}a=c=Vm(c,l),Br!==4&&(Br=2),Ry===null?Ry=[a]:Ry.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=n9(a,c,e);AL(a,b);break e;case 1:l=c;var x=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yu===null||!yu.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=r9(a,l,e);AL(a,C);break e}}a=a.return}while(a!==null)}j9(n)}catch(S){e=S,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function b9(){var t=Uw.current;return Uw.current=Bw,t===null?Bw:t}function qk(){(Br===0||Br===3||Br===2)&&(Br=4),Jr===null||!(gh&268435455)&&!(cN&268435455)||Vc(Jr,hs)}function Ww(t,e){var n=cn;cn|=2;var r=b9();(Jr!==t||hs!==e)&&(pl=null,sh(t,e));do try{Nae();break}catch(i){x9(t,i)}while(!0);if(Ek(),cn=n,Uw.current=r,Tr!==null)throw Error(Oe(261));return Jr=null,hs=0,Br}function Nae(){for(;Tr!==null;)w9(Tr)}function Sae(){for(;Tr!==null&&!Qse();)w9(Tr)}function w9(t){var e=N9(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?j9(t):Tr=e,Fk.current=null}function j9(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vae(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Br=6,Tr=null;return}}else if(n=yae(n,e,Ci),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);Br===0&&(Br=5)}function Td(t,e,n){var r=_n,i=oa.transition;try{oa.transition=null,_n=1,Eae(t,e,n,r)}finally{oa.transition=i,_n=r}return null}function Eae(t,e,n,r){do im();while(su!==null);if(cn&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(aie(t,a),t===Jr&&(Tr=Jr=null,hs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||n0||(n0=!0,S9(Ew,function(){return im(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=oa.transition,oa.transition=null;var o=_n;_n=1;var l=cn;cn|=4,Fk.current=null,bae(t,n),g9(n,t),Hie(fT),Tw=!!hT,fT=hT=null,t.current=n,wae(n),Xse(),cn=l,_n=o,oa.transition=a}else t.current=n;if(n0&&(n0=!1,su=t,qw=i),a=t.pendingLanes,a===0&&(yu=null),eie(n.stateNode),xi(t,xr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zw)throw zw=!1,t=RT,RT=null,t;return qw&1&&t.tag!==0&&im(),a=t.pendingLanes,a&1?t===OT?Oy++:(Oy=0,OT=t):Oy=0,Qu(),null}function im(){if(su!==null){var t=nq(qw),e=oa.transition,n=_n;try{if(oa.transition=null,_n=16>t?16:t,su===null)var r=!1;else{if(t=su,su=null,qw=0,cn&6)throw Error(Oe(331));var i=cn;for(cn|=4,tt=t.current;tt!==null;){var a=tt,o=a.child;if(tt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(tt=u;tt!==null;){var d=tt;switch(d.tag){case 0:case 11:case 15:ky(8,d,a)}var h=d.child;if(h!==null)h.return=d,tt=h;else for(;tt!==null;){d=tt;var f=d.sibling,m=d.return;if(f9(d),d===u){tt=null;break}if(f!==null){f.return=m,tt=f;break}tt=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}tt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,tt=o;else e:for(;tt!==null;){if(a=tt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ky(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,tt=b;break e}tt=a.return}}var x=t.current;for(tt=x;tt!==null;){o=tt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,tt=w;else e:for(o=x;tt!==null;){if(l=tt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lN(9,l)}}catch(S){cr(l,l.return,S)}if(l===o){tt=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,tt=C;break e}tt=l.return}}if(cn=i,Qu(),Lo&&typeof Lo.onPostCommitFiberRoot=="function")try{Lo.onPostCommitFiberRoot(eN,t)}catch{}r=!0}return r}finally{_n=n,oa.transition=e}}return!1}function GL(t,e,n){e=Vm(n,e),e=n9(t,e,1),t=gu(t,e,1),e=Qs(),t!==null&&(Dx(t,1,e),xi(t,e))}function cr(t,e,n){if(t.tag===3)GL(t,t,n);else for(;e!==null;){if(e.tag===3){GL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yu===null||!yu.has(r))){t=Vm(n,t),t=r9(e,t,1),e=gu(e,t,1),t=Qs(),e!==null&&(Dx(e,1,t),xi(e,t));break}}e=e.return}}function Aae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qs(),t.pingedLanes|=t.suspendedLanes&n,Jr===t&&(hs&n)===n&&(Br===4||Br===3&&(hs&130023424)===hs&&500>xr()-Bk?sh(t,0):Vk|=n),xi(t,e)}function _9(t,e){e===0&&(t.mode&1?(e=Hb,Hb<<=1,!(Hb&130023424)&&(Hb=4194304)):e=1);var n=Qs();t=Fl(t,e),t!==null&&(Dx(t,e,n),xi(t,n))}function Tae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_9(t,n)}function Cae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),_9(t,n)}var N9;N9=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yi.current)mi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mi=!1,gae(t,e,n);mi=!!(t.flags&131072)}else mi=!1,Qn&&e.flags&1048576&&Tq(e,Dw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Y0(t,e),t=e.pendingProps;var i=Mm(e,Os.current);sm(e,n),i=Ok(null,e,r,t,i,n);var a=Dk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(r)?(a=!0,Rw(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ck(e),i.updater=oN,e.stateNode=i,i._reactInternals=e,jT(e,r,t,n),e=ST(null,e,r,!0,a,n)):(e.tag=0,Qn&&a&&jk(e),Us(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Y0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Iae(r),t=Ma(r,t),i){case 0:e=NT(null,e,r,t,n);break e;case 1:e=$L(null,e,r,t,n);break e;case 11:e=ML(null,e,r,t,n);break e;case 14:e=LL(null,e,r,Ma(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ma(r,i),NT(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ma(r,i),$L(t,e,r,i,n);case 3:e:{if(o9(e),t===null)throw Error(Oe(387));r=e.pendingProps,a=e.memoizedState,i=a.element,Oq(t,e),$w(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Vm(Error(Oe(423)),e),e=FL(t,e,r,n,i);break e}else if(r!==i){i=Vm(Error(Oe(424)),e),e=FL(t,e,r,n,i);break e}else for(Di=pu(e.stateNode.containerInfo.firstChild),Fi=e,Qn=!0,Ua=null,n=kq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lm(),r===i){e=Vl(t,e,n);break e}Us(t,e,r,n)}e=e.child}return e;case 5:return Dq(e),t===null&&xT(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,mT(r,i)?o=null:a!==null&&mT(r,a)&&(e.flags|=32),a9(t,e),Us(t,e,o,n),e.child;case 6:return t===null&&xT(e),null;case 13:return l9(t,e,n);case 4:return Pk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$m(e,null,r,n):Us(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ma(r,i),ML(t,e,r,i,n);case 7:return Us(t,e,e.pendingProps,n),e.child;case 8:return Us(t,e,e.pendingProps.children,n),e.child;case 12:return Us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Mn(Mw,r._currentValue),r._currentValue=o,a!==null)if(oo(a.value,o)){if(a.children===i.children&&!yi.current){e=Vl(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Cl(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),bT(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Oe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bT(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Us(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sm(e,n),i=pa(i),r=r(i),e.flags|=1,Us(t,e,r,n),e.child;case 14:return r=e.type,i=Ma(r,e.pendingProps),i=Ma(r.type,i),LL(t,e,r,i,n);case 15:return s9(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ma(r,i),Y0(t,e),e.tag=1,vi(r)?(t=!0,Rw(e)):t=!1,sm(e,n),t9(e,r,i),jT(e,r,i,n),ST(null,e,r,!0,t,n);case 19:return c9(t,e,n);case 22:return i9(t,e,n)}throw Error(Oe(156,e.tag))};function S9(t,e){return Zz(t,e)}function Pae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(t,e,n,r){return new Pae(t,e,n,r)}function Wk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Iae(t){if(typeof t=="function")return Wk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uk)return 11;if(t===dk)return 14}return 2}function xu(t,e){var n=t.alternate;return n===null?(n=sa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Z0(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")Wk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kf:return ih(n.children,i,a,e);case ck:o=8,i|=8;break;case HA:return t=sa(12,n,e,i|2),t.elementType=HA,t.lanes=a,t;case KA:return t=sa(13,n,e,i),t.elementType=KA,t.lanes=a,t;case GA:return t=sa(19,n,e,i),t.elementType=GA,t.lanes=a,t;case Dz:return uN(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rz:o=10;break e;case Oz:o=9;break e;case uk:o=11;break e;case dk:o=14;break e;case Oc:o=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=sa(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function ih(t,e,n,r){return t=sa(7,t,r,e),t.lanes=n,t}function uN(t,e,n,r){return t=sa(22,t,r,e),t.elementType=Dz,t.lanes=n,t.stateNode={isHidden:!1},t}function aE(t,e,n){return t=sa(6,t,null,e),t.lanes=n,t}function oE(t,e,n){return e=sa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kae(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=B1(0),this.expirationTimes=B1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hk(t,e,n,r,i,a,o,l,c){return t=new kae(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=sa(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ck(a),t}function Rae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:If,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E9(t){if(!t)return Iu;t=t._reactInternals;e:{if(Wh(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(vi(n))return Eq(t,n,e)}return e}function A9(t,e,n,r,i,a,o,l,c){return t=Hk(n,r,!0,t,i,a,o,l,c),t.context=E9(null),n=t.current,r=Qs(),i=vu(n),a=Cl(r,i),a.callback=e??null,gu(n,a,i),t.current.lanes=i,Dx(t,i,r),xi(t,r),t}function dN(t,e,n,r){var i=e.current,a=Qs(),o=vu(i);return n=E9(n),e.context===null?e.context=n:e.pendingContext=n,e=Cl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gu(i,e,o),t!==null&&(ro(t,i,o,a),H0(t,i,o)),o}function Hw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kk(t,e){YL(t,e),(t=t.alternate)&&YL(t,e)}function Oae(){return null}var T9=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gk(t){this._internalRoot=t}hN.prototype.render=Gk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));dN(t,e,null,null)};hN.prototype.unmount=Gk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yh(function(){dN(null,t,null,null)}),e[$l]=null}};function hN(t){this._internalRoot=t}hN.prototype.unstable_scheduleHydration=function(t){if(t){var e=iq();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fc.length&&e!==0&&e<Fc[n].priority;n++);Fc.splice(n,0,t),n===0&&oq(t)}};function Yk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QL(){}function Dae(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Hw(o);a.call(u)}}var o=A9(e,r,t,0,null,!1,!1,"",QL);return t._reactRootContainer=o,t[$l]=o.current,cv(t.nodeType===8?t.parentNode:t),yh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Hw(c);l.call(u)}}var c=Hk(t,0,!1,null,null,!1,!1,"",QL);return t._reactRootContainer=c,t[$l]=c.current,cv(t.nodeType===8?t.parentNode:t),yh(function(){dN(e,c,n,r)}),c}function mN(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Hw(o);l.call(c)}}dN(e,o,t,i)}else o=Dae(n,e,t,i,r);return Hw(o)}rq=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dy(e.pendingLanes);n!==0&&(mk(e,n|1),xi(e,xr()),!(cn&6)&&(Bm=xr()+500,Qu()))}break;case 13:yh(function(){var r=Fl(t,1);if(r!==null){var i=Qs();ro(r,t,1,i)}}),Kk(t,1)}};pk=function(t){if(t.tag===13){var e=Fl(t,134217728);if(e!==null){var n=Qs();ro(e,t,134217728,n)}Kk(t,134217728)}};sq=function(t){if(t.tag===13){var e=vu(t),n=Fl(t,e);if(n!==null){var r=Qs();ro(n,t,e,r)}Kk(t,e)}};iq=function(){return _n};aq=function(t,e){var n=_n;try{return _n=t,e()}finally{_n=n}};sT=function(t,e,n){switch(e){case"input":if(XA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sN(r);if(!i)throw Error(Oe(90));Lz(r),XA(r,i)}}}break;case"textarea":Fz(t,n);break;case"select":e=n.value,e!=null&&em(t,!!n.multiple,e,!1)}};Hz=Uk;Kz=yh;var Mae={usingClientEntryPoint:!1,Events:[Lx,Mf,sN,qz,Wz,Uk]},Vg={findFiberByHostInstance:Md,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lae={bundleType:Vg.bundleType,version:Vg.version,rendererPackageName:Vg.rendererPackageName,rendererConfig:Vg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qz(t),t===null?null:t.stateNode},findFiberByHostInstance:Vg.findFiberByHostInstance||Oae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r0.isDisabled&&r0.supportsFiber)try{eN=r0.inject(Lae),Lo=r0}catch{}}Wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mae;Wi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yk(e))throw Error(Oe(200));return Rae(t,e,null,n)};Wi.createRoot=function(t,e){if(!Yk(t))throw Error(Oe(299));var n=!1,r="",i=T9;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hk(t,1,!1,null,null,n,!1,r,i),t[$l]=e.current,cv(t.nodeType===8?t.parentNode:t),new Gk(e)};Wi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=Qz(e),t=t===null?null:t.stateNode,t};Wi.flushSync=function(t){return yh(t)};Wi.hydrate=function(t,e,n){if(!fN(e))throw Error(Oe(200));return mN(null,t,e,!0,n)};Wi.hydrateRoot=function(t,e,n){if(!Yk(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=T9;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A9(e,null,t,1,n??null,i,!1,a,o),t[$l]=e.current,cv(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hN(e)};Wi.render=function(t,e,n){if(!fN(e))throw Error(Oe(200));return mN(null,t,e,!1,n)};Wi.unmountComponentAtNode=function(t){if(!fN(t))throw Error(Oe(40));return t._reactRootContainer?(yh(function(){mN(null,null,t,!1,function(){t._reactRootContainer=null,t[$l]=null})}),!0):!1};Wi.unstable_batchedUpdates=Uk;Wi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fN(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return mN(t,e,n,!1,r)};Wi.version="18.3.1-next-f1338f8080-20240426";function C9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C9)}catch(t){console.error(t)}}C9(),Cz.exports=Wi;var Hh=Cz.exports;const P9=xn(Hh);var I9,XL=Hh;I9=XL.createRoot,XL.hydrateRoot;const $ae="modulepreload",Fae=function(t){return"/"+t},ZL={},Fx=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Fae(c),c in ZL)return;ZL[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":$ae,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Vae=1,Bae=1e6;let lE=0;function Uae(){return lE=(lE+1)%Number.MAX_SAFE_INTEGER,lE.toString()}const cE=new Map,JL=t=>{if(cE.has(t))return;const e=setTimeout(()=>{cE.delete(t),Dy({type:"REMOVE_TOAST",toastId:t})},Bae);cE.set(t,e)},zae=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Vae)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?JL(n):t.toasts.forEach(r=>{JL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},J0=[];let ew={toasts:[]};function Dy(t){ew=zae(ew,t),J0.forEach(e=>{e(ew)})}function qae({...t}){const e=Uae(),n=i=>Dy({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Dy({type:"DISMISS_TOAST",toastId:e});return Dy({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Wae(){const[t,e]=j.useState(ew);return j.useEffect(()=>(J0.push(e),()=>{const n=J0.indexOf(e);n>-1&&J0.splice(n,1)}),[t]),{...t,toast:qae,dismiss:n=>Dy({type:"DISMISS_TOAST",toastId:n})}}function $e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function e4(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pN(...t){return e=>{let n=!1;const r=t.map(i=>{const a=e4(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():e4(t[i],null)}}}}function Ft(...t){return j.useCallback(pN(...t),t)}function Hae(t,e){const n=j.createContext(e),r=a=>{const{children:o,...l}=a,c=j.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(a){const o=j.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function ps(t,e=[]){let n=[];function r(a,o){const l=j.createContext(o),c=n.length;n=[...n,o];const u=h=>{var b;const{scope:f,children:m,...v}=h,p=((b=f==null?void 0:f[t])==null?void 0:b[c])||l,y=j.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:y,children:m})};u.displayName=a+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[c])||l,v=j.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return j.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Kae(i,...e)]}function Kae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vh(t){const e=Gae(t),n=j.forwardRef((r,i)=>{const{children:a,...o}=r,l=j.Children.toArray(a),c=l.find(Yae);if(c){const u=c.props.children,d=l.map(h=>h===c?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:h);return s.jsx(e,{...o,ref:i,children:j.isValidElement(u)?j.cloneElement(u,void 0,d):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var Kh=vh("Slot");function Gae(t){const e=j.forwardRef((n,r)=>{const{children:i,...a}=n;if(j.isValidElement(i)){const o=Xae(i),l=Qae(a,i.props);return i.type!==j.Fragment&&(l.ref=r?pN(r,o):o),j.cloneElement(i,l)}return j.Children.count(i)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var k9=Symbol("radix.slottable");function R9(t){const e=({children:n})=>s.jsx(s.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=k9,e}function Yae(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===k9}function Qae(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function Xae(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function gN(t){const e=t+"CollectionProvider",[n,r]=ps(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:b}=p,x=$.useRef(null),w=$.useRef(new Map).current;return s.jsx(i,{scope:y,itemMap:w,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=vh(l),u=$.forwardRef((p,y)=>{const{scope:b,children:x}=p,w=a(l,b),C=Ft(y,w.collectionRef);return s.jsx(c,{ref:C,children:x})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=vh(d),m=$.forwardRef((p,y)=>{const{scope:b,children:x,...w}=p,C=$.useRef(null),S=Ft(y,C),P=a(d,b);return $.useEffect(()=>(P.itemMap.set(C,{ref:C,...w}),()=>void P.itemMap.delete(C))),s.jsx(f,{[h]:"",ref:S,children:x})});m.displayName=d;function v(p){const y=a(t+"CollectionConsumer",p);return $.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((P,_)=>w.indexOf(P.ref.current)-w.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var Zae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=Zae.reduce((t,e)=>{const n=vh(`Primitive.${e}`),r=j.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Qk(t,e){t&&Hh.flushSync(()=>t.dispatchEvent(e))}function hr(t){const e=j.useRef(t);return j.useEffect(()=>{e.current=t}),j.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Jae(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var eoe="DismissableLayer",LT="dismissableLayer.update",toe="dismissableLayer.pointerDownOutside",noe="dismissableLayer.focusOutside",t4,O9=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$p=j.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=j.useContext(O9),[d,h]=j.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=j.useState({}),v=Ft(e,_=>h(_)),p=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(y),x=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,C=x>=b,S=soe(_=>{const g=_.target,T=[...u.branches].some(E=>E.contains(g));!C||T||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},f),P=ioe(_=>{const g=_.target;[...u.branches].some(E=>E.contains(g))||(a==null||a(_),o==null||o(_),_.defaultPrevented||l==null||l())},f);return Jae(_=>{x===u.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),j.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(t4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),n4(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=t4)}},[d,f,n,u]),j.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),n4())},[d,u]),j.useEffect(()=>{const _=()=>m({});return document.addEventListener(LT,_),()=>document.removeEventListener(LT,_)},[]),s.jsx(st.div,{...c,ref:v,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:$e(t.onFocusCapture,P.onFocusCapture),onBlurCapture:$e(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:$e(t.onPointerDownCapture,S.onPointerDownCapture)})});$p.displayName=eoe;var roe="DismissableLayerBranch",D9=j.forwardRef((t,e)=>{const n=j.useContext(O9),r=j.useRef(null),i=Ft(e,r);return j.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(st.div,{...t,ref:i})});D9.displayName=roe;function soe(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){M9(toe,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ioe(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t),r=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!r.current&&M9(noe,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function n4(){const t=new CustomEvent(LT);document.dispatchEvent(t)}function M9(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Qk(i,a):i.dispatchEvent(a)}var aoe=$p,ooe=D9,mr=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},loe="Portal",Vx=j.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,a]=j.useState(!1);mr(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?P9.createPortal(s.jsx(st.div,{...r,ref:e}),o):null});Vx.displayName=loe;function coe(t,e){return j.useReducer((n,r)=>e[n][r]??n,t)}var gs=t=>{const{present:e,children:n}=t,r=uoe(e),i=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),a=Ft(r.ref,doe(i));return typeof n=="function"||r.isPresent?j.cloneElement(i,{ref:a}):null};gs.displayName="Presence";function uoe(t){const[e,n]=j.useState(),r=j.useRef(null),i=j.useRef(t),a=j.useRef("none"),o=t?"mounted":"unmounted",[l,c]=coe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=s0(r.current);a.current=l==="mounted"?u:"none"},[l]),mr(()=>{const u=r.current,d=i.current;if(d!==t){const f=a.current,m=s0(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),mr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const p=s0(r.current).includes(m.animationName);if(m.target===e&&p&&(c("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(a.current=s0(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function s0(t){return(t==null?void 0:t.animationName)||"none"}function doe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hoe=ik[" useInsertionEffect ".trim().toString()]||mr;function lo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=foe({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:i;{const d=j.useRef(t!==void 0);j.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=j.useCallback(d=>{var h;if(l){const f=moe(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else a(d)},[l,t,a,o]);return[c,u]}function foe({defaultProp:t,onChange:e}){const[n,r]=j.useState(t),i=j.useRef(n),a=j.useRef(e);return hoe(()=>{a.current=e},[e]),j.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function moe(t){return typeof t=="function"}var L9=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),poe="VisuallyHidden",yN=j.forwardRef((t,e)=>s.jsx(st.span,{...t,ref:e,style:{...L9,...t.style}}));yN.displayName=poe;var goe=yN,Xk="ToastProvider",[Zk,yoe,voe]=gN("Toast"),[$9,Ott]=ps("Toast",[voe]),[xoe,vN]=$9(Xk),F9=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[l,c]=j.useState(null),[u,d]=j.useState(0),h=j.useRef(!1),f=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xk}\`. Expected non-empty \`string\`.`),s.jsx(Zk.Provider,{scope:e,children:s.jsx(xoe,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>d(m=>m+1),[]),onToastRemove:j.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};F9.displayName=Xk;var V9="ToastViewport",boe=["F8"],$T="toast.viewportPause",FT="toast.viewportResume",B9=j.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=boe,label:i="Notifications ({hotkey})",...a}=t,o=vN(V9,n),l=yoe(n),c=j.useRef(null),u=j.useRef(null),d=j.useRef(null),h=j.useRef(null),f=Ft(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;j.useEffect(()=>{const y=b=>{var w;r.length!==0&&r.every(C=>b[C]||b.code===C)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),j.useEffect(()=>{const y=c.current,b=h.current;if(v&&y&&b){const x=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent($T);b.dispatchEvent(P),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(FT);b.dispatchEvent(P),o.isClosePausedRef.current=!1}},C=P=>{!y.contains(P.relatedTarget)&&w()},S=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",x),y.addEventListener("focusout",C),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:y})=>{const x=l().map(w=>{const C=w.ref.current,S=[C,...Roe(C)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?x.reverse():x).flat()},[l]);return j.useEffect(()=>{const y=h.current;if(y){const b=x=>{var S,P,_;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const g=document.activeElement,T=x.shiftKey;if(x.target===y&&T){(S=u.current)==null||S.focus();return}const I=p({tabbingDirection:T?"backwards":"forwards"}),k=I.findIndex(L=>L===g);uE(I.slice(k+1))?x.preventDefault():T?(P=u.current)==null||P.focus():(_=d.current)==null||_.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,p]),s.jsxs(ooe,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(VT,{ref:u,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});uE(y)}}),s.jsx(Zk.Slot,{scope:n,children:s.jsx(st.ol,{tabIndex:-1,...a,ref:f})}),v&&s.jsx(VT,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});uE(y)}})]})});B9.displayName=V9;var U9="ToastFocusProxy",VT=j.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,a=vN(U9,n);return s.jsx(yN,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});VT.displayName=U9;var Bx="Toast",woe="toast.swipeStart",joe="toast.swipeMove",_oe="toast.swipeCancel",Noe="toast.swipeEnd",z9=j.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=t,[l,c]=lo({prop:r,defaultProp:i??!0,onChange:a,caller:Bx});return s.jsx(gs,{present:n||l,children:s.jsx(Aoe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:hr(t.onPause),onResume:hr(t.onResume),onSwipeStart:$e(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:$e(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});z9.displayName=Bx;var[Soe,Eoe]=$9(Bx,{onClose(){}}),Aoe=j.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,p=vN(Bx,n),[y,b]=j.useState(null),x=Ft(e,L=>b(L)),w=j.useRef(null),C=j.useRef(null),S=i||p.duration,P=j.useRef(0),_=j.useRef(S),g=j.useRef(0),{onToastAdd:T,onToastRemove:E}=p,A=hr(()=>{var B;(y==null?void 0:y.contains(document.activeElement))&&((B=p.viewport)==null||B.focus()),o()}),I=j.useCallback(L=>{!L||L===1/0||(window.clearTimeout(g.current),P.current=new Date().getTime(),g.current=window.setTimeout(A,L))},[A]);j.useEffect(()=>{const L=p.viewport;if(L){const B=()=>{I(_.current),u==null||u()},U=()=>{const V=new Date().getTime()-P.current;_.current=_.current-V,window.clearTimeout(g.current),c==null||c()};return L.addEventListener($T,U),L.addEventListener(FT,B),()=>{L.removeEventListener($T,U),L.removeEventListener(FT,B)}}},[p.viewport,S,c,u,I]),j.useEffect(()=>{a&&!p.isClosePausedRef.current&&I(S)},[a,S,p.isClosePausedRef,I]),j.useEffect(()=>(T(),()=>E()),[T,E]);const k=j.useMemo(()=>y?Q9(y):null,[y]);return p.viewport?s.jsxs(s.Fragment,{children:[k&&s.jsx(Toe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),s.jsx(Soe,{scope:n,onClose:A,children:Hh.createPortal(s.jsx(Zk.ItemSlot,{scope:n,children:s.jsx(aoe,{asChild:!0,onEscapeKeyDown:$e(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||A(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:$e(t.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:$e(t.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:$e(t.onPointerMove,L=>{if(!w.current)return;const B=L.clientX-w.current.x,U=L.clientY-w.current.y,V=!!C.current,D=["left","right"].includes(p.swipeDirection),R=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=D?R(0,B):0,J=D?0:R(0,U),oe=L.pointerType==="touch"?10:2,Ae={x:W,y:J},z={originalEvent:L,delta:Ae};V?(C.current=Ae,i0(joe,h,z,{discrete:!1})):r4(Ae,p.swipeDirection,oe)?(C.current=Ae,i0(woe,d,z,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(B)>oe||Math.abs(U)>oe)&&(w.current=null)}),onPointerUp:$e(t.onPointerUp,L=>{const B=C.current,U=L.target;if(U.hasPointerCapture(L.pointerId)&&U.releasePointerCapture(L.pointerId),C.current=null,w.current=null,B){const V=L.currentTarget,D={originalEvent:L,delta:B};r4(B,p.swipeDirection,p.swipeThreshold)?i0(Noe,m,D,{discrete:!0}):i0(_oe,f,D,{discrete:!0}),V.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Toe=t=>{const{__scopeToast:e,children:n,...r}=t,i=vN(Bx,e),[a,o]=j.useState(!1),[l,c]=j.useState(!1);return Ioe(()=>o(!0)),j.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Vx,{asChild:!0,children:s.jsx(yN,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},Coe="ToastTitle",q9=j.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(st.div,{...r,ref:e})});q9.displayName=Coe;var Poe="ToastDescription",W9=j.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(st.div,{...r,ref:e})});W9.displayName=Poe;var H9="ToastAction",K9=j.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?s.jsx(Y9,{altText:n,asChild:!0,children:s.jsx(Jk,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${H9}\`. Expected non-empty \`string\`.`),null)});K9.displayName=H9;var G9="ToastClose",Jk=j.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Eoe(G9,n);return s.jsx(Y9,{asChild:!0,children:s.jsx(st.button,{type:"button",...r,ref:e,onClick:$e(t.onClick,i.onClose)})})});Jk.displayName=G9;var Y9=j.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return s.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Q9(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),koe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Q9(r))}}),e}function i0(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Qk(i,a):i.dispatchEvent(a)}var r4=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),a=r>i;return e==="left"||e==="right"?a&&r>n:!a&&i>n};function Ioe(t=()=>{}){const e=hr(t);mr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function koe(t){return t.nodeType===t.ELEMENT_NODE}function Roe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function uE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Ooe=F9,X9=B9,Z9=z9,J9=q9,e8=W9,t8=K9,n8=Jk;function r8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=r8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=r8(t))&&(r&&(r+=" "),r+=e);return r}const s4=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,i4=Bt,Gh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return i4(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=s4(d)||s4(h);return i[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(v=>{let[p,y]=v;return Array.isArray(y)?y.includes({...a,...l}[p]):{...a,...l}[p]===y})?[...u,h,f]:u},[]);return i4(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Moe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...Moe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:s8("lucide",i),...l},[...o.map(([u,d])=>j.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,e)=>{const n=j.forwardRef(({className:r,...i},a)=>j.createElement(Loe,{ref:a,iconNode:e,className:s8(`lucide-${Doe(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=Le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=Le("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=Le("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=Le("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=Le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=Le("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=Le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Le("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=Le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Le("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Le("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=Le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Le("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=Le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=Le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=Le("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=Le("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=Le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=Le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=Le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=Le("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Le("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=Le("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Le("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=Le("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=Le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=Le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=Le("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=Le("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=Le("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=Le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Le("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=Le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=Le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=Le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Le("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=Le("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=Le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Le("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=Le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=Le("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Le("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=Le("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=Le("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=Le("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=Le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=Le("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=Le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=Le("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=Le("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Le("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=Le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Le("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=Le("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sR="-",hle=t=>{const e=mle(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(sR);return l[0]===""&&l.length!==1&&l.shift(),y8(l,e)||fle(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},y8=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?y8(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(sR);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},f4=/^\[(.+)\]$/,fle=t=>{if(f4.test(t)){const e=f4.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},mle=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return gle(Object.entries(t.classGroups),n).forEach(([a,o])=>{UT(o,r,a,e)}),r},UT=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:m4(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(ple(i)){UT(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{UT(o,m4(e,a),n,r)})})},m4=(t,e)=>{let n=t;return e.split(sR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ple=t=>t.isThemeGetter,gle=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,i]}):t,yle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},v8="!",vle=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let b=l[y];if(u===0){if(b===i&&(r||l.slice(y,y+a)===e)){c.push(l.slice(d,y)),d=y+a;continue}if(b==="/"){h=y;continue}}b==="["?u++:b==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(v8),v=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},xle=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},ble=t=>({cache:yle(t.cacheSize),parseClassName:vle(t),...hle(t)}),wle=/\s+/,jle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(wle);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let v=!!m,p=r(v?f.substring(0,m):f);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=r(f),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const y=xle(d).join(":"),b=h?y+v8:y,x=b+p;if(a.includes(x))continue;a.push(x);const w=i(p,v);for(let C=0;C<w.length;++C){const S=w[C];a.push(b+S)}l=u+(l.length>0?" "+l:l)}return l};function _le(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=x8(e))&&(r&&(r+=" "),r+=n);return r}const x8=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=x8(t[r]))&&(n&&(n+=" "),n+=e);return n};function Nle(t,...e){let n,r,i,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=ble(u),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=jle(c,n);return i(c,d),d}return function(){return a(_le.apply(null,arguments))}}const Bn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},b8=/^\[(?:([a-z-]+):)?(.+)\]$/i,Sle=/^\d+\/\d+$/,Ele=new Set(["px","full","screen"]),Ale=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Tle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cle=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ple=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ile=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dl=t=>am(t)||Ele.has(t)||Sle.test(t),wc=t=>Bp(t,"length",Fle),am=t=>!!t&&!Number.isNaN(Number(t)),dE=t=>Bp(t,"number",am),Bg=t=>!!t&&Number.isInteger(Number(t)),kle=t=>t.endsWith("%")&&am(t.slice(0,-1)),qt=t=>b8.test(t),jc=t=>Ale.test(t),Rle=new Set(["length","size","percentage"]),Ole=t=>Bp(t,Rle,w8),Dle=t=>Bp(t,"position",w8),Mle=new Set(["image","url"]),Lle=t=>Bp(t,Mle,Ble),$le=t=>Bp(t,"",Vle),Ug=()=>!0,Bp=(t,e,n)=>{const r=b8.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Fle=t=>Tle.test(t)&&!Cle.test(t),w8=()=>!1,Vle=t=>Ple.test(t),Ble=t=>Ile.test(t),Ule=()=>{const t=Bn("colors"),e=Bn("spacing"),n=Bn("blur"),r=Bn("brightness"),i=Bn("borderColor"),a=Bn("borderRadius"),o=Bn("borderSpacing"),l=Bn("borderWidth"),c=Bn("contrast"),u=Bn("grayscale"),d=Bn("hueRotate"),h=Bn("invert"),f=Bn("gap"),m=Bn("gradientColorStops"),v=Bn("gradientColorStopPositions"),p=Bn("inset"),y=Bn("margin"),b=Bn("opacity"),x=Bn("padding"),w=Bn("saturate"),C=Bn("scale"),S=Bn("sepia"),P=Bn("skew"),_=Bn("space"),g=Bn("translate"),T=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",qt,e],I=()=>[qt,e],k=()=>["",dl,wc],L=()=>["auto",am,qt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",qt],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[am,qt];return{cacheSize:500,separator:":",theme:{colors:[Ug],spacing:[dl,wc],blur:["none","",jc,qt],brightness:J(),borderColor:[t],borderRadius:["none","","full",jc,qt],borderSpacing:I(),borderWidth:k(),contrast:J(),grayscale:R(),hueRotate:J(),invert:R(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[kle,wc],inset:A(),margin:A(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:R(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",qt]}],container:["container"],columns:[{columns:[jc]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),qt]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bg,qt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qt]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Bg,qt]}],"grid-cols":[{"grid-cols":[Ug]}],"col-start-end":[{col:["auto",{span:["full",Bg,qt]},qt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Ug]}],"row-start-end":[{row:["auto",{span:[Bg,qt]},qt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qt,e]}],"min-w":[{"min-w":[qt,e,"min","max","fit"]}],"max-w":[{"max-w":[qt,e,"none","full","min","max","fit","prose",{screen:[jc]},jc]}],h:[{h:[qt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jc,wc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dE]}],"font-family":[{font:[Ug]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qt]}],"line-clamp":[{"line-clamp":["none",am,dE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dl,qt]}],"list-image":[{"list-image":["none",qt]}],"list-style-type":[{list:["none","disc","decimal",qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",dl,wc]}],"underline-offset":[{"underline-offset":["auto",dl,qt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),Dle]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ole]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Lle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[dl,qt]}],"outline-w":[{outline:[dl,wc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[dl,wc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",jc,$le]}],"shadow-color":[{shadow:[Ug]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jc,qt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qt]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",qt]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Bg,qt]}],"translate-x":[{"translate-x":[g]}],"translate-y":[{"translate-y":[g]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[dl,wc,dE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zle=Nle(Ule);function _e(...t){return zle(Bt(t))}const qle=Ooe,j8=j.forwardRef(({className:t,...e},n)=>s.jsx(X9,{ref:n,className:_e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));j8.displayName=X9.displayName;const Wle=Gh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_8=j.forwardRef(({className:t,variant:e,...n},r)=>s.jsx(Z9,{ref:r,className:_e(Wle({variant:e}),t),...n}));_8.displayName=Z9.displayName;const Hle=j.forwardRef(({className:t,...e},n)=>s.jsx(t8,{ref:n,className:_e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));Hle.displayName=t8.displayName;const N8=j.forwardRef(({className:t,...e},n)=>s.jsx(n8,{ref:n,className:_e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(qm,{className:"h-4 w-4"})}));N8.displayName=n8.displayName;const S8=j.forwardRef(({className:t,...e},n)=>s.jsx(J9,{ref:n,className:_e("text-sm font-semibold",t),...e}));S8.displayName=J9.displayName;const E8=j.forwardRef(({className:t,...e},n)=>s.jsx(e8,{ref:n,className:_e("text-sm opacity-90",t),...e}));E8.displayName=e8.displayName;function Kle(){const{toasts:t}=Wae();return s.jsxs(qle,{children:[t.map(function({id:e,title:n,description:r,action:i,...a}){return s.jsxs(_8,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(S8,{children:n}),r&&s.jsx(E8,{children:r})]}),i,s.jsx(N8,{})]},e)}),s.jsx(j8,{})]})}var p4=["light","dark"],Gle="(prefers-color-scheme: dark)",Yle=j.createContext(void 0),Qle={setTheme:t=>{},themes:[]},Xle=()=>{var t;return(t=j.useContext(Yle))!=null?t:Qle};j.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?p4.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,p=!1,y=!0)=>{let b=o?o[v]:v,x=p?v+"|| ''":`'${b}'`,w="";return i&&y&&!p&&p4.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),n==="class"?p||b?w+=`c.add(${x})`:w+="null":b&&(w+=`d[s](n,${x})`),w},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Gle}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return j.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var Zle=t=>{switch(t){case"success":return tce;case"info":return rce;case"warning":return nce;case"error":return sce;default:return null}},Jle=Array(12).fill(0),ece=({visible:t,className:e})=>$.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},$.createElement("div",{className:"sonner-spinner"},Jle.map((n,r)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),tce=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),nce=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rce=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sce=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ice=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ace=()=>{let[t,e]=$.useState(document.hidden);return $.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},zT=1,oce=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:zT++,a=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],$.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(cce(c)&&!c.ok){i=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){i=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){i=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;i&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||zT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},oi=new oce,lce=(t,e)=>{let n=(e==null?void 0:e.id)||zT++;return oi.addToast({title:t,...e,id:n}),n},cce=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",uce=lce,dce=()=>oi.toasts,hce=()=>oi.getActiveToasts(),G=Object.assign(uce,{success:oi.success,info:oi.info,warning:oi.warning,error:oi.error,custom:oi.custom,message:oi.message,promise:oi.promise,dismiss:oi.dismiss,loading:oi.loading},{getHistory:dce,getToasts:hce});function fce(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}fce(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function a0(t){return t.label!==void 0}var mce=3,pce="32px",gce="16px",g4=4e3,yce=356,vce=14,xce=20,bce=200;function Pa(...t){return t.filter(Boolean).join(" ")}function wce(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var jce=t=>{var e,n,r,i,a,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:v,interacting:p,setHeights:y,visibleToasts:b,heights:x,index:w,toasts:C,expanded:S,removeToast:P,defaultRichColors:_,closeButton:g,style:T,cancelButtonStyle:E,actionButtonStyle:A,className:I="",descriptionClassName:k="",duration:L,position:B,gap:U,loadingIcon:V,expandByDefault:D,classNames:R,icons:W,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:oe}=t,[Ae,z]=$.useState(null),[ie,ve]=$.useState(null),[xe,Be]=$.useState(!1),[he,fe]=$.useState(!1),[me,ce]=$.useState(!1),[Ke,rt]=$.useState(!1),[zt,nn]=$.useState(!1),[En,Hr]=$.useState(0),[on,Q]=$.useState(0),le=$.useRef(m.duration||L||g4),be=$.useRef(null),Fe=$.useRef(null),Ve=w===0,ke=w+1<=b,Ye=m.type,Kt=m.dismissible!==!1,dn=m.className||"",ys=m.descriptionClassName||"",Ea=$.useMemo(()=>x.findIndex(Tt=>Tt.toastId===m.id)||0,[x,m.id]),Ni=$.useMemo(()=>{var Tt;return(Tt=m.closeButton)!=null?Tt:g},[m.closeButton,g]),pd=$.useMemo(()=>m.duration||L||g4,[m.duration,L]),Si=$.useRef(0),ti=$.useRef(0),hc=$.useRef(0),ss=$.useRef(null),[lf,ul]=B.split("-"),wg=$.useMemo(()=>x.reduce((Tt,pn,In)=>In>=Ea?Tt:Tt+pn.height,0),[x,Ea]),fc=ace(),Cb=m.invert||f,kr=Ye==="loading";ti.current=$.useMemo(()=>Ea*U+wg,[Ea,wg]),$.useEffect(()=>{le.current=pd},[pd]),$.useEffect(()=>{Be(!0)},[]),$.useEffect(()=>{let Tt=Fe.current;if(Tt){let pn=Tt.getBoundingClientRect().height;return Q(pn),y(In=>[{toastId:m.id,height:pn,position:m.position},...In]),()=>y(In=>In.filter(Kr=>Kr.toastId!==m.id))}},[y,m.id]),$.useLayoutEffect(()=>{if(!xe)return;let Tt=Fe.current,pn=Tt.style.height;Tt.style.height="auto";let In=Tt.getBoundingClientRect().height;Tt.style.height=pn,Q(In),y(Kr=>Kr.find(Ei=>Ei.toastId===m.id)?Kr.map(Ei=>Ei.toastId===m.id?{...Ei,height:In}:Ei):[{toastId:m.id,height:In,position:m.position},...Kr])},[xe,m.title,m.description,y,m.id]);let Aa=$.useCallback(()=>{fe(!0),Hr(ti.current),y(Tt=>Tt.filter(pn=>pn.toastId!==m.id)),setTimeout(()=>{P(m)},bce)},[m,P,y,ti]);$.useEffect(()=>{if(m.promise&&Ye==="loading"||m.duration===1/0||m.type==="loading")return;let Tt;return S||p||oe&&fc?(()=>{if(hc.current<Si.current){let pn=new Date().getTime()-Si.current;le.current=le.current-pn}hc.current=new Date().getTime()})():le.current!==1/0&&(Si.current=new Date().getTime(),Tt=setTimeout(()=>{var pn;(pn=m.onAutoClose)==null||pn.call(m,m),Aa()},le.current)),()=>clearTimeout(Tt)},[S,p,m,Ye,oe,fc,Aa]),$.useEffect(()=>{m.delete&&Aa()},[Aa,m.delete]);function gd(){var Tt,pn,In;return W!=null&&W.loading?$.createElement("div",{className:Pa(R==null?void 0:R.loader,(Tt=m==null?void 0:m.classNames)==null?void 0:Tt.loader,"sonner-loader"),"data-visible":Ye==="loading"},W.loading):V?$.createElement("div",{className:Pa(R==null?void 0:R.loader,(pn=m==null?void 0:m.classNames)==null?void 0:pn.loader,"sonner-loader"),"data-visible":Ye==="loading"},V):$.createElement(ece,{className:Pa(R==null?void 0:R.loader,(In=m==null?void 0:m.classNames)==null?void 0:In.loader),visible:Ye==="loading"})}return $.createElement("li",{tabIndex:0,ref:Fe,className:Pa(I,dn,R==null?void 0:R.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[Ye],(n=m==null?void 0:m.classNames)==null?void 0:n[Ye]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:_,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":xe,"data-promise":!!m.promise,"data-swiped":zt,"data-removed":he,"data-visible":ke,"data-y-position":lf,"data-x-position":ul,"data-index":w,"data-front":Ve,"data-swiping":me,"data-dismissible":Kt,"data-type":Ye,"data-invert":Cb,"data-swipe-out":Ke,"data-swipe-direction":ie,"data-expanded":!!(S||D&&xe),style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${he?En:ti.current}px`,"--initial-height":D?"auto":`${on}px`,...T,...m.style},onDragEnd:()=>{ce(!1),z(null),ss.current=null},onPointerDown:Tt=>{kr||!Kt||(be.current=new Date,Hr(ti.current),Tt.target.setPointerCapture(Tt.pointerId),Tt.target.tagName!=="BUTTON"&&(ce(!0),ss.current={x:Tt.clientX,y:Tt.clientY}))},onPointerUp:()=>{var Tt,pn,In,Kr;if(Ke||!Kt)return;ss.current=null;let Ei=Number(((Tt=Fe.current)==null?void 0:Tt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vo=Number(((pn=Fe.current)==null?void 0:pn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gi=new Date().getTime()-((In=be.current)==null?void 0:In.getTime()),ni=Ae==="x"?Ei:vo,Ta=Math.abs(ni)/Gi;if(Math.abs(ni)>=xce||Ta>.11){Hr(ti.current),(Kr=m.onDismiss)==null||Kr.call(m,m),ve(Ae==="x"?Ei>0?"right":"left":vo>0?"down":"up"),Aa(),rt(!0),nn(!1);return}ce(!1),z(null)},onPointerMove:Tt=>{var pn,In,Kr,Ei;if(!ss.current||!Kt||((pn=window.getSelection())==null?void 0:pn.toString().length)>0)return;let vo=Tt.clientY-ss.current.y,Gi=Tt.clientX-ss.current.x,ni=(In=t.swipeDirections)!=null?In:wce(B);!Ae&&(Math.abs(Gi)>1||Math.abs(vo)>1)&&z(Math.abs(Gi)>Math.abs(vo)?"x":"y");let Ta={x:0,y:0};Ae==="y"?(ni.includes("top")||ni.includes("bottom"))&&(ni.includes("top")&&vo<0||ni.includes("bottom")&&vo>0)&&(Ta.y=vo):Ae==="x"&&(ni.includes("left")||ni.includes("right"))&&(ni.includes("left")&&Gi<0||ni.includes("right")&&Gi>0)&&(Ta.x=Gi),(Math.abs(Ta.x)>0||Math.abs(Ta.y)>0)&&nn(!0),(Kr=Fe.current)==null||Kr.style.setProperty("--swipe-amount-x",`${Ta.x}px`),(Ei=Fe.current)==null||Ei.style.setProperty("--swipe-amount-y",`${Ta.y}px`)}},Ni&&!m.jsx?$.createElement("button",{"aria-label":J,"data-disabled":kr,"data-close-button":!0,onClick:kr||!Kt?()=>{}:()=>{var Tt;Aa(),(Tt=m.onDismiss)==null||Tt.call(m,m)},className:Pa(R==null?void 0:R.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(a=W==null?void 0:W.close)!=null?a:ice):null,m.jsx||j.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:$.createElement($.Fragment,null,Ye||m.icon||m.promise?$.createElement("div",{"data-icon":"",className:Pa(R==null?void 0:R.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||gd():null,m.type!=="loading"?m.icon||(W==null?void 0:W[Ye])||Zle(Ye):null):null,$.createElement("div",{"data-content":"",className:Pa(R==null?void 0:R.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},$.createElement("div",{"data-title":"",className:Pa(R==null?void 0:R.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?$.createElement("div",{"data-description":"",className:Pa(k,ys,R==null?void 0:R.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),j.isValidElement(m.cancel)?m.cancel:m.cancel&&a0(m.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||E,onClick:Tt=>{var pn,In;a0(m.cancel)&&Kt&&((In=(pn=m.cancel).onClick)==null||In.call(pn,Tt),Aa())},className:Pa(R==null?void 0:R.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,j.isValidElement(m.action)?m.action:m.action&&a0(m.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:Tt=>{var pn,In;a0(m.action)&&((In=(pn=m.action).onClick)==null||In.call(pn,Tt),!Tt.defaultPrevented&&Aa())},className:Pa(R==null?void 0:R.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function y4(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function _ce(t,e){let n={};return[t,e].forEach((r,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",l=a?gce:pce;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var Nce=j.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:v=mce,toastOptions:p,dir:y=y4(),gap:b=vce,loadingIcon:x,icons:w,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:S}=t,[P,_]=$.useState([]),g=$.useMemo(()=>Array.from(new Set([r].concat(P.filter(oe=>oe.position).map(oe=>oe.position)))),[P,r]),[T,E]=$.useState([]),[A,I]=$.useState(!1),[k,L]=$.useState(!1),[B,U]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=$.useRef(null),D=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=$.useRef(null),W=$.useRef(!1),J=$.useCallback(oe=>{_(Ae=>{var z;return(z=Ae.find(ie=>ie.id===oe.id))!=null&&z.delete||oi.dismiss(oe.id),Ae.filter(({id:ie})=>ie!==oe.id)})},[]);return $.useEffect(()=>oi.subscribe(oe=>{if(oe.dismiss){_(Ae=>Ae.map(z=>z.id===oe.id?{...z,delete:!0}:z));return}setTimeout(()=>{P9.flushSync(()=>{_(Ae=>{let z=Ae.findIndex(ie=>ie.id===oe.id);return z!==-1?[...Ae.slice(0,z),{...Ae[z],...oe},...Ae.slice(z+1)]:[oe,...Ae]})})})}),[]),$.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:Ae})=>{U(Ae?"dark":"light")})}catch{oe.addListener(({matches:z})=>{try{U(z?"dark":"light")}catch(ie){console.error(ie)}})}},[d]),$.useEffect(()=>{P.length<=1&&I(!1)},[P]),$.useEffect(()=>{let oe=Ae=>{var z,ie;i.every(ve=>Ae[ve]||Ae.code===ve)&&(I(!0),(z=V.current)==null||z.focus()),Ae.code==="Escape"&&(document.activeElement===V.current||(ie=V.current)!=null&&ie.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[i]),$.useEffect(()=>{if(V.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,W.current=!1)}},[V.current]),$.createElement("section",{ref:e,"aria-label":`${C} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},g.map((oe,Ae)=>{var z;let[ie,ve]=oe.split("-");return P.length?$.createElement("ol",{key:oe,dir:y==="auto"?y4():y,tabIndex:-1,ref:V,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":ie,"data-lifted":A&&P.length>1&&!a,"data-x-position":ve,style:{"--front-toast-height":`${((z=T[0])==null?void 0:z.height)||0}px`,"--width":`${yce}px`,"--gap":`${b}px`,...m,..._ce(c,u)},onBlur:xe=>{W.current&&!xe.currentTarget.contains(xe.relatedTarget)&&(W.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||W.current||(W.current=!0,R.current=xe.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{k||I(!1)},onDragEnd:()=>I(!1),onPointerDown:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},P.filter(xe=>!xe.position&&Ae===0||xe.position===oe).map((xe,Be)=>{var he,fe;return $.createElement(jce,{key:xe.id,icons:w,index:Be,toast:xe,defaultRichColors:h,duration:(he=p==null?void 0:p.duration)!=null?he:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:v,closeButton:(fe=p==null?void 0:p.closeButton)!=null?fe:o,interacting:k,position:oe,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:J,toasts:P.filter(me=>me.position==xe.position),heights:T.filter(me=>me.position==xe.position),setHeights:E,expandByDefault:a,gap:b,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:S,swipeDirections:t.swipeDirections})})):null}))});const Sce=({...t})=>{const{theme:e="system"}=Xle();return s.jsx(Nce,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Ece=ik[" useId ".trim().toString()]||(()=>{}),Ace=0;function ca(t){const[e,n]=j.useState(Ece());return mr(()=>{n(r=>r??String(Ace++))},[t]),e?`radix-${e}`:""}const Tce=["top","right","bottom","left"],Ru=Math.min,ki=Math.max,Qw=Math.round,o0=Math.floor,Fo=t=>({x:t,y:t}),Cce={left:"right",right:"left",bottom:"top",top:"bottom"},Pce={start:"end",end:"start"};function qT(t,e,n){return ki(t,Ru(e,n))}function Bl(t,e){return typeof t=="function"?t(e):t}function Ul(t){return t.split("-")[0]}function Up(t){return t.split("-")[1]}function iR(t){return t==="x"?"y":"x"}function aR(t){return t==="y"?"height":"width"}const Ice=new Set(["top","bottom"]);function Io(t){return Ice.has(Ul(t))?"y":"x"}function oR(t){return iR(Io(t))}function kce(t,e,n){n===void 0&&(n=!1);const r=Up(t),i=oR(t),a=aR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Xw(o)),[o,Xw(o)]}function Rce(t){const e=Xw(t);return[WT(t),e,WT(e)]}function WT(t){return t.replace(/start|end/g,e=>Pce[e])}const v4=["left","right"],x4=["right","left"],Oce=["top","bottom"],Dce=["bottom","top"];function Mce(t,e,n){switch(t){case"top":case"bottom":return n?e?x4:v4:e?v4:x4;case"left":case"right":return e?Oce:Dce;default:return[]}}function Lce(t,e,n,r){const i=Up(t);let a=Mce(Ul(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(WT)))),a}function Xw(t){return t.replace(/left|right|bottom|top/g,e=>Cce[e])}function $ce(t){return{top:0,right:0,bottom:0,left:0,...t}}function A8(t){return typeof t!="number"?$ce(t):{top:t,right:t,bottom:t,left:t}}function Zw(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function b4(t,e,n){let{reference:r,floating:i}=t;const a=Io(e),o=oR(e),l=aR(o),c=Ul(e),u=a==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Up(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const Fce=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=b4(u,r,c),f=r,m={},v=0;for(let p=0;p<l.length;p++){const{name:y,fn:b}=l[p],{x,y:w,data:C,reset:S}=await b({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,h=w??h,m={...m,[y]:{...m[y],...C}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:h}=b4(u,f,c)),p=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:m}};async function bv(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Bl(e,t),v=A8(m),y=l[f?h==="floating"?"reference":"floating":h],b=Zw(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Zw(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(b.top-S.top+v.top)/C.y,bottom:(S.bottom-b.bottom+v.bottom)/C.y,left:(b.left-S.left+v.left)/C.x,right:(S.right-b.right+v.right)/C.x}}const Vce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Bl(t,e)||{};if(u==null)return{};const h=A8(d),f={x:n,y:r},m=oR(i),v=aR(m),p=await o.getDimensions(u),y=m==="y",b=y?"top":"left",x=y?"bottom":"right",w=y?"clientHeight":"clientWidth",C=a.reference[v]+a.reference[m]-f[m]-a.floating[v],S=f[m]-a.reference[m],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let _=P?P[w]:0;(!_||!await(o.isElement==null?void 0:o.isElement(P)))&&(_=l.floating[w]||a.floating[v]);const g=C/2-S/2,T=_/2-p[v]/2-1,E=Ru(h[b],T),A=Ru(h[x],T),I=E,k=_-p[v]-A,L=_/2-p[v]/2+g,B=qT(I,L,k),U=!c.arrow&&Up(i)!=null&&L!==B&&a.reference[v]/2-(L<I?E:A)-p[v]/2<0,V=U?L<I?L-I:L-k:0;return{[m]:f[m]+V,data:{[m]:B,centerOffset:L-B-V,...U&&{alignmentOffset:V}},reset:U}}}),Bce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...y}=Bl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Ul(i),x=Io(l),w=Ul(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(w||!p?[Xw(l)]:Rce(l)),P=v!=="none";!f&&P&&S.push(...Lce(l,p,v,C));const _=[l,...S],g=await bv(e,y),T=[];let E=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&T.push(g[b]),h){const L=kce(i,o,C);T.push(g[L[0]],g[L[1]])}if(E=[...E,{placement:i,overflows:T}],!T.every(L=>L<=0)){var A,I;const L=(((A=a.flip)==null?void 0:A.index)||0)+1,B=_[L];if(B&&(!(h==="alignment"?x!==Io(B):!1)||E.every(D=>D.overflows[0]>0&&Io(D.placement)===x)))return{data:{index:L,overflows:E},reset:{placement:B}};let U=(I=E.filter(V=>V.overflows[0]<=0).sort((V,D)=>V.overflows[1]-D.overflows[1])[0])==null?void 0:I.placement;if(!U)switch(m){case"bestFit":{var k;const V=(k=E.filter(D=>{if(P){const R=Io(D.placement);return R===x||R==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(R=>R>0).reduce((R,W)=>R+W,0)]).sort((D,R)=>D[1]-R[1])[0])==null?void 0:k[0];V&&(U=V);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function w4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function j4(t){return Tce.some(e=>t[e]>=0)}const Uce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Bl(t,e);switch(r){case"referenceHidden":{const a=await bv(e,{...i,elementContext:"reference"}),o=w4(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:j4(o)}}}case"escaped":{const a=await bv(e,{...i,altBoundary:!0}),o=w4(a,n.floating);return{data:{escapedOffsets:o,escaped:j4(o)}}}default:return{}}}}},T8=new Set(["left","top"]);async function zce(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ul(n),l=Up(n),c=Io(n)==="y",u=T8.has(o)?-1:1,d=a&&c?-1:1,h=Bl(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const qce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await zce(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Wce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:b,y:x}=y;return{x:b,y:x}}},...c}=Bl(t,e),u={x:n,y:r},d=await bv(e,c),h=Io(Ul(i)),f=iR(h);let m=u[f],v=u[h];if(a){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=m+d[y],w=m-d[b];m=qT(x,m,w)}if(o){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=v+d[y],w=v-d[b];v=qT(x,v,w)}const p=l.fn({...e,[f]:m,[h]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:a,[h]:o}}}}}},Hce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Bl(t,e),d={x:n,y:r},h=Io(i),f=iR(h);let m=d[f],v=d[h];const p=Bl(l,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=f==="y"?"height":"width",C=a.reference[f]-a.floating[w]+y.mainAxis,S=a.reference[f]+a.reference[w]-y.mainAxis;m<C?m=C:m>S&&(m=S)}if(u){var b,x;const w=f==="y"?"width":"height",C=T8.has(Ul(i)),S=a.reference[h]-a.floating[w]+(C&&((b=o.offset)==null?void 0:b[h])||0)+(C?0:y.crossAxis),P=a.reference[h]+a.reference[w]+(C?0:((x=o.offset)==null?void 0:x[h])||0)-(C?y.crossAxis:0);v<S?v=S:v>P&&(v=P)}return{[f]:m,[h]:v}}}},Kce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Bl(t,e),d=await bv(e,u),h=Ul(i),f=Up(i),m=Io(i)==="y",{width:v,height:p}=a.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,y=f==="end"?"top":"bottom");const x=p-d.top-d.bottom,w=v-d.left-d.right,C=Ru(p-d[y],x),S=Ru(v-d[b],w),P=!e.middlewareData.shift;let _=C,g=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(g=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),P&&!f){const E=ki(d.left,0),A=ki(d.right,0),I=ki(d.top,0),k=ki(d.bottom,0);m?g=v-2*(E!==0||A!==0?E+A:ki(d.left,d.right)):_=p-2*(I!==0||k!==0?I+k:ki(d.top,d.bottom))}await c({...e,availableWidth:g,availableHeight:_});const T=await o.getDimensions(l.floating);return v!==T.width||p!==T.height?{reset:{rects:!0}}:{}}}};function xN(){return typeof window<"u"}function zp(t){return C8(t)?(t.nodeName||"").toLowerCase():"#document"}function Bi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function sl(t){var e;return(e=(C8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function C8(t){return xN()?t instanceof Node||t instanceof Bi(t).Node:!1}function uo(t){return xN()?t instanceof Element||t instanceof Bi(t).Element:!1}function Zo(t){return xN()?t instanceof HTMLElement||t instanceof Bi(t).HTMLElement:!1}function _4(t){return!xN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Bi(t).ShadowRoot}const Gce=new Set(["inline","contents"]);function qx(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ho(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Gce.has(i)}const Yce=new Set(["table","td","th"]);function Qce(t){return Yce.has(zp(t))}const Xce=[":popover-open",":modal"];function bN(t){return Xce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Zce=["transform","translate","scale","rotate","perspective"],Jce=["transform","translate","scale","rotate","perspective","filter"],eue=["paint","layout","strict","content"];function lR(t){const e=cR(),n=uo(t)?ho(t):t;return Zce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Jce.some(r=>(n.willChange||"").includes(r))||eue.some(r=>(n.contain||"").includes(r))}function tue(t){let e=Ou(t);for(;Zo(e)&&!Wm(e);){if(lR(e))return e;if(bN(e))return null;e=Ou(e)}return null}function cR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nue=new Set(["html","body","#document"]);function Wm(t){return nue.has(zp(t))}function ho(t){return Bi(t).getComputedStyle(t)}function wN(t){return uo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ou(t){if(zp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_4(t)&&t.host||sl(t);return _4(e)?e.host:e}function P8(t){const e=Ou(t);return Wm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zo(e)&&qx(e)?e:P8(e)}function wv(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=P8(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Bi(i);if(a){const l=HT(o);return e.concat(o,o.visualViewport||[],qx(i)?i:[],l&&n?wv(l):[])}return e.concat(i,wv(i,[],n))}function HT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function I8(t){const e=ho(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Zo(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Qw(n)!==a||Qw(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function uR(t){return uo(t)?t:t.contextElement}function om(t){const e=uR(t);if(!Zo(e))return Fo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=I8(e);let o=(a?Qw(n.width):n.width)/r,l=(a?Qw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const rue=Fo(0);function k8(t){const e=Bi(t);return!cR()||!e.visualViewport?rue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Bi(t)?!1:e}function jh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=uR(t);let o=Fo(1);e&&(r?uo(r)&&(o=om(r)):o=om(t));const l=sue(a,n,r)?k8(a):Fo(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(a){const f=Bi(a),m=r&&uo(r)?Bi(r):r;let v=f,p=HT(v);for(;p&&r&&m!==v;){const y=om(p),b=p.getBoundingClientRect(),x=ho(p),w=b.left+(p.clientLeft+parseFloat(x.paddingLeft))*y.x,C=b.top+(p.clientTop+parseFloat(x.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=w,u+=C,v=Bi(p),p=HT(v)}}return Zw({width:d,height:h,x:c,y:u})}function dR(t,e){const n=wN(t).scrollLeft;return e?e.left+n:jh(sl(t)).left+n}function R8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:dR(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function iue(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=sl(r),l=e?bN(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Fo(1);const d=Fo(0),h=Zo(r);if((h||!h&&!a)&&((zp(r)!=="body"||qx(o))&&(c=wN(r)),Zo(r))){const m=jh(r);u=om(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!a?R8(o,c,!0):Fo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function aue(t){return Array.from(t.getClientRects())}function oue(t){const e=sl(t),n=wN(t),r=t.ownerDocument.body,i=ki(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=ki(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dR(t);const l=-n.scrollTop;return ho(r).direction==="rtl"&&(o+=ki(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function lue(t,e){const n=Bi(t),r=sl(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=cR();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}const cue=new Set(["absolute","fixed"]);function uue(t,e){const n=jh(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=Zo(t)?om(t):Fo(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function N4(t,e,n){let r;if(e==="viewport")r=lue(t,n);else if(e==="document")r=oue(sl(t));else if(uo(e))r=uue(e,n);else{const i=k8(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Zw(r)}function O8(t,e){const n=Ou(t);return n===e||!uo(n)||Wm(n)?!1:ho(n).position==="fixed"||O8(n,e)}function due(t,e){const n=e.get(t);if(n)return n;let r=wv(t,[],!1).filter(l=>uo(l)&&zp(l)!=="body"),i=null;const a=ho(t).position==="fixed";let o=a?Ou(t):t;for(;uo(o)&&!Wm(o);){const l=ho(o),c=lR(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&cue.has(i.position)||qx(o)&&!c&&O8(t,o))?r=r.filter(d=>d!==o):i=l,o=Ou(o)}return e.set(t,r),r}function hue(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?bN(e)?[]:due(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=N4(e,d,i);return u.top=ki(h.top,u.top),u.right=Ru(h.right,u.right),u.bottom=Ru(h.bottom,u.bottom),u.left=ki(h.left,u.left),u},N4(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fue(t){const{width:e,height:n}=I8(t);return{width:e,height:n}}function mue(t,e,n){const r=Zo(e),i=sl(e),a=n==="fixed",o=jh(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Fo(0);function u(){c.x=dR(i)}if(r||!r&&!a)if((zp(e)!=="body"||qx(i))&&(l=wN(e)),r){const m=jh(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&u();a&&!r&&i&&u();const d=i&&!r&&!a?R8(i,l):Fo(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function hE(t){return ho(t).position==="static"}function S4(t,e){if(!Zo(t)||ho(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return sl(t)===n&&(n=n.ownerDocument.body),n}function D8(t,e){const n=Bi(t);if(bN(t))return n;if(!Zo(t)){let i=Ou(t);for(;i&&!Wm(i);){if(uo(i)&&!hE(i))return i;i=Ou(i)}return n}let r=S4(t,e);for(;r&&Qce(r)&&hE(r);)r=S4(r,e);return r&&Wm(r)&&hE(r)&&!lR(r)?n:r||tue(t)||n}const pue=async function(t){const e=this.getOffsetParent||D8,n=this.getDimensions,r=await n(t.floating);return{reference:mue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gue(t){return ho(t).direction==="rtl"}const yue={convertOffsetParentRelativeRectToViewportRelativeRect:iue,getDocumentElement:sl,getClippingRect:hue,getOffsetParent:D8,getElementRects:pue,getClientRects:aue,getDimensions:fue,getScale:om,isElement:uo,isRTL:gue};function M8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vue(t,e){let n=null,r;const i=sl(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const v=o0(h),p=o0(i.clientWidth-(d+f)),y=o0(i.clientHeight-(h+m)),b=o0(d),w={rootMargin:-v+"px "+-p+"px "+-y+"px "+-b+"px",threshold:ki(0,Ru(1,c))||1};let C=!0;function S(P){const _=P[0].intersectionRatio;if(_!==c){if(!C)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!M8(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return o(!0),a}function xue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=uR(t),d=i||a?[...u?wv(u):[],...wv(e)]:[];d.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const h=u&&l?vue(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let v,p=c?jh(t):null;c&&y();function y(){const b=jh(t);p&&!M8(p,b)&&n(),p=b,v=requestAnimationFrame(y)}return n(),()=>{var b;d.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const bue=qce,wue=Wce,jue=Bce,_ue=Kce,Nue=Uce,E4=Vce,Sue=Hce,Eue=(t,e,n)=>{const r=new Map,i={platform:yue,...n},a={...i.platform,_c:r};return Fce(t,e,{...i,platform:a})};var Aue=typeof document<"u",Tue=function(){},tw=Aue?j.useLayoutEffect:Tue;function Jw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jw(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Jw(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function L8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function A4(t,e){const n=L8(t);return Math.round(e*n)/n}function fE(t){const e=j.useRef(t);return tw(()=>{e.current=t}),e}function Cue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=j.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=j.useState(r);Jw(f,r)||m(r);const[v,p]=j.useState(null),[y,b]=j.useState(null),x=j.useCallback(D=>{D!==P.current&&(P.current=D,p(D))},[]),w=j.useCallback(D=>{D!==_.current&&(_.current=D,b(D))},[]),C=a||v,S=o||y,P=j.useRef(null),_=j.useRef(null),g=j.useRef(d),T=c!=null,E=fE(c),A=fE(i),I=fE(u),k=j.useCallback(()=>{if(!P.current||!_.current)return;const D={placement:e,strategy:n,middleware:f};A.current&&(D.platform=A.current),Eue(P.current,_.current,D).then(R=>{const W={...R,isPositioned:I.current!==!1};L.current&&!Jw(g.current,W)&&(g.current=W,Hh.flushSync(()=>{h(W)}))})},[f,e,n,A,I]);tw(()=>{u===!1&&g.current.isPositioned&&(g.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[u]);const L=j.useRef(!1);tw(()=>(L.current=!0,()=>{L.current=!1}),[]),tw(()=>{if(C&&(P.current=C),S&&(_.current=S),C&&S){if(E.current)return E.current(C,S,k);k()}},[C,S,k,E,T]);const B=j.useMemo(()=>({reference:P,floating:_,setReference:x,setFloating:w}),[x,w]),U=j.useMemo(()=>({reference:C,floating:S}),[C,S]),V=j.useMemo(()=>{const D={position:n,left:0,top:0};if(!U.floating)return D;const R=A4(U.floating,d.x),W=A4(U.floating,d.y);return l?{...D,transform:"translate("+R+"px, "+W+"px)",...L8(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:W}},[n,l,U.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:k,refs:B,elements:U,floatingStyles:V}),[d,k,B,U,V])}const Pue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?E4({element:r.current,padding:i}).fn(n):{}:r?E4({element:r,padding:i}).fn(n):{}}}},Iue=(t,e)=>({...bue(t),options:[t,e]}),kue=(t,e)=>({...wue(t),options:[t,e]}),Rue=(t,e)=>({...Sue(t),options:[t,e]}),Oue=(t,e)=>({...jue(t),options:[t,e]}),Due=(t,e)=>({..._ue(t),options:[t,e]}),Mue=(t,e)=>({...Nue(t),options:[t,e]}),Lue=(t,e)=>({...Pue(t),options:[t,e]});var $ue="Arrow",$8=j.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(st.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});$8.displayName=$ue;var Fue=$8;function hR(t){const[e,n]=j.useState(void 0);return mr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var fR="Popper",[F8,qp]=ps(fR),[Vue,V8]=F8(fR),B8=t=>{const{__scopePopper:e,children:n}=t,[r,i]=j.useState(null);return s.jsx(Vue,{scope:e,anchor:r,onAnchorChange:i,children:n})};B8.displayName=fR;var U8="PopperAnchor",z8=j.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=V8(U8,n),o=j.useRef(null),l=Ft(e,o);return j.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(st.div,{...i,ref:l})});z8.displayName=U8;var mR="PopperContent",[Bue,Uue]=F8(mR),q8=j.forwardRef((t,e)=>{var xe,Be,he,fe,me,ce;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...p}=t,y=V8(mR,n),[b,x]=j.useState(null),w=Ft(e,Ke=>x(Ke)),[C,S]=j.useState(null),P=hR(C),_=(P==null?void 0:P.width)??0,g=(P==null?void 0:P.height)??0,T=r+(a!=="center"?"-"+a:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],I=A.length>0,k={padding:E,boundary:A.filter(que),altBoundary:I},{refs:L,floatingStyles:B,placement:U,isPositioned:V,middlewareData:D}=Cue({strategy:"fixed",placement:T,whileElementsMounted:(...Ke)=>xue(...Ke,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Iue({mainAxis:i+g,alignmentAxis:o}),c&&kue({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Rue():void 0,...k}),c&&Oue({...k}),Due({...k,apply:({elements:Ke,rects:rt,availableWidth:zt,availableHeight:nn})=>{const{width:En,height:Hr}=rt.reference,on=Ke.floating.style;on.setProperty("--radix-popper-available-width",`${zt}px`),on.setProperty("--radix-popper-available-height",`${nn}px`),on.setProperty("--radix-popper-anchor-width",`${En}px`),on.setProperty("--radix-popper-anchor-height",`${Hr}px`)}}),C&&Lue({element:C,padding:l}),Wue({arrowWidth:_,arrowHeight:g}),f&&Mue({strategy:"referenceHidden",...k})]}),[R,W]=K8(U),J=hr(v);mr(()=>{V&&(J==null||J())},[V,J]);const oe=(xe=D.arrow)==null?void 0:xe.x,Ae=(Be=D.arrow)==null?void 0:Be.y,z=((he=D.arrow)==null?void 0:he.centerOffset)!==0,[ie,ve]=j.useState();return mr(()=>{b&&ve(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:V?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(fe=D.transformOrigin)==null?void 0:fe.x,(me=D.transformOrigin)==null?void 0:me.y].join(" "),...((ce=D.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(Bue,{scope:n,placedSide:R,onArrowChange:S,arrowX:oe,arrowY:Ae,shouldHideArrow:z,children:s.jsx(st.div,{"data-side":R,"data-align":W,...p,ref:w,style:{...p.style,animation:V?void 0:"none"}})})})});q8.displayName=mR;var W8="PopperArrow",zue={top:"bottom",right:"left",bottom:"top",left:"right"},H8=j.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=Uue(W8,r),o=zue[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Fue,{...i,ref:n,style:{...i.style,display:"block"}})})});H8.displayName=W8;function que(t){return t!==null}var Wue=t=>({name:"transformOrigin",options:t,fn(e){var y,b,x;const{placement:n,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=K8(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,m=(((x=i.arrow)==null?void 0:x.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=o?h:`${f}px`,p=`${-c}px`):u==="top"?(v=o?h:`${f}px`,p=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=o?h:`${m}px`):u==="left"&&(v=`${r.floating.width+c}px`,p=o?h:`${m}px`),{data:{x:v,y:p}}}});function K8(t){const[e,n="center"]=t.split("-");return[e,n]}var pR=B8,gR=z8,yR=q8,vR=H8,[jN,Dtt]=ps("Tooltip",[qp]),_N=qp(),G8="TooltipProvider",Hue=700,KT="tooltip.open",[Kue,xR]=jN(G8),Y8=t=>{const{__scopeTooltip:e,delayDuration:n=Hue,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=t,o=j.useRef(!0),l=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(Kue,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:j.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:a})};Y8.displayName=G8;var jv="Tooltip",[Gue,NN]=jN(jv),Q8=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=xR(jv,t.__scopeTooltip),u=_N(e),[d,h]=j.useState(null),f=ca(),m=j.useRef(0),v=o??c.disableHoverableContent,p=l??c.delayDuration,y=j.useRef(!1),[b,x]=lo({prop:r,defaultProp:i??!1,onChange:_=>{_?(c.onOpen(),document.dispatchEvent(new CustomEvent(KT))):c.onClose(),a==null||a(_)},caller:jv}),w=j.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),C=j.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,x(!0)},[x]),S=j.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),P=j.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,x(!0),m.current=0},p)},[p,x]);return j.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(pR,{...u,children:s.jsx(Gue,{scope:e,contentId:f,open:b,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:j.useCallback(()=>{c.isOpenDelayedRef.current?P():C()},[c.isOpenDelayedRef,P,C]),onTriggerLeave:j.useCallback(()=>{v?S():(window.clearTimeout(m.current),m.current=0)},[S,v]),onOpen:C,onClose:S,disableHoverableContent:v,children:n})})};Q8.displayName=jv;var GT="TooltipTrigger",X8=j.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=NN(GT,n),a=xR(GT,n),o=_N(n),l=j.useRef(null),c=Ft(e,l,i.onTriggerChange),u=j.useRef(!1),d=j.useRef(!1),h=j.useCallback(()=>u.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(gR,{asChild:!0,...o,children:s.jsx(st.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:$e(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:$e(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:$e(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:$e(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:$e(t.onBlur,i.onClose),onClick:$e(t.onClick,i.onClose)})})});X8.displayName=GT;var Yue="TooltipPortal",[Mtt,Que]=jN(Yue,{forceMount:void 0}),Hm="TooltipContent",Z8=j.forwardRef((t,e)=>{const n=Que(Hm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=t,o=NN(Hm,t.__scopeTooltip);return s.jsx(gs,{present:r||o.open,children:o.disableHoverableContent?s.jsx(J8,{side:i,...a,ref:e}):s.jsx(Xue,{side:i,...a,ref:e})})}),Xue=j.forwardRef((t,e)=>{const n=NN(Hm,t.__scopeTooltip),r=xR(Hm,t.__scopeTooltip),i=j.useRef(null),a=Ft(e,i),[o,l]=j.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,f=j.useCallback(()=>{l(null),h(!1)},[h]),m=j.useCallback((v,p)=>{const y=v.currentTarget,b={x:v.clientX,y:v.clientY},x=nde(b,y.getBoundingClientRect()),w=rde(b,x),C=sde(p.getBoundingClientRect()),S=ade([...w,...C]);l(S),h(!0)},[h]);return j.useEffect(()=>()=>f(),[f]),j.useEffect(()=>{if(c&&d){const v=y=>m(y,d),p=y=>m(y,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",p)}}},[c,d,m,f]),j.useEffect(()=>{if(o){const v=p=>{const y=p.target,b={x:p.clientX,y:p.clientY},x=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),w=!ide(b,o);x?f():w&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),s.jsx(J8,{...t,ref:a})}),[Zue,Jue]=jN(jv,{isInside:!1}),ede=R9("TooltipContent"),J8=j.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=NN(Hm,n),u=_N(n),{onClose:d}=c;return j.useEffect(()=>(document.addEventListener(KT,d),()=>document.removeEventListener(KT,d)),[d]),j.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx($p,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(yR,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(ede,{children:r}),s.jsx(Zue,{scope:n,isInside:!0,children:s.jsx(goe,{id:c.contentId,role:"tooltip",children:i||r})})]})})});Z8.displayName=Hm;var eW="TooltipArrow",tde=j.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=_N(n);return Jue(eW,n).isInside?null:s.jsx(vR,{...i,...r,ref:e})});tde.displayName=eW;function nde(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rde(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function sde(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function ide(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function ade(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ode(e)}function ode(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var lde=Y8,cde=Q8,ude=X8,tW=Z8;const nW=lde,dde=cde,hde=ude,rW=j.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(tW,{ref:r,sideOffset:e,className:_e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));rW.displayName=tW.displayName;var Wp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_h=typeof window>"u"||"Deno"in globalThis;function zs(){}function fde(t,e){return typeof t=="function"?t(e):t}function YT(t){return typeof t=="number"&&t>=0&&t!==1/0}function sW(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bu(t,e){return typeof t=="function"?t(e):t}function Ji(t,e){return typeof t=="function"?t(e):t}function T4(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==bR(o,e.options))return!1}else if(!_v(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||a&&!a(e))}function C4(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Nh(e.options.mutationKey)!==Nh(a))return!1}else if(!_v(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function bR(t,e){return((e==null?void 0:e.queryKeyHashFn)||Nh)(t)}function Nh(t){return JSON.stringify(t,(e,n)=>QT(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function _v(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>_v(t[n],e[n])):!1}function iW(t,e){if(t===e)return t;const n=P4(t)&&P4(e);if(n||QT(t)&&QT(e)){const r=n?t:Object.keys(t),i=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=iW(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function ej(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function P4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function QT(t){if(!I4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!I4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function I4(t){return Object.prototype.toString.call(t)==="[object Object]"}function mde(t){return new Promise(e=>{setTimeout(e,t)})}function XT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?iW(t,e):e}function pde(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gde(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var wR=Symbol();function aW(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function oW(t,e){return typeof t=="function"?t(...e):!!t}var Yd,Kc,_m,lz,yde=(lz=class extends Wp{constructor(){super();Nt(this,Yd);Nt(this,Kc);Nt(this,_m);Qe(this,_m,e=>{if(!_h&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){te(this,Kc)||this.setEventListener(te(this,_m))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Kc))==null||e.call(this),Qe(this,Kc,void 0))}setEventListener(e){var n;Qe(this,_m,e),(n=te(this,Kc))==null||n.call(this),Qe(this,Kc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){te(this,Yd)!==e&&(Qe(this,Yd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof te(this,Yd)=="boolean"?te(this,Yd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Yd=new WeakMap,Kc=new WeakMap,_m=new WeakMap,lz),jR=new yde,Nm,Gc,Sm,cz,vde=(cz=class extends Wp{constructor(){super();Nt(this,Nm,!0);Nt(this,Gc);Nt(this,Sm);Qe(this,Sm,e=>{if(!_h&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){te(this,Gc)||this.setEventListener(te(this,Sm))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Gc))==null||e.call(this),Qe(this,Gc,void 0))}setEventListener(e){var n;Qe(this,Sm,e),(n=te(this,Gc))==null||n.call(this),Qe(this,Gc,e(this.setOnline.bind(this)))}setOnline(e){te(this,Nm)!==e&&(Qe(this,Nm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return te(this,Nm)}},Nm=new WeakMap,Gc=new WeakMap,Sm=new WeakMap,cz),tj=new vde;function ZT(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function xde(t){return Math.min(1e3*2**t,3e4)}function lW(t){return(t??"online")==="online"?tj.isOnline():!0}var cW=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function mE(t){return t instanceof cW}function uW(t){let e=!1,n=0,r=!1,i;const a=ZT(),o=p=>{var y;r||(f(new cW(p)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>jR.isFocused()&&(t.networkMode==="always"||tj.isOnline())&&t.canRun(),d=()=>lW(t.networkMode)&&t.canRun(),h=p=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,p),i==null||i(),a.resolve(p))},f=p=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,p),i==null||i(),a.reject(p))},m=()=>new Promise(p=>{var y;i=b=>{(r||u())&&p(b)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;i=void 0,r||(p=t.onContinue)==null||p.call(t)}),v=()=>{if(r)return;let p;const y=n===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(h).catch(b=>{var P;if(r)return;const x=t.retry??(_h?0:3),w=t.retryDelay??xde,C=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!S){f(b);return}n++,(P=t.onFail)==null||P.call(t,n,b),mde(C).then(()=>u()?void 0:m()).then(()=>{e?f(b):v()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),a)}}var bde=t=>setTimeout(t,0);function wde(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=bde;const a=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Fr=wde(),Qd,uz,dW=(uz=class{constructor(){Nt(this,Qd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),YT(this.gcTime)&&Qe(this,Qd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_h?1/0:5*60*1e3))}clearGcTimeout(){te(this,Qd)&&(clearTimeout(te(this,Qd)),Qe(this,Qd,void 0))}},Qd=new WeakMap,uz),Em,Xd,Zi,Zd,ws,Px,Jd,La,ml,dz,jde=(dz=class extends dW{constructor(n){super();Nt(this,La);Nt(this,Em);Nt(this,Xd);Nt(this,Zi);Nt(this,Zd);Nt(this,ws);Nt(this,Px);Nt(this,Jd);Qe(this,Jd,!1),Qe(this,Px,n.defaultOptions),this.setOptions(n.options),this.observers=[],Qe(this,Zd,n.client),Qe(this,Zi,te(this,Zd).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Qe(this,Em,_de(this.options)),this.state=n.state??te(this,Em),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=te(this,ws))==null?void 0:n.promise}setOptions(n){this.options={...te(this,Px),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,Zi).remove(this)}setData(n,r){const i=XT(this.state.data,n,this.options);return Ht(this,La,ml).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){Ht(this,La,ml).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,a;const r=(i=te(this,ws))==null?void 0:i.promise;return(a=te(this,ws))==null||a.cancel(n),r?r.then(zs).catch(zs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,Em))}isActive(){return this.observers.some(n=>Ji(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>bu(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!sW(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=te(this,ws))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=te(this,ws))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),te(this,Zi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(te(this,ws)&&(te(this,Jd)?te(this,ws).cancel({revert:!0}):te(this,ws).cancelRetry()),this.scheduleGc()),te(this,Zi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,La,ml).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(te(this,ws))return te(this,ws).continueRetry(),te(this,ws).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(v=>v.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Qe(this,Jd,!0),i.signal)})},o=()=>{const m=aW(this.options,r),p=(()=>{const y={client:te(this,Zd),queryKey:this.queryKey,meta:this.meta};return a(y),y})();return Qe(this,Jd,!1),this.options.persister?this.options.persister(m,p,this):m(p)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:te(this,Zd),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),Qe(this,Xd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Ht(this,La,ml).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var v,p,y,b;mE(m)&&m.silent||Ht(this,La,ml).call(this,{type:"error",error:m}),mE(m)||((p=(v=te(this,Zi).config).onError)==null||p.call(v,m,this),(b=(y=te(this,Zi).config).onSettled)==null||b.call(y,this.state.data,m,this)),this.scheduleGc()};return Qe(this,ws,uW({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var v,p,y,b;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){u(x);return}(p=(v=te(this,Zi).config).onSuccess)==null||p.call(v,m,this),(b=(y=te(this,Zi).config).onSettled)==null||b.call(y,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,v)=>{Ht(this,La,ml).call(this,{type:"failed",failureCount:m,error:v})},onPause:()=>{Ht(this,La,ml).call(this,{type:"pause"})},onContinue:()=>{Ht(this,La,ml).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),te(this,ws).start()}},Em=new WeakMap,Xd=new WeakMap,Zi=new WeakMap,Zd=new WeakMap,ws=new WeakMap,Px=new WeakMap,Jd=new WeakMap,La=new WeakSet,ml=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...hW(i.data,this.options),fetchMeta:n.meta??null};case"success":return Qe(this,Xd,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return mE(a)&&a.revert&&te(this,Xd)?{...te(this,Xd),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Fr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),te(this,Zi).notify({query:this,type:"updated",action:n})})},dz);function hW(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lW(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _de(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var So,hz,Nde=(hz=class extends Wp{constructor(e={}){super();Nt(this,So);this.config=e,Qe(this,So,new Map)}build(e,n,r){const i=n.queryKey,a=n.queryHash??bR(i,n);let o=this.get(a);return o||(o=new jde({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){te(this,So).has(e.queryHash)||(te(this,So).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=te(this,So).get(e.queryHash);n&&(e.destroy(),n===e&&te(this,So).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return te(this,So).get(e)}getAll(){return[...te(this,So).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>T4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>T4(e,r)):n}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},So=new WeakMap,hz),Eo,Vs,eh,Ao,Tc,fz,Sde=(fz=class extends dW{constructor(n){super();Nt(this,Ao);Nt(this,Eo);Nt(this,Vs);Nt(this,eh);this.mutationId=n.mutationId,Qe(this,Vs,n.mutationCache),Qe(this,Eo,[]),this.state=n.state||fW(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){te(this,Eo).includes(n)||(te(this,Eo).push(n),this.clearGcTimeout(),te(this,Vs).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Qe(this,Eo,te(this,Eo).filter(r=>r!==n)),this.scheduleGc(),te(this,Vs).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){te(this,Eo).length||(this.state.status==="pending"?this.scheduleGc():te(this,Vs).remove(this))}continue(){var n;return((n=te(this,eh))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,d,h,f,m,v,p,y,b,x,w,C,S,P,_,g,T;const r=()=>{Ht(this,Ao,Tc).call(this,{type:"continue"})};Qe(this,eh,uW({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{Ht(this,Ao,Tc).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Ht(this,Ao,Tc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Vs).canRun(this)}));const i=this.state.status==="pending",a=!te(this,eh).canStart();try{if(i)r();else{Ht(this,Ao,Tc).call(this,{type:"pending",variables:n,isPaused:a}),await((l=(o=te(this,Vs).config).onMutate)==null?void 0:l.call(o,n,this));const A=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));A!==this.state.context&&Ht(this,Ao,Tc).call(this,{type:"pending",context:A,variables:n,isPaused:a})}const E=await te(this,eh).start();return await((h=(d=te(this,Vs).config).onSuccess)==null?void 0:h.call(d,E,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,E,n,this.state.context)),await((p=(v=te(this,Vs).config).onSettled)==null?void 0:p.call(v,E,null,this.state.variables,this.state.context,this)),await((b=(y=this.options).onSettled)==null?void 0:b.call(y,E,null,n,this.state.context)),Ht(this,Ao,Tc).call(this,{type:"success",data:E}),E}catch(E){try{throw await((w=(x=te(this,Vs).config).onError)==null?void 0:w.call(x,E,n,this.state.context,this)),await((S=(C=this.options).onError)==null?void 0:S.call(C,E,n,this.state.context)),await((_=(P=te(this,Vs).config).onSettled)==null?void 0:_.call(P,void 0,E,this.state.variables,this.state.context,this)),await((T=(g=this.options).onSettled)==null?void 0:T.call(g,void 0,E,n,this.state.context)),E}finally{Ht(this,Ao,Tc).call(this,{type:"error",error:E})}}finally{te(this,Vs).runNext(this)}}},Eo=new WeakMap,Vs=new WeakMap,eh=new WeakMap,Ao=new WeakSet,Tc=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fr.batch(()=>{te(this,Eo).forEach(i=>{i.onMutationUpdate(n)}),te(this,Vs).notify({mutation:this,type:"updated",action:n})})},fz);function fW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vl,$a,Ix,mz,Ede=(mz=class extends Wp{constructor(e={}){super();Nt(this,vl);Nt(this,$a);Nt(this,Ix);this.config=e,Qe(this,vl,new Set),Qe(this,$a,new Map),Qe(this,Ix,0)}build(e,n,r){const i=new Sde({mutationCache:this,mutationId:++Fb(this,Ix)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){te(this,vl).add(e);const n=l0(e);if(typeof n=="string"){const r=te(this,$a).get(n);r?r.push(e):te(this,$a).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(te(this,vl).delete(e)){const n=l0(e);if(typeof n=="string"){const r=te(this,$a).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&te(this,$a).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=l0(e);if(typeof n=="string"){const r=te(this,$a).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=l0(e);if(typeof n=="string"){const i=(r=te(this,$a).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fr.batch(()=>{te(this,vl).forEach(e=>{this.notify({type:"removed",mutation:e})}),te(this,vl).clear(),te(this,$a).clear()})}getAll(){return Array.from(te(this,vl))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>C4(n,r))}findAll(e={}){return this.getAll().filter(n=>C4(e,n))}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(zs))))}},vl=new WeakMap,$a=new WeakMap,Ix=new WeakMap,mz);function l0(t){var e;return(e=t.options.scope)==null?void 0:e.id}function k4(t){return{onFetch:(e,n)=>{var d,h,f,m,v;const r=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=aW(e.options,e.fetchOptions),x=async(w,C,S)=>{if(p)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const _=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:C,direction:S?"backward":"forward",meta:e.options.meta};return y(A),A})(),g=await b(_),{maxPages:T}=e.options,E=S?gde:pde;return{pages:E(w.pages,g,T),pageParams:E(w.pageParams,C,T)}};if(i&&a.length){const w=i==="backward",C=w?Ade:R4,S={pages:a,pageParams:o},P=C(r,S);l=await x(S,P,w)}else{const w=t??a.length;do{const C=c===0?o[0]??r.initialPageParam:R4(r,l);if(c>0&&C==null)break;l=await x(l,C),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function R4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Ade(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var or,Yc,Qc,Am,Tm,Xc,Cm,Pm,pz,Tde=(pz=class{constructor(t={}){Nt(this,or);Nt(this,Yc);Nt(this,Qc);Nt(this,Am);Nt(this,Tm);Nt(this,Xc);Nt(this,Cm);Nt(this,Pm);Qe(this,or,t.queryCache||new Nde),Qe(this,Yc,t.mutationCache||new Ede),Qe(this,Qc,t.defaultOptions||{}),Qe(this,Am,new Map),Qe(this,Tm,new Map),Qe(this,Xc,0)}mount(){Fb(this,Xc)._++,te(this,Xc)===1&&(Qe(this,Cm,jR.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,or).onFocus())})),Qe(this,Pm,tj.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,or).onOnline())})))}unmount(){var t,e;Fb(this,Xc)._--,te(this,Xc)===0&&((t=te(this,Cm))==null||t.call(this),Qe(this,Cm,void 0),(e=te(this,Pm))==null||e.call(this),Qe(this,Pm,void 0))}isFetching(t){return te(this,or).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return te(this,Yc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,or).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=te(this,or).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(bu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return te(this,or).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=te(this,or).get(r.queryHash),a=i==null?void 0:i.state.data,o=fde(e,a);if(o!==void 0)return te(this,or).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Fr.batch(()=>te(this,or).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,or).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=te(this,or);Fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=te(this,or);return Fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Fr.batch(()=>te(this,or).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(zs).catch(zs)}invalidateQueries(t,e={}){return Fr.batch(()=>(te(this,or).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Fr.batch(()=>te(this,or).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(zs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(zs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=te(this,or).build(this,e);return n.isStaleByTime(bu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(zs).catch(zs)}fetchInfiniteQuery(t){return t.behavior=k4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(zs).catch(zs)}ensureInfiniteQueryData(t){return t.behavior=k4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tj.isOnline()?te(this,Yc).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,or)}getMutationCache(){return te(this,Yc)}getDefaultOptions(){return te(this,Qc)}setDefaultOptions(t){Qe(this,Qc,t)}setQueryDefaults(t,e){te(this,Am).set(Nh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...te(this,Am).values()],n={};return e.forEach(r=>{_v(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){te(this,Tm).set(Nh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...te(this,Tm).values()],n={};return e.forEach(r=>{_v(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...te(this,Qc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...te(this,Qc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){te(this,or).clear(),te(this,Yc).clear()}},or=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Am=new WeakMap,Tm=new WeakMap,Xc=new WeakMap,Cm=new WeakMap,Pm=new WeakMap,pz),si,en,kx,Bs,th,Im,Zc,Jc,Rx,km,Rm,nh,rh,eu,Om,yn,fy,JT,eC,tC,nC,rC,sC,iC,mW,gz,Cde=(gz=class extends Wp{constructor(e,n){super();Nt(this,yn);Nt(this,si);Nt(this,en);Nt(this,kx);Nt(this,Bs);Nt(this,th);Nt(this,Im);Nt(this,Zc);Nt(this,Jc);Nt(this,Rx);Nt(this,km);Nt(this,Rm);Nt(this,nh);Nt(this,rh);Nt(this,eu);Nt(this,Om,new Set);this.options=n,Qe(this,si,e),Qe(this,Jc,null),Qe(this,Zc,ZT()),this.options.experimental_prefetchInRender||te(this,Zc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,en).addObserver(this),O4(te(this,en),this.options)?Ht(this,yn,fy).call(this):this.updateResult(),Ht(this,yn,nC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return aC(te(this,en),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return aC(te(this,en),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,yn,rC).call(this),Ht(this,yn,sC).call(this),te(this,en).removeObserver(this)}setOptions(e){const n=this.options,r=te(this,en);if(this.options=te(this,si).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ji(this.options.enabled,te(this,en))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,yn,iC).call(this),te(this,en).setOptions(this.options),n._defaulted&&!ej(this.options,n)&&te(this,si).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,en),observer:this});const i=this.hasListeners();i&&D4(te(this,en),r,this.options,n)&&Ht(this,yn,fy).call(this),this.updateResult(),i&&(te(this,en)!==r||Ji(this.options.enabled,te(this,en))!==Ji(n.enabled,te(this,en))||bu(this.options.staleTime,te(this,en))!==bu(n.staleTime,te(this,en)))&&Ht(this,yn,JT).call(this);const a=Ht(this,yn,eC).call(this);i&&(te(this,en)!==r||Ji(this.options.enabled,te(this,en))!==Ji(n.enabled,te(this,en))||a!==te(this,eu))&&Ht(this,yn,tC).call(this,a)}getOptimisticResult(e){const n=te(this,si).getQueryCache().build(te(this,si),e),r=this.createResult(n,e);return Ide(this,r)&&(Qe(this,Bs,r),Qe(this,Im,this.options),Qe(this,th,te(this,en).state)),r}getCurrentResult(){return te(this,Bs)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),Reflect.get(r,i))})}trackProp(e){te(this,Om).add(e)}getCurrentQuery(){return te(this,en)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=te(this,si).defaultQueryOptions(e),r=te(this,si).getQueryCache().build(te(this,si),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ht(this,yn,fy).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,Bs)))}createResult(e,n){var T;const r=te(this,en),i=this.options,a=te(this,Bs),o=te(this,th),l=te(this,Im),u=e!==r?e.state:te(this,kx),{state:d}=e;let h={...d},f=!1,m;if(n._optimisticResults){const E=this.hasListeners(),A=!E&&O4(e,n),I=E&&D4(e,r,n,i);(A||I)&&(h={...h,...hW(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:y}=h;m=h.data;let b=!1;if(n.placeholderData!==void 0&&m===void 0&&y==="pending"){let E;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=a.data,b=!0):E=typeof n.placeholderData=="function"?n.placeholderData((T=te(this,Rm))==null?void 0:T.state.data,te(this,Rm)):n.placeholderData,E!==void 0&&(y="success",m=XT(a==null?void 0:a.data,E,n),f=!0)}if(n.select&&m!==void 0&&!b)if(a&&m===(o==null?void 0:o.data)&&n.select===te(this,Rx))m=te(this,km);else try{Qe(this,Rx,n.select),m=n.select(m),m=XT(a==null?void 0:a.data,m,n),Qe(this,km,m),Qe(this,Jc,null)}catch(E){Qe(this,Jc,E)}te(this,Jc)&&(v=te(this,Jc),m=te(this,km),p=Date.now(),y="error");const x=h.fetchStatus==="fetching",w=y==="pending",C=y==="error",S=w&&x,P=m!==void 0,g={status:y,fetchStatus:h.fetchStatus,isPending:w,isSuccess:y==="success",isError:C,isInitialLoading:S,isLoading:S,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:C&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:C&&P,isStale:_R(e,n),refetch:this.refetch,promise:te(this,Zc),isEnabled:Ji(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=k=>{g.status==="error"?k.reject(g.error):g.data!==void 0&&k.resolve(g.data)},A=()=>{const k=Qe(this,Zc,g.promise=ZT());E(k)},I=te(this,Zc);switch(I.status){case"pending":e.queryHash===r.queryHash&&E(I);break;case"fulfilled":(g.status==="error"||g.data!==I.value)&&A();break;case"rejected":(g.status!=="error"||g.error!==I.reason)&&A();break}}return g}updateResult(){const e=te(this,Bs),n=this.createResult(te(this,en),this.options);if(Qe(this,th,te(this,en).state),Qe(this,Im,this.options),te(this,th).data!==void 0&&Qe(this,Rm,te(this,en)),ej(n,e))return;Qe(this,Bs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!te(this,Om).size)return!0;const o=new Set(a??te(this,Om));return this.options.throwOnError&&o.add("error"),Object.keys(te(this,Bs)).some(l=>{const c=l;return te(this,Bs)[c]!==e[c]&&o.has(c)})};Ht(this,yn,mW).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,yn,nC).call(this)}},si=new WeakMap,en=new WeakMap,kx=new WeakMap,Bs=new WeakMap,th=new WeakMap,Im=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Rx=new WeakMap,km=new WeakMap,Rm=new WeakMap,nh=new WeakMap,rh=new WeakMap,eu=new WeakMap,Om=new WeakMap,yn=new WeakSet,fy=function(e){Ht(this,yn,iC).call(this);let n=te(this,en).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(zs)),n},JT=function(){Ht(this,yn,rC).call(this);const e=bu(this.options.staleTime,te(this,en));if(_h||te(this,Bs).isStale||!YT(e))return;const r=sW(te(this,Bs).dataUpdatedAt,e)+1;Qe(this,nh,setTimeout(()=>{te(this,Bs).isStale||this.updateResult()},r))},eC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,en)):this.options.refetchInterval)??!1},tC=function(e){Ht(this,yn,sC).call(this),Qe(this,eu,e),!(_h||Ji(this.options.enabled,te(this,en))===!1||!YT(te(this,eu))||te(this,eu)===0)&&Qe(this,rh,setInterval(()=>{(this.options.refetchIntervalInBackground||jR.isFocused())&&Ht(this,yn,fy).call(this)},te(this,eu)))},nC=function(){Ht(this,yn,JT).call(this),Ht(this,yn,tC).call(this,Ht(this,yn,eC).call(this))},rC=function(){te(this,nh)&&(clearTimeout(te(this,nh)),Qe(this,nh,void 0))},sC=function(){te(this,rh)&&(clearInterval(te(this,rh)),Qe(this,rh,void 0))},iC=function(){const e=te(this,si).getQueryCache().build(te(this,si),this.options);if(e===te(this,en))return;const n=te(this,en);Qe(this,en,e),Qe(this,kx,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},mW=function(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(te(this,Bs))}),te(this,si).getQueryCache().notify({query:te(this,en),type:"observerResultsUpdated"})})},gz);function Pde(t,e){return Ji(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function O4(t,e){return Pde(t,e)||t.state.data!==void 0&&aC(t,e,e.refetchOnMount)}function aC(t,e,n){if(Ji(e.enabled,t)!==!1&&bu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_R(t,e)}return!1}function D4(t,e,n,r){return(t!==e||Ji(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_R(t,n)}function _R(t,e){return Ji(e.enabled,t)!==!1&&t.isStaleByTime(bu(e.staleTime,t))}function Ide(t,e){return!ej(t.getCurrentResult(),e)}var tu,nu,ii,xl,Ml,nw,oC,yz,kde=(yz=class extends Wp{constructor(n,r){super();Nt(this,Ml);Nt(this,tu);Nt(this,nu);Nt(this,ii);Nt(this,xl);Qe(this,tu,n),this.setOptions(r),this.bindMethods(),Ht(this,Ml,nw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=te(this,tu).defaultMutationOptions(n),ej(this.options,r)||te(this,tu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:te(this,ii),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Nh(r.mutationKey)!==Nh(this.options.mutationKey)?this.reset():((i=te(this,ii))==null?void 0:i.state.status)==="pending"&&te(this,ii).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=te(this,ii))==null||n.removeObserver(this)}onMutationUpdate(n){Ht(this,Ml,nw).call(this),Ht(this,Ml,oC).call(this,n)}getCurrentResult(){return te(this,nu)}reset(){var n;(n=te(this,ii))==null||n.removeObserver(this),Qe(this,ii,void 0),Ht(this,Ml,nw).call(this),Ht(this,Ml,oC).call(this)}mutate(n,r){var i;return Qe(this,xl,r),(i=te(this,ii))==null||i.removeObserver(this),Qe(this,ii,te(this,tu).getMutationCache().build(te(this,tu),this.options)),te(this,ii).addObserver(this),te(this,ii).execute(n)}},tu=new WeakMap,nu=new WeakMap,ii=new WeakMap,xl=new WeakMap,Ml=new WeakSet,nw=function(){var r;const n=((r=te(this,ii))==null?void 0:r.state)??fW();Qe(this,nu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},oC=function(n){Fr.batch(()=>{var r,i,a,o,l,c,u,d;if(te(this,xl)&&this.hasListeners()){const h=te(this,nu).variables,f=te(this,nu).context;(n==null?void 0:n.type)==="success"?((i=(r=te(this,xl)).onSuccess)==null||i.call(r,n.data,h,f),(o=(a=te(this,xl)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=te(this,xl)).onError)==null||c.call(l,n.error,h,f),(d=(u=te(this,xl)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(te(this,nu))})})},yz),pW=j.createContext(void 0),Jt=t=>{const e=j.useContext(pW);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Rde=({client:t,children:e})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(pW.Provider,{value:t,children:e})),gW=j.createContext(!1),Ode=()=>j.useContext(gW);gW.Provider;function Dde(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Mde=j.createContext(Dde()),Lde=()=>j.useContext(Mde),$de=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Fde=t=>{j.useEffect(()=>{t.clearReset()},[t])},Vde=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||oW(n,[t.error,r])),Bde=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ude=(t,e)=>t.isLoading&&t.isFetching&&!e,zde=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,M4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function qde(t,e,n){var h,f,m,v,p;const r=Ode(),i=Lde(),a=Jt(),o=a.defaultQueryOptions(t);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Bde(o),$de(o,i),Fde(i);const l=!a.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new e(a,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(y=>{const b=d?c.subscribe(Fr.batchCalls(y)):zs;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o)},[o,c]),zde(o,u))throw M4(o,c,i);if(Vde({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||v.call(m,o,u),o.experimental_prefetchInRender&&!_h&&Ude(u,r)){const y=l?M4(o,c,i):(p=a.getQueryCache().get(o.queryHash))==null?void 0:p.promise;y==null||y.catch(zs).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ee(t,e){return qde(t,Cde)}function qe(t,e){const n=Jt(),[r]=j.useState(()=>new kde(n,t));j.useEffect(()=>{r.setOptions(t)},[r,t]);const i=j.useSyncExternalStore(j.useCallback(o=>r.subscribe(Fr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=j.useCallback((o,l)=>{r.mutate(o,l).catch(zs)},[r]);if(i.error&&oW(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nv(){return Nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nv.apply(this,arguments)}var iu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(iu||(iu={}));const L4="popstate";function Wde(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:l}=r.location;return lC("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nj(i)}return Kde(e,n,null,t)}function wr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hde(){return Math.random().toString(36).substr(2,8)}function $4(t,e){return{usr:t.state,key:t.key,idx:e}}function lC(t,e,n,r){return n===void 0&&(n=null),Nv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hp(e):e,{state:n,key:e&&e.key||r||Hde()})}function nj(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Kde(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=iu.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Nv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=iu.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:p.location,delta:b})}function f(y,b){l=iu.Push;let x=lC(p.location,y,b);u=d()+1;let w=$4(x,u),C=p.createHref(x);try{o.pushState(w,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(C)}a&&c&&c({action:l,location:p.location,delta:1})}function m(y,b){l=iu.Replace;let x=lC(p.location,y,b);u=d();let w=$4(x,u),C=p.createHref(x);o.replaceState(w,"",C),a&&c&&c({action:l,location:p.location,delta:0})}function v(y){let b=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof y=="string"?y:nj(y);return x=x.replace(/ $/,"%20"),wr(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let p={get action(){return l},get location(){return t(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(L4,h),c=y,()=>{i.removeEventListener(L4,h),c=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let b=v(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return o.go(y)}};return p}var F4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F4||(F4={}));function Gde(t,e,n){return n===void 0&&(n="/"),Yde(t,e,n,!1)}function Yde(t,e,n,r){let i=typeof e=="string"?Hp(e):e,a=NR(i.pathname||"/",n);if(a==null)return null;let o=vW(t);Qde(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=ohe(a);l=ihe(o[c],u,r)}return l}function vW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(wr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=wu([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),vW(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:rhe(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of xW(a.path))i(a,o,c)}),e}function xW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=xW(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Qde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:she(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Xde=/^:[\w-]+$/,Zde=3,Jde=2,ehe=1,the=10,nhe=-2,V4=t=>t==="*";function rhe(t,e){let n=t.split("/"),r=n.length;return n.some(V4)&&(r+=nhe),e&&(r+=Jde),n.filter(i=>!V4(i)).reduce((i,a)=>i+(Xde.test(a)?Zde:a===""?ehe:the),r)}function she(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ihe(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=B4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=B4({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:wu([a,h.pathname]),pathnameBase:dhe(wu([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=wu([a,h.pathnameBase]))}return o}function B4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ahe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=l[h]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[h];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function ahe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ohe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function NR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lhe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Hp(t):t;return{pathname:n?n.startsWith("/")?n:che(n,e):e,search:hhe(r),hash:fhe(i)}}function che(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function pE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uhe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SR(t,e){let n=uhe(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ER(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Hp(t):(i=Nv({},t),wr(!i.pathname||!i.pathname.includes("?"),pE("?","pathname","search",i)),wr(!i.pathname||!i.pathname.includes("#"),pE("#","pathname","hash",i)),wr(!i.search||!i.search.includes("#"),pE("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=lhe(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const wu=t=>t.join("/").replace(/\/\/+/g,"/"),dhe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hhe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fhe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mhe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bW=["post","put","patch","delete"];new Set(bW);const phe=["get",...bW];new Set(phe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sv.apply(this,arguments)}const AR=j.createContext(null),ghe=j.createContext(null),Zu=j.createContext(null),SN=j.createContext(null),ic=j.createContext({outlet:null,matches:[],isDataRoute:!1}),wW=j.createContext(null);function yhe(t,e){let{relative:n}=e===void 0?{}:e;Kp()||wr(!1);let{basename:r,navigator:i}=j.useContext(Zu),{hash:a,pathname:o,search:l}=_W(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:wu([r,o])),i.createHref({pathname:c,search:l,hash:a})}function Kp(){return j.useContext(SN)!=null}function il(){return Kp()||wr(!1),j.useContext(SN).location}function jW(t){j.useContext(Zu).static||j.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=j.useContext(ic);return t?Phe():vhe()}function vhe(){Kp()||wr(!1);let t=j.useContext(AR),{basename:e,future:n,navigator:r}=j.useContext(Zu),{matches:i}=j.useContext(ic),{pathname:a}=il(),o=JSON.stringify(SR(i,n.v7_relativeSplatPath)),l=j.useRef(!1);return jW(()=>{l.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=ER(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wu([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,a,t])}function Yh(){let{matches:t}=j.useContext(ic),e=t[t.length-1];return e?e.params:{}}function _W(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Zu),{matches:i}=j.useContext(ic),{pathname:a}=il(),o=JSON.stringify(SR(i,r.v7_relativeSplatPath));return j.useMemo(()=>ER(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function xhe(t,e){return bhe(t,e)}function bhe(t,e,n,r){Kp()||wr(!1);let{navigator:i}=j.useContext(Zu),{matches:a}=j.useContext(ic),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=il(),d;if(e){var h;let y=typeof e=="string"?Hp(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||wr(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=Gde(t,{pathname:m}),p=She(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:wu([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:wu([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r);return e&&p?j.createElement(SN.Provider,{value:{location:Sv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:iu.Pop}},p):p}function whe(){let t=Che(),e=mhe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const jhe=j.createElement(whe,null);class _he extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(ic.Provider,{value:this.props.routeContext},j.createElement(wW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nhe(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext(AR);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ic.Provider,{value:e},r)}function She(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||wr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,p=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||jhe,c&&(u<0&&f===0?(v=!0,y=null):u===f&&(v=!0,y=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),x=()=>{let w;return m?w=p:v?w=y:h.route.Component?w=j.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,j.createElement(Nhe,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?j.createElement(_he,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var NW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NW||{}),rj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rj||{});function Ehe(t){let e=j.useContext(AR);return e||wr(!1),e}function Ahe(t){let e=j.useContext(ghe);return e||wr(!1),e}function The(t){let e=j.useContext(ic);return e||wr(!1),e}function SW(t){let e=The(),n=e.matches[e.matches.length-1];return n.route.id||wr(!1),n.route.id}function Che(){var t;let e=j.useContext(wW),n=Ahe(rj.UseRouteError),r=SW(rj.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Phe(){let{router:t}=Ehe(NW.UseNavigateStable),e=SW(rj.UseNavigateStable),n=j.useRef(!1);return jW(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Sv({fromRouteId:e},a)))},[t,e])}function Ihe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cC(t){let{to:e,replace:n,state:r,relative:i}=t;Kp()||wr(!1);let{future:a,static:o}=j.useContext(Zu),{matches:l}=j.useContext(ic),{pathname:c}=il(),u=Fn(),d=ER(e,SR(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function xt(t){wr(!1)}function khe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=iu.Pop,navigator:a,static:o=!1,future:l}=t;Kp()&&wr(!1);let c=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:a,static:o,future:Sv({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Hp(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,p=j.useMemo(()=>{let y=NR(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:v},navigationType:i}},[c,d,h,f,m,v,i]);return p==null?null:j.createElement(Zu.Provider,{value:u},j.createElement(SN.Provider,{children:n,value:p}))}function Rhe(t){let{children:e,location:n}=t;return xhe(uC(e),n)}new Promise(()=>{});function uC(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let a=[...e,i];if(r.type===j.Fragment){n.push.apply(n,uC(r.props.children,a));return}r.type!==xt&&wr(!1),!r.props.index||!r.props.children||wr(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uC(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dC(){return dC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(this,arguments)}function Ohe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Dhe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Mhe(t,e){return t.button===0&&(!e||e==="_self")&&!Dhe(t)}function hC(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Lhe(t,e){let n=hC(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const $he=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fhe="6";try{window.__reactRouterVersion=Fhe}catch{}const Vhe="startTransition",U4=ik[Vhe];function Bhe(t){let{basename:e,children:n,future:r,window:i}=t,a=j.useRef();a.current==null&&(a.current=Wde({window:i,v5Compat:!0}));let o=a.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=j.useCallback(h=>{u&&U4?U4(()=>c(h)):c(h)},[c,u]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>Ihe(r),[r]),j.createElement(khe,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Uhe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ri=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Ohe(e,$he),{basename:m}=j.useContext(Zu),v,p=!1;if(typeof u=="string"&&zhe.test(u)&&(v=u,Uhe))try{let w=new URL(window.location.href),C=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=NR(C.pathname,m);C.origin===w.origin&&S!=null?u=S+C.search+C.hash:p=!0}catch{}let y=yhe(u,{relative:i}),b=qhe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});function x(w){r&&r(w),w.defaultPrevented||b(w)}return j.createElement("a",dC({},f,{href:v||y,onClick:p||a?r:x,ref:n,target:c}))});var z4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(z4||(z4={}));var q4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(q4||(q4={}));function qhe(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Fn(),u=il(),d=_W(t,{relative:o});return j.useCallback(h=>{if(Mhe(h,n)){h.preventDefault();let f=r!==void 0?r:nj(u)===nj(d);c(t,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,t,a,o,l])}function TR(t){let e=j.useRef(hC(t)),n=j.useRef(!1),r=il(),i=j.useMemo(()=>Lhe(r.search,n.current?null:e.current),[r.search]),a=Fn(),o=j.useCallback((l,c)=>{const u=hC(typeof l=="function"?l(i):l);n.current=!0,a("?"+u,c)},[a,i]);return[i,o]}const Whe=()=>{};var W4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Hhe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},AW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||h==null)throw new Khe;const f=a<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Khe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ghe=function(t){const e=EW(t);return AW.encodeByteArray(e,!0)},sj=function(t){return Ghe(t).replace(/\./g,"")},TW=function(t){try{return AW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yhe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qhe=()=>Yhe().__FIREBASE_DEFAULTS__,Xhe=()=>{if(typeof process>"u"||typeof W4>"u")return;const t=W4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zhe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TW(t[1]);return e&&JSON.parse(e)},EN=()=>{try{return Whe()||Qhe()||Xhe()||Zhe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CW=t=>{var e,n;return(n=(e=EN())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},CR=t=>{const e=CW(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PW=()=>{var t;return(t=EN())==null?void 0:t.config},IW=t=>{var e;return(e=EN())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sj(JSON.stringify(n)),sj(JSON.stringify(o)),""].join(".")}const My={};function efe(){const t={prod:[],emulator:[]};for(const e of Object.keys(My))My[e]?t.emulator.push(e):t.prod.push(e);return t}function tfe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let H4=!1;function TN(t,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||My[t]===e||My[t]||H4)return;My[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=efe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{H4=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=tfe(r),m=n("text"),v=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),y=document.getElementById(p)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),d(y,p);const C=u();c(x,b),w.append(x,v,y,C),document.body.appendChild(w)}a?(v.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nfe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function rfe(){var e;const t=(e=EN())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ife(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function afe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ofe(){const t=Ls();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lfe(){return!rfe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cfe(){try{return typeof indexedDB=="object"}catch{return!1}}function ufe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe="FirebaseError";class mo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dfe,Object.setPrototypeOf(this,mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wx.prototype.create)}}class Wx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?hfe(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new mo(i,l,r)}}function hfe(t,e){return t.replace(ffe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ffe=/\{\$([^}]+)}/g;function mfe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(K4(a)&&K4(o)){if(!Sh(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function K4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function my(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function py(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pfe(t,e){const n=new gfe(t,e);return n.subscribe.bind(n)}class gfe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yfe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gE),i.error===void 0&&(i.error=gE),i.complete===void 0&&(i.complete=gE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yfe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class zl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jhe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bfe(e))try{this.getOrInitializeService({instanceIdentifier:Cd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Cd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cd){return this.instances.has(e)}getOptions(e=Cd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xfe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cd){return this.component?this.component.multipleInstances?e:Cd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xfe(t){return t===Cd?void 0:t}function bfe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wfe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vfe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const jfe={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},_fe=Qt.INFO,Nfe={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},Sfe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Nfe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class PR{constructor(e){this.name=e,this._logLevel=_fe,this._logHandler=Sfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const Efe=(t,e)=>e.some(n=>t instanceof n);let G4,Y4;function Afe(){return G4||(G4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tfe(){return Y4||(Y4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RW=new WeakMap,fC=new WeakMap,OW=new WeakMap,yE=new WeakMap,IR=new WeakMap;function Cfe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ju(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RW.set(n,t)}).catch(()=>{}),IR.set(e,t),e}function Pfe(t){if(fC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});fC.set(t,e)}let mC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OW.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ju(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ife(t){mC=t(mC)}function kfe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vE(this),e,...n);return OW.set(r,e.sort?e.sort():[e]),ju(r)}:Tfe().includes(t)?function(...e){return t.apply(vE(this),e),ju(RW.get(this))}:function(...e){return ju(t.apply(vE(this),e))}}function Rfe(t){return typeof t=="function"?kfe(t):(t instanceof IDBTransaction&&Pfe(t),Efe(t,Afe())?new Proxy(t,mC):t)}function ju(t){if(t instanceof IDBRequest)return Cfe(t);if(yE.has(t))return yE.get(t);const e=Rfe(t);return e!==t&&(yE.set(t,e),IR.set(e,t)),e}const vE=t=>IR.get(t);function Ofe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=ju(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ju(o.result),c.oldVersion,c.newVersion,ju(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Dfe=["get","getKey","getAll","getAllKeys","count"],Mfe=["put","add","delete","clear"],xE=new Map;function Q4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xE.get(e))return xE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Mfe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dfe.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return xE.set(e,a),a}Ife(t=>({...t,get:(e,n,r)=>Q4(e,n)||t.get(e,n,r),has:(e,n)=>!!Q4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lfe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($fe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $fe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pC="@firebase/app",X4="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new PR("@firebase/app"),Ffe="@firebase/app-compat",Vfe="@firebase/analytics-compat",Bfe="@firebase/analytics",Ufe="@firebase/app-check-compat",zfe="@firebase/app-check",qfe="@firebase/auth",Wfe="@firebase/auth-compat",Hfe="@firebase/database",Kfe="@firebase/data-connect",Gfe="@firebase/database-compat",Yfe="@firebase/functions",Qfe="@firebase/functions-compat",Xfe="@firebase/installations",Zfe="@firebase/installations-compat",Jfe="@firebase/messaging",eme="@firebase/messaging-compat",tme="@firebase/performance",nme="@firebase/performance-compat",rme="@firebase/remote-config",sme="@firebase/remote-config-compat",ime="@firebase/storage",ame="@firebase/storage-compat",ome="@firebase/firestore",lme="@firebase/ai",cme="@firebase/firestore-compat",ume="firebase",dme="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="[DEFAULT]",hme={[pC]:"fire-core",[Ffe]:"fire-core-compat",[Bfe]:"fire-analytics",[Vfe]:"fire-analytics-compat",[zfe]:"fire-app-check",[Ufe]:"fire-app-check-compat",[qfe]:"fire-auth",[Wfe]:"fire-auth-compat",[Hfe]:"fire-rtdb",[Kfe]:"fire-data-connect",[Gfe]:"fire-rtdb-compat",[Yfe]:"fire-fn",[Qfe]:"fire-fn-compat",[Xfe]:"fire-iid",[Zfe]:"fire-iid-compat",[Jfe]:"fire-fcm",[eme]:"fire-fcm-compat",[tme]:"fire-perf",[nme]:"fire-perf-compat",[rme]:"fire-rc",[sme]:"fire-rc-compat",[ime]:"fire-gcs",[ame]:"fire-gcs-compat",[ome]:"fire-fst",[cme]:"fire-fst-compat",[lme]:"fire-vertex","fire-js":"fire-js",[ume]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map,fme=new Map,yC=new Map;function Z4(t,e){try{t.container.addComponent(e)}catch(n){ql.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Du(t){const e=t.name;if(yC.has(e))return ql.debug(`There were multiple attempts to register component ${e}.`),!1;yC.set(e,t);for(const n of Ev.values())Z4(n,t);for(const n of fme.values())Z4(n,t);return!0}function Kx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_u=new Wx("app","Firebase",mme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _u.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=dme;function DW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:gC,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw _u.create("bad-app-name",{appName:String(i)});if(n||(n=PW()),!n)throw _u.create("no-options");const a=Ev.get(i);if(a){if(Sh(n,a.options)&&Sh(r,a.config))return a;throw _u.create("duplicate-app",{appName:i})}const o=new wfe(i);for(const c of yC.values())o.addComponent(c);const l=new pme(n,r,o);return Ev.set(i,l),l}function Gx(t=gC){const e=Ev.get(t);if(!e&&t===gC&&PW())return DW();if(!e)throw _u.create("no-app",{appName:t});return e}function gme(){return Array.from(Ev.values())}function ua(t,e,n){let r=hme[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ql.warn(o.join(" "));return}Du(new zl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme="firebase-heartbeat-database",vme=1,Av="firebase-heartbeat-store";let bE=null;function MW(){return bE||(bE=Ofe(yme,vme,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Av)}catch(n){console.warn(n)}}}}).catch(t=>{throw _u.create("idb-open",{originalErrorMessage:t.message})})),bE}async function xme(t){try{const n=(await MW()).transaction(Av),r=await n.objectStore(Av).get(LW(t));return await n.done,r}catch(e){if(e instanceof mo)ql.warn(e.message);else{const n=_u.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ql.warn(n.message)}}}async function J4(t,e){try{const r=(await MW()).transaction(Av,"readwrite");await r.objectStore(Av).put(e,LW(t)),await r.done}catch(n){if(n instanceof mo)ql.warn(n.message);else{const r=_u.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ql.warn(r.message)}}}function LW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bme=1024,wme=30;class jme{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nme(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=e$();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>wme){const o=Sme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ql.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e$(),{heartbeatsToSend:r,unsentEntries:i}=_me(this._heartbeatsCache.heartbeats),a=sj(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ql.warn(n),""}}}function e$(){return new Date().toISOString().substring(0,10)}function _me(t,e=bme){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),t$(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),t$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cfe()?ufe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xme(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t$(t){return sj(JSON.stringify({version:2,heartbeats:t})).length}function Sme(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eme(t){Du(new zl("platform-logger",e=>new Lfe(e),"PRIVATE")),Du(new zl("heartbeat",e=>new jme(e),"PRIVATE")),ua(pC,X4,t),ua(pC,X4,"esm2020"),ua("fire-js","")}Eme("");var Ame="firebase",Tme="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ua(Ame,Tme,"app");function $W(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cme=$W,FW=new Wx("auth","Firebase",$W());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new PR("@firebase/auth");function Pme(t,...e){ij.logLevel<=Qt.WARN&&ij.warn(`Auth (${Qh}): ${t}`,...e)}function rw(t,...e){ij.logLevel<=Qt.ERROR&&ij.error(`Auth (${Qh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,...e){throw kR(t,...e)}function Vo(t,...e){return kR(t,...e)}function VW(t,e,n){const r={...Cme(),[e]:n};return new Wx("auth","Firebase",r).create(e,{appName:t.name})}function Il(t){return VW(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FW.create(t,...e)}function St(t,e,...n){if(!t)throw kR(e,...n)}function _l(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rw(e),new Error(e)}function Wl(t,e){t||_l(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Ime(){return n$()==="http:"||n$()==="https:"}function n$(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ime()||ife()||"connection"in navigator)?navigator.onLine:!0}function Rme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wl(n>e,"Short delay should be less than long delay!"),this.isMobile=nfe()||afe()}get(){return kme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){Wl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_l("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_l("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_l("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ome={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mme=new Yx(3e4,6e4);function po(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ki(t,e,n,r,i={}){return UW(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Hx({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return sfe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&al(t.emulatorConfig.host)&&(u.credentials="include"),BW.fetch()(await zW(t,t.config.apiHost,n,l),u)})}async function UW(t,e,n){t._canInitEmulator=!1;const r={...Ome,...e};try{const i=new $me(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw c0(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw c0(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw c0(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw c0(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw VW(t,d,u);xa(t,d)}}catch(i){if(i instanceof mo)throw i;xa(t,"network-request-failed",{message:String(i)})}}async function Qx(t,e,n,r,i={}){const a=await Ki(t,e,n,r,i);return"mfaPendingCredential"in a&&xa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function zW(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?RR(t.config,i):`${t.config.apiScheme}://${i}`;return Dme.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function Lme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $me{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vo(this.auth,"network-request-failed")),Mme.get())})}}function c0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vo(t,e,r);return i.customData._tokenResponse=n,i}function r$(t){return t!==void 0&&t.enterprise!==void 0}class Fme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Lme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Vme(t,e){return Ki(t,"GET","/v2/recaptchaConfig",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bme(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function aj(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ume(t,e=!1){const n=an(t),r=await n.getIdToken(e),i=OR(r);St(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ly(wE(i.auth_time)),issuedAtTime:Ly(wE(i.iat)),expirationTime:Ly(wE(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function wE(t){return Number(t)*1e3}function OR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rw("JWT malformed, contained fewer than 3 sections"),null;try{const i=TW(n);return i?JSON.parse(i):(rw("Failed to decode base64 JWT payload"),null)}catch(i){return rw("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function s$(t){const e=OR(t);return St(e,"internal-error"),St(typeof e.exp<"u","internal-error"),St(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mo&&zme(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ly(this.lastLoginAt),this.creationTime=Ly(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Eh(t,aj(e,{idToken:n}));St(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(h=i.providerUserInfo)!=null&&h.length?qW(i.providerUserInfo):[],o=Hme(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xC(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Wme(t){const e=an(t);await oj(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qW(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kme(t,e){const n=await UW(t,{},async()=>{const r=Hx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await zW(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&al(t.emulatorConfig.host)&&(c.credentials="include"),BW.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gme(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){St(e.idToken,"internal-error"),St(typeof e.idToken<"u","internal-error"),St(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){St(e.length!==0,"internal-error");const n=s$(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Kme(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new lm;return r&&(St(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(St(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(St(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lm,this.toJSON())}_performRefresh(){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t,e){St(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ga{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new qme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xC(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Eh(this,this.stsTokenManager.getToken(this.auth,e));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ume(this,e)}reload(){return Wme(this)}_assign(e){this!==e&&(St(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ga({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oj(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(Il(this.auth));const e=await this.getIdToken();return await Eh(this,Bme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:p}=n;St(h&&p,e,"internal-error");const y=lm.fromJSON(this.name,p);St(typeof h=="string",e,"internal-error"),_c(r,e.name),_c(i,e.name),St(typeof f=="boolean",e,"internal-error"),St(typeof m=="boolean",e,"internal-error"),_c(a,e.name),_c(o,e.name),_c(l,e.name),_c(c,e.name),_c(u,e.name),_c(d,e.name);const b=new Ga({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:y,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(b.providerData=v.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new lm;i.updateFromServerResponse(n);const a=new Ga({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await oj(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];St(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?qW(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new lm;l.updateFromIdToken(r);const c=new Ga({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xC(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new Map;function Nl(t){Wl(t instanceof Function,"Expected a class definition");let e=i$.get(t);return e?(Wl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i$.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WW.type="NONE";const a$=WW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e,n){return`firebase:${t}:${e}:${n}`}class cm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=sw(this.userKey,i.apiKey,a),this.fullPersistenceKey=sw("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await aj(this.auth,{idToken:e}).catch(()=>{});return n?Ga._fromGetAccountInfoResponse(this.auth,n,e):null}return Ga._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cm(Nl(a$),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Nl(a$);const o=sw(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await aj(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ga._fromGetAccountInfoResponse(e,f,d)}else h=Ga._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new cm(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new cm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XW(e))return"Blackberry";if(ZW(e))return"Webos";if(KW(e))return"Safari";if((e.includes("chrome/")||GW(e))&&!e.includes("edge/"))return"Chrome";if(QW(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HW(t=Ls()){return/firefox\//i.test(t)}function KW(t=Ls()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GW(t=Ls()){return/crios\//i.test(t)}function YW(t=Ls()){return/iemobile/i.test(t)}function QW(t=Ls()){return/android/i.test(t)}function XW(t=Ls()){return/blackberry/i.test(t)}function ZW(t=Ls()){return/webos/i.test(t)}function DR(t=Ls()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Yme(t=Ls()){var e;return DR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Qme(){return ofe()&&document.documentMode===10}function JW(t=Ls()){return DR(t)||QW(t)||ZW(t)||XW(t)||/windows phone/i.test(t)||YW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t,e=[]){let n;switch(t){case"Browser":n=o$(Ls());break;case"Worker":n=`${o$(Ls())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zme(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",po(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme=6;class epe{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Jme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l$(this),this.idTokenSubscription=new l$(this),this.beforeStateQueue=new Xme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nl(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await cm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aj(this,{idToken:e}),r=await Ga._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(hi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oj(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(Il(this));const n=e?an(e):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&St(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(Il(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(Il(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zme(this),n=new epe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nl(e)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await cm.create(this,[Nl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Pme(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ac(t){return an(t)}class l${constructor(e){this.auth=e,this.observer=null,this.addObserver=pfe(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function npe(t){CN=t}function tH(t){return CN.loadJS(t)}function rpe(){return CN.recaptchaEnterpriseScript}function spe(){return CN.gapiScript}function ipe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ape{constructor(){this.enterprise=new ope}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ope{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lpe="recaptcha-enterprise",nH="NO_RECAPTCHA";class cpe{constructor(e){this.type=lpe,this.auth=ac(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Vme(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Fme(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;r$(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(nH)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ape().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&r$(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rpe();c.length!==0&&(c+=l),tH(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function c$(t,e,n,r=!1,i=!1){const a=new cpe(t);let o;if(i)o=nH;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lj(t,e,n,r,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await c$(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await c$(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(t,e){const n=Kx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Sh(a,e??{}))return i;xa(i,"already-initialized")}return n.initialize({options:e})}function dpe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hpe(t,e,n){const r=ac(t);St(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),a=rH(e),{host:o,port:l}=fpe(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){St(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),St(Sh(u,r.config.emulator)&&Sh(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,al(o)?(AN(`${a}//${o}${c}`),TN("Auth",!0)):mpe()}function rH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fpe(t){const e=rH(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:u$(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:u$(o)}}}function u$(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mpe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _l("not implemented")}_getIdTokenResponse(e){return _l("not implemented")}_linkToIdToken(e,n){return _l("not implemented")}_getReauthenticationResolver(e){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e){return Ki(t,"POST","/v1/accounts:resetPassword",po(t,e))}async function ppe(t,e){return Ki(t,"POST","/v1/accounts:update",e)}async function gpe(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}async function ype(t,e){return Ki(t,"POST","/v1/accounts:update",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vpe(t,e){return Qx(t,"POST","/v1/accounts:signInWithPassword",po(t,e))}async function iH(t,e){return Ki(t,"POST","/v1/accounts:sendOobCode",po(t,e))}async function xpe(t,e){return iH(t,e)}async function bpe(t,e){return iH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wpe(t,e){return Qx(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}async function jpe(t,e){return Qx(t,"POST","/v1/accounts:signInWithEmailLink",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends MR{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Tv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Tv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lj(e,n,"signInWithPassword",vpe);case"emailLink":return wpe(e,{email:this._email,oobCode:this._password});default:xa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lj(e,r,"signUpPassword",gpe);case"emailLink":return jpe(e,{idToken:n,email:this._email,oobCode:this._password});default:xa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t,e){return Qx(t,"POST","/v1/accounts:signInWithIdp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe="http://localhost";class Ah extends MR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ah(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Ah(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return um(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,um(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,um(e,n)}buildRequest(){const e={requestUri:_pe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hx(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Spe(t){const e=my(py(t)).link,n=e?my(py(e)).deep_link_id:null,r=my(py(t)).deep_link_id;return(r?my(py(r)).link:null)||r||n||e||t}class LR{constructor(e){const n=my(py(e)),r=n.apiKey??null,i=n.oobCode??null,a=Npe(n.mode??null);St(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Spe(e);try{return new LR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.providerId=Gp.PROVIDER_ID}static credential(e,n){return Tv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=LR.parseLink(n);return St(r,"argument-error"),Tv._fromEmailAndCode(e,r.code,r.tenantId)}}Gp.PROVIDER_ID="password";Gp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends aH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Xx{constructor(){super("facebook.com")}static credential(e){return Ah._fromParams({providerId:Bc.PROVIDER_ID,signInMethod:Bc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bc.credentialFromTaggedObject(e)}static credentialFromError(e){return Bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bc.credential(e.oauthAccessToken)}catch{return null}}}Bc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends Xx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ah._fromParams({providerId:Uc.PROVIDER_ID,signInMethod:Uc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Uc.credentialFromTaggedObject(e)}static credentialFromError(e){return Uc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Uc.credential(n,r)}catch{return null}}}Uc.GOOGLE_SIGN_IN_METHOD="google.com";Uc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Xx{constructor(){super("github.com")}static credential(e){return Ah._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.GITHUB_SIGN_IN_METHOD="github.com";zc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Xx{constructor(){super("twitter.com")}static credential(e,n){return Ah._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qc.credential(n,r)}catch{return null}}}qc.TWITTER_SIGN_IN_METHOD="twitter.com";qc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Epe(t,e){return Qx(t,"POST","/v1/accounts:signUp",po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ga._fromIdTokenResponse(e,r,i),o=d$(r);return new Th({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=d$(r);return new Th({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function d$(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj extends mo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cj.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cj(e,n,r,i)}}function oH(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cj._fromErrorAndOperation(t,a,e,r):a})}async function Ape(t,e,n=!1){const r=await Eh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Th._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tpe(t,e,n=!1){const{auth:r}=t;if(hi(r.app))return Promise.reject(Il(r));const i="reauthenticate";try{const a=await Eh(t,oH(r,i,e,t),n);St(a.idToken,r,"internal-error");const o=OR(a.idToken);St(o,r,"internal-error");const{sub:l}=o;return St(t.uid===l,r,"user-mismatch"),Th._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(t,e,n=!1){if(hi(t.app))return Promise.reject(Il(t));const r="signIn",i=await oH(t,r,e),a=await Th._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Cpe(t,e){return lH(ac(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?FR._fromServerResponse(e,n):"totpInfo"in n?VR._fromServerResponse(e,n):xa(e,"internal-error")}}class FR extends $R{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new FR(n)}}class VR extends $R{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new VR(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t){const e=ac(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ppe(t,e,n){const r=ac(t);await lj(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bpe)}async function Ipe(t,e,n){await sH(an(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BR(t),r})}async function kpe(t,e){await ype(an(t),{oobCode:e})}async function Rpe(t,e){const n=an(t),r=await sH(n,{oobCode:e}),i=r.requestType;switch(St(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":St(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":St(r.mfaInfo,n,"internal-error");default:St(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=$R._fromServerResponse(ac(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function Ope(t,e){const{data:n}=await Rpe(an(t),e);return n.email}async function Dpe(t,e,n){if(hi(t.app))return Promise.reject(Il(t));const r=ac(t),o=await lj(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Epe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&BR(t),c}),l=await Th._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Mpe(t,e,n){return hi(t.app)?Promise.reject(Il(t)):Cpe(an(t),Gp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BR(t),r})}async function h$(t,e){const n=an(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await xpe(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lpe(t,e){return Ki(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $pe(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=an(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Eh(r,Lpe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Fpe(t,e){return Vpe(an(t),null,e)}async function Vpe(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const o=await Eh(t,ppe(r,a));await t._updateTokensIfNecessary(o,!0)}function Bpe(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function Upe(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function zpe(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function qpe(t){return an(t).signOut()}const uj="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uj,"1"),this.storage.removeItem(uj),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wpe=1e3,Hpe=10;class uH extends cH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Qme()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Hpe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Wpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uH.type="LOCAL";const Kpe=uH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH extends cH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dH.type="SESSION";const hH=dH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new PN(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await Gpe(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}PN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=UR("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return window}function Qpe(t){Bo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(){return typeof Bo().WorkerGlobalScope<"u"&&typeof Bo().importScripts=="function"}async function Xpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zpe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Jpe(){return fH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH="firebaseLocalStorageDb",ege=1,dj="firebaseLocalStorage",pH="fbase_key";class Zx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function IN(t,e){return t.transaction([dj],e?"readwrite":"readonly").objectStore(dj)}function tge(){const t=indexedDB.deleteDatabase(mH);return new Zx(t).toPromise()}function bC(){const t=indexedDB.open(mH,ege);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dj,{keyPath:pH})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dj)?e(r):(r.close(),await tge(),e(await bC()))})})}async function f$(t,e,n){const r=IN(t,!0).put({[pH]:e,value:n});return new Zx(r).toPromise()}async function nge(t,e){const n=IN(t,!1).get(e),r=await new Zx(n).toPromise();return r===void 0?null:r.value}function m$(t,e){const n=IN(t,!0).delete(e);return new Zx(n).toPromise()}const rge=800,sge=3;class gH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sge)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=PN._getInstance(Jpe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Xpe(),!this.activeServiceWorker)return;this.sender=new Ype(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bC();return await f$(e,uj,"1"),await m$(e,uj),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f$(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nge(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>m$(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=IN(i,!1).getAll();return new Zx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gH.type="LOCAL";const ige=gH;new Yx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function age(t,e){return e?Nl(e):(St(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR extends MR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return um(e,this._buildIdpRequest())}_linkToIdToken(e,n){return um(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return um(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oge(t){return lH(t.auth,new zR(t),t.bypassAuthState)}function lge(t){const{auth:e,user:n}=t;return St(n,e,"internal-error"),Tpe(n,new zR(t),t.bypassAuthState)}async function cge(t){const{auth:e,user:n}=t;return St(n,e,"internal-error"),Ape(n,new zR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oge;case"linkViaPopup":case"linkViaRedirect":return cge;case"reauthViaPopup":case"reauthViaRedirect":return lge;default:xa(this.auth,"internal-error")}}resolve(e){Wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge=new Yx(2e3,1e4);class zf extends yH{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,zf.currentPopupAction&&zf.currentPopupAction.cancel(),zf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return St(e,this.auth,"internal-error"),e}async onExecution(){Wl(this.filter.length===1,"Popup operations only handle one event");const e=UR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uge.get())};e()}}zf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dge="pendingRedirect",iw=new Map;class hge extends yH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=iw.get(this.auth._key());if(!e){try{const r=await fge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}iw.set(this.auth._key(),e)}return this.bypassAuthState||iw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fge(t,e){const n=gge(e),r=pge(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mge(t,e){iw.set(t._key(),e)}function pge(t){return Nl(t._redirectPersistence)}function gge(t){return sw(dge,t.config.apiKey,t.name)}async function yge(t,e,n=!1){if(hi(t.app))return Promise.reject(Il(t));const r=ac(t),i=age(r,e),o=await new hge(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vge=10*60*1e3;class xge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bge(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vH(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vo(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vge&&this.cachedEventUids.clear(),this.cachedEventUids.has(p$(e))}saveEventToCache(e){this.cachedEventUids.add(p$(e)),this.lastProcessedEventTime=Date.now()}}function p$(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wge(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_ge=/^https?/;async function Nge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wge(t);for(const n of e)try{if(Sge(n))return}catch{}xa(t,"unauthorized-domain")}function Sge(t){const e=vC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!_ge.test(n))return!1;if(jge.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=new Yx(3e4,6e4);function g$(){const t=Bo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Age(t){return new Promise((e,n)=>{var i,a,o;function r(){g$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g$(),n(Vo(t,"network-request-failed"))},timeout:Ege.get()})}if((a=(i=Bo().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Bo().gapi)!=null&&o.load)r();else{const l=ipe("iframefcb");return Bo()[l]=()=>{gapi.load?r():n(Vo(t,"network-request-failed"))},tH(`${spe()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw aw=null,e})}let aw=null;function Tge(t){return aw=aw||Age(t),aw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge=new Yx(5e3,15e3),Pge="__/auth/iframe",Ige="emulator/auth/iframe",kge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oge(t){const e=t.config;St(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RR(e,Ige):`https://${t.config.authDomain}/${Pge}`,r={apiKey:e.apiKey,appName:t.name,v:Qh},i=Rge.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Hx(r).slice(1)}`}async function Dge(t){const e=await Tge(t),n=Bo().gapi;return St(n,t,"internal-error"),e.open({where:document.body,url:Oge(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kge,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Vo(t,"network-request-failed"),l=Bo().setTimeout(()=>{a(o)},Cge.get());function c(){Bo().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lge=500,$ge=600,Fge="_blank",Vge="http://localhost";class y${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bge(t,e,n,r=Lge,i=$ge){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...Mge,width:r.toString(),height:i.toString(),top:a,left:o},u=Ls().toLowerCase();n&&(l=GW(u)?Fge:n),HW(u)&&(e=e||Vge,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(Yme(u)&&l!=="_self")return Uge(e||"",l),new y$(null);const h=window.open(e||"",l,d);St(h,t,"popup-blocked");try{h.focus()}catch{}return new y$(h)}function Uge(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zge="__/auth/handler",qge="emulator/auth/handler",Wge=encodeURIComponent("fac");async function v$(t,e,n,r,i,a){St(t.config.authDomain,t,"auth-domain-config-required"),St(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qh,eventId:i};if(e instanceof aH){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mfe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Xx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${Wge}=${encodeURIComponent(c)}`:"";return`${Hge(t)}?${Hx(l).slice(1)}${u}`}function Hge({config:t}){return t.emulator?RR(t,qge):`https://${t.authDomain}/${zge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="webStorageSupport";class Kge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hH,this._completeRedirectFn=yge,this._overrideRedirectResult=mge}async _openPopup(e,n,r,i){var o;Wl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await v$(e,n,r,vC(),i);return Bge(e,a,UR())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await v$(e,n,r,vC(),i);return Qpe(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Wl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Dge(e),r=new xge(e);return n.register("authEvent",i=>(St(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jE,{type:jE},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[jE];a!==void 0&&n(!!a),xa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Nge(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JW()||KW()||DR()}}const Gge=Kge;var x$="@firebase/auth",b$="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xge(t){Du(new zl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;St(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eH(t)},u=new tpe(r,i,a,c);return dpe(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Du(new zl("auth-internal",e=>{const n=ac(e.getProvider("auth").getImmediate());return(r=>new Yge(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ua(x$,b$,Qge(t)),ua(x$,b$,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zge=5*60,Jge=IW("authIdTokenMaxAge")||Zge;let w$=null;const eye=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jge)return;const i=n==null?void 0:n.token;w$!==i&&(w$=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tye(t=Gx()){const e=Kx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=upe(t,{popupRedirectResolver:Gge,persistence:[ige,Kpe,hH]}),r=IW("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=eye(a.toString());Upe(n,o,()=>o(n.currentUser)),Bpe(n,l=>o(l))}}const i=CW("auth");return i&&hpe(n,`http://${i}`),n}function nye(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}npe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Vo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",nye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xge("Browser");var j$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nu,xH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function T(){}T.prototype=g.prototype,_.F=g.prototype,_.prototype=new T,_.prototype.constructor=_,_.D=function(E,A,I){for(var k=Array(arguments.length-2),L=2;L<arguments.length;L++)k[L-2]=arguments[L];return g.prototype[A].apply(E,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,T){T||(T=0);const E=Array(16);if(typeof g=="string")for(var A=0;A<16;++A)E[A]=g.charCodeAt(T++)|g.charCodeAt(T++)<<8|g.charCodeAt(T++)<<16|g.charCodeAt(T++)<<24;else for(A=0;A<16;++A)E[A]=g[T++]|g[T++]<<8|g[T++]<<16|g[T++]<<24;g=_.g[0],T=_.g[1],A=_.g[2];let I=_.g[3],k;k=g+(I^T&(A^I))+E[0]+3614090360&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[1]+3905402710&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[2]+606105819&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[3]+3250441966&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[4]+4118548399&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[5]+1200080426&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[6]+2821735955&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[7]+4249261313&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[8]+1770035416&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[9]+2336552879&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[10]+4294925233&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[11]+2304563134&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[12]+1804603682&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[13]+4254626195&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[14]+2792965006&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[15]+1236535329&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(A^I&(T^A))+E[1]+4129170786&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[6]+3225465664&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[11]+643717713&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[0]+3921069994&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[5]+3593408605&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[10]+38016083&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[15]+3634488961&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[4]+3889429448&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[9]+568446438&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[14]+3275163606&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[3]+4107603335&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[8]+1163531501&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[13]+2850285829&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[2]+4243563512&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[7]+1735328473&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[12]+2368359562&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(T^A^I)+E[5]+4294588738&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[8]+2272392833&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[11]+1839030562&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[14]+4259657740&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[1]+2763975236&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[4]+1272893353&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[7]+4139469664&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[10]+3200236656&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[13]+681279174&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[0]+3936430074&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[3]+3572445317&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[6]+76029189&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[9]+3654602809&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[12]+3873151461&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[15]+530742520&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[2]+3299628645&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(A^(T|~I))+E[0]+4096336452&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[7]+1126891415&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[14]+2878612391&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[5]+4237533241&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[12]+1700485571&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[3]+2399980690&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[10]+4293915773&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[1]+2240044497&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[8]+1873313359&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[15]+4264355552&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[6]+2734768916&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[13]+1309151649&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[4]+4149444226&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[11]+3174756917&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[2]+718787259&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+I&4294967295}r.prototype.v=function(_,g){g===void 0&&(g=_.length);const T=g-this.blockSize,E=this.C;let A=this.h,I=0;for(;I<g;){if(A==0)for(;I<=T;)i(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<g;)if(E[A++]=_.charCodeAt(I++),A==this.blockSize){i(this,E),A=0;break}}else for(;I<g;)if(E[A++]=_[I++],A==this.blockSize){i(this,E),A=0;break}}this.h=A,this.o+=g},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;g=this.o*8;for(var T=_.length-8;T<_.length;++T)_[T]=g&255,g/=256;for(this.v(_),_=Array(16),g=0,T=0;T<4;++T)for(let E=0;E<32;E+=8)_[g++]=this.g[T]>>>E&255;return _};function a(_,g){var T=l;return Object.prototype.hasOwnProperty.call(T,_)?T[_]:T[_]=g(_)}function o(_,g){this.h=g;const T=[];let E=!0;for(let A=_.length-1;A>=0;A--){const I=_[A]|0;E&&I==g||(T[A]=I,E=!1)}this.g=T}var l={};function c(_){return-128<=_&&_<128?a(_,function(g){return new o([g|0],g<0?-1:0)}):new o([_|0],_<0?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return h;if(_<0)return y(u(-_));const g=[];let T=1;for(let E=0;_>=T;E++)g[E]=_/T|0,T*=4294967296;return new o(g,0)}function d(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return y(d(_.substring(1),g));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(g,8));let E=h;for(let I=0;I<_.length;I+=8){var A=Math.min(8,_.length-I);const k=parseInt(_.substring(I,I+A),g);A<8?(A=u(Math.pow(g,A)),E=E.j(A).add(u(k))):(E=E.j(T),E=E.add(u(k)))}return E}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-y(this).m();let _=0,g=1;for(let T=0;T<this.g.length;T++){const E=this.i(T);_+=(E>=0?E:4294967296+E)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(v(this))return"0";if(p(this))return"-"+y(this).toString(_);const g=u(Math.pow(_,6));var T=this;let E="";for(;;){const A=C(T,g).g;T=b(T,A.j(g));let I=((T.g.length>0?T.g[0]:T.h)>>>0).toString(_);if(T=A,v(T))return I+E;for(;I.length<6;)I="0"+I;E=I+E}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function v(_){if(_.h!=0)return!1;for(let g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=b(this,_),p(_)?-1:v(_)?0:1};function y(_){const g=_.g.length,T=[];for(let E=0;E<g;E++)T[E]=~_.g[E];return new o(T,~_.h).add(f)}t.abs=function(){return p(this)?y(this):this},t.add=function(_){const g=Math.max(this.g.length,_.g.length),T=[];let E=0;for(let A=0;A<=g;A++){let I=E+(this.i(A)&65535)+(_.i(A)&65535),k=(I>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);E=k>>>16,I&=65535,k&=65535,T[A]=k<<16|I}return new o(T,T[T.length-1]&-2147483648?-1:0)};function b(_,g){return _.add(y(g))}t.j=function(_){if(v(this)||v(_))return h;if(p(this))return p(_)?y(this).j(y(_)):y(y(this).j(_));if(p(_))return y(this.j(y(_)));if(this.l(m)<0&&_.l(m)<0)return u(this.m()*_.m());const g=this.g.length+_.g.length,T=[];for(var E=0;E<2*g;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(let A=0;A<_.g.length;A++){const I=this.i(E)>>>16,k=this.i(E)&65535,L=_.i(A)>>>16,B=_.i(A)&65535;T[2*E+2*A]+=k*B,x(T,2*E+2*A),T[2*E+2*A+1]+=I*B,x(T,2*E+2*A+1),T[2*E+2*A+1]+=k*L,x(T,2*E+2*A+1),T[2*E+2*A+2]+=I*L,x(T,2*E+2*A+2)}for(_=0;_<g;_++)T[_]=T[2*_+1]<<16|T[2*_];for(_=g;_<2*g;_++)T[_]=0;return new o(T,0)};function x(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function w(_,g){this.g=_,this.h=g}function C(_,g){if(v(g))throw Error("division by zero");if(v(_))return new w(h,h);if(p(_))return g=C(y(_),g),new w(y(g.g),y(g.h));if(p(g))return g=C(_,y(g)),new w(y(g.g),g.h);if(_.g.length>30){if(p(_)||p(g))throw Error("slowDivide_ only works with positive integers.");for(var T=f,E=g;E.l(_)<=0;)T=S(T),E=S(E);var A=P(T,1),I=P(E,1);for(E=P(E,2),T=P(T,2);!v(E);){var k=I.add(E);k.l(_)<=0&&(A=A.add(T),I=k),E=P(E,1),T=P(T,1)}return g=b(_,A.j(g)),new w(A,g)}for(A=h;_.l(g)>=0;){for(T=Math.max(1,Math.floor(_.m()/g.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),I=u(T),k=I.j(g);p(k)||k.l(_)>0;)T-=E,I=u(T),k=I.j(g);v(I)&&(I=f),A=A.add(I),_=b(_,k)}return new w(A,_)}t.B=function(_){return C(this,_).h},t.and=function(_){const g=Math.max(this.g.length,_.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)&_.i(E);return new o(T,this.h&_.h)},t.or=function(_){const g=Math.max(this.g.length,_.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)|_.i(E);return new o(T,this.h|_.h)},t.xor=function(_){const g=Math.max(this.g.length,_.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)^_.i(E);return new o(T,this.h^_.h)};function S(_){const g=_.g.length+1,T=[];for(let E=0;E<g;E++)T[E]=_.i(E)<<1|_.i(E-1)>>>31;return new o(T,_.h)}function P(_,g){const T=g>>5;g%=32;const E=_.g.length-T,A=[];for(let I=0;I<E;I++)A[I]=g>0?_.i(I+T)>>>g|_.i(I+T+1)<<32-g:_.i(I+T);return new o(A,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xH=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Nu=o}).apply(typeof j$<"u"?j$:typeof self<"u"?self:typeof window<"u"?window:{});var u0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bH,gy,wH,ow,wC,jH,_H,NH;(function(){var t,e=Object.defineProperty;function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof u0=="object"&&u0];for(var O=0;O<N.length;++O){var M=N[O];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function i(N,O){if(O)e:{var M=r;N=N.split(".");for(var q=0;q<N.length-1;q++){var ue=N[q];if(!(ue in M))break e;M=M[ue]}N=N[N.length-1],q=M[N],O=O(q),O!=q&&O!=null&&e(M,N,{configurable:!0,writable:!0,value:O})}}i("Symbol.dispose",function(N){return N||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(N){return N||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(N){return N||function(O){var M=[],q;for(q in O)Object.prototype.hasOwnProperty.call(O,q)&&M.push([q,O[q]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(N){var O=typeof N;return O=="object"&&N!=null||O=="function"}function c(N,O,M){return N.call.apply(N.bind,arguments)}function u(N,O,M){return u=c,u.apply(null,arguments)}function d(N,O){var M=Array.prototype.slice.call(arguments,1);return function(){var q=M.slice();return q.push.apply(q,arguments),N.apply(this,q)}}function h(N,O){function M(){}M.prototype=O.prototype,N.Z=O.prototype,N.prototype=new M,N.prototype.constructor=N,N.Ob=function(q,ue,pe){for(var Ue=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Ue[Wt-2]=arguments[Wt];return O.prototype[ue].apply(q,Ue)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?N=>N&&AsyncContext.Snapshot.wrap(N):N=>N;function m(N){const O=N.length;if(O>0){const M=Array(O);for(let q=0;q<O;q++)M[q]=N[q];return M}return[]}function v(N,O){for(let q=1;q<arguments.length;q++){const ue=arguments[q];var M=typeof ue;if(M=M!="object"?M:ue?Array.isArray(ue)?"array":M:"null",M=="array"||M=="object"&&typeof ue.length=="number"){M=N.length||0;const pe=ue.length||0;N.length=M+pe;for(let Ue=0;Ue<pe;Ue++)N[M+Ue]=ue[Ue]}else N.push(ue)}}class p{constructor(O,M){this.i=O,this.j=M,this.h=0,this.g=null}get(){let O;return this.h>0?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function y(N){o.setTimeout(()=>{throw N},0)}function b(){var N=_;let O=null;return N.g&&(O=N.g,N.g=N.g.next,N.g||(N.h=null),O.next=null),O}class x{constructor(){this.h=this.g=null}add(O,M){const q=w.get();q.set(O,M),this.h?this.h.next=q:this.g=q,this.h=q}}var w=new p(()=>new C,N=>N.reset());class C{constructor(){this.next=this.g=this.h=null}set(O,M){this.h=O,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let S,P=!1,_=new x,g=()=>{const N=Promise.resolve(void 0);S=()=>{N.then(T)}};function T(){for(var N;N=b();){try{N.h.call(N.g)}catch(M){y(M)}var O=w;O.j(N),O.h<100&&(O.h++,N.next=O.g,O.g=N)}P=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(N,O){this.type=N,this.g=this.target=O,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var N=!1,O=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const M=()=>{};o.addEventListener("test",M,O),o.removeEventListener("test",M,O)}catch{}return N}();function k(N){return/^[\s\xa0]*$/.test(N)}function L(N,O){A.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N&&this.init(N,O)}h(L,A),L.prototype.init=function(N,O){const M=this.type=N.type,q=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;this.target=N.target||N.srcElement,this.g=O,O=N.relatedTarget,O||(M=="mouseover"?O=N.fromElement:M=="mouseout"&&(O=N.toElement)),this.relatedTarget=O,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=N.pointerType,this.state=N.state,this.i=N,N.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),U=0;function V(N,O,M,q,ue){this.listener=N,this.proxy=null,this.src=O,this.type=M,this.capture=!!q,this.ha=ue,this.key=++U,this.da=this.fa=!1}function D(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function R(N,O,M){for(const q in N)O.call(M,N[q],q,N)}function W(N,O){for(const M in N)O.call(void 0,N[M],M,N)}function J(N){const O={};for(const M in N)O[M]=N[M];return O}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(N,O){let M,q;for(let ue=1;ue<arguments.length;ue++){q=arguments[ue];for(M in q)N[M]=q[M];for(let pe=0;pe<oe.length;pe++)M=oe[pe],Object.prototype.hasOwnProperty.call(q,M)&&(N[M]=q[M])}}function z(N){this.src=N,this.g={},this.h=0}z.prototype.add=function(N,O,M,q,ue){const pe=N.toString();N=this.g[pe],N||(N=this.g[pe]=[],this.h++);const Ue=ve(N,O,q,ue);return Ue>-1?(O=N[Ue],M||(O.fa=!1)):(O=new V(O,this.src,pe,!!q,ue),O.fa=M,N.push(O)),O};function ie(N,O){const M=O.type;if(M in N.g){var q=N.g[M],ue=Array.prototype.indexOf.call(q,O,void 0),pe;(pe=ue>=0)&&Array.prototype.splice.call(q,ue,1),pe&&(D(O),N.g[M].length==0&&(delete N.g[M],N.h--))}}function ve(N,O,M,q){for(let ue=0;ue<N.length;++ue){const pe=N[ue];if(!pe.da&&pe.listener==O&&pe.capture==!!M&&pe.ha==q)return ue}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),Be={};function he(N,O,M,q,ue){if(Array.isArray(O)){for(let pe=0;pe<O.length;pe++)he(N,O[pe],M,q,ue);return null}return M=Hr(M),N&&N[B]?N.J(O,M,l(q)?!!q.capture:!!q,ue):fe(N,O,M,!1,q,ue)}function fe(N,O,M,q,ue,pe){if(!O)throw Error("Invalid event type");const Ue=l(ue)?!!ue.capture:!!ue;let Wt=nn(N);if(Wt||(N[xe]=Wt=new z(N)),M=Wt.add(O,M,q,Ue,pe),M.proxy)return M;if(q=me(),M.proxy=q,q.src=N,q.listener=M,N.addEventListener)I||(ue=Ue),ue===void 0&&(ue=!1),N.addEventListener(O.toString(),q,ue);else if(N.attachEvent)N.attachEvent(rt(O.toString()),q);else if(N.addListener&&N.removeListener)N.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return M}function me(){function N(M){return O.call(N.src,N.listener,M)}const O=zt;return N}function ce(N,O,M,q,ue){if(Array.isArray(O))for(var pe=0;pe<O.length;pe++)ce(N,O[pe],M,q,ue);else q=l(q)?!!q.capture:!!q,M=Hr(M),N&&N[B]?(N=N.i,pe=String(O).toString(),pe in N.g&&(O=N.g[pe],M=ve(O,M,q,ue),M>-1&&(D(O[M]),Array.prototype.splice.call(O,M,1),O.length==0&&(delete N.g[pe],N.h--)))):N&&(N=nn(N))&&(O=N.g[O.toString()],N=-1,O&&(N=ve(O,M,q,ue)),(M=N>-1?O[N]:null)&&Ke(M))}function Ke(N){if(typeof N!="number"&&N&&!N.da){var O=N.src;if(O&&O[B])ie(O.i,N);else{var M=N.type,q=N.proxy;O.removeEventListener?O.removeEventListener(M,q,N.capture):O.detachEvent?O.detachEvent(rt(M),q):O.addListener&&O.removeListener&&O.removeListener(q),(M=nn(O))?(ie(M,N),M.h==0&&(M.src=null,O[xe]=null)):D(N)}}}function rt(N){return N in Be?Be[N]:Be[N]="on"+N}function zt(N,O){if(N.da)N=!0;else{O=new L(O,this);const M=N.listener,q=N.ha||N.src;N.fa&&Ke(N),N=M.call(q,O)}return N}function nn(N){return N=N[xe],N instanceof z?N:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hr(N){return typeof N=="function"?N:(N[En]||(N[En]=function(O){return N.handleEvent(O)}),N[En])}function on(){E.call(this),this.i=new z(this),this.M=this,this.G=null}h(on,E),on.prototype[B]=!0,on.prototype.removeEventListener=function(N,O,M,q){ce(this,N,O,M,q)};function Q(N,O){var M,q=N.G;if(q)for(M=[];q;q=q.G)M.push(q);if(N=N.M,q=O.type||O,typeof O=="string")O=new A(O,N);else if(O instanceof A)O.target=O.target||N;else{var ue=O;O=new A(q,N),Ae(O,ue)}ue=!0;let pe,Ue;if(M)for(Ue=M.length-1;Ue>=0;Ue--)pe=O.g=M[Ue],ue=le(pe,q,!0,O)&&ue;if(pe=O.g=N,ue=le(pe,q,!0,O)&&ue,ue=le(pe,q,!1,O)&&ue,M)for(Ue=0;Ue<M.length;Ue++)pe=O.g=M[Ue],ue=le(pe,q,!1,O)&&ue}on.prototype.N=function(){if(on.Z.N.call(this),this.i){var N=this.i;for(const O in N.g){const M=N.g[O];for(let q=0;q<M.length;q++)D(M[q]);delete N.g[O],N.h--}}this.G=null},on.prototype.J=function(N,O,M,q){return this.i.add(String(N),O,!1,M,q)},on.prototype.K=function(N,O,M,q){return this.i.add(String(N),O,!0,M,q)};function le(N,O,M,q){if(O=N.i.g[String(O)],!O)return!0;O=O.concat();let ue=!0;for(let pe=0;pe<O.length;++pe){const Ue=O[pe];if(Ue&&!Ue.da&&Ue.capture==M){const Wt=Ue.listener,Rr=Ue.ha||Ue.src;Ue.fa&&ie(N.i,Ue),ue=Wt.call(Rr,q)!==!1&&ue}}return ue&&!q.defaultPrevented}function be(N,O){if(typeof N!="function")if(N&&typeof N.handleEvent=="function")N=u(N.handleEvent,N);else throw Error("Invalid listener argument");return Number(O)>2147483647?-1:o.setTimeout(N,O||0)}function Fe(N){N.g=be(()=>{N.g=null,N.i&&(N.i=!1,Fe(N))},N.l);const O=N.h;N.h=null,N.m.apply(null,O)}class Ve extends E{constructor(O,M){super(),this.m=O,this.l=M,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:Fe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ke(N){E.call(this),this.h=N,this.g={}}h(ke,E);var Ye=[];function Kt(N){R(N.g,function(O,M){this.g.hasOwnProperty(M)&&Ke(O)},N),N.g={}}ke.prototype.N=function(){ke.Z.N.call(this),Kt(this)},ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=o.JSON.stringify,ys=o.JSON.parse,Ea=class{stringify(N){return o.JSON.stringify(N,void 0)}parse(N){return o.JSON.parse(N,void 0)}};function Ni(){}function pd(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ti(){A.call(this,"d")}h(ti,A);function hc(){A.call(this,"c")}h(hc,A);var ss={},lf=null;function ul(){return lf=lf||new on}ss.Ia="serverreachability";function wg(N){A.call(this,ss.Ia,N)}h(wg,A);function fc(N){const O=ul();Q(O,new wg(O))}ss.STAT_EVENT="statevent";function Cb(N,O){A.call(this,ss.STAT_EVENT,N),this.stat=O}h(Cb,A);function kr(N){const O=ul();Q(O,new Cb(O,N))}ss.Ja="timingevent";function Aa(N,O){A.call(this,ss.Ja,N),this.size=O}h(Aa,A);function gd(N,O){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){N()},O)}function Tt(){this.g=!0}Tt.prototype.ua=function(){this.g=!1};function pn(N,O,M,q,ue,pe){N.info(function(){if(N.g)if(pe){var Ue="",Wt=pe.split("&");for(let Tn=0;Tn<Wt.length;Tn++){var Rr=Wt[Tn].split("=");if(Rr.length>1){const Gr=Rr[0];Rr=Rr[1];const bo=Gr.split("_");Ue=bo.length>=2&&bo[1]=="type"?Ue+(Gr+"="+Rr+"&"):Ue+(Gr+"=redacted&")}}}else Ue=null;else Ue=pe;return"XMLHTTP REQ ("+q+") [attempt "+ue+"]: "+O+`
`+M+`
`+Ue})}function In(N,O,M,q,ue,pe,Ue){N.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+ue+"]: "+O+`
`+M+`
`+pe+" "+Ue})}function Kr(N,O,M,q){N.info(function(){return"XMLHTTP TEXT ("+O+"): "+vo(N,M)+(q?" "+q:"")})}function Ei(N,O){N.info(function(){return"TIMEOUT: "+O})}Tt.prototype.info=function(){};function vo(N,O){if(!N.g)return O;if(!O)return null;try{const pe=JSON.parse(O);if(pe){for(N=0;N<pe.length;N++)if(Array.isArray(pe[N])){var M=pe[N];if(!(M.length<2)){var q=M[1];if(Array.isArray(q)&&!(q.length<1)){var ue=q[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(let Ue=1;Ue<q.length;Ue++)q[Ue]=""}}}}return dn(pe)}catch{return O}}var Gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ta;function w1(){}h(w1,Ni),w1.prototype.g=function(){return new XMLHttpRequest},Ta=new w1;function jg(N){return encodeURIComponent(String(N))}function Hre(N){var O=1;N=N.split(":");const M=[];for(;O>0&&N.length;)M.push(N.shift()),O--;return N.length&&M.push(N.join(":")),M}function mc(N,O,M,q){this.j=N,this.i=O,this.l=M,this.S=q||1,this.V=new ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sM}function sM(){this.i=null,this.g="",this.h=!1}var iM={},j1={};function _1(N,O,M){N.M=1,N.A=Ib(xo(O)),N.u=M,N.R=!0,aM(N,null)}function aM(N,O){N.F=Date.now(),Pb(N),N.B=xo(N.A);var M=N.B,q=N.S;Array.isArray(q)||(q=[String(q)]),xM(M.i,"t",q),N.C=0,M=N.j.L,N.h=new sM,N.g=LM(N.j,M?O:null,!N.u),N.P>0&&(N.O=new Ve(u(N.Y,N,N.g),N.P)),O=N.V,M=N.g,q=N.ba;var ue="readystatechange";Array.isArray(ue)||(ue&&(Ye[0]=ue.toString()),ue=Ye);for(let pe=0;pe<ue.length;pe++){const Ue=he(M,ue[pe],q||O.handleEvent,!1,O.h||O);if(!Ue)break;O.g[Ue.key]=Ue}O=N.J?J(N.J):{},N.u?(N.v||(N.v="POST"),O["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.B,N.v,N.u,O)):(N.v="GET",N.g.ea(N.B,N.v,null,O)),fc(),pn(N.i,N.v,N.B,N.l,N.S,N.u)}mc.prototype.ba=function(N){N=N.target;const O=this.O;O&&yc(N)==3?O.j():this.Y(N)},mc.prototype.Y=function(N){try{if(N==this.g)e:{const Wt=yc(this.g),Rr=this.g.ya(),Tn=this.g.ca();if(!(Wt<3)&&(Wt!=3||this.g&&(this.h.h||this.g.la()||EM(this.g)))){this.K||Wt!=4||Rr==7||(Rr==8||Tn<=0?fc(3):fc(2)),N1(this);var O=this.g.ca();this.X=O;var M=Kre(this);if(this.o=O==200,In(this.i,this.v,this.B,this.l,this.S,Wt,O),this.o){if(this.U&&!this.L){t:{if(this.g){var q,ue=this.g;if((q=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(q)){var pe=q;break t}}pe=null}if(N=pe)Kr(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,S1(this,N);else{this.o=!1,this.m=3,kr(12),yd(this),_g(this);break e}}if(this.R){N=!0;let Gr;for(;!this.K&&this.C<M.length;)if(Gr=Gre(this,M),Gr==j1){Wt==4&&(this.m=4,kr(14),N=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==iM){this.m=4,kr(15),Kr(this.i,this.l,M,"[Invalid Chunk]"),N=!1;break}else Kr(this.i,this.l,Gr,null),S1(this,Gr);if(oM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||M.length!=0||this.h.h||(this.m=1,kr(16),N=!1),this.o=this.o&&N,!N)Kr(this.i,this.l,M,"[Invalid Chunked Response]"),yd(this),_g(this);else if(M.length>0&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.aa&&!Ue.P&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),R1(Ue),Ue.P=!0,kr(11))}}else Kr(this.i,this.l,M,null),S1(this,M);Wt==4&&yd(this),this.o&&!this.K&&(Wt==4?RM(this.j,this):(this.o=!1,Pb(this)))}else lse(this.g),O==400&&M.indexOf("Unknown SID")>0?(this.m=3,kr(12)):(this.m=0,kr(13)),yd(this),_g(this)}}}catch{}finally{}};function Kre(N){if(!oM(N))return N.g.la();const O=EM(N.g);if(O==="")return"";let M="";const q=O.length,ue=yc(N.g)==4;if(!N.h.i){if(typeof TextDecoder>"u")return yd(N),_g(N),"";N.h.i=new o.TextDecoder}for(let pe=0;pe<q;pe++)N.h.h=!0,M+=N.h.i.decode(O[pe],{stream:!(ue&&pe==q-1)});return O.length=0,N.h.g+=M,N.C=0,N.h.g}function oM(N){return N.g?N.v=="GET"&&N.M!=2&&N.j.Aa:!1}function Gre(N,O){var M=N.C,q=O.indexOf(`
`,M);return q==-1?j1:(M=Number(O.substring(M,q)),isNaN(M)?iM:(q+=1,q+M>O.length?j1:(O=O.slice(q,q+M),N.C=q+M,O)))}mc.prototype.cancel=function(){this.K=!0,yd(this)};function Pb(N){N.T=Date.now()+N.H,lM(N,N.H)}function lM(N,O){if(N.D!=null)throw Error("WatchDog timer not null");N.D=gd(u(N.aa,N),O)}function N1(N){N.D&&(o.clearTimeout(N.D),N.D=null)}mc.prototype.aa=function(){this.D=null;const N=Date.now();N-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(fc(),kr(17)),yd(this),this.m=2,_g(this)):lM(this,this.T-N)};function _g(N){N.j.I==0||N.K||RM(N.j,N)}function yd(N){N1(N);var O=N.O;O&&typeof O.dispose=="function"&&O.dispose(),N.O=null,Kt(N.V),N.g&&(O=N.g,N.g=null,O.abort(),O.dispose())}function S1(N,O){try{var M=N.j;if(M.I!=0&&(M.g==N||E1(M.h,N))){if(!N.L&&E1(M.h,N)&&M.I==3){try{var q=M.Ba.g.parse(O)}catch{q=null}if(Array.isArray(q)&&q.length==3){var ue=q;if(ue[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<N.F)Mb(M),Ob(M);else break e;k1(M),kr(18)}}else M.xa=ue[1],0<M.xa-M.K&&ue[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=gd(u(M.Va,M),6e3));dM(M.h)<=1&&M.ta&&(M.ta=void 0)}else xd(M,11)}else if((N.L||M.g==N)&&Mb(M),!k(O))for(ue=M.Ba.g.parse(O),O=0;O<ue.length;O++){let Tn=ue[O];const Gr=Tn[0];if(!(Gr<=M.K))if(M.K=Gr,Tn=Tn[1],M.I==2)if(Tn[0]=="c"){M.M=Tn[1],M.ba=Tn[2];const bo=Tn[3];bo!=null&&(M.ka=bo,M.j.info("VER="+M.ka));const bd=Tn[4];bd!=null&&(M.za=bd,M.j.info("SVER="+M.za));const vc=Tn[5];vc!=null&&typeof vc=="number"&&vc>0&&(q=1.5*vc,M.O=q,M.j.info("backChannelRequestTimeoutMs_="+q)),q=M;const xc=N.g;if(xc){const $b=xc.g?xc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($b){var pe=q.h;pe.g||$b.indexOf("spdy")==-1&&$b.indexOf("quic")==-1&&$b.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(A1(pe,pe.h),pe.h=null))}if(q.G){const O1=xc.g?xc.g.getResponseHeader("X-HTTP-Session-Id"):null;O1&&(q.wa=O1,Vn(q.J,q.G,O1))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-N.F,M.j.info("Handshake RTT: "+M.T+"ms")),q=M;var Ue=N;if(q.na=MM(q,q.L?q.ba:null,q.W),Ue.L){hM(q.h,Ue);var Wt=Ue,Rr=q.O;Rr&&(Wt.H=Rr),Wt.D&&(N1(Wt),Pb(Wt)),q.g=Ue}else IM(q);M.i.length>0&&Db(M)}else Tn[0]!="stop"&&Tn[0]!="close"||xd(M,7);else M.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?xd(M,7):I1(M):Tn[0]!="noop"&&M.l&&M.l.qa(Tn),M.A=0)}}fc(4)}catch{}}var Yre=class{constructor(N,O){this.g=N,this.map=O}};function cM(N){this.l=N||10,o.PerformanceNavigationTiming?(N=o.performance.getEntriesByType("navigation"),N=N.length>0&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uM(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function dM(N){return N.h?1:N.g?N.g.size:0}function E1(N,O){return N.h?N.h==O:N.g?N.g.has(O):!1}function A1(N,O){N.g?N.g.add(O):N.h=O}function hM(N,O){N.h&&N.h==O?N.h=null:N.g&&N.g.has(O)&&N.g.delete(O)}cM.prototype.cancel=function(){if(this.i=fM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function fM(N){if(N.h!=null)return N.i.concat(N.h.G);if(N.g!=null&&N.g.size!==0){let O=N.i;for(const M of N.g.values())O=O.concat(M.G);return O}return m(N.i)}var mM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qre(N,O){if(N){N=N.split("&");for(let M=0;M<N.length;M++){const q=N[M].indexOf("=");let ue,pe=null;q>=0?(ue=N[M].substring(0,q),pe=N[M].substring(q+1)):ue=N[M],O(ue,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function pc(N){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let O;N instanceof pc?(this.l=N.l,Ng(this,N.j),this.o=N.o,this.g=N.g,Sg(this,N.u),this.h=N.h,T1(this,bM(N.i)),this.m=N.m):N&&(O=String(N).match(mM))?(this.l=!1,Ng(this,O[1]||"",!0),this.o=Eg(O[2]||""),this.g=Eg(O[3]||"",!0),Sg(this,O[4]),this.h=Eg(O[5]||"",!0),T1(this,O[6]||"",!0),this.m=Eg(O[7]||"")):(this.l=!1,this.i=new Tg(null,this.l))}pc.prototype.toString=function(){const N=[];var O=this.j;O&&N.push(Ag(O,pM,!0),":");var M=this.g;return(M||O=="file")&&(N.push("//"),(O=this.o)&&N.push(Ag(O,pM,!0),"@"),N.push(jg(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&N.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&N.push("/"),N.push(Ag(M,M.charAt(0)=="/"?Jre:Zre,!0))),(M=this.i.toString())&&N.push("?",M),(M=this.m)&&N.push("#",Ag(M,tse)),N.join("")},pc.prototype.resolve=function(N){const O=xo(this);let M=!!N.j;M?Ng(O,N.j):M=!!N.o,M?O.o=N.o:M=!!N.g,M?O.g=N.g:M=N.u!=null;var q=N.h;if(M)Sg(O,N.u);else if(M=!!N.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var ue=O.h.lastIndexOf("/");ue!=-1&&(q=O.h.slice(0,ue+1)+q)}if(ue=q,ue==".."||ue==".")q="";else if(ue.indexOf("./")!=-1||ue.indexOf("/.")!=-1){q=ue.lastIndexOf("/",0)==0,ue=ue.split("/");const pe=[];for(let Ue=0;Ue<ue.length;){const Wt=ue[Ue++];Wt=="."?q&&Ue==ue.length&&pe.push(""):Wt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),q&&Ue==ue.length&&pe.push("")):(pe.push(Wt),q=!0)}q=pe.join("/")}else q=ue}return M?O.h=q:M=N.i.toString()!=="",M?T1(O,bM(N.i)):M=!!N.m,M&&(O.m=N.m),O};function xo(N){return new pc(N)}function Ng(N,O,M){N.j=M?Eg(O,!0):O,N.j&&(N.j=N.j.replace(/:$/,""))}function Sg(N,O){if(O){if(O=Number(O),isNaN(O)||O<0)throw Error("Bad port number "+O);N.u=O}else N.u=null}function T1(N,O,M){O instanceof Tg?(N.i=O,nse(N.i,N.l)):(M||(O=Ag(O,ese)),N.i=new Tg(O,N.l))}function Vn(N,O,M){N.i.set(O,M)}function Ib(N){return Vn(N,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),N}function Eg(N,O){return N?O?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Ag(N,O,M){return typeof N=="string"?(N=encodeURI(N).replace(O,Xre),M&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Xre(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var pM=/[#\/\?@]/g,Zre=/[#\?:]/g,Jre=/[#\?]/g,ese=/[#\?@]/g,tse=/#/g;function Tg(N,O){this.h=this.g=null,this.i=N||null,this.j=!!O}function vd(N){N.g||(N.g=new Map,N.h=0,N.i&&Qre(N.i,function(O,M){N.add(decodeURIComponent(O.replace(/\+/g," ")),M)}))}t=Tg.prototype,t.add=function(N,O){vd(this),this.i=null,N=cf(this,N);let M=this.g.get(N);return M||this.g.set(N,M=[]),M.push(O),this.h+=1,this};function gM(N,O){vd(N),O=cf(N,O),N.g.has(O)&&(N.i=null,N.h-=N.g.get(O).length,N.g.delete(O))}function yM(N,O){return vd(N),O=cf(N,O),N.g.has(O)}t.forEach=function(N,O){vd(this),this.g.forEach(function(M,q){M.forEach(function(ue){N.call(O,ue,q,this)},this)},this)};function vM(N,O){vd(N);let M=[];if(typeof O=="string")yM(N,O)&&(M=M.concat(N.g.get(cf(N,O))));else for(N=Array.from(N.g.values()),O=0;O<N.length;O++)M=M.concat(N[O]);return M}t.set=function(N,O){return vd(this),this.i=null,N=cf(this,N),yM(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[O]),this.h+=1,this},t.get=function(N,O){return N?(N=vM(this,N),N.length>0?String(N[0]):O):O};function xM(N,O,M){gM(N,O),M.length>0&&(N.i=null,N.g.set(cf(N,O),m(M)),N.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],O=Array.from(this.g.keys());for(let q=0;q<O.length;q++){var M=O[q];const ue=jg(M);M=vM(this,M);for(let pe=0;pe<M.length;pe++){let Ue=ue;M[pe]!==""&&(Ue+="="+jg(M[pe])),N.push(Ue)}}return this.i=N.join("&")};function bM(N){const O=new Tg;return O.i=N.i,N.g&&(O.g=new Map(N.g),O.h=N.h),O}function cf(N,O){return O=String(O),N.j&&(O=O.toLowerCase()),O}function nse(N,O){O&&!N.j&&(vd(N),N.i=null,N.g.forEach(function(M,q){const ue=q.toLowerCase();q!=ue&&(gM(this,q),xM(this,ue,M))},N)),N.j=O}function rse(N,O){const M=new Tt;if(o.Image){const q=new Image;q.onload=d(gc,M,"TestLoadImage: loaded",!0,O,q),q.onerror=d(gc,M,"TestLoadImage: error",!1,O,q),q.onabort=d(gc,M,"TestLoadImage: abort",!1,O,q),q.ontimeout=d(gc,M,"TestLoadImage: timeout",!1,O,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=N}else O(!1)}function sse(N,O){const M=new Tt,q=new AbortController,ue=setTimeout(()=>{q.abort(),gc(M,"TestPingServer: timeout",!1,O)},1e4);fetch(N,{signal:q.signal}).then(pe=>{clearTimeout(ue),pe.ok?gc(M,"TestPingServer: ok",!0,O):gc(M,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(ue),gc(M,"TestPingServer: error",!1,O)})}function gc(N,O,M,q,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),q(M)}catch{}}function ise(){this.g=new Ea}function C1(N){this.i=N.Sb||null,this.h=N.ab||!1}h(C1,Ni),C1.prototype.g=function(){return new kb(this.i,this.h)};function kb(N,O){on.call(this),this.H=N,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(kb,on),t=kb.prototype,t.open=function(N,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=N,this.D=O,this.readyState=1,Pg(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const O={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};N&&(O.body=N),(this.H||o).fetch(new Request(this.D,O)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cg(this)),this.readyState=0},t.Pa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Pg(this)),this.g&&(this.readyState=3,Pg(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wM(this)}else N.text().then(this.Oa.bind(this),this.ga.bind(this))};function wM(N){N.j.read().then(N.Ma.bind(N)).catch(N.ga.bind(N))}t.Ma=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var O=N.value?N.value:new Uint8Array(0);(O=this.B.decode(O,{stream:!N.done}))&&(this.response=this.responseText+=O)}N.done?Cg(this):Pg(this),this.readyState==3&&wM(this)}},t.Oa=function(N){this.g&&(this.response=this.responseText=N,Cg(this))},t.Na=function(N){this.g&&(this.response=N,Cg(this))},t.ga=function(){this.g&&Cg(this)};function Cg(N){N.readyState=4,N.l=null,N.j=null,N.B=null,Pg(N)}t.setRequestHeader=function(N,O){this.A.append(N,O)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],O=this.h.entries();for(var M=O.next();!M.done;)M=M.value,N.push(M[0]+": "+M[1]),M=O.next();return N.join(`\r
`)};function Pg(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(kb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function jM(N){let O="";return R(N,function(M,q){O+=q,O+=":",O+=M,O+=`\r
`}),O}function P1(N,O,M){e:{for(q in M){var q=!1;break e}q=!0}q||(M=jM(M),typeof N=="string"?M!=null&&jg(M):Vn(N,O,M))}function ar(N){on.call(this),this.headers=new Map,this.L=N||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ar,on);var ase=/^https?$/i,ose=["POST","PUT"];t=ar.prototype,t.Fa=function(N){this.H=N},t.ea=function(N,O,M,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);O=O?O.toUpperCase():"GET",this.D=N,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ta.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(O,String(N),!0),this.B=!1}catch(pe){_M(this,pe);return}if(N=M||"",M=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var ue in q)M.set(ue,q[ue]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const pe of q.keys())M.set(pe,q.get(pe));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(M.keys()).find(pe=>pe.toLowerCase()=="content-type"),ue=o.FormData&&N instanceof o.FormData,!(Array.prototype.indexOf.call(ose,O,void 0)>=0)||q||ue||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Ue]of M)this.g.setRequestHeader(pe,Ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(N),this.v=!1}catch(pe){_M(this,pe)}};function _M(N,O){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=O,N.o=5,NM(N),Rb(N)}function NM(N){N.A||(N.A=!0,Q(N,"complete"),Q(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=N||7,Q(this,"complete"),Q(this,"abort"),Rb(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rb(this,!0)),ar.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?SM(this):this.Xa())},t.Xa=function(){SM(this)};function SM(N){if(N.h&&typeof a<"u"){if(N.v&&yc(N)==4)setTimeout(N.Ca.bind(N),0);else if(Q(N,"readystatechange"),yc(N)==4){N.h=!1;try{const pe=N.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var M;if(!(M=O)){var q;if(q=pe===0){let Ue=String(N.D).match(mM)[1]||null;!Ue&&o.self&&o.self.location&&(Ue=o.self.location.protocol.slice(0,-1)),q=!ase.test(Ue?Ue.toLowerCase():"")}M=q}if(M)Q(N,"complete"),Q(N,"success");else{N.o=6;try{var ue=yc(N)>2?N.g.statusText:""}catch{ue=""}N.l=ue+" ["+N.ca()+"]",NM(N)}}finally{Rb(N)}}}}function Rb(N,O){if(N.g){N.m&&(clearTimeout(N.m),N.m=null);const M=N.g;N.g=null,O||Q(N,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function yc(N){return N.g?N.g.readyState:0}t.ca=function(){try{return yc(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(N){if(this.g){var O=this.g.responseText;return N&&O.indexOf(N)==0&&(O=O.substring(N.length)),ys(O)}};function EM(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.F){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function lse(N){const O={};N=(N.g&&yc(N)>=2&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<N.length;q++){if(k(N[q]))continue;var M=Hre(N[q]);const ue=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const pe=O[ue]||[];O[ue]=pe,pe.push(M)}W(O,function(q){return q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ig(N,O,M){return M&&M.internalChannelParams&&M.internalChannelParams[N]||O}function AM(N){this.za=0,this.i=[],this.j=new Tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ig("failFast",!1,N),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ig("baseRetryDelayMs",5e3,N),this.Za=Ig("retryDelaySeedMs",1e4,N),this.Ta=Ig("forwardChannelMaxRetries",2,N),this.va=Ig("forwardChannelRequestTimeoutMs",2e4,N),this.ma=N&&N.xmlHttpFactory||void 0,this.Ua=N&&N.Rb||void 0,this.Aa=N&&N.useFetchStreams||!1,this.O=void 0,this.L=N&&N.supportsCrossDomainXhr||!1,this.M="",this.h=new cM(N&&N.concurrentRequestLimit),this.Ba=new ise,this.S=N&&N.fastHandshake||!1,this.R=N&&N.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=N&&N.Pb||!1,N&&N.ua&&this.j.ua(),N&&N.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&N&&N.detectBufferingProxy||!1,this.ia=void 0,N&&N.longPollingTimeout&&N.longPollingTimeout>0&&(this.ia=N.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=AM.prototype,t.ka=8,t.I=1,t.connect=function(N,O,M,q){kr(0),this.W=N,this.H=O||{},M&&q!==void 0&&(this.H.OSID=M,this.H.OAID=q),this.F=this.X,this.J=MM(this,null,this.W),Db(this)};function I1(N){if(TM(N),N.I==3){var O=N.V++,M=xo(N.J);if(Vn(M,"SID",N.M),Vn(M,"RID",O),Vn(M,"TYPE","terminate"),kg(N,M),O=new mc(N,N.j,O),O.M=2,O.A=Ib(xo(M)),M=!1,o.navigator&&o.navigator.sendBeacon)try{M=o.navigator.sendBeacon(O.A.toString(),"")}catch{}!M&&o.Image&&(new Image().src=O.A,M=!0),M||(O.g=LM(O.j,null),O.g.ea(O.A)),O.F=Date.now(),Pb(O)}DM(N)}function Ob(N){N.g&&(R1(N),N.g.cancel(),N.g=null)}function TM(N){Ob(N),N.v&&(o.clearTimeout(N.v),N.v=null),Mb(N),N.h.cancel(),N.m&&(typeof N.m=="number"&&o.clearTimeout(N.m),N.m=null)}function Db(N){if(!uM(N.h)&&!N.m){N.m=!0;var O=N.Ea;S||g(),P||(S(),P=!0),_.add(O,N),N.D=0}}function cse(N,O){return dM(N.h)>=N.h.j-(N.m?1:0)?!1:N.m?(N.i=O.G.concat(N.i),!0):N.I==1||N.I==2||N.D>=(N.Sa?0:N.Ta)?!1:(N.m=gd(u(N.Ea,N,O),OM(N,N.D)),N.D++,!0)}t.Ea=function(N){if(this.m)if(this.m=null,this.I==1){if(!N){this.V=Math.floor(Math.random()*1e5),N=this.V++;const ue=new mc(this,this.j,N);let pe=this.o;if(this.U&&(pe?(pe=J(pe),Ae(pe,this.U)):pe=this.U),this.u!==null||this.R||(ue.J=pe,pe=null),this.S)e:{for(var O=0,M=0;M<this.i.length;M++){t:{var q=this.i[M];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(O+=q,O>4096){O=M;break e}if(O===4096||M===this.i.length-1){O=M+1;break e}}O=1e3}else O=1e3;O=PM(this,ue,O),M=xo(this.J),Vn(M,"RID",N),Vn(M,"CVER",22),this.G&&Vn(M,"X-HTTP-Session-Id",this.G),kg(this,M),pe&&(this.R?O="headers="+jg(jM(pe))+"&"+O:this.u&&P1(M,this.u,pe)),A1(this.h,ue),this.Ra&&Vn(M,"TYPE","init"),this.S?(Vn(M,"$req",O),Vn(M,"SID","null"),ue.U=!0,_1(ue,M,null)):_1(ue,M,O),this.I=2}}else this.I==3&&(N?CM(this,N):this.i.length==0||uM(this.h)||CM(this))};function CM(N,O){var M;O?M=O.l:M=N.V++;const q=xo(N.J);Vn(q,"SID",N.M),Vn(q,"RID",M),Vn(q,"AID",N.K),kg(N,q),N.u&&N.o&&P1(q,N.u,N.o),M=new mc(N,N.j,M,N.D+1),N.u===null&&(M.J=N.o),O&&(N.i=O.G.concat(N.i)),O=PM(N,M,1e3),M.H=Math.round(N.va*.5)+Math.round(N.va*.5*Math.random()),A1(N.h,M),_1(M,q,O)}function kg(N,O){N.H&&R(N.H,function(M,q){Vn(O,q,M)}),N.l&&R({},function(M,q){Vn(O,q,M)})}function PM(N,O,M){M=Math.min(N.i.length,M);const q=N.l?u(N.l.Ka,N.l,N):null;e:{var ue=N.i;let Wt=-1;for(;;){const Rr=["count="+M];Wt==-1?M>0?(Wt=ue[0].g,Rr.push("ofs="+Wt)):Wt=0:Rr.push("ofs="+Wt);let Tn=!0;for(let Gr=0;Gr<M;Gr++){var pe=ue[Gr].g;const bo=ue[Gr].map;if(pe-=Wt,pe<0)Wt=Math.max(0,ue[Gr].g-100),Tn=!1;else try{pe="req"+pe+"_"||"";try{var Ue=bo instanceof Map?bo:Object.entries(bo);for(const[bd,vc]of Ue){let xc=vc;l(vc)&&(xc=dn(vc)),Rr.push(pe+bd+"="+encodeURIComponent(xc))}}catch(bd){throw Rr.push(pe+"type="+encodeURIComponent("_badmap")),bd}}catch{q&&q(bo)}}if(Tn){Ue=Rr.join("&");break e}}Ue=void 0}return N=N.i.splice(0,M),O.G=N,Ue}function IM(N){if(!N.g&&!N.v){N.Y=1;var O=N.Da;S||g(),P||(S(),P=!0),_.add(O,N),N.A=0}}function k1(N){return N.g||N.v||N.A>=3?!1:(N.Y++,N.v=gd(u(N.Da,N),OM(N,N.A)),N.A++,!0)}t.Da=function(){if(this.v=null,kM(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var N=4*this.T;this.j.info("BP detection timer enabled: "+N),this.B=gd(u(this.Wa,this),N)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kr(10),Ob(this),kM(this))};function R1(N){N.B!=null&&(o.clearTimeout(N.B),N.B=null)}function kM(N){N.g=new mc(N,N.j,"rpc",N.Y),N.u===null&&(N.g.J=N.o),N.g.P=0;var O=xo(N.na);Vn(O,"RID","rpc"),Vn(O,"SID",N.M),Vn(O,"AID",N.K),Vn(O,"CI",N.F?"0":"1"),!N.F&&N.ia&&Vn(O,"TO",N.ia),Vn(O,"TYPE","xmlhttp"),kg(N,O),N.u&&N.o&&P1(O,N.u,N.o),N.O&&(N.g.H=N.O);var M=N.g;N=N.ba,M.M=1,M.A=Ib(xo(O)),M.u=null,M.R=!0,aM(M,N)}t.Va=function(){this.C!=null&&(this.C=null,Ob(this),k1(this),kr(19))};function Mb(N){N.C!=null&&(o.clearTimeout(N.C),N.C=null)}function RM(N,O){var M=null;if(N.g==O){Mb(N),R1(N),N.g=null;var q=2}else if(E1(N.h,O))M=O.G,hM(N.h,O),q=1;else return;if(N.I!=0){if(O.o)if(q==1){M=O.u?O.u.length:0,O=Date.now()-O.F;var ue=N.D;q=ul(),Q(q,new Aa(q,M)),Db(N)}else IM(N);else if(ue=O.m,ue==3||ue==0&&O.X>0||!(q==1&&cse(N,O)||q==2&&k1(N)))switch(M&&M.length>0&&(O=N.h,O.i=O.i.concat(M)),ue){case 1:xd(N,5);break;case 4:xd(N,10);break;case 3:xd(N,6);break;default:xd(N,2)}}}function OM(N,O){let M=N.Qa+Math.floor(Math.random()*N.Za);return N.isActive()||(M*=2),M*O}function xd(N,O){if(N.j.info("Error code "+O),O==2){var M=u(N.bb,N),q=N.Ua;const ue=!q;q=new pc(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ng(q,"https"),Ib(q),ue?rse(q.toString(),M):sse(q.toString(),M)}else kr(2);N.I=0,N.l&&N.l.pa(O),DM(N),TM(N)}t.bb=function(N){N?(this.j.info("Successfully pinged google.com"),kr(2)):(this.j.info("Failed to ping google.com"),kr(1))};function DM(N){if(N.I=0,N.ja=[],N.l){const O=fM(N.h);(O.length!=0||N.i.length!=0)&&(v(N.ja,O),v(N.ja,N.i),N.h.i.length=0,m(N.i),N.i.length=0),N.l.oa()}}function MM(N,O,M){var q=M instanceof pc?xo(M):new pc(M);if(q.g!="")O&&(q.g=O+"."+q.g),Sg(q,q.u);else{var ue=o.location;q=ue.protocol,O=O?O+"."+ue.hostname:ue.hostname,ue=+ue.port;const pe=new pc(null);q&&Ng(pe,q),O&&(pe.g=O),ue&&Sg(pe,ue),M&&(pe.h=M),q=pe}return M=N.G,O=N.wa,M&&O&&Vn(q,M,O),Vn(q,"VER",N.ka),kg(N,q),q}function LM(N,O,M){if(O&&!N.L)throw Error("Can't create secondary domain capable XhrIo object.");return O=N.Aa&&!N.ma?new ar(new C1({ab:M})):new ar(N.ma),O.Fa(N.L),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $M(){}t=$M.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Lb(){}Lb.prototype.g=function(N,O){return new Ai(N,O)};function Ai(N,O){on.call(this),this.g=new AM(O),this.l=N,this.h=O&&O.messageUrlParams||null,N=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(N?N["X-WebChannel-Content-Type"]=O.messageContentType:N={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.sa&&(N?N["X-WebChannel-Client-Profile"]=O.sa:N={"X-WebChannel-Client-Profile":O.sa}),this.g.U=N,(N=O&&O.Qb)&&!k(N)&&(this.g.u=N),this.A=O&&O.supportsCrossDomainXhr||!1,this.v=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!k(O)&&(this.g.G=O,N=this.h,N!==null&&O in N&&(N=this.h,O in N&&delete N[O])),this.j=new uf(this)}h(Ai,on),Ai.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ai.prototype.close=function(){I1(this.g)},Ai.prototype.o=function(N){var O=this.g;if(typeof N=="string"){var M={};M.__data__=N,N=M}else this.v&&(M={},M.__data__=dn(N),N=M);O.i.push(new Yre(O.Ya++,N)),O.I==3&&Db(O)},Ai.prototype.N=function(){this.g.l=null,delete this.j,I1(this.g),delete this.g,Ai.Z.N.call(this)};function FM(N){ti.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var O=N.__sm__;if(O){e:{for(const M in O){N=M;break e}N=void 0}(this.i=N)&&(N=this.i,O=O!==null&&N in O?O[N]:void 0),this.data=O}else this.data=N}h(FM,ti);function VM(){hc.call(this),this.status=1}h(VM,hc);function uf(N){this.g=N}h(uf,$M),uf.prototype.ra=function(){Q(this.g,"a")},uf.prototype.qa=function(N){Q(this.g,new FM(N))},uf.prototype.pa=function(N){Q(this.g,new VM)},uf.prototype.oa=function(){Q(this.g,"b")},Lb.prototype.createWebChannel=Lb.prototype.g,Ai.prototype.send=Ai.prototype.o,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,NH=function(){return new Lb},_H=function(){return ul()},jH=ss,wC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,ow=Gi,ni.COMPLETE="complete",wH=ni,pd.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",on.prototype.listen=on.prototype.J,gy=pd,ar.prototype.listenOnce=ar.prototype.K,ar.prototype.getLastError=ar.prototype.Ha,ar.prototype.getLastErrorCode=ar.prototype.ya,ar.prototype.getStatus=ar.prototype.ca,ar.prototype.getResponseJson=ar.prototype.La,ar.prototype.getResponseText=ar.prototype.la,ar.prototype.send=ar.prototype.ea,ar.prototype.setWithCredentials=ar.prototype.Fa,bH=ar}).apply(typeof u0<"u"?u0:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_s.UNAUTHENTICATED=new _s(null),_s.GOOGLE_CREDENTIALS=new _s("google-credentials-uid"),_s.FIRST_PARTY=new _s("first-party-uid"),_s.MOCK_USER=new _s("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp="12.9.0";function rye(t){Yp=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new PR("@firebase/firestore");function Sf(){return Ch.logLevel}function Je(t,...e){if(Ch.logLevel<=Qt.DEBUG){const n=e.map(qR);Ch.debug(`Firestore (${Yp}): ${t}`,...n)}}function Hl(t,...e){if(Ch.logLevel<=Qt.ERROR){const n=e.map(qR);Ch.error(`Firestore (${Yp}): ${t}`,...n)}}function Ph(t,...e){if(Ch.logLevel<=Qt.WARN){const n=e.map(qR);Ch.warn(`Firestore (${Yp}): ${t}`,...n)}}function qR(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SH(t,r,n)}function SH(t,e,n){let r=`FIRESTORE (${Yp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hl(r),new Error(r)}function vn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||SH(e,i,r)}function Vt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends mo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_s.UNAUTHENTICATED))}shutdown(){}}class iye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aye{constructor(e){this.t=e,this.currentUser=_s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new kl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new kl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new kl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vn(typeof r.accessToken=="string",31837,{l:r}),new EH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vn(e===null||typeof e=="string",2055,{h:e}),new _s(e)}}class oye{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_s.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lye{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oye(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_s.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cye{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){vn(this.o===void 0,3512);const r=a=>{a.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uye(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uye(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Xt(t,e){return t<e?-1:t>e?1:0}function jC(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return _E(i)===_E(a)?Xt(i,a):_E(i)?1:-1}return Xt(t.length,e.length)}const dye=55296,hye=57343;function _E(t){const e=t.charCodeAt(0);return e>=dye&&e<=hye}function Km(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="__name__";class No{constructor(e,n,r){n===void 0?n=0:n>e.length&&It(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&It(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return No.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof No?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=No.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Xt(e.length,n.length)}static compareSegments(e,n){const r=No.isNumericId(e),i=No.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?No.extractNumericId(e).compare(No.extractNumericId(n)):jC(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nu.fromString(e.substring(4,e.length-2))}}class Dn extends No{construct(e,n,r){return new Dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(Ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dn(n)}static emptyPath(){return new Dn([])}}const fye=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ds extends No{construct(e,n,r){return new ds(e,n,r)}static isValidIdentifier(e){return fye.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ds.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_C}static keyField(){return new ds([_C])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new He(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new He(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new He(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new He(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ds(n)}static emptyPath(){return new ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.path=e}static fromPath(e){return new jt(Dn.fromString(e))}static fromName(e){return new jt(Dn.fromString(e).popFirst(5))}static empty(){return new jt(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new Dn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t,e,n){if(!n)throw new He(Ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mye(t,e,n,r){if(e===!0&&r===!0)throw new He(Ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N$(t){if(!jt.isDocumentKey(t))throw new He(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S$(t){if(jt.isDocumentKey(t))throw new He(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TH(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kN(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":It(12329,{type:typeof t})}function ba(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kN(t);throw new He(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pye(t,e){if(e<=0)throw new He(Ne.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jx(t,e){if(!TH(t))throw new He(Ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new He(Ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=-62135596800,A$=1e6;class Wn{static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*A$);return new Wn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<E$)throw new He(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A$}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jx(e,Wn._jsonSchema))return new Wn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-E$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wn._jsonSchemaVersion="firestore/timestamp/1.0",Wn._jsonSchema={type:Pr("string",Wn._jsonSchemaVersion),seconds:Pr("number"),nanoseconds:Pr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Wn(0,0))}static max(){return new Mt(new Wn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-1;function gye(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(r===1e9?new Wn(n+1,0):new Wn(n,r));return new Mu(i,jt.empty(),e)}function yye(t){return new Mu(t.readTime,t.key,Cv)}class Mu{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mu(Mt.min(),jt.empty(),Cv)}static max(){return new Mu(Mt.max(),jt.empty(),Cv)}}function vye(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=jt.comparator(t.documentKey,e.documentKey),n!==0?n:Xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qp(t){if(t.code!==Ne.FAILED_PRECONDITION||t.message!==xye)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Te?n:Te.resolve(n)}catch(n){return Te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.reject(n)}static resolve(e){return new Te((n,r)=>{n(e)})}static reject(e){return new Te((n,r)=>{r(e)})}static waitFor(e){return new Te((n,r)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&n()},c=>r(c))}),o=!0,a===i&&n()})}static or(e){let n=Te.resolve(!1);for(const r of e)n=n.next(i=>i?Te.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new Te((r,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Te((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function wye(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}RN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=-1;function ON(t){return t==null}function hj(t){return t===0&&1/t==-1/0}function jye(t){return typeof t=="number"&&Number.isInteger(t)&&!hj(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH="";function _ye(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=T$(e)),e=Nye(t.get(n),e);return T$(e)}function Nye(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case CH:n+="";break;default:n+=a}}return n}function T$(t){return t+CH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ju(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){this.comparator=e,this.root=n||cs.EMPTY}insert(e,n){return new ir(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new d0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new d0(this.root,e,this.comparator,!1)}getReverseIterator(){return new d0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new d0(this.root,e,this.comparator,!0)}}class d0{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cs{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??cs.RED,this.left=i??cs.EMPTY,this.right=a??cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new cs(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return cs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw It(27949);return e+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new cs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P$(this.data.getIterator())}getIteratorFrom(e){return new P$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qr(this.comparator);return n.data=e,n}}class P${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.fields=e,e.sort(ds.comparator)}static empty(){return new Li([])}unionWith(e){let n=new qr(ds.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Li(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Km(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IH("Invalid base64 string: "+a):a}}(e);return new ms(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ms(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const Sye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lu(t){if(vn(!!t,39018),typeof t=="string"){let e=0;const n=Sye.exec(t);if(vn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yr(t.seconds),nanos:yr(t.nanos)}}function yr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $u(t){return typeof t=="string"?ms.fromBase64String(t):ms.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="server_timestamp",RH="__type__",OH="__previous_value__",DH="__local_write_time__";function KR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RH])==null?void 0:r.stringValue)===kH}function DN(t){const e=t.mapValue.fields[OH];return KR(e)?DN(e):e}function Pv(t){const e=Lu(t.mapValue.fields[DH].timestampValue);return new Wn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eye{constructor(e,n,r,i,a,o,l,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=h}}const fj="(default)";class Iv{constructor(e,n){this.projectId=e,this.database=n||fj}static empty(){return new Iv("","")}get isDefaultDatabase(){return this.database===fj}isEqual(e){return e instanceof Iv&&e.projectId===this.projectId&&e.database===this.database}}function Aye(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new He(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iv(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH="__type__",LH="__max__",h0={mapValue:{fields:{__type__:{stringValue:LH}}}},$H="__vector__",mj="value";function Fu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KR(t)?4:Cye(t)?9007199254740991:Tye(t)?10:11:It(28295,{value:t})}function Jo(t,e){if(t===e)return!0;const n=Fu(t);if(n!==Fu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pv(t).isEqual(Pv(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Lu(i.timestampValue),l=Lu(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return $u(i.bytesValue).isEqual($u(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yr(i.geoPointValue.latitude)===yr(a.geoPointValue.latitude)&&yr(i.geoPointValue.longitude)===yr(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yr(i.integerValue)===yr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=yr(i.doubleValue),l=yr(a.doubleValue);return o===l?hj(o)===hj(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Km(t.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(C$(o)!==C$(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Jo(o[c],l[c])))return!1;return!0}(t,e);default:return It(52216,{left:t})}}function kv(t,e){return(t.values||[]).find(n=>Jo(n,e))!==void 0}function Gm(t,e){if(t===e)return 0;const n=Fu(t),r=Fu(e);if(n!==r)return Xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=yr(a.integerValue||a.doubleValue),c=yr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return I$(t.timestampValue,e.timestampValue);case 4:return I$(Pv(t),Pv(e));case 5:return jC(t.stringValue,e.stringValue);case 6:return function(a,o){const l=$u(a),c=$u(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Xt(l[u],c[u]);if(d!==0)return d}return Xt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Xt(yr(a.latitude),yr(o.latitude));return l!==0?l:Xt(yr(a.longitude),yr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k$(t.arrayValue,e.arrayValue);case 10:return function(a,o){var f,m,v,p;const l=a.fields||{},c=o.fields||{},u=(f=l[mj])==null?void 0:f.arrayValue,d=(m=c[mj])==null?void 0:m.arrayValue,h=Xt(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:k$(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===h0.mapValue&&o===h0.mapValue)return 0;if(a===h0.mapValue)return 1;if(o===h0.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=jC(c[h],d[h]);if(f!==0)return f;const m=Gm(l[c[h]],u[d[h]]);if(m!==0)return m}return Xt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw It(23264,{he:n})}}function I$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xt(t,e);const n=Lu(t),r=Lu(e),i=Xt(n.seconds,r.seconds);return i!==0?i:Xt(n.nanos,r.nanos)}function k$(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Gm(n[i],r[i]);if(a)return a}return Xt(n.length,r.length)}function Ym(t){return NC(t)}function NC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lu(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $u(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return jt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=NC(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${NC(n.fields[o])}`;return i+"}"}(t.mapValue):It(61005,{value:t})}function lw(t){switch(Fu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=DN(t);return e?16+lw(e):16;case 5:return 2*t.stringValue.length;case 6:return $u(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+lw(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ju(r.fields,(a,o)=>{i+=a.length+lw(o)}),i}(t.mapValue);default:throw It(13486,{value:t})}}function R$(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function SC(t){return!!t&&"integerValue"in t}function GR(t){return!!t&&"arrayValue"in t}function O$(t){return!!t&&"nullValue"in t}function D$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cw(t){return!!t&&"mapValue"in t}function Tye(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MH])==null?void 0:r.stringValue)===$H}function $y(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ju(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$y(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$y(t.arrayValue.values[n]);return e}return{...t}}function Cye(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$y(n)}setAll(e){let n=ds.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=$y(o):i.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());cw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ju(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new fi($y(this.value))}}function FH(t){const e=[];return Ju(t.fields,(n,r)=>{const i=new ds([n]);if(cw(r)){const a=FH(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,i,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new As(e,0,Mt.min(),Mt.min(),Mt.min(),fi.empty(),0)}static newFoundDocument(e,n,r,i){return new As(e,1,n,Mt.min(),r,i,0)}static newNoDocument(e,n){return new As(e,2,n,Mt.min(),Mt.min(),fi.empty(),0)}static newUnknownDocument(e,n){return new As(e,3,n,Mt.min(),Mt.min(),fi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this.position=e,this.inclusive=n}}function M$(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=jt.comparator(jt.fromName(o.referenceValue),n.key):r=Gm(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function L$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{}class Cr extends VH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kye(e,n,r):n==="array-contains"?new Dye(e,r):n==="in"?new Mye(e,r):n==="not-in"?new Lye(e,r):n==="array-contains-any"?new $ye(e,r):new Cr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Rye(e,r):new Oye(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gm(n,this.value)):n!==null&&Fu(this.value)===Fu(n)&&this.matchesComparison(Gm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fo extends VH{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fo(e,n)}matches(e){return BH(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BH(t){return t.op==="and"}function UH(t){return Iye(t)&&BH(t)}function Iye(t){for(const e of t.filters)if(e instanceof fo)return!1;return!0}function EC(t){if(t instanceof Cr)return t.field.canonicalString()+t.op.toString()+Ym(t.value);if(UH(t))return t.filters.map(e=>EC(e)).join(",");{const e=t.filters.map(n=>EC(n)).join(",");return`${t.op}(${e})`}}function zH(t,e){return t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.field.isEqual(i.field)&&Jo(r.value,i.value)}(t,e):t instanceof fo?function(r,i){return i instanceof fo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,l)=>a&&zH(o,i.filters[l]),!0):!1}(t,e):void It(19439)}function qH(t){return t instanceof Cr?function(n){return`${n.field.canonicalString()} ${n.op} ${Ym(n.value)}`}(t):t instanceof fo?function(n){return n.op.toString()+" {"+n.getFilters().map(qH).join(" ,")+"}"}(t):"Filter"}class kye extends Cr{constructor(e,n,r){super(e,n,r),this.key=jt.fromName(r.referenceValue)}matches(e){const n=jt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Rye extends Cr{constructor(e,n){super(e,"in",n),this.keys=WH("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Oye extends Cr{constructor(e,n){super(e,"not-in",n),this.keys=WH("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WH(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>jt.fromName(r.referenceValue))}class Dye extends Cr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return GR(n)&&kv(n.arrayValue,this.value)}}class Mye extends Cr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kv(this.value.arrayValue,n)}}class Lye extends Cr{constructor(e,n){super(e,"not-in",n)}matches(e){if(kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kv(this.value.arrayValue,n)}}class $ye extends Cr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!GR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kv(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fye{constructor(e,n=null,r=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function $$(t,e=null,n=[],r=[],i=null,a=null,o=null){return new Fye(t,e,n,r,i,a,o)}function YR(t){const e=Vt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>EC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ON(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ym(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ym(r)).join(",")),e.Te=n}return e.Te}function QR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L$(t.startAt,e.startAt)&&L$(t.endAt,e.endAt)}function AC(t){return jt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Vye(t,e,n,r,i,a,o,l){return new Zp(t,e,n,r,i,a,o,l)}function XR(t){return new Zp(t)}function F$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Bye(t){return jt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function HH(t){return t.collectionGroup!==null}function Fy(t){const e=Vt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qr(ds.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Rv(a,r))}),n.has(ds.keyField().canonicalString())||e.Ie.push(new Rv(ds.keyField(),r))}return e.Ie}function Uo(t){const e=Vt(t);return e.Ee||(e.Ee=Uye(e,Fy(t))),e.Ee}function Uye(t,e){if(t.limitType==="F")return $$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Rv(i.field,a)});const n=t.endAt?new pj(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pj(t.startAt.position,t.startAt.inclusive):null;return $$(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function TC(t,e){const n=t.filters.concat([e]);return new Zp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zye(t,e){const n=t.explicitOrderBy.concat([e]);return new Zp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function gj(t,e,n){return new Zp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function MN(t,e){return QR(Uo(t),Uo(e))&&t.limitType===e.limitType}function KH(t){return`${YR(Uo(t))}|lt:${t.limitType}`}function Ef(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qH(i)).join(", ")}]`),ON(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ym(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ym(i)).join(",")),`Target(${r})`}(Uo(t))}; limitType=${t.limitType})`}function LN(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):jt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Fy(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=M$(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Fy(r),i)||r.endAt&&!function(o,l,c){const u=M$(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Fy(r),i))}(t,e)}function qye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GH(t){return(e,n)=>{let r=!1;for(const i of Fy(t)){const a=Wye(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Wye(t,e,n){const r=t.field.isKeyField()?jt.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Gm(c,u):It(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return It(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ju(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return PH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hye=new ir(jt.comparator);function Kl(){return Hye}const YH=new ir(jt.comparator);function yy(...t){let e=YH;for(const n of t)e=e.insert(n.key,n);return e}function QH(t){let e=YH;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fd(){return Vy()}function XH(){return Vy()}function Vy(){return new Xh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Kye=new ir(jt.comparator),Gye=new qr(jt.comparator);function Zt(...t){let e=Gye;for(const n of t)e=e.add(n);return e}const Yye=new qr(Xt);function Qye(){return Yye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hj(e)?"-0":e}}function ZH(t){return{integerValue:""+t}}function Xye(t,e){return jye(e)?ZH(e):ZR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this._=void 0}}function Zye(t,e,n){return t instanceof Ov?function(i,a){const o={fields:{[RH]:{stringValue:kH},[DH]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&KR(a)&&(a=DN(a)),a&&(o.fields[OH]=a),{mapValue:o}}(n,e):t instanceof Dv?eK(t,e):t instanceof Mv?tK(t,e):function(i,a){const o=JH(i,a),l=V$(o)+V$(i.Ae);return SC(o)&&SC(i.Ae)?ZH(l):ZR(i.serializer,l)}(t,e)}function Jye(t,e,n){return t instanceof Dv?eK(t,e):t instanceof Mv?tK(t,e):n}function JH(t,e){return t instanceof yj?function(r){return SC(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ov extends $N{}class Dv extends $N{constructor(e){super(),this.elements=e}}function eK(t,e){const n=nK(e);for(const r of t.elements)n.some(i=>Jo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mv extends $N{constructor(e){super(),this.elements=e}}function tK(t,e){let n=nK(e);for(const r of t.elements)n=n.filter(i=>!Jo(i,r));return{arrayValue:{values:n}}}class yj extends $N{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function V$(t){return yr(t.integerValue||t.doubleValue)}function nK(t){return GR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(e,n){this.field=e,this.transform=n}}function tve(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Dv&&i instanceof Dv||r instanceof Mv&&i instanceof Mv?Km(r.elements,i.elements,Jo):r instanceof yj&&i instanceof yj?Jo(r.Ae,i.Ae):r instanceof Ov&&i instanceof Ov}(t.transform,e.transform)}class nve{constructor(e,n){this.version=e,this.transformResults=n}}class Xs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class FN{}function rK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VN(t.key,Xs.none()):new eb(t.key,t.data,Xs.none());{const n=t.data,r=fi.empty();let i=new qr(ds.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new ed(t.key,r,new Li(i.toArray()),Xs.none())}}function rve(t,e,n){t instanceof eb?function(i,a,o){const l=i.value.clone(),c=U$(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ed?function(i,a,o){if(!uw(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=U$(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(sK(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function By(t,e,n,r){return t instanceof eb?function(a,o,l,c){if(!uw(a.precondition,o))return l;const u=a.value.clone(),d=z$(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ed?function(a,o,l,c){if(!uw(a.precondition,o))return l;const u=z$(a.fieldTransforms,c,o),d=o.data;return d.setAll(sK(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,o,l){return uw(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sve(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=JH(r.transform,i||null);a!=null&&(n===null&&(n=fi.empty()),n.set(r.field,a))}return n||null}function B$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Km(r,i,(a,o)=>tve(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eb extends FN{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ed extends FN{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sK(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U$(t,e,n){const r=new Map;vn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);r.set(a.field,Jye(o,l,n[i]))}return r}function z$(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,Zye(a,o,e))}return r}class VN extends FN{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ive extends FN{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ave{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&rve(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=By(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=By(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XH();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(i.key)?null:l;const c=rK(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Km(this.mutations,e.mutations,(n,r)=>B$(n,r))&&Km(this.baseMutations,e.baseMutations,(n,r)=>B$(n,r))}}class JR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){vn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Kye}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new JR(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ove=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr,rn;function cve(t){switch(t){case Ne.OK:return It(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return It(15467,{code:t})}}function iK(t){if(t===void 0)return Hl("GRPC error has no .code"),Ne.UNKNOWN;switch(t){case Sr.OK:return Ne.OK;case Sr.CANCELLED:return Ne.CANCELLED;case Sr.UNKNOWN:return Ne.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return Ne.INTERNAL;case Sr.UNAVAILABLE:return Ne.UNAVAILABLE;case Sr.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case Sr.NOT_FOUND:return Ne.NOT_FOUND;case Sr.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case Sr.ABORTED:return Ne.ABORTED;case Sr.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case Sr.DATA_LOSS:return Ne.DATA_LOSS;default:return It(39323,{code:t})}}(rn=Sr||(Sr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dve=new Nu([4294967295,4294967295],0);function q$(t){const e=uve().encode(t),n=new xH;return n.update(e),new Uint8Array(n.digest())}function W$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Nu([n,r],0),new Nu([i,a],0)]}class eO{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vy(`Invalid padding: ${n}`);if(r<0)throw new vy(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vy(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vy(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Nu.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Nu.fromNumber(r)));return i.compare(dve)===1&&(i=new Nu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=q$(e),[r,i]=W$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new eO(a,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=q$(e),[r,i]=W$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,tb.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new BN(Mt.min(),i,new ir(Xt),Kl(),Zt())}}class tb{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tb(r,n,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class aK{constructor(e,n){this.targetId=e,this.Ce=n}}class oK{constructor(e,n,r=ms.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class H${constructor(){this.ve=0,this.Fe=K$(),this.Me=ms.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Zt(),n=Zt(),r=Zt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:It(38017,{changeType:a})}}),new tb(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=K$()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class hve{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kl(),this.He=f0(),this.Je=f0(),this.Ze=new ir(Xt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:It(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(AC(a))if(r===0){const o=new jt(a.path);this.et(n,o,As.newNoDocument(o,Mt.min()))}else vn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=$u(r).toUint8Array()}catch(c){if(c instanceof IH)return Ph("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new eO(o,i,a)}catch(c){return Ph(c instanceof vy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&AC(l.target)){const c=new jt(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,As.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}});let r=Zt();this.Je.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new BN(e,n,this.Ze,this.je,r);return this.je=Kl(),this.He=f0(),this.Je=f0(),this.Ze=new ir(Xt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new H$,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new qr(Xt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new qr(Xt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Je("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new H$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function f0(){return new ir(jt.comparator)}function K$(){return new ir(jt.comparator)}const fve={asc:"ASCENDING",desc:"DESCENDING"},mve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pve={and:"AND",or:"OR"};class gve{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function CC(t,e){return t.useProto3Json||ON(e)?e:{value:e}}function vj(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yve(t,e){return vj(t,e.toTimestamp())}function zo(t){return vn(!!t,49232),Mt.fromTimestamp(function(n){const r=Lu(n);return new Wn(r.seconds,r.nanos)}(t))}function tO(t,e){return PC(t,e).canonicalString()}function PC(t,e){const n=function(i){return new Dn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cK(t){const e=Dn.fromString(t);return vn(mK(e),10190,{key:e.toString()}),e}function IC(t,e){return tO(t.databaseId,e.path)}function NE(t,e){const n=cK(e);if(n.get(1)!==t.databaseId.projectId)throw new He(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new jt(dK(n))}function uK(t,e){return tO(t.databaseId,e)}function vve(t){const e=cK(t);return e.length===4?Dn.emptyPath():dK(e)}function kC(t){return new Dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dK(t){return vn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function G$(t,e,n){return{name:IC(t,e),fields:n.value.mapValue.fields}}function xve(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:It(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(vn(d===void 0||typeof d=="string",58123),ms.fromBase64String(d||"")):(vn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ms.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Ne.UNKNOWN:iK(u.code);return new He(d,u.message||"")}(o);n=new oK(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=NE(t,r.document.name),a=zo(r.document.updateTime),o=r.document.createTime?zo(r.document.createTime):Mt.min(),l=new fi({mapValue:{fields:r.document.fields}}),c=As.newFoundDocument(i,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new dw(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=NE(t,r.document),a=r.readTime?zo(r.readTime):Mt.min(),o=As.newNoDocument(i,a),l=r.removedTargetIds||[];n=new dw([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=NE(t,r.document),a=r.removedTargetIds||[];n=new dw([],a,i,null)}else{if(!("filter"in e))return It(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new lve(i,a),l=r.targetId;n=new aK(l,o)}}return n}function bve(t,e){let n;if(e instanceof eb)n={update:G$(t,e.key,e.value)};else if(e instanceof VN)n={delete:IC(t,e.key)};else if(e instanceof ed)n={update:G$(t,e.key,e.data),updateMask:Cve(e.fieldMask)};else{if(!(e instanceof ive))return It(16599,{dt:e.type});n={verify:IC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof Ov)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dv)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yj)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw It(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:yve(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:It(27497)}(t,e.precondition)),n}function wve(t,e){return t&&t.length>0?(vn(e!==void 0,14353),t.map(n=>function(i,a){let o=i.updateTime?zo(i.updateTime):zo(a);return o.isEqual(Mt.min())&&(o=zo(a)),new nve(o,i.transformResults||[])}(n,e))):[]}function jve(t,e){return{documents:[uK(t,e.path)]}}function _ve(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uK(t,i);const a=function(u){if(u.length!==0)return fK(fo.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Af(f.field),direction:Eve(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=CC(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function Nve(t){let e=vve(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){vn(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const f=hK(h);return f instanceof fo&&UH(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new Rv(Tf(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,ON(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new pj(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new pj(m,f)}(n.endAt)),Vye(e,i,o,a,l,"F",c,u)}function Sve(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hK(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tf(n.unaryFilter.field);return Cr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tf(n.unaryFilter.field);return Cr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Tf(n.unaryFilter.field);return Cr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tf(n.unaryFilter.field);return Cr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(t):t.fieldFilter!==void 0?function(n){return Cr.create(Tf(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fo.create(n.compositeFilter.filters.map(r=>hK(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(n.compositeFilter.op))}(t):It(30097,{filter:t})}function Eve(t){return fve[t]}function Ave(t){return mve[t]}function Tve(t){return pve[t]}function Af(t){return{fieldPath:t.canonicalString()}}function Tf(t){return ds.fromServerFormat(t.fieldPath)}function fK(t){return t instanceof Cr?function(n){if(n.op==="=="){if(D$(n.value))return{unaryFilter:{field:Af(n.field),op:"IS_NAN"}};if(O$(n.value))return{unaryFilter:{field:Af(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D$(n.value))return{unaryFilter:{field:Af(n.field),op:"IS_NOT_NAN"}};if(O$(n.value))return{unaryFilter:{field:Af(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Af(n.field),op:Ave(n.op),value:n.value}}}(t):t instanceof fo?function(n){const r=n.getFilters().map(i=>fK(i));return r.length===1?r[0]:{compositeFilter:{op:Tve(n.op),filters:r}}}(t):It(54877,{filter:t})}function Cve(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mK(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function pK(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,r,i,a=Mt.min(),o=Mt.min(),l=ms.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(e){this.yt=e}}function Ive(t){const e=Nve({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gj(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{constructor(){this.Sn=new Rve}addToCollectionParentIndex(e,n){return this.Sn.add(n),Te.resolve()}getCollectionParents(e,n){return Te.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Te.resolve()}deleteFieldIndex(e,n){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,n){return Te.resolve()}getDocumentsMatchingTarget(e,n){return Te.resolve(null)}getIndexType(e,n){return Te.resolve(0)}getFieldIndexes(e,n){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,n){return Te.resolve(Mu.min())}getMinOffsetFromCollectionGroup(e,n){return Te.resolve(Mu.min())}updateCollectionGroup(e,n,r){return Te.resolve()}updateIndexEntries(e,n){return Te.resolve()}}class Rve{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qr(Dn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qr(Dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gK=41943040;class li{static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(gK,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qm(0)}static ar(){return new Qm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$="LruGarbageCollector",Ove=1048576;function X$([t,e],[n,r]){const i=Xt(t,n);return i===0?Xt(e,r):i}class Dve{constructor(e){this.Pr=e,this.buffer=new qr(X$),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();X$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mve{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Je(Q$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xp(n)?Je(Q$,"Ignoring IndexedDB error during garbage collection: ",n):await Qp(n)}await this.Ar(3e5)})}}class Lve{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Te.resolve(RN.ce);const r=new Dve(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Y$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y$):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Sf()<=Qt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h})))}}function $ve(t,e){return new Lve(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(){this.changes=new Xh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&By(r.mutation,i,Li.empty(),Wn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Zt()){const i=Fd();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=yy();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fd();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Zt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let a=Kl();const o=Vy(),l=function(){return Vy()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ed)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),By(d.mutation,u,d.mutation.getFieldMask(),Wn.now())):o.set(u.key,Li.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new Vve(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Vy();let i=new ir((o,l)=>o-l),a=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Li.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(i.get(l.batchId)||Zt()).add(c);i=i.insert(l.batchId,h)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=XH();d.forEach(f=>{if(!a.has(f)){const m=rK(n.get(f),r.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Bye(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Te.resolve(Fd());let l=Cv,c=a;return o.next(u=>Te.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?Te.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Zt())).next(d=>({batchId:l,changes:QH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new jt(n)).next(r=>{let i=yy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=yy();return this.indexManager.getCollectionParents(e,a).next(l=>Te.forEach(l,c=>{const u=function(h,f){return new Zp(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,As.newInvalidDocument(d)))});let l=yy();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&By(d.mutation,u,Li.empty(),Wn.now()),LN(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Te.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zo(i.createTime)}}(n)),Te.resolve()}getNamedQuery(e,n){return Te.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:Ive(i.bundledQuery),readTime:zo(i.readTime)}}(n)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(){this.overlays=new ir(jt.comparator),this.Lr=new Map}getOverlay(e,n){return Te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fd();return Te.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.bt(e,n,a)}),Te.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Lr.delete(r)),Te.resolve()}getOverlaysForCollection(e,n,r){const i=Fd(),a=n.length+1,o=new jt(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ir((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Fd(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Fd(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return Te.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ove(n,r));let a=this.Lr.get(n);a===void 0&&(a=Zt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qve{constructor(){this.sessionToken=ms.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.kr=new qr(Yr.Kr),this.qr=new qr(Yr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Yr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Yr(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new jt(new Dn([])),r=new Yr(n,e),i=new Yr(n,e+1),a=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),a.push(o.key)}),a}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new jt(new Dn([])),r=new Yr(n,e),i=new Yr(n,e+1);let a=Zt();return this.qr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Yr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return jt.comparator(e.key,n.key)||Xt(e.Hr,n.Hr)}static Ur(e,n){return Xt(e.Hr,n.Hr)||jt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wve{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new qr(Yr.Kr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ave(a,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Jr=this.Jr.add(new Yr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,n){return Te.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?HR:this.Yn-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yr(n,0),i=new Yr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],o=>{const l=this.Zr(o.Hr);a.push(l)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qr(Xt);return n.forEach(i=>{const a=new Yr(i,0),o=new Yr(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],l=>{r=r.add(l.Hr)})}),Te.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;jt.isDocumentKey(a)||(a=a.child(""));const o=new Yr(new jt(a),0);let l=new qr(Xt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.Hr)),!0)},o),Te.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){vn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Te.forEach(n.mutations,i=>{const a=new Yr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Yr(n,0),i=this.Jr.firstAfterOrEqual(r);return Te.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(e){this.ti=e,this.docs=function(){return new ir(jt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Te.resolve(r?r.document.mutableCopy():As.newInvalidDocument(n))}getEntries(e,n){let r=Kl();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():As.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Kl();const o=n.path,l=new jt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vye(yye(d),r)<=0||(i.has(d.key)||LN(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,n,r,i){It(9500)}ni(e,n){return Te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kve(this)}getSize(e){return Te.resolve(this.size)}}class Kve extends Fve{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),Te.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{constructor(e){this.persistence=e,this.ri=new Xh(n=>YR(n),QR),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.ii=0,this.si=new nO,this.targetCount=0,this.oi=Qm._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Te.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Qm(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Te.resolve()}updateTargetData(e,n){return this.lr(n),Te.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Te.waitFor(a).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Te.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Te.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Te.resolve(r)}containsKey(e,n){return Te.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(e,n){this._i={},this.overlays={},this.ai=new RN(0),this.ui=!1,this.ui=!0,this.ci=new qve,this.referenceDelegate=e(this),this.li=new Gve(this),this.indexManager=new kve,this.remoteDocumentCache=function(i){return new Hve(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Pve(n),this.Pi=new Uve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zve,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Wve(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Je("MemoryPersistence","Starting transaction:",e);const i=new Yve(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(a=>this.referenceDelegate.Ii(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return Te.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class Yve extends bye{constructor(e){super(),this.currentSequenceNumber=e}}class rO{constructor(e){this.persistence=e,this.Ri=new nO,this.Ai=null}static Vi(e){return new rO(e)}get di(){if(this.Ai)return this.Ai;throw It(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Te.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.di,r=>{const i=jt.fromPath(r);return this.mi(e,i).next(a=>{a||n.removeEntry(i,Mt.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return Te.or([()=>Te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class xj{constructor(e,n){this.persistence=e,this.fi=new Xh(r=>_ye(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$ve(this,n)}static Vi(e,n){return new xj(e,n)}Ti(){}Ii(e){return Te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return Te.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(a=>a?Te.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Mt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Te.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lw(e.data.value)),n}wr(e,n,r){return Te.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Zt(),i=Zt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new sO(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return lfe()?8:wye(Ls())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ps(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Qve;return this.ys(e,n,o).next(l=>{if(a.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>a.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Sf()<=Qt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",Ef(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(Sf()<=Qt.DEBUG&&Je("QueryEngine","Query:",Ef(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Sf()<=Qt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",Ef(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uo(n))):Te.resolve())}gs(e,n){if(F$(n))return Te.resolve(null);let r=Uo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gj(n,null,"F"),r=Uo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Zt(...a);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,gj(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,i){return F$(n)||i.isEqual(Mt.min())?Te.resolve(null):this.fs.getDocuments(e,r).next(a=>{const o=this.bs(n,a);return this.Ss(n,o,r,i)?Te.resolve(null):(Sf()<=Qt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ef(n)),this.Ds(e,o,n,gye(i,Cv)).next(l=>l))})}bs(e,n){let r=new qr(GH(e));return n.forEach((i,a)=>{LN(e,a)&&(r=r.add(a))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return Sf()<=Qt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",Ef(n)),this.fs.getDocumentsMatchingQuery(e,n,Mu.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="LocalStore",Zve=3e8;class Jve{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new ir(Xt),this.Fs=new Xh(a=>YR(a),QR),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bve(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function exe(t,e,n,r){return new Jve(t,e,n,r)}async function vK(t,e){const n=Vt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Zt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function txe(t,e){const n=Vt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=Te.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(p=>{const y=u.docVersions.get(v);vn(y!==null,48541),p.version.compareTo(y)<0&&(h.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Zt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xK(t){const e=Vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function nxe(t,e){const n=Vt(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;l.push(n.li.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ms.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(p,y,b){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=Zve?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,d)&&l.push(n.li.updateTargetData(a,m))});let c=Kl(),u=Zt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(rxe(a,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(Mt.min())){const d=n.li.getLastRemoteSnapshotVersion(a).next(h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return Te.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.vs=i,a))}function rxe(t,e,n){let r=Zt(),i=Zt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Kl();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Mt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Je(iO,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function sxe(t,e){const n=Vt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=HR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ixe(t,e){const n=Vt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(a=>a?(i=a,Te.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new au(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function RC(t,e,n){const r=Vt(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Xp(o))throw o;Je(iO,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Z$(t,e,n){const r=Vt(t);let i=Mt.min(),a=Zt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Vt(c),f=h.Fs.get(d);return f!==void 0?Te.resolve(h.vs.get(f)):h.li.getTargetData(u,d)}(r,o,Uo(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Mt.min(),n?a:Zt())).next(l=>(axe(r,qye(e),l),{documents:l,ks:a})))}function axe(t,e,n){let r=t.Ms.get(e)||Mt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ms.set(e,r)}class J${constructor(){this.activeTargetIds=Qye()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oxe{constructor(){this.vo=new J$,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new J$,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="ConnectivityMonitor";class tF{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Je(eF,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Je(eF,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0=null;function OC(){return m0===null?m0=function(){return 268435456+Math.round(2147483648*Math.random())}():m0++,"0x"+m0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="RestConnection",cxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class uxe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===fj?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const o=OC(),l=this.Qo(e,n.toUriEncodedString());Je(SE,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:u}=new URL(l),d=al(u);return this.zo(e,l,c,r,d).then(h=>(Je(SE,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ph(SE,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}jo(e,n,r,i,a,o){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Qo(e,n){const r=cxe[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="WebChannelConnection",zg=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class dm extends uxe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!dm.c_){const e=_H();zg(e,jH.STAT_EVENT,n=>{n.stat===wC.PROXY?Je(bs,"STAT_EVENT: detected buffering proxy"):n.stat===wC.NOPROXY&&Je(bs,"STAT_EVENT: detected no buffering proxy")}),dm.c_=!0}}zo(e,n,r,i,a){const o=OC();return new Promise((l,c)=>{const u=new bH;u.setWithCredentials(!0),u.listenOnce(wH.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ow.NO_ERROR:const h=u.getResponseJson();Je(bs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case ow.TIMEOUT:Je(bs,`RPC '${e}' ${o} timed out`),c(new He(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case ow.HTTP_ERROR:const f=u.getStatus();if(Je(bs,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const p=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(x)>=0?x:Ne.UNKNOWN}(v.status);c(new He(p,v.message))}else c(new He(Ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new He(Ne.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Je(bs,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);Je(bs,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=OC(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Je(bs,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const m=new dxe({Ho:v=>{f?Je(bs,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(Je(bs,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Je(bs,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},Jo:()=>d.close()});return zg(d,gy.EventType.OPEN,()=>{f||(Je(bs,`RPC '${e}' stream ${i} transport opened.`),m.i_())}),zg(d,gy.EventType.CLOSE,()=>{f||(f=!0,Je(bs,`RPC '${e}' stream ${i} transport closed`),m.o_(),this.E_(d))}),zg(d,gy.EventType.ERROR,v=>{f||(f=!0,Ph(bs,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new He(Ne.UNAVAILABLE,"The operation could not be completed")))}),zg(d,gy.EventType.MESSAGE,v=>{var p;if(!f){const y=v.data[0];vn(!!y,16349);const b=y,x=(b==null?void 0:b.error)||((p=b[0])==null?void 0:p.error);if(x){Je(bs,`RPC '${e}' stream ${i} received error:`,x);const w=x.status;let C=function(_){const g=Sr[_];if(g!==void 0)return iK(g)}(w),S=x.message;w==="NOT_FOUND"&&S.includes("database")&&S.includes("does not exist")&&S.includes(this.databaseId.database)&&Ph(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),C===void 0&&(C=Ne.INTERNAL,S="Unknown error status: "+w+" with message "+x.message),f=!0,m.o_(new He(C,S)),d.close()}else Je(bs,`RPC '${e}' stream ${i} received:`,y),m.__(y)}}),dm.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return NH()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hxe(t){return new dm(t)}function EE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t){return new gve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dm.c_=!1;class bK{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="PersistentStream";class wK{constructor(e,n,r,i,a,o,l,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bK(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ne.RESOURCE_EXHAUSTED?(Hl(n.toString()),Hl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new He(Ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Je(nF,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Je(nF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fxe extends wK{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xve(this.serializer,e),r=function(a){if(!("targetChange"in a))return Mt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Mt.min():o.readTime?zo(o.readTime):Mt.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=kC(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=AC(c)?{documents:jve(a,c)}:{query:_ve(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=lK(a,o.resumeToken);const u=CC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Mt.min())>0){l.readTime=vj(a,o.snapshotVersion.toTimestamp());const u=CC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=Sve(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=kC(this.serializer),n.removeTarget=e,this.K_(n)}}class mxe extends wK{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return vn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wve(e.writeResults,e.commitTime),r=zo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=kC(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bve(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxe{}class gxe extends pxe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new He(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,PC(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(Ne.UNKNOWN,a.toString())})}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,PC(n,r),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(Ne.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function yxe(t,e,n,r){return new gxe(t,e,n,r)}class vxe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hl(n),this.aa=!1):Je("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="RemoteStore";class xxe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Zh(this)&&(Je(Ih,"Restarting streams for network reachability change."),await async function(c){const u=Vt(c);u.Ea.add(4),await nb(u),u.Va.set("Unknown"),u.Ea.delete(4),await zN(u)}(this))})}),this.Va=new vxe(r,i)}}async function zN(t){if(Zh(t))for(const e of t.Ra)await e(!0)}async function nb(t){for(const e of t.Ra)await e(!1)}function jK(t,e){const n=Vt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cO(n)?lO(n):Jp(n).O_()&&oO(n,e))}function aO(t,e){const n=Vt(t),r=Jp(n);n.Ia.delete(e),r.O_()&&_K(n,e),n.Ia.size===0&&(r.O_()?r.L_():Zh(n)&&n.Va.set("Unknown"))}function oO(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jp(t).Z_(e)}function _K(t,e){t.da.$e(e),Jp(t).X_(e)}function lO(t){t.da=new hve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Jp(t).start(),t.Va.ua()}function cO(t){return Zh(t)&&!Jp(t).x_()&&t.Ia.size>0}function Zh(t){return Vt(t).Ea.size===0}function NK(t){t.da=void 0}async function bxe(t){t.Va.set("Online")}async function wxe(t){t.Ia.forEach((e,n)=>{oO(t,e)})}async function jxe(t,e){NK(t),cO(t)?(t.Va.ha(e),lO(t)):t.Va.set("Unknown")}async function _xe(t,e,n){if(t.Va.set("Online"),e instanceof oK&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){Je(Ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bj(t,r)}else if(e instanceof dw?t.da.Xe(e):e instanceof aK?t.da.st(e):t.da.tt(e),!n.isEqual(Mt.min()))try{const r=await xK(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(ms.EMPTY_BYTE_STRING,d.snapshotVersion)),_K(a,c);const h=new au(d.target,c,u,d.sequenceNumber);oO(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Je(Ih,"Failed to raise snapshot:",r),await bj(t,r)}}async function bj(t,e,n){if(!Xp(e))throw e;t.Ea.add(1),await nb(t),t.Va.set("Offline"),n||(n=()=>xK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Je(Ih,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zN(t)})}function SK(t,e){return e().catch(n=>bj(t,n,e))}async function qN(t){const e=Vt(t),n=Vu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:HR;for(;Nxe(e);)try{const i=await sxe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Sxe(e,i)}catch(i){await bj(e,i)}EK(e)&&AK(e)}function Nxe(t){return Zh(t)&&t.Ta.length<10}function Sxe(t,e){t.Ta.push(e);const n=Vu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function EK(t){return Zh(t)&&!Vu(t).x_()&&t.Ta.length>0}function AK(t){Vu(t).start()}async function Exe(t){Vu(t).ra()}async function Axe(t){const e=Vu(t);for(const n of t.Ta)e.ea(n.mutations)}async function Txe(t,e,n){const r=t.Ta.shift(),i=JR.from(r,e,n);await SK(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qN(t)}async function Cxe(t,e){e&&Vu(t).Y_&&await async function(r,i){if(function(o){return cve(o)&&o!==Ne.ABORTED}(i.code)){const a=r.Ta.shift();Vu(r).B_(),await SK(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await qN(r)}}(t,e),EK(t)&&AK(t)}async function rF(t,e){const n=Vt(t);n.asyncQueue.verifyOperationInProgress(),Je(Ih,"RemoteStore received new credentials");const r=Zh(n);n.Ea.add(3),await nb(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zN(n)}async function Pxe(t,e){const n=Vt(t);e?(n.Ea.delete(2),await zN(n)):e||(n.Ea.add(2),await nb(n),n.Va.set("Unknown"))}function Jp(t){return t.ma||(t.ma=function(n,r,i){const a=Vt(n);return a.sa(),new fxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:bxe.bind(null,t),Yo:wxe.bind(null,t),t_:jxe.bind(null,t),J_:_xe.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),cO(t)?lO(t):t.Va.set("Unknown")):(await t.ma.stop(),NK(t))})),t.ma}function Vu(t){return t.fa||(t.fa=function(n,r,i){const a=Vt(n);return a.sa(),new mxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Exe.bind(null,t),t_:Cxe.bind(null,t),ta:Axe.bind(null,t),na:Txe.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await qN(t)):(await t.fa.stop(),t.Ta.length>0&&(Je(Ih,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new kl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,l=new uO(e,n,o,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dO(t,e){if(Hl("AsyncQueue",`${e}: ${t}`),Xp(t))return new He(Ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{static emptySet(e){return new hm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||jt.comparator(n.key,r.key):(n,r)=>jt.comparator(n.key,r.key),this.keyedMap=yy(),this.sortedSet=new ir(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.ga=new ir(jt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):It(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xm{constructor(e,n,r,i,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Xm(e,n,hm.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&MN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class kxe{constructor(){this.queries=iF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Vt(n),a=i.queries;i.queries=iF(),a.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new He(Ne.ABORTED,"Firestore shutting down"))}}function iF(){return new Xh(t=>KH(t),MN)}async function TK(t,e){const n=Vt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new Ixe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=dO(o,`Initialization of query '${Ef(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&hO(n)}async function CK(t,e){const n=Vt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Rxe(t,e){const n=Vt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const l of o.ba)l.Fa(i)&&(r=!0);o.wa=i}}r&&hO(n)}function Oxe(t,e,n){const r=Vt(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function hO(t){t.Ca.forEach(e=>{e.next()})}var DC,aF;(aF=DC||(DC={})).Ma="default",aF.Cache="cache";class PK{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==DC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(e){this.key=e}}class kK{constructor(e){this.key=e}}class Dxe{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Zt(),this.mutatedKeys=Zt(),this.eu=GH(e),this.tu=new hm(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new sF,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=LN(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?v!==p&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(c||u)&&(l=!0)),y&&(m?(o=o.add(m),a=p?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,v){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Vt:y})}};return p(m)-p(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Xm(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sF,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Zt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new kK(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new IK(r))}),n}cu(e){this.Za=e.ks,this.Ya=Zt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const fO="SyncEngine";class Mxe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Lxe{constructor(e){this.key=e,this.hu=!1}}class $xe{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xh(l=>KH(l),MN),this.Iu=new Map,this.Eu=new Set,this.Ru=new ir(jt.comparator),this.Au=new Map,this.Vu=new nO,this.du={},this.mu=new Map,this.fu=Qm.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Fxe(t,e,n=!0){const r=$K(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await RK(r,e,n,!0),i}async function Vxe(t,e){const n=$K(t);await RK(n,e,!0,!1)}async function RK(t,e,n,r){const i=await ixe(t.localStore,Uo(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await Bxe(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jK(t.remoteStore,i),l}async function Bxe(t,e,n,r,i){t.pu=(h,f,m)=>async function(p,y,b,x){let w=y.view.ru(b);w.Ss&&(w=await Z$(p.localStore,y.query,!1).then(({documents:_})=>y.view.ru(_,w)));const C=x&&x.targetChanges.get(y.targetId),S=x&&x.targetMismatches.get(y.targetId)!=null,P=y.view.applyChanges(w,p.isPrimaryClient,C,S);return lF(p,y.targetId,P.au),P.snapshot}(t,h,f,m);const a=await Z$(t.localStore,e,!0),o=new Dxe(e,a.ks),l=o.ru(a.documents),c=tb.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);lF(t,n,u.au);const d=new Mxe(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Uxe(t,e,n){const r=Vt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(o=>!MN(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await RC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&aO(r.remoteStore,i.targetId),MC(r,i.targetId)}).catch(Qp)):(MC(r,i.targetId),await RC(r.localStore,i.targetId,!0))}async function zxe(t,e){const n=Vt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),aO(n.remoteStore,r.targetId))}async function qxe(t,e,n){const r=Xxe(t);try{const i=await function(o,l){const c=Vt(o),u=Wn.now(),d=l.reduce((m,v)=>m.add(v.key),Zt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Kl(),p=Zt();return c.xs.getEntries(m,d).next(y=>{v=y,v.forEach((b,x)=>{x.isValidDocument()||(p=p.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(y=>{h=y;const b=[];for(const x of l){const w=sve(x,h.get(x.key).overlayedDocument);w!=null&&b.push(new ed(x.key,w,FH(w.value.mapValue),Xs.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,b,l)}).next(y=>{f=y;const b=y.applyToLocalDocumentSet(h,p);return c.documentOverlayCache.saveOverlays(m,y.batchId,b)})}).then(()=>({batchId:f.batchId,changes:QH(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new ir(Xt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,i.batchId,n),await rb(r,i.changes),await qN(r.remoteStore)}catch(i){const a=dO(i,"Failed to persist write");n.reject(a)}}async function OK(t,e){const n=Vt(t);try{const r=await nxe(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Au.get(a);o&&(vn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?vn(o.hu,14607):i.removedDocuments.size>0&&(vn(o.hu,42227),o.hu=!1))}),await rb(n,r,e)}catch(r){await Qp(r)}}function oF(t,e,n){const r=Vt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Vt(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.ba)f.va(l)&&(u=!0)}),u&&hO(c)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Wxe(t,e,n){const r=Vt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ir(jt.comparator);o=o.insert(a,As.newNoDocument(a,Mt.min()));const l=Zt().add(a),c=new BN(Mt.min(),new Map,new ir(Xt),o,l);await OK(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),mO(r)}else await RC(r.localStore,e,!1).then(()=>MC(r,e,n)).catch(Qp)}async function Hxe(t,e){const n=Vt(t),r=e.batch.batchId;try{const i=await txe(n.localStore,e);MK(n,r,null),DK(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rb(n,i)}catch(i){await Qp(i)}}async function Kxe(t,e,n){const r=Vt(t);try{const i=await function(o,l){const c=Vt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(vn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);MK(r,e,n),DK(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rb(r,i)}catch(i){await Qp(i)}}function DK(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function MK(t,e,n){const r=Vt(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function MC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||LK(t,r)})}function LK(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(aO(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),mO(t))}function lF(t,e,n){for(const r of n)r instanceof IK?(t.Vu.addReference(r.key,e),Gxe(t,r)):r instanceof kK?(Je(fO,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||LK(t,r.key)):It(19791,{wu:r})}function Gxe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Je(fO,"New document in limbo: "+n),t.Eu.add(r),mO(t))}function mO(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new jt(Dn.fromString(e)),r=t.fu.next();t.Au.set(r,new Lxe(n)),t.Ru=t.Ru.insert(n,r),jK(t.remoteStore,new au(Uo(XR(n.path)),r,"TargetPurposeLimboResolution",RN.ce))}}async function rb(t,e,n){const r=Vt(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=sO.Es(c.targetId,u);a.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(c,u){const d=Vt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Te.forEach(u,f=>Te.forEach(f.Ts,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>Te.forEach(f.Is,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Xp(h))throw h;Je(iO,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.vs.get(f),v=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(v);d.vs=d.vs.insert(f,p)}}}(r.localStore,a))}async function Yxe(t,e){const n=Vt(t);if(!n.currentUser.isEqual(e)){Je(fO,"User change. New user:",e.toKey());const r=await vK(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new He(Ne.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rb(n,r.Ns)}}function Qxe(t,e){const n=Vt(t),r=n.Au.get(e);if(r&&r.hu)return Zt().add(r.key);{let i=Zt();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function $K(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qxe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wxe.bind(null,e),e.Pu.J_=Rxe.bind(null,e.eventManager),e.Pu.yu=Oxe.bind(null,e.eventManager),e}function Xxe(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hxe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kxe.bind(null,e),e}class wj{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=UN(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return exe(this.persistence,new Xve,e.initialUser,this.serializer)}Cu(e){return new yK(rO.Vi,this.serializer)}Du(e){return new oxe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wj.provider={build:()=>new wj};class Zxe extends wj{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){vn(this.persistence.referenceDelegate instanceof xj,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mve(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new yK(r=>xj.Vi(r,n),this.serializer)}}class LC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yxe.bind(null,this.syncEngine),await Pxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kxe}()}createDatastore(e){const n=UN(e.databaseInfo.databaseId),r=hxe(e.databaseInfo);return yxe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,l){return new xxe(r,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>oF(this.syncEngine,n,0),function(){return tF.v()?new tF:new lxe}())}createSyncEngine(e,n){return function(i,a,o,l,c,u,d){const h=new $xe(i,a,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Vt(i);Je(Ih,"RemoteStore shutting down."),a.Ea.add(5),await nb(a),a.Aa.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}LC.provider={build:()=>new LC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="FirestoreClient";class Jxe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=_s.UNAUTHENTICATED,this.clientId=WR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Je(Bu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Je(Bu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dO(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function AE(t,e){t.asyncQueue.verifyOperationInProgress(),Je(Bu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vK(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ebe(t);Je(Bu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rF(e.remoteStore,i)),t._onlineComponents=e}async function ebe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je(Bu,"Using user provided OfflineComponentProvider");try{await AE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ne.FAILED_PRECONDITION||i.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ph("Error using user provided cache. Falling back to memory cache: "+n),await AE(t,new wj)}}else Je(Bu,"Using default OfflineComponentProvider"),await AE(t,new Zxe(void 0));return t._offlineComponents}async function VK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je(Bu,"Using user provided OnlineComponentProvider"),await cF(t,t._uninitializedComponentsProvider._online)):(Je(Bu,"Using default OnlineComponentProvider"),await cF(t,new LC))),t._onlineComponents}function tbe(t){return VK(t).then(e=>e.syncEngine)}async function BK(t){const e=await VK(t),n=e.eventManager;return n.onListen=Fxe.bind(null,e.syncEngine),n.onUnlisten=Uxe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Vxe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zxe.bind(null,e.syncEngine),n}function nbe(t,e,n={}){const r=new kl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new FK({next:f=>{d.Nu(),o.enqueueAndForget(()=>CK(a,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new He(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new He(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new PK(XR(l.path),d,{includeMetadataChanges:!0,Ka:!0});return TK(a,h)}(await BK(t),t.asyncQueue,e,n,r)),r.promise}function rbe(t,e,n={}){const r=new kl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new FK({next:f=>{d.Nu(),o.enqueueAndForget(()=>CK(a,h)),f.fromCache&&c.source==="server"?u.reject(new He(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new PK(l,d,{includeMetadataChanges:!0,Ka:!0});return TK(a,h)}(await BK(t),t.asyncQueue,e,n,r)),r.promise}function sbe(t,e){const n=new kl;return t.asyncQueue.enqueueAndForget(async()=>qxe(await tbe(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ibe="ComponentProvider",uF=new Map;function abe(t,e,n,r,i){return new Eye(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,UK(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK="firestore.googleapis.com",dF=!0;class hF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zK,this.ssl=dF}else this.host=e.host,this.ssl=e.ssl??dF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gK;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ove)throw new He(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mye("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UK(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new He(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new He(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new He(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WN{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sye;switch(r.type){case"firstParty":return new lye(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uF.get(n);r&&(Je(ibe,"Removing Datastore"),uF.delete(n),r.terminate())}(this),Promise.resolve()}}function obe(t,e,n,r={}){var u;t=ba(t,WN);const i=al(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(AN(`https://${l}`),TN("Firestore",!0)),a.host!==zK&&a.host!==l&&Ph("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:r};if(!Sh(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=_s.MOCK_USER;else{d=kW(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new He(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new _s(f)}t._authCredentials=new iye(new EH(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new td(this.firestore,e,this._query)}}class br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Jx(n,br._jsonSchema))return new br(e,r||null,new jt(Dn.fromString(n.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:Pr("string",br._jsonSchemaVersion),referencePath:Pr("string")};class Su extends td{constructor(e,n,r){super(e,n,XR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new jt(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function Se(t,e,...n){if(t=an(t),AH("collection","path",e),t instanceof WN){const r=Dn.fromString(e,...n);return S$(r),new Su(t,null,r)}{if(!(t instanceof br||t instanceof Su))throw new He(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return S$(r),new Su(t.firestore,null,r)}}function et(t,e,...n){if(t=an(t),arguments.length===1&&(e=WR.newId()),AH("doc","path",e),t instanceof WN){const r=Dn.fromString(e,...n);return N$(r),new br(t,null,new jt(r))}{if(!(t instanceof br||t instanceof Su))throw new He(Ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return N$(r),new br(t.firestore,t instanceof Su?t.converter:null,new jt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="AsyncQueue";class mF{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bK(this,"async_queue_retry"),this._c=()=>{const r=EE();r&&Je(fF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=EE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=EE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new kl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xp(e))throw e;Je(fF,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Hl("INTERNAL UNHANDLED ERROR: ",pF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=uO.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&It(47125,{Pc:pF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class nd extends WN{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mF,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mF(e),this._firestoreClient=void 0,await e}}}function lbe(t,e){const n=typeof t=="object"?t:Gx(),r=typeof t=="string"?t:fj,i=Kx(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=CR("firestore");a&&obe(i,...a)}return i}function HN(t){if(t._terminated)throw new He(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cbe(t),t._firestoreClient}function cbe(t){var r,i,a,o;const e=t._freezeSettings(),n=abe(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Jxe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(ms.fromBase64String(e))}catch(n){throw new He(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:na._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jx(e,na._jsonSchema))return na.fromBase64String(e.bytes)}}na._jsonSchemaVersion="firestore/bytes/1.0",na._jsonSchema={type:Pr("string",na._jsonSchemaVersion),bytes:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function so(){return new sb(_C)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qo._jsonSchemaVersion}}static fromJSON(e){if(Jx(e,qo._jsonSchema))return new qo(e.latitude,e.longitude)}}qo._jsonSchemaVersion="firestore/geoPoint/1.0",qo._jsonSchema={type:Pr("string",qo._jsonSchemaVersion),latitude:Pr("number"),longitude:Pr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:io._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jx(e,io._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new io(e.vectorValues);throw new He(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}io._jsonSchemaVersion="firestore/vectorValue/1.0",io._jsonSchema={type:Pr("string",io._jsonSchemaVersion),vectorValues:Pr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ube=/^__.*__$/;class dbe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ed(e,this.data,this.fieldMask,n,this.fieldTransforms):new eb(e,this.data,n,this.fieldTransforms)}}class qK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ed(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WK(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{dataSource:t})}}class pO{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new pO({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jj(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(WK(this.dataSource)&&ube.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class hbe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||UN(e)}createContext(e,n,r,i=!1){return new pO({dataSource:e,methodName:n,targetDoc:r,path:ds.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ib(t){const e=t._freezeSettings(),n=UN(t._databaseId);return new hbe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gO(t,e,n,r,i,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);vO("Data must be an object, but it was:",o,r);const l=GK(r,o);let c,u;if(a.merge)c=new Li(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=kh(e,h,n);if(!o.contains(f))throw new He(Ne.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);XK(d,f)||d.push(f)}c=new Li(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new dbe(new fi(l),c,u)}class GN extends KN{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof GN}}class yO extends KN{_toFieldTransform(e){return new eve(e.path,new Ov)}isEqual(e){return e instanceof yO}}function HK(t,e,n,r){const i=t.createContext(1,e,n);vO("Data must be an object, but it was:",i,r);const a=[],o=fi.empty();Ju(r,(c,u)=>{const d=QK(e,c,n);u=an(u);const h=i.childContextForFieldPath(d);if(u instanceof GN)a.push(d);else{const f=ab(u,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Li(a);return new qK(o,l,i.fieldTransforms)}function KK(t,e,n,r,i,a){const o=t.createContext(1,e,n),l=[kh(e,r,n)],c=[i];if(a.length%2!=0)throw new He(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(kh(e,a[f])),c.push(a[f+1]);const u=[],d=fi.empty();for(let f=l.length-1;f>=0;--f)if(!XK(u,l[f])){const m=l[f];let v=c[f];v=an(v);const p=o.childContextForFieldPath(m);if(v instanceof GN)u.push(m);else{const y=ab(v,p);y!=null&&(u.push(m),d.set(m,y))}}const h=new Li(u);return new qK(d,h,o.fieldTransforms)}function fbe(t,e,n,r=!1){return ab(n,t.createContext(r?4:3,e))}function ab(t,e){if(YK(t=an(t)))return vO("Unsupported field value:",e,t),GK(t,e);if(t instanceof KN)return function(r,i){if(!WK(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const l of r){let c=ab(l,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Xye(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Wn.fromDate(r);return{timestampValue:vj(i.serializer,a)}}if(r instanceof Wn){const a=new Wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vj(i.serializer,a)}}if(r instanceof qo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof na)return{bytesValue:lK(i.serializer,r._byteString)};if(r instanceof br){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tO(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof io)return function(o,l){const c=o instanceof io?o.toArray():o;return{mapValue:{fields:{[MH]:{stringValue:$H},[mj]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return ZR(l.serializer,d)})}}}}}}(r,i);if(pK(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${kN(r)}`)}(t,e)}function GK(t,e){const n={};return PH(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ju(t,(r,i)=>{const a=ab(i,e.childContextForField(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function YK(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wn||t instanceof qo||t instanceof na||t instanceof br||t instanceof KN||t instanceof io||pK(t))}function vO(t,e,n){if(!YK(n)||!TH(n)){const r=kN(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function kh(t,e,n){if((e=an(e))instanceof sb)return e._internalPath;if(typeof e=="string")return QK(t,e);throw jj("Field path arguments must be of type string or ",t,!1,void 0,n)}const mbe=new RegExp("[~\\*/\\[\\]]");function QK(t,e,n){if(e.search(mbe)>=0)throw jj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sb(...e.split("."))._internalPath}catch{throw jj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jj(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new He(Ne.INVALID_ARGUMENT,l+t+c)}function XK(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{convertValue(e,n="none"){switch(Fu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw It(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ju(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[mj].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>yr(o.doubleValue));return new io(n)}convertGeoPoint(e){return new qo(yr(e.latitude),yr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=DN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pv(e));default:return null}}convertTimestamp(e){const n=Lu(e);return new Wn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dn.fromString(e);vn(mK(r),9688,{name:e});const i=new Iv(r.get(1),r.get(3)),a=new jt(r.popFirst(5));return i.isEqual(n)||Hl(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK extends pbe{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,n)}}function Ie(){return new yO("serverTimestamp")}const gF="@firebase/firestore",yF="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gbe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(kh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gbe extends JK{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ybe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xO{}class bO extends xO{}function Ce(t,e,...n){let r=[];e instanceof xO&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof wO).length,l=a.filter(c=>c instanceof YN).length;if(o>1||o>0&&l>0)throw new He(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class YN extends bO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new YN(e,n,r)}_apply(e){const n=this._parse(e);return e7(e._query,n),new td(e.firestore,e.converter,TC(e._query,n))}_parse(e){const n=ib(e.firestore);return function(a,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new He(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xF(h,d);const v=[];for(const p of h)v.push(vF(c,a,p));f={arrayValue:{values:v}}}else f=vF(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xF(h,d),f=fbe(l,o,h,d==="in"||d==="not-in");return Cr.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ge(t,e,n){const r=e,i=kh("where",t);return YN._create(i,r,n)}class wO extends xO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wO(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)e7(o,c),o=TC(o,c)}(e._query,n),new td(e.firestore,e.converter,TC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jO extends bO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jO(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new He(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rv(a,o)}(e._query,this._field,this._direction);return new td(e.firestore,e.converter,zye(e._query,n))}}function QN(t,e="asc"){const n=e,r=kh("orderBy",t);return jO._create(r,n)}class _O extends bO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _O(e,n,r)}_apply(e){return new td(e.firestore,e.converter,gj(e._query,this._limit,this._limitType))}}function Ts(t){return pye("limit",t),_O._create("limit",t,"F")}function vF(t,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new He(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HH(e)&&n.indexOf("/")!==-1)throw new He(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dn.fromString(n));if(!jt.isDocumentKey(r))throw new He(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return R$(t,new jt(r))}if(n instanceof br)return R$(t,n._key);throw new He(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kN(n)}.`)}function xF(t,e){if(!Array.isArray(t)||t.length===0)throw new He(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e7(t,e){const n=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xy{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends JK{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ah._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ah._jsonSchemaVersion="firestore/documentSnapshot/1.0",ah._jsonSchema={type:Pr("string",ah._jsonSchemaVersion),bundleSource:Pr("string","DocumentSnapshot"),bundleName:Pr("string"),bundle:Pr("string")};class hw extends ah{data(e={}){return super.data(e)}}class fm{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hw(this._firestore,this._userDataWriter,r.key,r,new xy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new hw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new xy(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new hw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new xy(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:vbe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=WR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vbe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fm._jsonSchemaVersion="firestore/querySnapshot/1.0",fm._jsonSchema={type:Pr("string",fm._jsonSchemaVersion),bundleSource:Pr("string","QuerySnapshot"),bundleName:Pr("string"),bundle:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ib(e)}set(e,n,r){this._verifyNotCommitted();const i=TE(e,this._firestore),a=NO(i.converter,n,r),o=gO(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Xs.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=TE(e,this._firestore);let o;return o=typeof(n=an(n))=="string"||n instanceof sb?KK(this._dataReader,"WriteBatch.update",a._key,n,r,i):HK(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Xs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=TE(e,this._firestore);return this._mutations=this._mutations.concat(new VN(n._key,Xs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function TE(t,e){if((t=an(t)).firestore!==e)throw new He(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){t=ba(t,br);const e=ba(t.firestore,nd),n=HN(e);return nbe(n,t._key).then(r=>bbe(e,t,r))}function Pe(t){t=ba(t,td);const e=ba(t.firestore,nd),n=HN(e),r=new ZK(e);return ybe(t._query),rbe(n,t._query).then(i=>new fm(e,r,t,i))}function fr(t,e,n){t=ba(t,br);const r=ba(t.firestore,nd),i=NO(t.converter,e,n),a=ib(r);return ob(r,[gO(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xs.none())])}function Gl(t,e,n,...r){t=ba(t,br);const i=ba(t.firestore,nd),a=ib(i);let o;return o=typeof(e=an(e))=="string"||e instanceof sb?KK(a,"updateDoc",t._key,e,n,r):HK(a,"updateDoc",t._key,e),ob(i,[o.toMutation(t._key,Xs.exists(!0))])}function Yl(t){return ob(ba(t.firestore,nd),[new VN(t._key,Xs.none())])}function es(t,e){const n=ba(t.firestore,nd),r=et(t),i=NO(t.converter,e),a=ib(t.firestore);return ob(n,[gO(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xs.exists(!1))]).then(()=>r)}function ob(t,e){const n=HN(t);return sbe(n,e)}function bbe(t,e,n){const r=n.docs.get(e._key),i=new ZK(t);return new ah(t,i,e._key,r,new xy(n.hasPendingWrites,n.fromCache),e.converter)}function Ql(t){return t=ba(t,nd),HN(t),new xbe(t,e=>ob(t,e))}(function(e,n=!0){rye(Qh),Du(new zl("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new nd(new aye(r.getProvider("auth-internal")),new cye(o,r.getProvider("app-check-internal")),Aye(o,i),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),ua(gF,yF,e),ua(gF,yF,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wbe="type.googleapis.com/google.protobuf.Int64Value",jbe="type.googleapis.com/google.protobuf.UInt64Value";function t7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function _j(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>_j(e));if(typeof t=="function"||typeof t=="object")return t7(t,e=>_j(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Zm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case wbe:case jbe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Zm(e)):typeof t=="function"||typeof t=="object"?t7(t,e=>Zm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pi extends mo{constructor(e,n,r){super(`${SO}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,pi.prototype)}}function _be(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nj(t,e){let n=_be(t),r=n,i;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!bF[o])return new pi("internal","internal");n=bF[o],r=o}const l=a.message;typeof l=="string"&&(r=l),i=a.details,i!==void 0&&(i=Zm(i))}}catch{}return n==="ok"?null:new pi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="us-central1",Sbe=/^data: (.*?)(?:\n|$)/;function Ebe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new pi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Abe{constructor(e,n,r,i,a=$C,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Nbe(e,n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=$C}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Tbe(t,e,n){const r=al(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(AN(t.emulatorOrigin+"/backends"),TN("Functions",!0))}function Cbe(t,e,n){const r=i=>Ibe(t,e,i,{});return r.stream=(i,a)=>Rbe(t,e,i,a),r}function n7(t){return t.emulatorOrigin&&al(t.emulatorOrigin)?"include":void 0}async function Pbe(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:n7(i)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function r7(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Ibe(t,e,n,r){const i=t._url(e);return kbe(t,i,n,r)}async function kbe(t,e,n,r){n=_j(n);const i={data:n},a=await r7(t,r),o=r.timeout||7e4,l=Ebe(o),c=await Promise.race([Pbe(e,i,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new pi("cancelled","Firebase Functions instance was deleted.");const u=Nj(c.status,c.json);if(u)throw u;if(!c.json)throw new pi("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new pi("internal","Response is missing data field.");return{data:Zm(d)}}function Rbe(t,e,n,r){const i=t._url(e);return Obe(t,i,n,r||{})}async function Obe(t,e,n,r){var f;n=_j(n);const i={data:n},a=await r7(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r==null?void 0:r.signal,credentials:n7(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new pi("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const v=Nj(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let l,c;const u=new Promise((m,v)=>{l=m,c=v});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new pi("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),h=Dbe(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:v,done:p}=await m.read();return{value:v,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Dbe(t,e,n,r){const i=(o,l)=>{const c=o.match(Sbe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){e(Zm(d.result));return}if("message"in d){l.enqueue(Zm(d.message));return}if("error"in d){const h=Nj(0,d);l.error(h),n(h);return}}catch(d){if(d instanceof pi){l.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const u=new pi("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){l.trim()&&i(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new pi("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}l+=a.decode(u,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&i(f.trim(),o);return c()}catch(u){const d=u instanceof pi?u:Nj(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const wF="@firebase/functions",jF="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbe="auth-internal",Lbe="app-check-internal",$be="messaging-internal";function Fbe(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(Mbe),o=n.getProvider($be),l=n.getProvider(Lbe);return new Abe(i,a,o,l,r)};Du(new zl(SO,e,"PUBLIC").setMultipleInstances(!0)),ua(wF,jF,t),ua(wF,jF,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vbe(t=Gx(),e=$C){const r=Kx(an(t),SO).getImmediate({identifier:e}),i=CR("functions");return i&&Bbe(r,...i),r}function Bbe(t,e,n){Tbe(an(t),e,n)}function s7(t,e,n){return Cbe(an(t),e)}Fbe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="firebasestorage.googleapis.com",a7="storageBucket",Ube=2*60*1e3,zbe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends mo{constructor(e,n,r=0){super(CE(e),`Firebase Storage: ${n} (${CE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pr||(pr={}));function CE(t){return"storage/"+t}function EO(){const t="An unknown error occurred, please check the error payload for server response.";return new gr(pr.UNKNOWN,t)}function qbe(t){return new gr(pr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Wbe(t){return new gr(pr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Hbe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gr(pr.UNAUTHENTICATED,t)}function Kbe(){return new gr(pr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Gbe(t){return new gr(pr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Ybe(){return new gr(pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qbe(){return new gr(pr.CANCELED,"User canceled the upload/download.")}function Xbe(t){return new gr(pr.INVALID_URL,"Invalid URL '"+t+"'.")}function Zbe(t){return new gr(pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jbe(){return new gr(pr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a7+"' property when initializing the app?")}function e0e(){return new gr(pr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t0e(){return new gr(pr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function n0e(t){return new gr(pr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function FC(t){return new gr(pr.INVALID_ARGUMENT,t)}function o7(){return new gr(pr.APP_DELETED,"The Firebase app was deleted.")}function r0e(t){return new gr(pr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uy(t,e){return new gr(pr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qg(t){throw new gr(pr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$i.makeFromUrl(e,n)}catch{return new $i(e,"")}if(r.path==="")return r;throw Zbe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),v={bucket:1,path:3},p=n===i7?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",b=new RegExp(`^https?://${p}/${i}/${y}`,"i"),w=[{regex:l,indices:c,postModify:a},{regex:m,indices:v,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<w.length;C++){const S=w[C],P=S.regex.exec(e);if(P){const _=P[S.indices.bucket];let g=P[S.indices.path];g||(g=""),r=new $i(_,g),S.postModify(r);break}}if(r==null)throw Xbe(e);return r}}class s0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(t,e,n){let r=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...y){u||(u=!0,e.apply(null,y))}function h(y){i=setTimeout(()=>{i=null,t(m,c())},y)}function f(){a&&clearTimeout(a)}function m(y,...b){if(u){f();return}if(y){f(),d.call(null,y,...b);return}if(c()||o){f(),d.call(null,y,...b);return}r<64&&(r*=2);let w;l===1?(l=2,w=0):w=(r+Math.random())*1e3,h(w)}let v=!1;function p(y){v||(v=!0,f(),!u&&(i!==null?(y||(l=2),clearTimeout(i),h(0)):y||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,p(!0)},n),p}function a0e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0e(t){return t!==void 0}function l0e(t){return typeof t=="object"&&!Array.isArray(t)}function AO(t){return typeof t=="string"||t instanceof String}function _F(t){return TO()&&t instanceof Blob}function TO(){return typeof Blob<"u"}function NF(t,e,n,r){if(r<e)throw FC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw FC(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function l7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var oh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oh||(oh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0e{constructor(e,n,r,i,a,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,p)=>{this.resolve_=v,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new p0(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===oh.NO_ERROR,c=a.getStatus();if(!l||c0e(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===oh.ABORT;r(!1,new p0(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new p0(u,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());o0e(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=EO();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?o7():Qbe();o(c)}else{const c=Ybe();o(c)}};this.canceled_?n(!1,new p0(!1,null,!0)):this.backoffId_=i0e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a0e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class p0{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function d0e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function h0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function m0e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function p0e(t,e,n,r,i,a,o=!0,l=!1){const c=l7(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return f0e(d,e),d0e(d,n),h0e(d,a),m0e(d,r),new u0e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function y0e(...t){const e=g0e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(TO())return new Blob(t);throw new gr(pr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v0e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0e(t){if(typeof atob>"u")throw n0e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class PE{constructor(e,n){this.data=e,this.contentType=n||null}}function b0e(t,e){switch(t){case ko.RAW:return new PE(c7(e));case ko.BASE64:case ko.BASE64URL:return new PE(u7(t,e));case ko.DATA_URL:return new PE(j0e(e),_0e(e))}throw EO()}function c7(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function w0e(t){let e;try{e=decodeURIComponent(t)}catch{throw Uy(ko.DATA_URL,"Malformed data URL.")}return c7(e)}function u7(t,e){switch(t){case ko.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Uy(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Uy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=x0e(e)}catch(i){throw i.message.includes("polyfill")?i:Uy(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class d7{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Uy(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=N0e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j0e(t){const e=new d7(t);return e.base64?u7(ko.BASE64,e.rest):w0e(e.rest)}function _0e(t){return new d7(t).contentType}function N0e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){let r=0,i="";_F(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(_F(this.data_)){const r=this.data_,i=v0e(r,e,n);return i===null?null:new Wc(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Wc(r,!0)}}static getBlob(...e){if(TO()){const n=e.map(r=>r instanceof Wc?r.data_:r);return new Wc(y0e.apply(null,n))}else{const n=e.map(o=>AO(o)?b0e(ko.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new Wc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t){let e;try{e=JSON.parse(t)}catch{return null}return l0e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function E0e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function f7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0e(t,e){return e}class Fs{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||A0e}}let g0=null;function T0e(t){return!AO(t)||t.length<2?t:f7(t)}function m7(){if(g0)return g0;const t=[];t.push(new Fs("bucket")),t.push(new Fs("generation")),t.push(new Fs("metageneration")),t.push(new Fs("name","fullPath",!0));function e(a,o){return T0e(o)}const n=new Fs("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new Fs("size");return i.xform=r,t.push(i),t.push(new Fs("timeCreated")),t.push(new Fs("updated")),t.push(new Fs("md5Hash",null,!0)),t.push(new Fs("cacheControl",null,!0)),t.push(new Fs("contentDisposition",null,!0)),t.push(new Fs("contentEncoding",null,!0)),t.push(new Fs("contentLanguage",null,!0)),t.push(new Fs("contentType",null,!0)),t.push(new Fs("metadata","customMetadata",!0)),g0=t,g0}function C0e(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new $i(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function P0e(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return C0e(r,t),r}function p7(t,e,n){const r=h7(e);return r===null?null:P0e(t,r,n)}function I0e(t,e,n,r){const i=h7(e);if(i===null||!AO(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=CO(f,n,r),v=l7({alt:"media",token:u});return m+v})[0]}function k0e(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class g7{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){if(!t)throw EO()}function R0e(t,e){function n(r,i){const a=p7(t,i,e);return y7(a!==null),a}return n}function O0e(t,e){function n(r,i){const a=p7(t,i,e);return y7(a!==null),I0e(a,i,t.host,t._protocol)}return n}function v7(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Kbe():i=Hbe():n.getStatus()===402?i=Wbe(t.bucket):n.getStatus()===403?i=Gbe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function D0e(t){const e=v7(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=qbe(t.path)),a.serverResponse=i.serverResponse,a}return n}function M0e(t,e,n){const r=e.fullServerUrl(),i=CO(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new g7(i,a,O0e(t,n),o);return l.errorHandler=D0e(e),l}function L0e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function $0e(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=L0e(null,e)),r}function F0e(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let w="";for(let C=0;C<2;C++)w=w+Math.random().toString().slice(2);return w}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=$0e(e,r,i),d=k0e(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=Wc.getBlob(h,r,f);if(m===null)throw e0e();const v={name:u.fullPath},p=CO(a,t.host,t._protocol),y="POST",b=t.maxUploadRetryTime,x=new g7(p,y,R0e(t,n),b);return x.urlParams=v,x.headers=o,x.body=m.uploadData(),x.errorHandler=v7(e),x}class V0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw qg("cannot .send() more than once");if(al(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class B0e extends V0e{initXhr(){this.xhr_.responseType="text"}}function x7(){return new B0e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this._service=e,n instanceof $i?this._location=n:this._location=$i.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Rh(e,n)}get root(){const e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f7(this._location.path)}get storage(){return this._service}get parent(){const e=S0e(this._location.path);if(e===null)return null;const n=new $i(this._location.bucket,e);return new Rh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw r0e(e)}}function U0e(t,e,n){t._throwIfRoot("uploadBytes");const r=F0e(t.storage,t._location,m7(),new Wc(e,!0),n);return t.storage.makeRequestWithTokens(r,x7).then(i=>({metadata:i,ref:t}))}function z0e(t){t._throwIfRoot("getDownloadURL");const e=M0e(t.storage,t._location,m7());return t.storage.makeRequestWithTokens(e,x7).then(n=>{if(n===null)throw t0e();return n})}function q0e(t,e){const n=E0e(t._location.path,e),r=new $i(t._location.bucket,n);return new Rh(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0e(t){return/^[A-Za-z]+:\/\//.test(t)}function H0e(t,e){return new Rh(t,e)}function b7(t,e){if(t instanceof PO){const n=t;if(n._bucket==null)throw Jbe();const r=new Rh(n,n._bucket);return e!=null?b7(r,e):r}else return e!==void 0?q0e(t,e):t}function K0e(t,e){if(e&&W0e(e)){if(t instanceof PO)return H0e(t,e);throw FC("To use ref(service, url), the first argument must be a Storage instance.")}else return b7(t,e)}function SF(t,e){const n=e==null?void 0:e[a7];return n==null?null:$i.makeFromBucketSpec(n,t)}function G0e(t,e,n,r={}){t.host=`${e}:${n}`;const i=al(e);i&&(AN(`https://${t.host}/b`),TN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:kW(a,t.app.options.projectId))}class PO{constructor(e,n,r,i,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=i7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ube,this._maxUploadRetryTime=zbe,this._requests=new Set,i!=null?this._bucket=$i.makeFromBucketSpec(i,this._host):this._bucket=SF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$i.makeFromBucketSpec(this._url,e):this._bucket=SF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new s0e(o7());{const o=p0e(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const EF="@firebase/storage",AF="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7="storage";function Y0e(t,e,n){return t=an(t),U0e(t,e,n)}function Q0e(t){return t=an(t),z0e(t)}function X0e(t,e){return t=an(t),K0e(t,e)}function Z0e(t=Gx(),e){t=an(t);const r=Kx(t,w7).getImmediate({identifier:e}),i=CR("storage");return i&&J0e(r,...i),r}function J0e(t,e,n,r={}){G0e(t,e,n,r)}function ewe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new PO(n,r,i,e,Qh)}function twe(){Du(new zl(w7,ewe,"PUBLIC").setMultipleInstances(!0)),ua(EF,AF,""),ua(EF,AF,"esm2020")}twe();const hf=t=>t==null?void 0:t.replace(/^"|"$/g,"").replace(/^'|'$/g,""),j7={apiKey:hf('"AIzaSyBDWUqW91mg2wvCJ6lAJ1wrBb5az6elfUU"')??"FIREBASE_API_KEY_PLACEHOLDER",authDomain:hf('"zedbooks-53601.firebaseapp.com"')??"FIREBASE_AUTH_DOMAIN_PLACEHOLDER",projectId:hf('"zedbooks-53601"')??"FIREBASE_PROJECT_ID_PLACEHOLDER",storageBucket:hf('"zedbooks-53601.firebasestorage.app"')??"FIREBASE_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:hf('"938148277875"')??"FIREBASE_MESSAGING_SENDER_ID_PLACEHOLDER",appId:hf('"1:938148277875:web:c98c15ac02f3625d20c406"')??"FIREBASE_APP_ID_PLACEHOLDER"},nwe="us-central1",rwe=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],Wo=rwe.every(t=>{const e=j7[t];return!!e&&!e.includes("PLACEHOLDER")}),Rn=()=>{if(!Wo)throw new Error("Firebase is not configured. Set VITE_FIREBASE_* environment variables before running the migrated backend.")},XN=gme().length?Gx():DW(j7),Sj=tye(XN),ae=lbe(XN),_7=Vbe(XN,nwe),swe=Z0e(XN),bt=async(t,e)=>(Rn(),(await s7(_7,t)(e)).data),ff=()=>Sj,Ps={async signIn(t,e){return Rn(),Mpe(ff(),t,e)},async signUp(t){Rn();const e=await Dpe(ff(),t.email,t.password);return t.fullName&&await $pe(e.user,{displayName:t.fullName}),await h$(e.user),await bt("bootstrapUserAccount",{...t,uid:e.user.uid}),e},async resendVerificationEmail(){Rn();const t=this.getCurrentUser();if(!t)throw new Error("No authenticated user found.");await h$(t)},async sendResetPasswordEmail(t){Rn(),await Ppe(ff(),t)},async updateUserPassword(t){Rn();const e=this.getCurrentUser();if(!e)throw new Error("No authenticated user found.");await Fpe(e,t)},async logout(){Rn(),await qpe(ff())},async getIdToken(t=!1){const e=this.getCurrentUser();return e?e.getIdToken(t):null},getCurrentUser(){return Wo?ff().currentUser:null},onAuthStateChanged(t){return Wo?{unsubscribe:zpe(ff(),t)}:(t(null),{unsubscribe:()=>{}})},async sendInvitation(t){Rn(),await bt("createInvitation",t)},async acceptInvitation(t){return Rn(),bt("acceptInvitation",{token:t})},async ensureCurrentMembership(){return Rn(),bt("ensureCurrentMembership",{})}},N7=j.createContext(void 0),IE=t=>({id:t.uid,uid:t.uid,email:t.email,displayName:t.displayName,phoneNumber:t.phoneNumber,emailVerified:t.emailVerified}),kE=async t=>({userId:t.uid,email:t.email,emailVerified:t.emailVerified,idToken:await t.getIdToken()});function iwe({children:t}){const[e,n]=j.useState(null),[r,i]=j.useState(null),[a,o]=j.useState(!0),l=j.useCallback(()=>{n(null),i(null)},[]),c=j.useCallback(async()=>{if(!Wo){l();return}try{const h=Ps.getCurrentUser();if(!h){l();return}await h.reload();const f=Ps.getCurrentUser();if(!f){l();return}i(IE(f)),n(await kE(f))}catch(h){l(),console.error("Failed to refresh Firebase session:",h)}},[l]),u=j.useCallback(async()=>{try{Wo&&await Ps.logout()}catch(h){console.error("Firebase sign out failed:",h)}finally{l(),G.success("Signed out successfully")}},[l]);j.useEffect(()=>{let h=!0;if(!Wo){o(!1);return}const f=Ps.getCurrentUser();f?(i(IE(f)),kE(f).then(v=>{h&&n(v)}).finally(()=>{h&&o(!1)})):o(!1);const m=Ps.onAuthStateChanged(async v=>{if(h){if(!v){l(),o(!1);return}i(IE(v)),n(await kE(v)),o(!1)}});return()=>{h=!1,m.unsubscribe()}},[l]);const d={session:e,user:r,isLoading:a,isAuthenticated:!!(e&&r),signOut:u,refreshSession:c};return s.jsx(N7.Provider,{value:d,children:t})}function dt(){const t=j.useContext(N7);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const IO=Gh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=j.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?Kh:"button";return s.jsx(o,{className:_e(IO({variant:e,size:n,className:t})),ref:a,...i})});K.displayName="Button";class awe extends j.Component{constructor(){super(...arguments);UM(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-background text-foreground",children:s.jsxs("div",{className:"max-w-md w-full text-center space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(Mi,{className:"h-8 w-8 text-red-600"})})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),s.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."}),this.state.error&&s.jsx("pre",{className:"p-4 bg-muted rounded-lg text-xs text-left overflow-auto max-h-40",children:this.state.error.message}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx(K,{onClick:()=>window.location.reload(),children:"Refresh Page"}),s.jsx(K,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]})]})}):this.props.children}}function mm({message:t="Loading...",className:e,size:n="md",fullScreen:r=!1}){const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},a=s.jsxs("div",{className:_e("flex flex-col items-center justify-center gap-3",e),children:[s.jsx(mn,{className:_e("animate-spin text-primary",i[n])}),t&&s.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:t})]});return r?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:a}):a}var owe=j.createContext(void 0);function lb(t){const e=j.useContext(owe);return t||e||"ltr"}var RE=0;function kO(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??TF()),document.body.insertAdjacentElement("beforeend",t[1]??TF()),RE++,()=>{RE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),RE--}},[])}function TF(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var OE="focusScope.autoFocusOnMount",DE="focusScope.autoFocusOnUnmount",CF={bubbles:!1,cancelable:!0},lwe="FocusScope",ZN=j.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=j.useState(null),u=hr(i),d=hr(a),h=j.useRef(null),f=Ft(e,p=>c(p)),m=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let p=function(w){if(m.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:Cc(h.current,{select:!0})},y=function(w){if(m.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||Cc(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Cc(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),x.disconnect()}}},[r,l,m.paused]),j.useEffect(()=>{if(l){IF.add(m);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(OE,CF);l.addEventListener(OE,u),l.dispatchEvent(b),b.defaultPrevented||(cwe(mwe(S7(l)),{select:!0}),document.activeElement===p&&Cc(l))}return()=>{l.removeEventListener(OE,u),setTimeout(()=>{const b=new CustomEvent(DE,CF);l.addEventListener(DE,d),l.dispatchEvent(b),b.defaultPrevented||Cc(p??document.body,{select:!0}),l.removeEventListener(DE,d),IF.remove(m)},0)}}},[l,u,d,m]);const v=j.useCallback(p=>{if(!n&&!r||m.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(y&&b){const x=p.currentTarget,[w,C]=uwe(x);w&&C?!p.shiftKey&&b===C?(p.preventDefault(),n&&Cc(w,{select:!0})):p.shiftKey&&b===w&&(p.preventDefault(),n&&Cc(C,{select:!0})):b===x&&p.preventDefault()}},[n,r,m.paused]);return s.jsx(st.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});ZN.displayName=lwe;function cwe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Cc(r,{select:e}),document.activeElement!==n)return}function uwe(t){const e=S7(t),n=PF(e,t),r=PF(e.reverse(),t);return[n,r]}function S7(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function PF(t,e){for(const n of t)if(!dwe(n,{upTo:e}))return n}function dwe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hwe(t){return t instanceof HTMLInputElement&&"select"in t}function Cc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&hwe(t)&&e&&t.select()}}var IF=fwe();function fwe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=kF(t,e),t.unshift(e)},remove(e){var n;t=kF(t,e),(n=t[0])==null||n.resume()}}}function kF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function mwe(t){return t.filter(e=>e.tagName!=="A")}var ME="rovingFocusGroup.onEntryFocus",pwe={bubbles:!1,cancelable:!0},cb="RovingFocusGroup",[VC,E7,gwe]=gN(cb),[ywe,JN]=ps(cb,[gwe]),[vwe,xwe]=ywe(cb),A7=j.forwardRef((t,e)=>s.jsx(VC.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(VC.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(bwe,{...t,ref:e})})}));A7.displayName=cb;var bwe=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=j.useRef(null),m=Ft(e,f),v=lb(a),[p,y]=lo({prop:o,defaultProp:l??null,onChange:c,caller:cb}),[b,x]=j.useState(!1),w=hr(u),C=E7(n),S=j.useRef(!1),[P,_]=j.useState(0);return j.useEffect(()=>{const g=f.current;if(g)return g.addEventListener(ME,w),()=>g.removeEventListener(ME,w)},[w]),s.jsx(vwe,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:p,onItemFocus:j.useCallback(g=>y(g),[y]),onItemShiftTab:j.useCallback(()=>x(!0),[]),onFocusableItemAdd:j.useCallback(()=>_(g=>g+1),[]),onFocusableItemRemove:j.useCallback(()=>_(g=>g-1),[]),children:s.jsx(st.div,{tabIndex:b||P===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:$e(t.onMouseDown,()=>{S.current=!0}),onFocus:$e(t.onFocus,g=>{const T=!S.current;if(g.target===g.currentTarget&&T&&!b){const E=new CustomEvent(ME,pwe);if(g.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=C().filter(U=>U.focusable),I=A.find(U=>U.active),k=A.find(U=>U.id===p),B=[I,k,...A].filter(Boolean).map(U=>U.ref.current);P7(B,d)}}S.current=!1}),onBlur:$e(t.onBlur,()=>x(!1))})})}),T7="RovingFocusGroupItem",C7=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...l}=t,c=ca(),u=a||c,d=xwe(T7,n),h=d.currentTabStopId===u,f=E7(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:p}=d;return j.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),s.jsx(VC.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:s.jsx(st.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:$e(t.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:$e(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:$e(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=_we(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=f().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const C=w.indexOf(y.currentTarget);w=d.loop?Nwe(w,C+1):w.slice(C+1)}setTimeout(()=>P7(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});C7.displayName=T7;var wwe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jwe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function _we(t,e,n){const r=jwe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return wwe[r]}function P7(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Nwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var I7=A7,k7=C7,Swe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},mf=new WeakMap,y0=new WeakMap,v0={},LE=0,R7=function(t){return t&&(t.host||R7(t.parentNode))},Ewe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=R7(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Awe=function(t,e,n,r){var i=Ewe(e,Array.isArray(t)?t:[t]);v0[n]||(v0[n]=new WeakMap);var a=v0[n],o=[],l=new Set,c=new Set(i),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",p=(mf.get(f)||0)+1,y=(a.get(f)||0)+1;mf.set(f,p),a.set(f,y),o.push(f),p===1&&v&&y0.set(f,!0),y===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(e),l.clear(),LE++,function(){o.forEach(function(h){var f=mf.get(h)-1,m=a.get(h)-1;mf.set(h,f),a.set(h,m),f||(y0.has(h)||h.removeAttribute(r),y0.delete(h)),m||h.removeAttribute(n)}),LE--,LE||(mf=new WeakMap,mf=new WeakMap,y0=new WeakMap,v0={})}},RO=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Swe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Awe(r,i,n,"aria-hidden")):function(){return null}},Po=function(){return Po=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Po.apply(this,arguments)};function O7(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Twe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var fw="right-scroll-bar-position",mw="width-before-scroll-bar",Cwe="with-scroll-bars-hidden",Pwe="--removed-body-scroll-bar-size";function $E(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Iwe(t,e){var n=j.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var kwe=typeof window<"u"?j.useLayoutEffect:j.useEffect,RF=new WeakMap;function Rwe(t,e){var n=Iwe(null,function(r){return t.forEach(function(i){return $E(i,r)})});return kwe(function(){var r=RF.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(l){a.has(l)||$E(l,null)}),a.forEach(function(l){i.has(l)||$E(l,o)})}RF.set(n,t)},[t]),n}function Owe(t){return t}function Dwe(t,e){e===void 0&&(e=Owe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function Mwe(t){t===void 0&&(t={});var e=Dwe(null);return e.options=Po({async:!0,ssr:!1},t),e}var D7=function(t){var e=t.sideCar,n=O7(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,Po({},n))};D7.isSideCarExport=!0;function Lwe(t,e){return t.useMedium(e),D7}var M7=Mwe(),FE=function(){},eS=j.forwardRef(function(t,e){var n=j.useRef(null),r=j.useState({onScrollCapture:FE,onWheelCapture:FE,onTouchMoveCapture:FE}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,v=t.noIsolation,p=t.inert,y=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,w=t.gapMode,C=O7(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,P=Rwe([n,e]),_=Po(Po({},C),i);return j.createElement(j.Fragment,null,d&&j.createElement(S,{sideCar:M7,removeScrollBar:u,shards:h,noRelative:m,noIsolation:v,inert:p,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:w}),o?j.cloneElement(j.Children.only(l),Po(Po({},_),{ref:P})):j.createElement(x,Po({},_,{className:c,ref:P}),l))});eS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eS.classNames={fullWidth:mw,zeroRight:fw};var $we=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Fwe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$we();return e&&t.setAttribute("nonce",e),t}function Vwe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Bwe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Uwe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Fwe())&&(Vwe(e,n),Bwe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},zwe=function(){var t=Uwe();return function(e,n){j.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},L7=function(){var t=zwe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},qwe={left:0,top:0,right:0,gap:0},VE=function(t){return parseInt(t||"",10)||0},Wwe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[VE(n),VE(r),VE(i)]},Hwe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return qwe;var e=Wwe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Kwe=L7(),pm="data-scroll-locked",Gwe=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Cwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(pm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fw,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(mw,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(fw," .").concat(fw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(mw," .").concat(mw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pm,`] {
    `).concat(Pwe,": ").concat(l,`px;
  }
`)},OF=function(){var t=parseInt(document.body.getAttribute(pm)||"0",10);return isFinite(t)?t:0},Ywe=function(){j.useEffect(function(){return document.body.setAttribute(pm,(OF()+1).toString()),function(){var t=OF()-1;t<=0?document.body.removeAttribute(pm):document.body.setAttribute(pm,t.toString())}},[])},Qwe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Ywe();var a=j.useMemo(function(){return Hwe(i)},[i]);return j.createElement(Kwe,{styles:Gwe(a,!e,i,n?"":"!important")})},BC=!1;if(typeof window<"u")try{var x0=Object.defineProperty({},"passive",{get:function(){return BC=!0,!0}});window.addEventListener("test",x0,x0),window.removeEventListener("test",x0,x0)}catch{BC=!1}var pf=BC?{passive:!1}:!1,Xwe=function(t){return t.tagName==="TEXTAREA"},$7=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Xwe(t)&&n[e]==="visible")},Zwe=function(t){return $7(t,"overflowY")},Jwe=function(t){return $7(t,"overflowX")},DF=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=F7(t,r);if(i){var a=V7(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},eje=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},tje=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},F7=function(t,e){return t==="v"?Zwe(e):Jwe(e)},V7=function(t,e){return t==="v"?eje(e):tje(e)},nje=function(t,e){return t==="h"&&e==="rtl"?-1:1},rje=function(t,e,n,r,i){var a=nje(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=V7(t,l),v=m[0],p=m[1],y=m[2],b=p-y-a*v;(v||b)&&F7(t,l)&&(h+=b,f+=v);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(u=!0),u},b0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},MF=function(t){return[t.deltaX,t.deltaY]},LF=function(t){return t&&"current"in t?t.current:t},sje=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ije=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},aje=0,gf=[];function oje(t){var e=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),i=j.useState(aje++)[0],a=j.useState(L7)[0],o=j.useRef(t);j.useEffect(function(){o.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var p=Twe([t.lockRef.current],(t.shards||[]).map(LF),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=j.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=b0(p),x=n.current,w="deltaX"in p?p.deltaX:x[0]-b[0],C="deltaY"in p?p.deltaY:x[1]-b[1],S,P=p.target,_=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in p&&_==="h"&&P.type==="range")return!1;var g=DF(_,P);if(!g)return!0;if(g?S=_:(S=_==="v"?"h":"v",g=DF(_,P)),!g)return!1;if(!r.current&&"changedTouches"in p&&(w||C)&&(r.current=S),!S)return!0;var T=r.current||S;return rje(T,y,p,T==="h"?w:C,!0)},[]),c=j.useCallback(function(p){var y=p;if(!(!gf.length||gf[gf.length-1]!==a)){var b="deltaY"in y?MF(y):b0(y),x=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&sje(S.delta,b)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(LF).filter(Boolean).filter(function(S){return S.contains(y.target)}),C=w.length>0?l(y,w[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),u=j.useCallback(function(p,y,b,x){var w={name:p,delta:y,target:b,should:x,shadowParent:lje(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),d=j.useCallback(function(p){n.current=b0(p),r.current=void 0},[]),h=j.useCallback(function(p){u(p.type,MF(p),p.target,l(p,t.lockRef.current))},[]),f=j.useCallback(function(p){u(p.type,b0(p),p.target,l(p,t.lockRef.current))},[]);j.useEffect(function(){return gf.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,pf),document.addEventListener("touchmove",c,pf),document.addEventListener("touchstart",d,pf),function(){gf=gf.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,pf),document.removeEventListener("touchmove",c,pf),document.removeEventListener("touchstart",d,pf)}},[]);var m=t.removeScrollBar,v=t.inert;return j.createElement(j.Fragment,null,v?j.createElement(a,{styles:ije(i)}):null,m?j.createElement(Qwe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function lje(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const cje=Lwe(M7,oje);var tS=j.forwardRef(function(t,e){return j.createElement(eS,Po({},t,{ref:e,sideCar:cje}))});tS.classNames=eS.classNames;var UC=["Enter"," "],uje=["ArrowDown","PageUp","Home"],B7=["ArrowUp","PageDown","End"],dje=[...uje,...B7],hje={ltr:[...UC,"ArrowRight"],rtl:[...UC,"ArrowLeft"]},fje={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ub="Menu",[Lv,mje,pje]=gN(ub),[Jh,U7]=ps(ub,[pje,qp,JN]),nS=qp(),z7=JN(),[gje,ef]=Jh(ub),[yje,db]=Jh(ub),q7=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,l=nS(e),[c,u]=j.useState(null),d=j.useRef(!1),h=hr(a),f=lb(i);return j.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(pR,{...l,children:s.jsx(gje,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(yje,{scope:e,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};q7.displayName=ub;var vje="MenuAnchor",OO=j.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=nS(n);return s.jsx(gR,{...i,...r,ref:e})});OO.displayName=vje;var DO="MenuPortal",[xje,W7]=Jh(DO,{forceMount:void 0}),H7=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=ef(DO,e);return s.jsx(xje,{scope:e,forceMount:n,children:s.jsx(gs,{present:n||a.open,children:s.jsx(Vx,{asChild:!0,container:i,children:r})})})};H7.displayName=DO;var da="MenuContent",[bje,MO]=Jh(da),K7=j.forwardRef((t,e)=>{const n=W7(da,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=ef(da,t.__scopeMenu),o=db(da,t.__scopeMenu);return s.jsx(Lv.Provider,{scope:t.__scopeMenu,children:s.jsx(gs,{present:r||a.open,children:s.jsx(Lv.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(wje,{...i,ref:e}):s.jsx(jje,{...i,ref:e})})})})}),wje=j.forwardRef((t,e)=>{const n=ef(da,t.__scopeMenu),r=j.useRef(null),i=Ft(e,r);return j.useEffect(()=>{const a=r.current;if(a)return RO(a)},[]),s.jsx(LO,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$e(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),jje=j.forwardRef((t,e)=>{const n=ef(da,t.__scopeMenu);return s.jsx(LO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_je=vh("MenuContent.ScrollLock"),LO=j.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...p}=t,y=ef(da,n),b=db(da,n),x=nS(n),w=z7(n),C=mje(n),[S,P]=j.useState(null),_=j.useRef(null),g=Ft(e,_,y.onContentChange),T=j.useRef(0),E=j.useRef(""),A=j.useRef(0),I=j.useRef(null),k=j.useRef("right"),L=j.useRef(0),B=v?tS:j.Fragment,U=v?{as:_je,allowPinchZoom:!0}:void 0,V=R=>{var xe,Be;const W=E.current+R,J=C().filter(he=>!he.disabled),oe=document.activeElement,Ae=(xe=J.find(he=>he.ref.current===oe))==null?void 0:xe.textValue,z=J.map(he=>he.textValue),ie=Dje(z,W,Ae),ve=(Be=J.find(he=>he.textValue===ie))==null?void 0:Be.ref.current;(function he(fe){E.current=fe,window.clearTimeout(T.current),fe!==""&&(T.current=window.setTimeout(()=>he(""),1e3))})(W),ve&&setTimeout(()=>ve.focus())};j.useEffect(()=>()=>window.clearTimeout(T.current),[]),kO();const D=j.useCallback(R=>{var J,oe;return k.current===((J=I.current)==null?void 0:J.side)&&Lje(R,(oe=I.current)==null?void 0:oe.area)},[]);return s.jsx(bje,{scope:n,searchRef:E,onItemEnter:j.useCallback(R=>{D(R)&&R.preventDefault()},[D]),onItemLeave:j.useCallback(R=>{var W;D(R)||((W=_.current)==null||W.focus(),P(null))},[D]),onTriggerLeave:j.useCallback(R=>{D(R)&&R.preventDefault()},[D]),pointerGraceTimerRef:A,onPointerGraceIntentChange:j.useCallback(R=>{I.current=R},[]),children:s.jsx(B,{...U,children:s.jsx(ZN,{asChild:!0,trapped:i,onMountAutoFocus:$e(a,R=>{var W;R.preventDefault(),(W=_.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx($p,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:s.jsx(I7,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:P,onEntryFocus:$e(c,R=>{b.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(yR,{role:"menu","aria-orientation":"vertical","data-state":cG(y.open),"data-radix-menu-content":"",dir:b.dir,...x,...p,ref:g,style:{outline:"none",...p.style},onKeyDown:$e(p.onKeyDown,R=>{const J=R.target.closest("[data-radix-menu-content]")===R.currentTarget,oe=R.ctrlKey||R.altKey||R.metaKey,Ae=R.key.length===1;J&&(R.key==="Tab"&&R.preventDefault(),!oe&&Ae&&V(R.key));const z=_.current;if(R.target!==z||!dje.includes(R.key))return;R.preventDefault();const ve=C().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);B7.includes(R.key)&&ve.reverse(),Rje(ve)}),onBlur:$e(t.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(T.current),E.current="")}),onPointerMove:$e(t.onPointerMove,$v(R=>{const W=R.target,J=L.current!==R.clientX;if(R.currentTarget.contains(W)&&J){const oe=R.clientX>L.current?"right":"left";k.current=oe,L.current=R.clientX}}))})})})})})})});K7.displayName=da;var Nje="MenuGroup",$O=j.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(st.div,{role:"group",...r,ref:e})});$O.displayName=Nje;var Sje="MenuLabel",G7=j.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(st.div,{...r,ref:e})});G7.displayName=Sje;var Ej="MenuItem",$F="menu.itemSelect",rS=j.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=j.useRef(null),o=db(Ej,t.__scopeMenu),l=MO(Ej,t.__scopeMenu),c=Ft(e,a),u=j.useRef(!1),d=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent($F,{bubbles:!0,cancelable:!0});h.addEventListener($F,m=>r==null?void 0:r(m),{once:!0}),Qk(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(Y7,{...i,ref:c,disabled:n,onClick:$e(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:$e(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:$e(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||UC.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});rS.displayName=Ej;var Y7=j.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=MO(Ej,n),l=z7(n),c=j.useRef(null),u=Ft(e,c),[d,h]=j.useState(!1),[f,m]=j.useState("");return j.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[a.children]),s.jsx(Lv.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:s.jsx(k7,{asChild:!0,...l,focusable:!r,children:s.jsx(st.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:$e(t.onPointerMove,$v(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(t.onPointerLeave,$v(v=>o.onItemLeave(v))),onFocus:$e(t.onFocus,()=>h(!0)),onBlur:$e(t.onBlur,()=>h(!1))})})})}),Eje="MenuCheckboxItem",Q7=j.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(tG,{scope:t.__scopeMenu,checked:n,children:s.jsx(rS,{role:"menuitemcheckbox","aria-checked":Aj(n)?"mixed":n,...i,ref:e,"data-state":VO(n),onSelect:$e(i.onSelect,()=>r==null?void 0:r(Aj(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Q7.displayName=Eje;var X7="MenuRadioGroup",[Aje,Tje]=Jh(X7,{value:void 0,onValueChange:()=>{}}),Z7=j.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=hr(r);return s.jsx(Aje,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx($O,{...i,ref:e})})});Z7.displayName=X7;var J7="MenuRadioItem",eG=j.forwardRef((t,e)=>{const{value:n,...r}=t,i=Tje(J7,t.__scopeMenu),a=n===i.value;return s.jsx(tG,{scope:t.__scopeMenu,checked:a,children:s.jsx(rS,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":VO(a),onSelect:$e(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});eG.displayName=J7;var FO="MenuItemIndicator",[tG,Cje]=Jh(FO,{checked:!1}),nG=j.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=Cje(FO,n);return s.jsx(gs,{present:r||Aj(a.checked)||a.checked===!0,children:s.jsx(st.span,{...i,ref:e,"data-state":VO(a.checked)})})});nG.displayName=FO;var Pje="MenuSeparator",rG=j.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});rG.displayName=Pje;var Ije="MenuArrow",sG=j.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=nS(n);return s.jsx(vR,{...i,...r,ref:e})});sG.displayName=Ije;var kje="MenuSub",[Utt,iG]=Jh(kje),by="MenuSubTrigger",aG=j.forwardRef((t,e)=>{const n=ef(by,t.__scopeMenu),r=db(by,t.__scopeMenu),i=iG(by,t.__scopeMenu),a=MO(by,t.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>d,[d]),j.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(OO,{asChild:!0,...u,children:s.jsx(Y7,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":cG(n.open),...t,ref:pN(e,i.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$e(t.onPointerMove,$v(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:$e(t.onPointerLeave,$v(h=>{var m,v;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const p=(v=n.content)==null?void 0:v.dataset.side,y=p==="right",b=y?-5:5,x=f[y?"left":"right"],w=f[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:$e(t.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";t.disabled||f&&h.key===" "||hje[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});aG.displayName=by;var oG="MenuSubContent",lG=j.forwardRef((t,e)=>{const n=W7(da,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=ef(da,t.__scopeMenu),o=db(da,t.__scopeMenu),l=iG(oG,t.__scopeMenu),c=j.useRef(null),u=Ft(e,c);return s.jsx(Lv.Provider,{scope:t.__scopeMenu,children:s.jsx(gs,{present:r||a.open,children:s.jsx(Lv.Slot,{scope:t.__scopeMenu,children:s.jsx(LO,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:$e(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:$e(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:$e(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=fje[o.dir].includes(d.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});lG.displayName=oG;function cG(t){return t?"open":"closed"}function Aj(t){return t==="indeterminate"}function VO(t){return Aj(t)?"indeterminate":t?"checked":"unchecked"}function Rje(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Oje(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Dje(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Oje(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function Mje(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function Lje(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Mje(n,e)}function $v(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $je=q7,Fje=OO,Vje=H7,Bje=K7,Uje=$O,zje=G7,qje=rS,Wje=Q7,Hje=Z7,Kje=eG,Gje=nG,Yje=rG,Qje=sG,Xje=aG,Zje=lG,sS="DropdownMenu",[Jje,ztt]=ps(sS,[U7]),ei=U7(),[e_e,uG]=Jje(sS),dG=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=ei(e),u=j.useRef(null),[d,h]=lo({prop:i,defaultProp:a??!1,onChange:o,caller:sS});return s.jsx(e_e,{scope:e,triggerId:ca(),triggerRef:u,contentId:ca(),open:d,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(f=>!f),[h]),modal:l,children:s.jsx($je,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};dG.displayName=sS;var hG="DropdownMenuTrigger",fG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=uG(hG,n),o=ei(n);return s.jsx(Fje,{asChild:!0,...o,children:s.jsx(st.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:pN(e,a.triggerRef),onPointerDown:$e(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:$e(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});fG.displayName=hG;var t_e="DropdownMenuPortal",mG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ei(e);return s.jsx(Vje,{...r,...n})};mG.displayName=t_e;var pG="DropdownMenuContent",gG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=uG(pG,n),a=ei(n),o=j.useRef(!1);return s.jsx(Bje,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:$e(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:$e(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gG.displayName=pG;var n_e="DropdownMenuGroup",r_e=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Uje,{...i,...r,ref:e})});r_e.displayName=n_e;var s_e="DropdownMenuLabel",yG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(zje,{...i,...r,ref:e})});yG.displayName=s_e;var i_e="DropdownMenuItem",vG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(qje,{...i,...r,ref:e})});vG.displayName=i_e;var a_e="DropdownMenuCheckboxItem",xG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Wje,{...i,...r,ref:e})});xG.displayName=a_e;var o_e="DropdownMenuRadioGroup",l_e=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Hje,{...i,...r,ref:e})});l_e.displayName=o_e;var c_e="DropdownMenuRadioItem",bG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Kje,{...i,...r,ref:e})});bG.displayName=c_e;var u_e="DropdownMenuItemIndicator",wG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Gje,{...i,...r,ref:e})});wG.displayName=u_e;var d_e="DropdownMenuSeparator",jG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Yje,{...i,...r,ref:e})});jG.displayName=d_e;var h_e="DropdownMenuArrow",f_e=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Qje,{...i,...r,ref:e})});f_e.displayName=h_e;var m_e="DropdownMenuSubTrigger",_G=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Xje,{...i,...r,ref:e})});_G.displayName=m_e;var p_e="DropdownMenuSubContent",NG=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ei(n);return s.jsx(Zje,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NG.displayName=p_e;var g_e=dG,y_e=fG,v_e=mG,SG=gG,EG=yG,AG=vG,TG=xG,CG=bG,PG=wG,IG=jG,kG=_G,RG=NG;const OG=g_e,DG=y_e,x_e=j.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(kG,{ref:i,className:_e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(l8,{className:"ml-auto h-4 w-4"})]}));x_e.displayName=kG.displayName;const b_e=j.forwardRef(({className:t,...e},n)=>s.jsx(RG,{ref:n,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));b_e.displayName=RG.displayName;const BO=j.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(v_e,{children:s.jsx(SG,{ref:r,sideOffset:e,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));BO.displayName=SG.displayName;const Tj=j.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(AG,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));Tj.displayName=AG.displayName;const MG=j.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(TG,{ref:i,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(PG,{children:s.jsx(Ux,{className:"h-4 w-4"})})}),e]}));MG.displayName=TG.displayName;const w_e=j.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(CG,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(PG,{children:s.jsx(Goe,{className:"h-2 w-2 fill-current"})})}),e]}));w_e.displayName=CG.displayName;const UO=j.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(EG,{ref:r,className:_e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));UO.displayName=EG.displayName;const zO=j.forwardRef(({className:t,...e},n)=>s.jsx(IG,{ref:n,className:_e("-mx-1 my-1 h-px bg-muted",t),...e}));zO.displayName=IG.displayName;function j_e(){const t=Fn(),{user:e,signOut:n}=dt(),r=async()=>{await n(),t("/auth")};return s.jsxs(OG,{children:[s.jsx(DG,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"icon",className:"rounded-full",children:s.jsx(g8,{className:"h-5 w-5"})})}),s.jsxs(BO,{align:"end",className:"w-56",children:[s.jsx(UO,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm",children:"My Account"}),s.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(e==null?void 0:e.email)||""})]})}),s.jsx(zO,{}),s.jsxs(Tj,{onClick:r,children:[s.jsx(nle,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Log out"})]})]})]})}const ee={COMPANIES:"companies",USERS:"users",COMPANY_USERS:"companyUsers",COMPANY_SETTINGS:"companySettings",INVITATIONS:"invitations",USER_ROLES:"userRoles",CHART_OF_ACCOUNTS:"chartOfAccounts",JOURNAL_ENTRIES:"journalEntries",JOURNAL_LINES:"journalLines",INVOICES:"invoices",INVOICE_ITEMS:"invoiceItems",INVOICE_PAYMENTS:"invoicePayments",BILLS:"bills",BILL_PAYMENTS:"billPayments",EXPENSES:"expenses",EXPENSE_CATEGORY_MAPPINGS:"expenseCategoryMappings",SALES_ORDERS:"salesOrders",PURCHASE_ORDERS:"purchaseOrders",EMPLOYEES:"employees",CONTRACTORS:"contractors",ADVANCES:"advances",TIME_ENTRIES:"timeEntries",LEAVE_TYPES:"leaveTypes",LEAVE_BALANCES:"leaveBalances",LEAVE_REQUESTS:"leaveRequests",LEAVE_LEDGER:"leaveLedger",ATTENDANCE_RECORDS:"attendanceRecords",DISCIPLINARY_RECORDS:"disciplinaryRecords",EMPLOYEE_ALLOWANCES:"employeeAllowances",EMPLOYEE_PAYROLL_PROFILES:"employeePayrollProfiles",PAYROLL_RUNS:"payrollRuns",PAYROLL_ITEMS:"payrollItems",PAYROLL_ADDITIONS:"payrollAdditions",PAYROLL_JOURNALS:"payrollJournals",PAYE_TAX_BANDS:"payeTaxBands",PAYROLL_STATUTORY_RATES:"payrollStatutoryRates",CUSTOMERS:"customers",VENDORS:"vendors",PROJECTS:"projects",PROJECT_ACTIVITY_LOGS:"projectActivityLogs",PROJECT_EXPENSES:"projectExpenses",APPROVAL_REQUESTS:"approvalRequests",PRODUCTS:"products",FIXED_ASSETS:"fixedAssets",ASSET_CATEGORIES:"assetCategories",DEPRECIATION_ENTRIES:"depreciationEntries",INVENTORY_ITEMS:"inventoryItems",STOCK_MOVEMENTS:"stockMovements",PRICE_LISTS:"priceLists",PRICE_LIST_ITEMS:"priceListItems",BANK_ACCOUNTS:"bankAccounts",BANK_TRANSACTIONS:"bankTransactions",FINANCIAL_YEARS:"financialYears",FINANCIAL_PERIODS:"financialPeriods",CASH_RECONCILIATIONS:"cashReconciliations",RECONCILIATIONS:"reconciliations",PERIOD_LOCKS:"periodLocks",NOTIFICATIONS:"notifications",AUDIT_LOGS:"auditLogs"},__e=["super_admin","admin","financial_manager","accountant","bookkeeper","assistant_accountant","finance_officer","hr_manager","project_manager","inventory_manager","cashier","auditor","staff","read_only"],N_e=t=>{if(!t.length)return"read_only";for(const e of __e)if(t.includes(e))return e;return"read_only"};function $s(){const{user:t,isAuthenticated:e}=dt();return Ee({queryKey:["user-role",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Wo)return"read_only";try{const n=new Set,r=Se(ae,ee.COMPANY_USERS),i=[Ce(r,ge("userId","==",t.id),ge("status","==","active"),Ts(20)),Ce(r,ge("user_id","==",t.id),ge("status","==","active"),Ts(20)),Ce(r,ge("userId","==",t.id),Ts(20)),Ce(r,ge("user_id","==",t.id),Ts(20))];for(const a of i)if((await Pe(a)).docs.forEach(l=>{const c=l.data().role;c&&n.add(c)}),n.size)break;if(!n.size){const a=Se(ae,ee.USER_ROLES),o=[Ce(a,ge("userId","==",t.id),Ts(20)),Ce(a,ge("user_id","==",t.id),Ts(20))];for(const l of o)if((await Pe(l)).docs.forEach(u=>{const d=u.data().role;d&&n.add(d)}),n.size)break}return n.size?N_e(Array.from(n)):"read_only"}catch{return"read_only"}},enabled:e&&!!t,staleTime:1e3*60*5})}function S_e(t){const{data:e,isLoading:n}=$s();return{hasRole:(e?t.includes(e):!1)||e==="super_admin",isLoading:n,userRole:e}}const E_e={super_admin:["*"],admin:["*"],financial_manager:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","employees","fixed-assets","asset-depreciation","opening-balances","financial-periods","zra-compliance","tax-calculator","hr-operations"],accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","fixed-assets","asset-depreciation","opening-balances","financial-periods","tax-calculator","hr-operations"],assistant_accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","financial-periods"],finance_officer:["dashboard","invoices","expenses","bills","bank-accounts","reconciliation","reports","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","financial-periods"],bookkeeper:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","fixed-assets","reconciliation","accounts-payable","accounts-receivable","financial-periods"],cashier:["dashboard","bank-accounts","expenses","reconciliation","products","inventory"],inventory_manager:["dashboard","inventory","products","purchase-orders","vendors"],hr_manager:["dashboard","employees","payroll","advances","payroll-reports","time-tracking","hr-operations"],project_manager:["dashboard","projects","donors","time-tracking","reports"],auditor:["dashboard","reports","payroll-reports","audit-logs","journal-entries","chart-of-accounts"],staff:["dashboard","time-tracking","hr-operations"],read_only:["dashboard"]};function LG(t,e){if(!t)return!1;if(t==="super_admin"||t==="admin")return!0;const n=E_e[t]||[],r=e.replace(/^\//,"").split("/")[0];return n.includes(r)||n.includes("*")}function zC(t,[e,n]){return Math.min(n,Math.max(e,t))}function A_e(t,e){return j.useReducer((n,r)=>e[n][r]??n,t)}var qO="ScrollArea",[$G,qtt]=ps(qO),[T_e,ja]=$G(qO),FG=j.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=j.useState(null),[u,d]=j.useState(null),[h,f]=j.useState(null),[m,v]=j.useState(null),[p,y]=j.useState(null),[b,x]=j.useState(0),[w,C]=j.useState(0),[S,P]=j.useState(!1),[_,g]=j.useState(!1),T=Ft(e,A=>c(A)),E=lb(i);return s.jsx(T_e,{scope:n,type:r,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:P,scrollbarY:p,onScrollbarYChange:y,scrollbarYEnabled:_,onScrollbarYEnabledChange:g,onCornerWidthChange:x,onCornerHeightChange:C,children:s.jsx(st.div,{dir:E,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});FG.displayName=qO;var VG="ScrollAreaViewport",BG=j.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,o=ja(VG,n),l=j.useRef(null),c=Ft(e,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(st.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BG.displayName=VG;var ol="ScrollAreaScrollbar",WO=j.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ja(ol,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return j.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(C_e,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(P_e,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(UG,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(HO,{...r,ref:e}):null});WO.displayName=ol;var C_e=j.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ja(ol,t.__scopeScrollArea),[a,o]=j.useState(!1);return j.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(gs,{present:n||a,children:s.jsx(UG,{"data-state":a?"visible":"hidden",...r,ref:e})})}),P_e=j.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ja(ol,t.__scopeScrollArea),a=t.orientation==="horizontal",o=aS(()=>c("SCROLL_END"),100),[l,c]=A_e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),j.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,a,c,o]),s.jsx(gs,{present:n||l!=="hidden",children:s.jsx(HO,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:$e(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$e(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),UG=j.forwardRef((t,e)=>{const n=ja(ol,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=j.useState(!1),l=t.orientation==="horizontal",c=aS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Jm(n.viewport,c),Jm(n.content,c),s.jsx(gs,{present:r||a,children:s.jsx(HO,{"data-state":a?"visible":"hidden",...i,ref:e})})}),HO=j.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ja(ol,t.__scopeScrollArea),a=j.useRef(null),o=j.useRef(0),[l,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=KG(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return M_e(f,o.current,l,m)}return n==="horizontal"?s.jsx(I_e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,m=FF(f,l,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):n==="vertical"?s.jsx(k_e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,m=FF(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),I_e=j.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ja(ol,t.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),u=Ft(e,c,a.onScrollbarXChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(qG,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":iS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),YG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Pj(o.paddingLeft),paddingEnd:Pj(o.paddingRight)}})}})}),k_e=j.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ja(ol,t.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),u=Ft(e,c,a.onScrollbarYChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(qG,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":iS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),YG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Pj(o.paddingTop),paddingEnd:Pj(o.paddingBottom)}})}})}),[R_e,zG]=$G(ol),qG=j.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=ja(ol,n),[v,p]=j.useState(null),y=Ft(e,T=>p(T)),b=j.useRef(null),x=j.useRef(""),w=m.viewport,C=r.content-r.viewport,S=hr(d),P=hr(c),_=aS(h,10);function g(T){if(b.current){const E=T.clientX-b.current.left,A=T.clientY-b.current.top;u({x:E,y:A})}}return j.useEffect(()=>{const T=E=>{const A=E.target;(v==null?void 0:v.contains(A))&&S(E,C)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[w,v,C,S]),j.useEffect(P,[r,P]),Jm(v,_),Jm(m.content,_),s.jsx(R_e,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:hr(a),onThumbPointerUp:hr(o),onThumbPositionChange:P,onThumbPointerDown:hr(l),children:s.jsx(st.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:$e(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),b.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),g(T))}),onPointerMove:$e(t.onPointerMove,g),onPointerUp:$e(t.onPointerUp,T=>{const E=T.target;E.hasPointerCapture(T.pointerId)&&E.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Cj="ScrollAreaThumb",WG=j.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=zG(Cj,t.__scopeScrollArea);return s.jsx(gs,{present:n||i.hasThumb,children:s.jsx(O_e,{ref:e,...r})})}),O_e=j.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=ja(Cj,n),o=zG(Cj,n),{onThumbPositionChange:l}=o,c=Ft(e,h=>o.onThumbChange(h)),u=j.useRef(void 0),d=aS(()=>{u.current&&(u.current(),u.current=void 0)},100);return j.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=L_e(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,l]),s.jsx(st.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:$e(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,p=h.clientY-m.top;o.onThumbPointerDown({x:v,y:p})}),onPointerUp:$e(t.onPointerUp,o.onThumbPointerUp)})});WG.displayName=Cj;var KO="ScrollAreaCorner",HG=j.forwardRef((t,e)=>{const n=ja(KO,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(D_e,{...t,ref:e}):null});HG.displayName=KO;var D_e=j.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ja(KO,n),[a,o]=j.useState(0),[l,c]=j.useState(0),u=!!(a&&l);return Jm(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Jm(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(st.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Pj(t){return t?parseInt(t,10):0}function KG(t,e){const n=t/e;return isNaN(n)?0:n}function iS(t){const e=KG(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function M_e(t,e,n,r="ltr"){const i=iS(n),a=i/2,o=e||a,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return GG([c,u],h)(t)}function FF(t,e,n="ltr"){const r=iS(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=zC(t,c);return GG([0,o],[0,l])(u)}function GG(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function YG(t,e){return t>0&&t<e}var L_e=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function aS(t,e){const n=hr(t),r=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),j.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Jm(t,e){const n=hr(e);mr(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var QG=FG,$_e=BG,F_e=HG;const lh=j.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(QG,{ref:r,className:_e("relative overflow-hidden",t),...n,children:[s.jsx($_e,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(XG,{}),s.jsx(F_e,{})]}));lh.displayName=QG.displayName;const XG=j.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(WO,{ref:r,orientation:e,className:_e("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(WG,{className:"relative flex-1 rounded-full bg-border"})}));XG.displayName=WO.displayName;const BE=768;function oS(){const[t,e]=j.useState(void 0);return j.useEffect(()=>{const n=window.matchMedia(`(max-width: ${BE-1}px)`),r=()=>{e(window.innerWidth<BE)};return n.addEventListener("change",r),e(window.innerWidth<BE),()=>n.removeEventListener("change",r)},[]),!!t}const Y=j.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:_e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Y.displayName="Input";var V_e="Separator",VF="horizontal",B_e=["horizontal","vertical"],ZG=j.forwardRef((t,e)=>{const{decorative:n,orientation:r=VF,...i}=t,a=U_e(r)?r:VF,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(st.div,{"data-orientation":a,...l,...i,ref:e})});ZG.displayName=V_e;function U_e(t){return B_e.includes(t)}var JG=ZG;const eY=j.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(JG,{ref:i,decorative:n,orientation:e,className:_e("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));eY.displayName=JG.displayName;var lS="Dialog",[tY,nY]=ps(lS),[z_e,go]=tY(lS),rY=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=j.useRef(null),c=j.useRef(null),[u,d]=lo({prop:r,defaultProp:i??!1,onChange:a,caller:lS});return s.jsx(z_e,{scope:e,triggerRef:l,contentRef:c,contentId:ca(),titleId:ca(),descriptionId:ca(),open:u,onOpenChange:d,onOpenToggle:j.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};rY.displayName=lS;var sY="DialogTrigger",iY=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=go(sY,n),a=Ft(e,i.triggerRef);return s.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":QO(i.open),...r,ref:a,onClick:$e(t.onClick,i.onOpenToggle)})});iY.displayName=sY;var GO="DialogPortal",[q_e,aY]=tY(GO,{forceMount:void 0}),oY=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=go(GO,e);return s.jsx(q_e,{scope:e,forceMount:n,children:j.Children.map(r,o=>s.jsx(gs,{present:n||a.open,children:s.jsx(Vx,{asChild:!0,container:i,children:o})}))})};oY.displayName=GO;var Ij="DialogOverlay",lY=j.forwardRef((t,e)=>{const n=aY(Ij,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=go(Ij,t.__scopeDialog);return a.modal?s.jsx(gs,{present:r||a.open,children:s.jsx(H_e,{...i,ref:e})}):null});lY.displayName=Ij;var W_e=vh("DialogOverlay.RemoveScroll"),H_e=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=go(Ij,n);return s.jsx(tS,{as:W_e,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(st.div,{"data-state":QO(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Oh="DialogContent",cY=j.forwardRef((t,e)=>{const n=aY(Oh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=go(Oh,t.__scopeDialog);return s.jsx(gs,{present:r||a.open,children:a.modal?s.jsx(K_e,{...i,ref:e}):s.jsx(G_e,{...i,ref:e})})});cY.displayName=Oh;var K_e=j.forwardRef((t,e)=>{const n=go(Oh,t.__scopeDialog),r=j.useRef(null),i=Ft(e,n.contentRef,r);return j.useEffect(()=>{const a=r.current;if(a)return RO(a)},[]),s.jsx(uY,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$e(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:$e(t.onFocusOutside,a=>a.preventDefault())})}),G_e=j.forwardRef((t,e)=>{const n=go(Oh,t.__scopeDialog),r=j.useRef(!1),i=j.useRef(!1);return s.jsx(uY,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),uY=j.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=go(Oh,n),c=j.useRef(null),u=Ft(e,c);return kO(),s.jsxs(s.Fragment,{children:[s.jsx(ZN,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx($p,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":QO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Q_e,{titleId:l.titleId}),s.jsx(Z_e,{contentRef:c,descriptionId:l.descriptionId})]})]})}),YO="DialogTitle",dY=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=go(YO,n);return s.jsx(st.h2,{id:i.titleId,...r,ref:e})});dY.displayName=YO;var hY="DialogDescription",fY=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=go(hY,n);return s.jsx(st.p,{id:i.descriptionId,...r,ref:e})});fY.displayName=hY;var mY="DialogClose",pY=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=go(mY,n);return s.jsx(st.button,{type:"button",...r,ref:e,onClick:$e(t.onClick,()=>i.onOpenChange(!1))})});pY.displayName=mY;function QO(t){return t?"open":"closed"}var gY="DialogTitleWarning",[Y_e,yY]=Hae(gY,{contentName:Oh,titleName:YO,docsSlug:"dialog"}),Q_e=({titleId:t})=>{const e=yY(gY),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},X_e="DialogDescriptionWarning",Z_e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yY(X_e).contentName}}.`;return j.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},XO=rY,vY=iY,ZO=oY,hb=lY,fb=cY,mb=dY,pb=fY,cS=pY;const J_e=XO,eNe=ZO,xY=j.forwardRef(({className:t,...e},n)=>s.jsx(hb,{className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));xY.displayName=hb.displayName;const tNe=Gh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),bY=j.forwardRef(({side:t="right",className:e,children:n,...r},i)=>s.jsxs(eNe,{children:[s.jsx(xY,{}),s.jsxs(fb,{ref:i,className:_e(tNe({side:t}),e),...r,children:[n,s.jsxs(cS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(qm,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bY.displayName=fb.displayName;const nNe=j.forwardRef(({className:t,...e},n)=>s.jsx(mb,{ref:n,className:_e("text-lg font-semibold text-foreground",t),...e}));nNe.displayName=mb.displayName;const rNe=j.forwardRef(({className:t,...e},n)=>s.jsx(pb,{ref:n,className:_e("text-sm text-muted-foreground",t),...e}));rNe.displayName=pb.displayName;function Mc({className:t,...e}){return s.jsx("div",{className:_e("animate-pulse rounded-md bg-muted",t),...e})}const sNe="sidebar:state",iNe=60*60*24*7,aNe="16rem",oNe="18rem",lNe="3rem",cNe="b",wY=j.createContext(null);function gb(){const t=j.useContext(wY);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const jY=j.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:a,...o},l)=>{const c=oS(),[u,d]=j.useState(!1),[h,f]=j.useState(t),m=e??h,v=j.useCallback(x=>{const w=typeof x=="function"?x(m):x;n?n(w):f(w),document.cookie=`${sNe}=${w}; path=/; max-age=${iNe}`},[n,m]),p=j.useCallback(()=>c?d(x=>!x):v(x=>!x),[c,v,d]);j.useEffect(()=>{const x=w=>{w.key===cNe&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),p())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[p]);const y=m?"expanded":"collapsed",b=j.useMemo(()=>({state:y,open:m,setOpen:v,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:p}),[y,m,v,c,u,d,p]);return s.jsx(wY.Provider,{value:b,children:s.jsx(nW,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":aNe,"--sidebar-width-icon":lNe,...i},className:_e("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});jY.displayName="SidebarProvider";const _Y=j.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=gb();return n==="none"?s.jsx("div",{className:_e("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:i}):l?s.jsx(J_e,{open:u,onOpenChange:d,...a,children:s.jsx(bY,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":oNe},side:t,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):s.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[s.jsx("div",{className:_e("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:_e("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});_Y.displayName="Sidebar";const NY=j.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:i}=gb();return s.jsxs(K,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:_e("h-7 w-7",t),onClick:a=>{e==null||e(a),i()},...n,children:[s.jsx(ale,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});NY.displayName="SidebarTrigger";const uNe=j.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=gb();return s.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:_e("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});uNe.displayName="SidebarRail";const SY=j.forwardRef(({className:t,...e},n)=>s.jsx("main",{ref:n,className:_e("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));SY.displayName="SidebarInset";const dNe=j.forwardRef(({className:t,...e},n)=>s.jsx(Y,{ref:n,"data-sidebar":"input",className:_e("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));dNe.displayName="SidebarInput";const EY=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"header",className:_e("flex flex-col gap-2 p-2",t),...e}));EY.displayName="SidebarHeader";const AY=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"footer",className:_e("flex flex-col gap-2 p-2",t),...e}));AY.displayName="SidebarFooter";const hNe=j.forwardRef(({className:t,...e},n)=>s.jsx(eY,{ref:n,"data-sidebar":"separator",className:_e("mx-2 w-auto bg-sidebar-border",t),...e}));hNe.displayName="SidebarSeparator";const TY=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"content",className:_e("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));TY.displayName="SidebarContent";const CY=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"group",className:_e("relative flex w-full min-w-0 flex-col p-2",t),...e}));CY.displayName="SidebarGroup";const fNe=j.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?Kh:"div";return s.jsx(i,{ref:r,"data-sidebar":"group-label",className:_e("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});fNe.displayName="SidebarGroupLabel";const mNe=j.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?Kh:"button";return s.jsx(i,{ref:r,"data-sidebar":"group-action",className:_e("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});mNe.displayName="SidebarGroupAction";const PY=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"group-content",className:_e("w-full text-sm",t),...e}));PY.displayName="SidebarGroupContent";const IY=j.forwardRef(({className:t,...e},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu",className:_e("flex w-full min-w-0 flex-col gap-1",t),...e}));IY.displayName="SidebarMenu";const kY=j.forwardRef(({className:t,...e},n)=>s.jsx("li",{ref:n,"data-sidebar":"menu-item",className:_e("group/menu-item relative",t),...e}));kY.displayName="SidebarMenuItem";const pNe=Gh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),RY=j.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:a,...o},l)=>{const c=t?Kh:"button",{isMobile:u,state:d}=gb(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:_e(pNe({variant:n,size:r}),a),...o});return i?(typeof i=="string"&&(i={children:i}),s.jsxs(dde,{children:[s.jsx(hde,{asChild:!0,children:h}),s.jsx(rW,{side:"right",align:"center",hidden:d!=="collapsed"||u,...i})]})):h});RY.displayName="SidebarMenuButton";const gNe=j.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},i)=>{const a=e?Kh:"button";return s.jsx(a,{ref:i,"data-sidebar":"menu-action",className:_e("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});gNe.displayName="SidebarMenuAction";const yNe=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:_e("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));yNe.displayName="SidebarMenuBadge";const vNe=j.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const i=j.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:_e("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&s.jsx(Mc,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(Mc,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});vNe.displayName="SidebarMenuSkeleton";const xNe=j.forwardRef(({className:t,...e},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:_e("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));xNe.displayName="SidebarMenuSub";const bNe=j.forwardRef(({...t},e)=>s.jsx("li",{ref:e,...t}));bNe.displayName="SidebarMenuSubItem";const wNe=j.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...i},a)=>{const o=t?Kh:"a";return s.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:_e("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})});wNe.displayName="SidebarMenuSubButton";var uS="Collapsible",[jNe,Wtt]=ps(uS),[_Ne,JO]=jNe(uS),OY=j.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c,u]=lo({prop:r,defaultProp:i??!1,onChange:o,caller:uS});return s.jsx(_Ne,{scope:n,disabled:a,contentId:ca(),open:c,onOpenToggle:j.useCallback(()=>u(d=>!d),[u]),children:s.jsx(st.div,{"data-state":t2(c),"data-disabled":a?"":void 0,...l,ref:e})})});OY.displayName=uS;var DY="CollapsibleTrigger",MY=j.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=JO(DY,n);return s.jsx(st.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":t2(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:$e(t.onClick,i.onOpenToggle)})});MY.displayName=DY;var e2="CollapsibleContent",LY=j.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=JO(e2,t.__scopeCollapsible);return s.jsx(gs,{present:n||i.open,children:({present:a})=>s.jsx(NNe,{...r,ref:e,present:a})})});LY.displayName=e2;var NNe=j.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=JO(e2,n),[l,c]=j.useState(r),u=j.useRef(null),d=Ft(e,u),h=j.useRef(0),f=h.current,m=j.useRef(0),v=m.current,p=o.open||l,y=j.useRef(p),b=j.useRef(void 0);return j.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),mr(()=>{const x=u.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const w=x.getBoundingClientRect();h.current=w.height,m.current=w.width,y.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[o.open,r]),s.jsx(st.div,{"data-state":t2(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:p&&i})});function t2(t){return t?"open":"closed"}var SNe=OY;const ENe=SNe,ANe=MY,TNe=LY;function Fv({variant:t="full",size:e="md",className:n}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"},i={sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},a={sm:"text-[8px]",md:"text-[10px]",lg:"text-xs",xl:"text-sm"};return s.jsxs("div",{className:_e("flex items-center gap-3",n),children:[t!=="text"&&s.jsxs("div",{className:_e("relative flex items-center justify-center transition-all duration-300",r[e]),children:[s.jsx("img",{src:"/logo_new.png",alt:"ZedBooks",className:"h-full w-full object-contain drop-shadow-sm"}),s.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-full blur-xl -z-10 scale-150 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(t==="full"||t==="text")&&s.jsxs("div",{className:"flex flex-col select-none",children:[s.jsx("span",{className:_e("font-bold leading-none tracking-tight",i[e]),children:"ZedBooks"}),s.jsx("span",{className:_e("font-medium uppercase tracking-[0.2em] opacity-70",a[e]),children:"Purpose Ledger"})]})]})}const CNe=[{title:"Overview",items:[{title:"Dashboard",icon:tle,href:"/dashboard"}]},{title:"Sales & Receivables",items:[{title:"Customers",icon:di,href:"/customers"},{title:"Invoices",icon:dr,href:"/invoices"},{title:"Accounts Receivable",icon:za,href:"/accounts-receivable"},{title:"Estimates",icon:dr,href:"/estimates"},{title:"Sales Orders",icon:c4,href:"/sales-orders"}]},{title:"Purchasing & Payables",items:[{title:"Vendors",icon:di,href:"/vendors"},{title:"Bills",icon:dr,href:"/bills"},{title:"Accounts Payable",icon:za,href:"/accounts-payable"},{title:"Purchase Orders",icon:c4,href:"/purchase-orders"},{title:"Expenses",icon:Zn,href:"/expenses"}]},{title:"Inventory & Assets",items:[{title:"Products & Services",icon:la,href:"/products"},{title:"Inventory",icon:la,href:"/inventory"},{title:"Fixed Assets",icon:la,href:"/fixed-assets"},{title:"Depreciation",icon:xv,href:"/asset-depreciation"}]},{title:"Banking",items:[{title:"Bank Accounts",icon:za,href:"/bank-accounts"},{title:"Reconciliation",icon:za,href:"/reconciliation"}]},{title:"People",items:[{title:"Employees",icon:di,href:"/employees"},{title:"Payroll",icon:Zn,href:"/payroll"},{title:"Advances",icon:za,href:"/advances"},{title:"HR Operations",icon:Fp,href:"/hr-operations"},{title:"Time & Contractors",icon:Vi,href:"/time-tracking"}]},{title:"Projects & Grants",items:[{title:"Projects",icon:Kw,href:"/projects"},{title:"Donors & Grants",icon:di,href:"/donors"}]},{title:"Accounting",items:[{title:"Chart of Accounts",icon:vv,href:"/chart-of-accounts"},{title:"Journal Entries",icon:dr,href:"/journal-entries"},{title:"Opening Balances",icon:vv,href:"/opening-balances"},{title:"Financial Periods",icon:Vi,href:"/financial-periods"}]},{title:"Reports",items:[{title:"Financial Reports",icon:o8,href:"/reports"},{title:"Payroll Reports",icon:dr,href:"/payroll-reports"},{title:"ZRA Compliance",icon:dr,href:"/zra-compliance"},{title:"Tax Calculator",icon:xv,href:"/tax-calculator"}]},{title:"Administration",items:[{title:"Users & Roles",icon:di,href:"/users"},{title:"Audit Logs",icon:dr,href:"/audit-logs"},{title:"Payroll Settings",icon:Yw,href:"/payroll-settings"},{title:"Company Settings",icon:Yw,href:"/company-settings"}]}];function PNe(t,e){return e?e==="super_admin"||e==="admin"?t:t.map(n=>({...n,items:n.items.filter(r=>LG(e,r.href))})).filter(n=>n.items.length>0):t.map(n=>({...n,items:n.items.filter(r=>r.href==="/dashboard")})).filter(n=>n.items.length>0)}function INe(){const t=il(),{data:e}=$s(),{setOpenMobile:n}=gb(),r=oS(),i=PNe(CNe,e||null),a=()=>{r&&n(!1)};return s.jsxs(_Y,{className:"border-r border-sidebar-border",children:[s.jsx(EY,{className:"border-b border-sidebar-border p-4",children:s.jsx(Ri,{to:"/dashboard",className:"flex items-center gap-3",onClick:a,children:s.jsx(Fv,{variant:"full",size:"lg"})})}),s.jsx(TY,{children:s.jsx(lh,{className:"h-full",children:s.jsx("div",{className:"space-y-1 p-2",children:i.map((o,l)=>{const c=o.items.some(u=>t.pathname===u.href);return s.jsx(ENe,{defaultOpen:c||l<3,className:"group/collapsible",children:s.jsxs(CY,{className:"p-0",children:[s.jsxs(ANe,{className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors",children:[s.jsx("span",{children:o.title}),s.jsx(eR,{className:"h-4 w-4 transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),s.jsx(TNe,{children:s.jsx(PY,{className:"mt-1",children:s.jsx(IY,{children:o.items.map(u=>{const d=t.pathname===u.href;return s.jsx(kY,{children:s.jsx(RY,{asChild:!0,isActive:d,className:_e("w-full transition-colors",d?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground"),children:s.jsxs(Ri,{to:u.href,onClick:a,className:"flex items-center gap-2",children:[s.jsx(u.icon,{className:_e("h-4 w-4",d?"text-primary-foreground":"")}),s.jsx("span",{children:u.title})]})})},u.title)})})})})]})},o.title)})})})}),s.jsx(AY,{className:"border-t border-sidebar-border p-4",children:s.jsx(j_e,{})})]})}function Et({children:t}){const{isAuthenticated:e,isLoading:n}=dt(),r=il();return n?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx(mm,{message:"Verifying authentication...",size:"lg"})}):e?s.jsx(s.Fragment,{children:t}):s.jsx(cC,{to:"/auth",state:{from:r},replace:!0})}function n2({className:t}){return s.jsx("a",{href:"https://byteandberry.com/",target:"_blank",rel:"noopener noreferrer",className:_e("fixed bottom-4 right-4 z-50 flex items-center gap-1 text-xs font-medium text-muted-foreground/40 hover:text-primary transition-all duration-200 bg-background/50 hover:bg-background px-2 py-1 rounded-full backdrop-blur-[2px]",t),"aria-label":"Made by Byte & Berry - Visit Website",children:s.jsx("span",{children:"Made by Byte & Berry"})})}function kNe(){const[t,e]=j.useState([{role:"assistant",content:"Hello! I am your ZedBooks financial assistant. I can help you analyze your data, explain accounting concepts, or check for anomalies. How can I help you today?",timestamp:new Date().toISOString()}]),[n,r]=j.useState(!1);return{messages:t,isLoading:n,askAI:async(o,l)=>{if(!o.trim())return;const c={role:"user",content:o,timestamp:new Date().toISOString()};e(u=>[...u,c]),r(!0);try{const h={role:"assistant",content:(await s7(_7,"askDeepSeek")({query:o,includeFinancialContext:!0,companyId:l})).data.answer,timestamp:new Date().toISOString()};e(f=>[...f,h])}catch(u){console.error("AI Error:",u),G.error("Failed to get response from AI assistant."),e(d=>[...d,{role:"assistant",content:"I'm sorry, I encountered an error while processing your request. Please try again later.",timestamp:new Date().toISOString()}])}finally{r(!1)}},clearChat:()=>{e([{role:"assistant",content:"Chat cleared. How can I help you now?",timestamp:new Date().toISOString()}])}}}const Z=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:_e("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Z.displayName="Card";const ne=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:_e("flex flex-col space-y-1.5 p-6",t),...e}));ne.displayName="CardHeader";const re=j.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:_e("text-2xl font-semibold leading-none tracking-tight",t),...e}));re.displayName="CardTitle";const wt=j.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:_e("text-sm text-muted-foreground",t),...e}));wt.displayName="CardDescription";const se=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:_e("p-6 pt-0",t),...e}));se.displayName="CardContent";const $Y=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:_e("flex items-center p-6 pt-0",t),...e}));$Y.displayName="CardFooter";const r2=j.createContext({});function s2(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const FY=typeof window<"u",VY=FY?j.useLayoutEffect:j.useEffect,dS=j.createContext(null);function i2(t,e){t.indexOf(e)===-1&&t.push(e)}function kj(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const el=(t,e,n)=>n>e?e:n<t?t:n;let hS=()=>{},ep=()=>{};const Xl={},BY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function UY(t){return typeof t=="object"&&t!==null}const zY=t=>/^0[^.\s]+$/u.test(t);function a2(t){let e;return()=>(e===void 0&&(e=t()),e)}const ha=t=>t,RNe=(t,e)=>n=>e(t(n)),yb=(...t)=>t.reduce(RNe),Vv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class o2{constructor(){this.subscriptions=[]}add(e){return i2(this.subscriptions,e),()=>kj(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fa=t=>t*1e3,ia=t=>t/1e3;function qY(t,e){return e?t*(1e3/e):0}const WY=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ONe=1e-7,DNe=12;function MNe(t,e,n,r,i){let a,o,l=0;do o=e+(n-e)/2,a=WY(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>ONe&&++l<DNe);return o}function vb(t,e,n,r){if(t===e&&n===r)return ha;const i=a=>MNe(a,0,1,t,n);return a=>a===0||a===1?a:WY(i(a),e,r)}const HY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KY=t=>e=>1-t(1-e),GY=vb(.33,1.53,.69,.99),l2=KY(GY),YY=HY(l2),QY=t=>(t*=2)<1?.5*l2(t):.5*(2-Math.pow(2,-10*(t-1))),c2=t=>1-Math.sin(Math.acos(t)),XY=KY(c2),ZY=HY(c2),LNe=vb(.42,0,1,1),$Ne=vb(0,0,.58,1),JY=vb(.42,0,.58,1),FNe=t=>Array.isArray(t)&&typeof t[0]!="number",eQ=t=>Array.isArray(t)&&typeof t[0]=="number",BF={linear:ha,easeIn:LNe,easeInOut:JY,easeOut:$Ne,circIn:c2,circInOut:ZY,circOut:XY,backIn:l2,backInOut:YY,backOut:GY,anticipate:QY},VNe=t=>typeof t=="string",UF=t=>{if(eQ(t)){ep(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,i]=t;return vb(e,n,r,i)}else if(VNe(t))return ep(BF[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),BF[t];return t},w0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],zF={value:null,addProjectionMetrics:null};function BNe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const p=m&&i?n:r;return f&&o.add(h),p.has(h)||p.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&zF.value&&zF.value.frameloop[e].push(c),c=0,n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const UNe=40;function tQ(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=w0.reduce((w,C)=>(w[C]=BNe(a,e?C:void 0),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:v}=o,p=()=>{const w=Xl.useManualTiming?i.timestamp:performance.now();n=!1,Xl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,UNe),1)),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),m.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:w0.reduce((w,C)=>{const S=o[C];return w[C]=(P,_=!1,g=!1)=>(n||y(),S.schedule(P,_,g)),w},{}),cancel:w=>{for(let C=0;C<w0.length;C++)o[w0[C]].cancel(w)},state:i,steps:o}}const{schedule:Ln,cancel:Uu,state:ls,steps:UE}=tQ(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0);let pw;function zNe(){pw=void 0}const Ws={now:()=>(pw===void 0&&Ws.set(ls.isProcessing||Xl.useManualTiming?ls.timestamp:performance.now()),pw),set:t=>{pw=t,queueMicrotask(zNe)}},nQ=t=>e=>typeof e=="string"&&e.startsWith(t),rQ=nQ("--"),qNe=nQ("var(--"),u2=t=>qNe(t)?WNe.test(t.split("/*")[0].trim()):!1,WNe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function qF(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const eg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bv={...eg,transform:t=>el(0,1,t)},j0={...eg,default:1},zy=t=>Math.round(t*1e5)/1e5,d2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function HNe(t){return t==null}const KNe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,h2=(t,e)=>n=>!!(typeof n=="string"&&KNe.test(n)&&n.startsWith(t)||e&&!HNe(n)&&Object.prototype.hasOwnProperty.call(n,e)),sQ=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(d2);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},GNe=t=>el(0,255,t),zE={...eg,transform:t=>Math.round(GNe(t))},Vd={test:h2("rgb","red"),parse:sQ("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zE.transform(t)+", "+zE.transform(e)+", "+zE.transform(n)+", "+zy(Bv.transform(r))+")"};function YNe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qC={test:h2("#"),parse:YNe,transform:Vd.transform},xb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pc=xb("deg"),Ho=xb("%"),it=xb("px"),QNe=xb("vh"),XNe=xb("vw"),WF={...Ho,parse:t=>Ho.parse(t)/100,transform:t=>Ho.transform(t*100)},qf={test:h2("hsl","hue"),parse:sQ("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ho.transform(zy(e))+", "+Ho.transform(zy(n))+", "+zy(Bv.transform(r))+")"},Ar={test:t=>Vd.test(t)||qC.test(t)||qf.test(t),parse:t=>Vd.test(t)?Vd.parse(t):qf.test(t)?qf.parse(t):qC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vd.transform(t):qf.transform(t),getAnimatableNone:t=>{const e=Ar.parse(t);return e.alpha=0,Ar.transform(e)}},ZNe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function JNe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(d2))==null?void 0:e.length)||0)+(((n=t.match(ZNe))==null?void 0:n.length)||0)>0}const iQ="number",aQ="color",eSe="var",tSe="var(",HF="${}",nSe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=e.replace(nSe,c=>(Ar.test(c)?(r.color.push(a),i.push(aQ),n.push(Ar.parse(c))):c.startsWith(tSe)?(r.var.push(a),i.push(eSe),n.push(c)):(r.number.push(a),i.push(iQ),n.push(parseFloat(c))),++a,HF)).split(HF);return{values:n,split:l,indexes:r,types:i}}function oQ(t){return Uv(t).values}function lQ(t){const{split:e,types:n}=Uv(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const l=n[o];l===iQ?a+=zy(i[o]):l===aQ?a+=Ar.transform(i[o]):a+=i[o]}return a}}const rSe=t=>typeof t=="number"?0:Ar.test(t)?Ar.getAnimatableNone(t):t;function sSe(t){const e=oQ(t);return lQ(t)(e.map(rSe))}const zu={test:JNe,parse:oQ,createTransformer:lQ,getAnimatableNone:sSe};function qE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function iSe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=qE(c,l,t+1/3),a=qE(c,l,t),o=qE(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Rj(t,e){return n=>n>0?e:t}const nr=(t,e,n)=>t+(e-t)*n,WE=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},aSe=[qC,Vd,qf],oSe=t=>aSe.find(e=>e.test(t));function KF(t){const e=oSe(t);if(hS(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===qf&&(n=iSe(n)),n}const GF=(t,e)=>{const n=KF(t),r=KF(e);if(!n||!r)return Rj(t,e);const i={...n};return a=>(i.red=WE(n.red,r.red,a),i.green=WE(n.green,r.green,a),i.blue=WE(n.blue,r.blue,a),i.alpha=nr(n.alpha,r.alpha,a),Vd.transform(i))},WC=new Set(["none","hidden"]);function lSe(t,e){return WC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function cSe(t,e){return n=>nr(t,e,n)}function f2(t){return typeof t=="number"?cSe:typeof t=="string"?u2(t)?Rj:Ar.test(t)?GF:hSe:Array.isArray(t)?cQ:typeof t=="object"?Ar.test(t)?GF:uSe:Rj}function cQ(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>f2(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function uSe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=f2(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function dSe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],l=t.values[o]??0;n[i]=l,r[a]++}return n}const hSe=(t,e)=>{const n=zu.createTransformer(e),r=Uv(t),i=Uv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?WC.has(t)&&!i.values.length||WC.has(e)&&!r.values.length?lSe(t,e):yb(cQ(dSe(r,i),i.values),n):(hS(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Rj(t,e))};function uQ(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nr(t,e,n):f2(t)(t,e)}const fSe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ln.update(e,n),stop:()=>Uu(e),now:()=>ls.isProcessing?ls.timestamp:Ws.now()}},dQ=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Oj=2e4;function m2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Oj;)e+=n,r=t.next(e);return e>=Oj?1/0:e}function mSe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(m2(r),Oj);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:ia(i)}}const pSe=5;function hQ(t,e,n){const r=Math.max(e-pSe,0);return qY(n-t(r),e-r)}const er={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},HE=.001;function gSe({duration:t=er.duration,bounce:e=er.bounce,velocity:n=er.velocity,mass:r=er.mass}){let i,a;hS(t<=fa(er.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=el(er.minDamping,er.maxDamping,o),t=el(er.minDuration,er.maxDuration,ia(t)),o<1?(i=u=>{const d=u*o,h=d*t,f=d-n,m=HC(u,o),v=Math.exp(-h);return HE-f/m*v},a=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-h),p=HC(Math.pow(u,2),o);return(-i(u)+HE>0?-1:1)*((f-m)*v)/p}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-HE+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=vSe(i,a,l);if(t=fa(t),isNaN(c))return{stiffness:er.stiffness,damping:er.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const ySe=12;function vSe(t,e,n){let r=n;for(let i=1;i<ySe;i++)r=r-t(r)/e(r);return r}function HC(t,e){return t*Math.sqrt(1-e*e)}const xSe=["duration","bounce"],bSe=["stiffness","damping","mass"];function YF(t,e){return e.some(n=>t[n]!==void 0)}function wSe(t){let e={velocity:er.velocity,stiffness:er.stiffness,damping:er.damping,mass:er.mass,isResolvedFromDuration:!1,...t};if(!YF(t,bSe)&&YF(t,xSe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*el(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:er.mass,stiffness:i,damping:a}}else{const n=gSe(t);e={...e,...n,mass:er.mass},e.isResolvedFromDuration=!0}return e}function Dj(t=er.visualDuration,e=er.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=wSe({...n,velocity:-ia(n.velocity||0)}),v=f||0,p=u/(2*Math.sqrt(c*d)),y=o-a,b=ia(Math.sqrt(c/d)),x=Math.abs(y)<5;r||(r=x?er.restSpeed.granular:er.restSpeed.default),i||(i=x?er.restDelta.granular:er.restDelta.default);let w;if(p<1){const S=HC(b,p);w=P=>{const _=Math.exp(-p*b*P);return o-_*((v+p*b*y)/S*Math.sin(S*P)+y*Math.cos(S*P))}}else if(p===1)w=S=>o-Math.exp(-b*S)*(y+(v+b*y)*S);else{const S=b*Math.sqrt(p*p-1);w=P=>{const _=Math.exp(-p*b*P),g=Math.min(S*P,300);return o-_*((v+p*b*y)*Math.sinh(g)+S*y*Math.cosh(g))/S}}const C={calculatedDuration:m&&h||null,next:S=>{const P=w(S);if(m)l.done=S>=h;else{let _=S===0?v:0;p<1&&(_=S===0?fa(v):hQ(w,S,P));const g=Math.abs(_)<=r,T=Math.abs(o-P)<=i;l.done=g&&T}return l.value=l.done?o:P,l},toString:()=>{const S=Math.min(m2(C),Oj),P=dQ(_=>C.next(S*_).value,S,30);return S+"ms "+P},toTransition:()=>{}};return C}Dj.applyToOptions=t=>{const e=mSe(t,100,Dj);return t.ease=e.ease,t.duration=fa(e.duration),t.type="keyframes",t};function KC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=g=>l!==void 0&&g<l||c!==void 0&&g>c,v=g=>l===void 0?c:c===void 0||Math.abs(l-g)<Math.abs(c-g)?l:c;let p=n*e;const y=h+p,b=o===void 0?y:o(y);b!==y&&(p=b-h);const x=g=>-p*Math.exp(-g/r),w=g=>b+x(g),C=g=>{const T=x(g),E=w(g);f.done=Math.abs(T)<=u,f.value=f.done?b:E};let S,P;const _=g=>{m(f.value)&&(S=g,P=Dj({keyframes:[f.value,v(f.value)],velocity:hQ(w,g,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:g=>{let T=!1;return!P&&S===void 0&&(T=!0,C(g),_(g)),S!==void 0&&g>=S?P.next(g-S):(!T&&C(g),f)}}}function jSe(t,e,n){const r=[],i=n||Xl.mix||uQ,a=t.length-1;for(let o=0;o<a;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||ha:e;l=yb(c,l)}r.push(l)}return r}function _Se(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(ep(a===e.length,"Both input and output ranges must be the same length","range-length"),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=jSe(e,r,i),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Vv(t[h],t[h+1],d);return l[h](f)};return n?d=>u(el(t[0],t[a-1],d)):u}function NSe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vv(0,e,r);t.push(nr(n,1,i))}}function SSe(t){const e=[0];return NSe(e,t.length-1),e}function ESe(t,e){return t.map(n=>n*e)}function ASe(t,e){return t.map(()=>e||JY).splice(0,t.length-1)}function qy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=FNe(r)?r.map(UF):UF(r),a={done:!1,value:e[0]},o=ESe(n&&n.length===e.length?n:SSe(e),t),l=_Se(o,e,{ease:Array.isArray(i)?i:ASe(e,i)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const TSe=t=>t!==null;function p2(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(TSe),l=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const CSe={decay:KC,inertia:KC,tween:qy,keyframes:qy,spring:Dj};function fQ(t){typeof t.type=="string"&&(t.type=CSe[t.type])}class g2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const PSe=t=>t/100;class y2 extends g2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ws.now()&&this.tick(Ws.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;fQ(e);const{type:n=qy,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||qy;c!==qy&&typeof l[0]!="number"&&(this.mixKeyframes=yb(PSe,uQ(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=m2(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:v,onUpdate:p,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,C=r;if(h){const g=Math.min(this.currentTime,i)/l;let T=Math.floor(g),E=g%1;!E&&g>=1&&(E=1),E===1&&T--,T=Math.min(T,h+1),!!(T%2)&&(f==="reverse"?(E=1-E,m&&(E-=m/l)):f==="mirror"&&(C=o)),w=el(0,1,E)*l}const S=x?{done:!1,value:d[0]}:C.next(w);a&&(S.value=a(S.value));let{done:P}=S;!x&&c!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return _&&v!==KC&&(S.value=p2(d,this.options,y,this.speed)),p&&p(S.value),_&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return ia(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ia(e)}get time(){return ia(this.currentTime)}set time(e){var n;e=fa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ws.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ia(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=fSe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ws.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ISe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Bd=t=>t*180/Math.PI,GC=t=>{const e=Bd(Math.atan2(t[1],t[0]));return YC(e)},kSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:GC,rotateZ:GC,skewX:t=>Bd(Math.atan(t[1])),skewY:t=>Bd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},YC=t=>(t=t%360,t<0&&(t+=360),t),QF=GC,XF=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ZF=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),RSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:XF,scaleY:ZF,scale:t=>(XF(t)+ZF(t))/2,rotateX:t=>YC(Bd(Math.atan2(t[6],t[5]))),rotateY:t=>YC(Bd(Math.atan2(-t[2],t[0]))),rotateZ:QF,rotate:QF,skewX:t=>Bd(Math.atan(t[4])),skewY:t=>Bd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function QC(t){return t.includes("scale")?1:0}function XC(t,e){if(!t||t==="none")return QC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=RSe,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=kSe,i=l}if(!i)return QC(e);const a=r[e],o=i[1].split(",").map(DSe);return typeof a=="function"?a(o):o[a]}const OSe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return XC(n,e)};function DSe(t){return parseFloat(t.trim())}const tg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ng=new Set(tg),JF=t=>t===eg||t===it,MSe=new Set(["x","y","z"]),LSe=tg.filter(t=>!MSe.has(t));function $Se(t){const e=[];return LSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ou={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>XC(e,"x"),y:(t,{transform:e})=>XC(e,"y")};ou.translateX=ou.x;ou.translateY=ou.y;const ch=new Set;let ZC=!1,JC=!1,eP=!1;function mQ(){if(JC){const t=Array.from(ch).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=$Se(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}JC=!1,ZC=!1,ch.forEach(t=>t.complete(eP)),ch.clear()}function pQ(){ch.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(JC=!0)})}function FSe(){eP=!0,pQ(),mQ(),eP=!1}class v2{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ch.add(this),ZC||(ZC=!0,Ln.read(pQ),Ln.resolveKeyframes(mQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}ISe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ch.delete(this)}cancel(){this.state==="scheduled"&&(ch.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VSe=t=>t.startsWith("--");function BSe(t,e,n){VSe(e)?t.style.setProperty(e,n):t.style[e]=n}const USe=a2(()=>window.ScrollTimeline!==void 0),zSe={};function qSe(t,e){const n=a2(t);return()=>zSe[e]??n()}const gQ=qSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wy=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,eV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wy([0,.65,.55,1]),circOut:wy([.55,0,1,.45]),backIn:wy([.31,.01,.66,-.59]),backOut:wy([.33,1.53,.69,.99])};function yQ(t,e){if(t)return typeof t=="function"?gQ()?dQ(t,e):"ease-out":eQ(t)?wy(t):Array.isArray(t)?t.map(n=>yQ(n,e)||eV.easeOut):eV[t]}function WSe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=yQ(l,i);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function vQ(t){return typeof t=="function"&&"applyToOptions"in t}function HSe({type:t,...e}){return vQ(t)&&gQ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class xQ extends g2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,ep(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=HSe(e);this.animation=WSe(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=p2(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):BSe(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ia(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ia(e)}get time(){return ia(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=fa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&USe()?(this.animation.timeline=e,ha):n(this)}}const bQ={anticipate:QY,backInOut:YY,circInOut:ZY};function KSe(t){return t in bQ}function GSe(t){typeof t.ease=="string"&&KSe(t.ease)&&(t.ease=bQ[t.ease])}const KE=10;class YSe extends xQ{constructor(e){GSe(e),fQ(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new y2({...o,autoplay:!1}),c=Math.max(KE,Ws.now()-this.startTime),u=el(0,KE,c-KE);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const tV=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(zu.test(t)||t==="0")&&!t.startsWith("url("));function QSe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function XSe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=tV(i,e),l=tV(a,e);return hS(o===l,`You are trying to animate ${e} from "${i}" to "${a}". "${o?a:i}" is not an animatable value.`,"value-not-animatable"),!o||!l?!1:QSe(t)||(n==="spring"||vQ(n))&&r}function tP(t){t.duration=0,t.type="keyframes"}const ZSe=new Set(["opacity","clipPath","filter","transform"]),JSe=a2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function e1e(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return JSe()&&n&&ZSe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const t1e=40;class n1e extends g2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var p,y;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ws.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||v2;this.keyframeResolver=new m(l,(p,y,b)=>this.onKeyframesResolved(p,y,f,!b),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){var y,b;this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ws.now(),XSe(e,a,o,l)||((Xl.instantAnimations||!c)&&(d==null||d(p2(e,r,n))),e[0]=e[e.length-1],tP(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>t1e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&e1e(f),v=(b=(y=f.motionValue)==null?void 0:y.owner)==null?void 0:b.current,p=m?new YSe({...f,element:v}):new y2(f);p.finished.then(()=>{this.notifyFinished()}).catch(ha),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),FSe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function wQ(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:l-a*r}const r1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function s1e(t){const e=r1e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}const i1e=4;function jQ(t,e,n=1){ep(n<=i1e,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,i]=s1e(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return BY(o)?parseFloat(o):o}return u2(i)?jQ(i,e,n+1):i}const a1e={type:"spring",stiffness:500,damping:25,restSpeed:10},o1e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l1e={type:"keyframes",duration:.8},c1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u1e=(t,{keyframes:e})=>e.length>2?l1e:ng.has(t)?t.startsWith("scale")?o1e(e[1]):a1e:c1e,d1e=t=>t!==null;function h1e(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(d1e),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}function _Q(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function x2(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?_Q(n,t):n}function f1e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const b2=(t,e,n,r={},i,a)=>o=>{const l=x2(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-fa(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:i};f1e(l)||Object.assign(d,u1e(t,d)),d.duration&&(d.duration=fa(d.duration)),d.repeatDelay&&(d.repeatDelay=fa(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(tP(d),d.delay===0&&(h=!0)),(Xl.instantAnimations||Xl.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(h=!0,tP(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&e.get()!==void 0){const f=h1e(d.keyframes,l);if(f!==void 0){Ln.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new y2(d):new n1e(d)};function nV(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function w2(t,e,n,r){if(typeof e=="function"){const[i,a]=nV(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=nV(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function gm(t,e,n){const r=t.getProps();return w2(r,e,n!==void 0?n:r.custom,t)}const NQ=new Set(["width","height","top","left","right","bottom",...tg]),rV=30,m1e=t=>!isNaN(parseFloat(t));class p1e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=Ws.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ws.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=m1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new o2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ws.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rV);return qY(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tp(t,e){return new p1e(t,e)}const nP=t=>Array.isArray(t);function g1e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,tp(n))}function y1e(t){return nP(t)?t[t.length-1]||0:t}function v1e(t,e){const n=gm(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const l=y1e(a[o]);g1e(t,o,l)}}const Is=t=>!!(t&&t.getVelocity);function x1e(t){return!!(Is(t)&&t.add)}function rP(t,e){const n=t.getValue("willChange");if(x1e(n))return n.add(e);if(!n&&Xl.WillChange){const r=new Xl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function j2(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const b1e="framerAppearId",SQ="data-"+j2(b1e);function EQ(t){return t.props[SQ]}function w1e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function AQ(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:o,...l}=e;const c=t.getDefaultTransition();a=a?_Q(a,c):c;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const m=t.getValue(f,t.latestValues[f]??null),v=l[f];if(v===void 0||h&&w1e(h,f))continue;const p={delay:n,...x2(a||{},f)},y=m.get();if(y!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===y&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const C=EQ(t);if(C){const S=window.MotionHandoffAnimation(C,f,Ln);S!==null&&(p.startTime=S,b=!0)}}rP(t,f);const x=u??t.shouldReduceMotion;m.start(b2(f,m,v,x&&NQ.has(f)?{type:!1}:p,t,b));const w=m.animation;w&&d.push(w)}if(o){const f=()=>Ln.update(()=>{o&&v1e(t,o)});d.length?Promise.all(d).then(f):f()}return d}function sP(t,e,n={}){var c;const r=gm(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(AQ(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return j1e(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function j1e(t,e,n=0,r=0,i=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(sP(c,e,{...o,delay:n+(typeof r=="function"?0:r)+wQ(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function _1e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>sP(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=sP(t,e,n);else{const i=typeof e=="function"?gm(t,e,n.custom):e;r=Promise.all(AQ(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const N1e={test:t=>t==="auto",parse:t=>t},TQ=t=>e=>e.test(t),CQ=[eg,it,Ho,Pc,XNe,QNe,N1e],sV=t=>CQ.find(TQ(t));function S1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zY(t):!0}const E1e=new Set(["brightness","contrast","saturate","opacity"]);function A1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(d2)||[];if(!r)return t;const i=n.replace(r,"");let a=E1e.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const T1e=/\b([a-z-]*)\(.*?\)/gu,iP={...zu,getAnimatableNone:t=>{const e=t.match(T1e);return e?e.map(A1e).join(" "):t}},iV={...eg,transform:Math.round},C1e={rotate:Pc,rotateX:Pc,rotateY:Pc,rotateZ:Pc,scale:j0,scaleX:j0,scaleY:j0,scaleZ:j0,skew:Pc,skewX:Pc,skewY:Pc,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Bv,originX:WF,originY:WF,originZ:it},_2={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,inset:it,insetBlock:it,insetBlockStart:it,insetBlockEnd:it,insetInline:it,insetInlineStart:it,insetInlineEnd:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,paddingBlock:it,paddingBlockStart:it,paddingBlockEnd:it,paddingInline:it,paddingInlineStart:it,paddingInlineEnd:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,marginBlock:it,marginBlockStart:it,marginBlockEnd:it,marginInline:it,marginInlineStart:it,marginInlineEnd:it,fontSize:it,backgroundPositionX:it,backgroundPositionY:it,...C1e,zIndex:iV,fillOpacity:Bv,strokeOpacity:Bv,numOctaves:iV},P1e={..._2,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:iP,WebkitFilter:iP},PQ=t=>P1e[t];function IQ(t,e){let n=PQ(t);return n!==iP&&(n=zu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const I1e=new Set(["auto","none","0"]);function k1e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!I1e.has(a)&&Uv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=IQ(n,i)}class R1e extends v2{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),u2(h))){const f=jQ(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!NQ.has(r)||e.length!==2)return;const[i,a]=e,o=sV(i),l=sV(a),c=qF(i),u=qF(a);if(c!==u&&ou[r]){this.needsMeasurement=!0;return}if(o!==l)if(JF(o)&&JF(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else ou[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||S1e(e[i]))&&r.push(i);r.length&&k1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ou[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=ou[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const O1e=new Set(["opacity","clipPath","filter","transform"]);function kQ(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const RQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function aP(t){return UY(t)&&"offsetHeight"in t}const{schedule:N2,cancel:Htt}=tQ(queueMicrotask,!1),Oa={x:!1,y:!1};function OQ(){return Oa.x||Oa.y}function D1e(t){return t==="x"||t==="y"?Oa[t]?null:(Oa[t]=!0,()=>{Oa[t]=!1}):Oa.x||Oa.y?null:(Oa.x=Oa.y=!0,()=>{Oa.x=Oa.y=!1})}function DQ(t,e){const n=kQ(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function M1e(t){return!(t.pointerType==="touch"||OQ())}function L1e(t,e,n={}){const[r,i,a]=DQ(t,n);return r.forEach(o=>{let l=!1,c=!1,u;const d=()=>{o.removeEventListener("pointerleave",v)},h=y=>{u&&(u(y),u=void 0),d()},f=y=>{l=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),c&&(c=!1,h(y))},m=()=>{l=!0,window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",f,i)},v=y=>{if(y.pointerType!=="touch"){if(l){c=!0;return}h(y)}},p=y=>{if(!M1e(y))return;c=!1;const b=e(o,y);typeof b=="function"&&(u=b,o.addEventListener("pointerleave",v,i))};o.addEventListener("pointerenter",p,i),o.addEventListener("pointerdown",m,i)}),a}const MQ=(t,e)=>e?t===e?!0:MQ(t,e.parentElement):!1,S2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F1e(t){return $1e.has(t.tagName)||t.isContentEditable===!0}const V1e=new Set(["INPUT","SELECT","TEXTAREA"]);function B1e(t){return V1e.has(t.tagName)||t.isContentEditable===!0}const gw=new WeakSet;function aV(t){return e=>{e.key==="Enter"&&t(e)}}function GE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const U1e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=aV(()=>{if(gw.has(n))return;GE(n,"down");const i=aV(()=>{GE(n,"up")}),a=()=>GE(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function oV(t){return S2(t)&&!OQ()}const lV=new WeakSet;function z1e(t,e,n={}){const[r,i,a]=DQ(t,n),o=l=>{const c=l.currentTarget;if(!oV(l)||lV.has(l))return;gw.add(c),n.stopPropagation&&lV.add(l);const u=e(c,l),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),gw.has(c)&&gw.delete(c),oV(m)&&typeof u=="function"&&u(m,{success:v})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||MQ(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),aP(l)&&(l.addEventListener("focus",u=>U1e(u,i)),!F1e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function E2(t){return UY(t)&&"ownerSVGElement"in t}const yw=new WeakMap;let Ic;const LQ=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:E2(r)&&"getBBox"in r?r.getBBox()[e]:r[n],q1e=LQ("inline","width","offsetWidth"),W1e=LQ("block","height","offsetHeight");function H1e({target:t,borderBoxSize:e}){var n;(n=yw.get(t))==null||n.forEach(r=>{r(t,{get width(){return q1e(t,e)},get height(){return W1e(t,e)}})})}function K1e(t){t.forEach(H1e)}function G1e(){typeof ResizeObserver>"u"||(Ic=new ResizeObserver(K1e))}function Y1e(t,e){Ic||G1e();const n=kQ(t);return n.forEach(r=>{let i=yw.get(r);i||(i=new Set,yw.set(r,i)),i.add(e),Ic==null||Ic.observe(r)}),()=>{n.forEach(r=>{const i=yw.get(r);i==null||i.delete(e),i!=null&&i.size||Ic==null||Ic.unobserve(r)})}}const vw=new Set;let Wf;function Q1e(){Wf=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};vw.forEach(e=>e(t))},window.addEventListener("resize",Wf)}function X1e(t){return vw.add(t),Wf||Q1e(),()=>{vw.delete(t),!vw.size&&typeof Wf=="function"&&(window.removeEventListener("resize",Wf),Wf=void 0)}}function cV(t,e){return typeof t=="function"?X1e(t):Y1e(t,e)}function Z1e(t){return E2(t)&&t.tagName==="svg"}const J1e=[...CQ,Ar,zu],eEe=t=>J1e.find(TQ(t)),uV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hf=()=>({x:uV(),y:uV()}),dV=()=>({min:0,max:0}),Lr=()=>({x:dV(),y:dV()}),tEe=new WeakMap;function fS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zv(t){return typeof t=="string"||Array.isArray(t)}const A2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T2=["initial",...A2];function mS(t){return fS(t.animate)||T2.some(e=>zv(t[e]))}function $Q(t){return!!(mS(t)||t.variants)}function nEe(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Is(i))t.addValue(r,i);else if(Is(a))t.addValue(r,tp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,tp(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const oP={current:null},FQ={current:!1},rEe=typeof window<"u";function sEe(){if(FQ.current=!0,!!rEe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>oP.current=t.matches;t.addEventListener("change",e),e()}else oP.current=!1}const hV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Mj={};function VQ(t){Mj=t}function iEe(){return Mj}class aEe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=v2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ws.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ln.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=mS(n),this.isVariantNode=$Q(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];u[m]!==void 0&&Is(v)&&v.set(u[m])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,tEe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(FQ.current||sEe(),this.shouldReduceMotion=oP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Uu(this.notifyUpdate),Uu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&O1e.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,h=new xQ({element:this.current,name:e,keyframes:l,times:c,ease:u,duration:fa(d)}),f=o(h);this.valueSubscriptions.set(e,()=>{f(),h.cancel()});return}const r=ng.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mj){const n=Mj[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hV.length;r++){const i=hV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=nEe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=tp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(BY(r)||zY(r))?r=parseFloat(r):!eEe(r)&&zu.test(n)&&(r=IQ(e,n)),this.setBaseTarget(e,Is(r)?r.get():r)),Is(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=w2(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Is(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new o2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){N2.render(this.render)}}class BQ extends aEe{constructor(){super(...arguments),this.KeyframeResolver=R1e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Is(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class rd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function UQ({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function oEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function YE(t){return t===void 0||t===1}function lP({scale:t,scaleX:e,scaleY:n}){return!YE(t)||!YE(e)||!YE(n)}function Pd(t){return lP(t)||zQ(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function zQ(t){return fV(t.x)||fV(t.y)}function fV(t){return t&&t!=="0%"}function Lj(t,e,n){const r=t-n,i=e*r;return n+i}function mV(t,e,n,r,i){return i!==void 0&&(t=Lj(t,i,r)),Lj(t,n,r)+e}function cP(t,e=0,n=1,r,i){t.min=mV(t.min,e,n,r,i),t.max=mV(t.max,e,n,r,i)}function qQ(t,{x:e,y:n}){cP(t.x,e.translate,e.scale,e.originPoint),cP(t.y,n.translate,n.scale,n.originPoint)}const pV=.999999999999,gV=1.0000000000001;function cEe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Gf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qQ(t,o)),r&&Pd(a.latestValues)&&Gf(t,a.latestValues))}e.x<gV&&e.x>pV&&(e.x=1),e.y<gV&&e.y>pV&&(e.y=1)}function Kf(t,e){t.min=t.min+e,t.max=t.max+e}function yV(t,e,n,r,i=.5){const a=nr(t.min,t.max,i);cP(t,e,n,a,r)}function Gf(t,e){yV(t.x,e.x,e.scaleX,e.scale,e.originX),yV(t.y,e.y,e.scaleY,e.scale,e.originY)}function WQ(t,e){return UQ(lEe(t.getBoundingClientRect(),e))}function uEe(t,e,n){const r=WQ(t,n),{scroll:i}=e;return i&&(Kf(r.x,i.offset.x),Kf(r.y,i.offset.y)),r}const dEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hEe=tg.length;function fEe(t,e,n){let r="",i=!0;for(let a=0;a<hEe;a++){const o=tg[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const u=parseFloat(l);c=o.startsWith("scale")?u===1:u===0}if(!c||n){const u=RQ(l,_2[o]);if(!c){i=!1;const d=dEe[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function C2(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(ng.has(c)){o=!0;continue}else if(rQ(c)){i[c]=u;continue}else{const d=RQ(u,_2[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=fEe(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}function HQ(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i==null||i.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function vV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(it.test(t))t=parseFloat(t);else return t;const n=vV(t,e.target.x),r=vV(t,e.target.y);return`${n}% ${r}%`}},mEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=zu.parse(t);if(i.length>5)return r;const a=zu.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const u=nr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}},uP={borderRadius:{...Wg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wg,borderTopRightRadius:Wg,borderBottomLeftRadius:Wg,borderBottomRightRadius:Wg,boxShadow:mEe};function KQ(t,{layout:e,layoutId:n}){return ng.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!uP[t]||t==="opacity")}function P2(t,e,n){var o;const r=t.style,i=e==null?void 0:e.style,a={};if(!r)return a;for(const l in r)(Is(r[l])||i&&Is(i[l])||KQ(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(a[l]=r[l]);return a}function pEe(t){return window.getComputedStyle(t)}class gEe extends BQ{constructor(){super(...arguments),this.type="html",this.renderInstance=HQ}readValueFromInstance(e,n){var r;if(ng.has(n))return(r=this.projection)!=null&&r.isProjecting?QC(n):OSe(e,n);{const i=pEe(e),a=(rQ(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return WQ(e,n)}build(e,n,r){C2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return P2(e,n,r)}}const yEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},vEe={offset:"strokeDashoffset",array:"strokeDasharray"};function xEe(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?yEe:vEe;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const bEe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function GQ(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(C2(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox);for(const m of bEe)h[m]!==void 0&&(f[m]=h[m],delete h[m]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&xEe(h,i,a,o,!1)}const YQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),QQ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wEe(t,e,n,r){HQ(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(YQ.has(i)?i:j2(i),e.attrs[i])}function XQ(t,e,n){const r=P2(t,e,n);for(const i in t)if(Is(t[i])||Is(e[i])){const a=tg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class jEe extends BQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ng.has(n)){const r=PQ(n);return r&&r.default||0}return n=YQ.has(n)?n:j2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return XQ(e,n,r)}build(e,n,r){GQ(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){wEe(e,n,r,i)}mount(e){this.isSVGTag=QQ(e.tagName),super.mount(e)}}const _Ee=T2.length;function ZQ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ZQ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_Ee;n++){const r=T2[n],i=t.props[r];(zv(i)||i===!1)&&(e[r]=i)}return e}function JQ(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const NEe=[...A2].reverse(),SEe=A2.length;function EEe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>_1e(t,n,r)))}function AEe(t){let e=EEe(t),n=xV(),r=!0;const i=c=>(u,d)=>{var f;const h=gm(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:v,...p}=h;u={...u,...p,...v}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,d=ZQ(t.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let y=0;y<SEe;y++){const b=NEe[y],x=n[b],w=u[b]!==void 0?u[b]:d[b],C=zv(w),S=b===c?x.isActive:null;S===!1&&(v=y);let P=w===d[b]&&w!==u[b]&&C;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),x.protectedKeys={...m},!x.isActive&&S===null||!w&&!x.prevProp||fS(w)||typeof w=="boolean")continue;if(b==="exit"&&x.isActive&&S!==!0){x.prevResolvedValues&&(m={...m,...x.prevResolvedValues});continue}const _=TEe(x.prevProp,w);let g=_||b===c&&x.isActive&&!P&&C||y>v&&C,T=!1;const E=Array.isArray(w)?w:[w];let A=E.reduce(i(b),{});S===!1&&(A={});const{prevResolvedValues:I={}}=x,k={...I,...A},L=V=>{g=!0,f.has(V)&&(T=!0,f.delete(V)),x.needsAnimating[V]=!0;const D=t.getValue(V);D&&(D.liveStyle=!1)};for(const V in k){const D=A[V],R=I[V];if(m.hasOwnProperty(V))continue;let W=!1;nP(D)&&nP(R)?W=!JQ(D,R):W=D!==R,W?D!=null?L(V):f.add(V):D!==void 0&&f.has(V)?L(V):x.protectedKeys[V]=!0}x.prevProp=w,x.prevResolvedValues=A,x.isActive&&(m={...m,...A}),r&&t.blockInitialAnimation&&(g=!1);const B=P&&_;g&&(!B||T)&&h.push(...E.map(V=>{const D={type:b};if(typeof V=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:R}=t,W=gm(R,V);if(R.enteringChildren&&W){const{delayChildren:J}=W.transition||{};D.delay=wQ(R.enteringChildren,t,J)}}return{animation:V,options:D}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const b=gm(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(y.transition=b.transition)}f.forEach(b=>{const x=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),y[b]=x??null}),h.push({animation:y})}let p=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(p=!1),r=!1,p?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xV()}}}function TEe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!JQ(e,t):!1}function wd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xV(){return{animate:wd(!0),whileInView:wd(),whileHover:wd(),whileTap:wd(),whileDrag:wd(),whileFocus:wd(),exit:wd()}}function bV(t,e){t.min=e.min,t.max=e.max}function Ia(t,e){bV(t.x,e.x),bV(t.y,e.y)}function wV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const eX=1e-4,CEe=1-eX,PEe=1+eX,tX=.01,IEe=0-tX,kEe=0+tX;function Hs(t){return t.max-t.min}function REe(t,e,n){return Math.abs(t-e)<=n}function jV(t,e,n,r=.5){t.origin=r,t.originPoint=nr(e.min,e.max,t.origin),t.scale=Hs(n)/Hs(e),t.translate=nr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CEe&&t.scale<=PEe||isNaN(t.scale))&&(t.scale=1),(t.translate>=IEe&&t.translate<=kEe||isNaN(t.translate))&&(t.translate=0)}function Wy(t,e,n,r){jV(t.x,e.x,n.x,r?r.originX:void 0),jV(t.y,e.y,n.y,r?r.originY:void 0)}function _V(t,e,n){t.min=n.min+e.min,t.max=t.min+Hs(e)}function OEe(t,e,n){_V(t.x,e.x,n.x),_V(t.y,e.y,n.y)}function NV(t,e,n){t.min=e.min-n.min,t.max=t.min+Hs(e)}function $j(t,e,n){NV(t.x,e.x,n.x),NV(t.y,e.y,n.y)}function SV(t,e,n,r,i){return t-=e,t=Lj(t,1/n,r),i!==void 0&&(t=Lj(t,1/i,r)),t}function DEe(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ho.test(e)&&(e=parseFloat(e),e=nr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=nr(a.min,a.max,r);t===a&&(l-=e),t.min=SV(t.min,e,n,l,i),t.max=SV(t.max,e,n,l,i)}function EV(t,e,[n,r,i],a,o){DEe(t,e[n],e[r],e[i],e.scale,a,o)}const MEe=["x","scaleX","originX"],LEe=["y","scaleY","originY"];function AV(t,e,n,r){EV(t.x,e,MEe,n?n.x:void 0,r?r.x:void 0),EV(t.y,e,LEe,n?n.y:void 0,r?r.y:void 0)}function TV(t){return t.translate===0&&t.scale===1}function nX(t){return TV(t.x)&&TV(t.y)}function CV(t,e){return t.min===e.min&&t.max===e.max}function $Ee(t,e){return CV(t.x,e.x)&&CV(t.y,e.y)}function PV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rX(t,e){return PV(t.x,e.x)&&PV(t.y,e.y)}function IV(t){return Hs(t.x)/Hs(t.y)}function kV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function _o(t){return[t("x"),t("y")]}function FEe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const sX=["TopLeft","TopRight","BottomLeft","BottomRight"],VEe=sX.length,RV=t=>typeof t=="string"?parseFloat(t):t,OV=t=>typeof t=="number"||it.test(t);function BEe(t,e,n,r,i,a){i?(t.opacity=nr(0,n.opacity??1,UEe(r)),t.opacityExit=nr(e.opacity??1,0,zEe(r))):a&&(t.opacity=nr(e.opacity??1,n.opacity??1,r));for(let o=0;o<VEe;o++){const l=`border${sX[o]}Radius`;let c=DV(e,l),u=DV(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||OV(c)===OV(u)?(t[l]=Math.max(nr(RV(c),RV(u),r),0),(Ho.test(u)||Ho.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=nr(e.rotate||0,n.rotate||0,r))}function DV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const UEe=iX(0,.5,XY),zEe=iX(.5,.95,ha);function iX(t,e,n){return r=>r<t?0:r>e?1:n(Vv(t,e,r))}function qEe(t,e,n){const r=Is(t)?t:tp(t);return r.start(b2("",r,e,n)),r.animation}function qv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const WEe=(t,e)=>t.depth-e.depth;class HEe{constructor(){this.children=[],this.isDirty=!1}add(e){i2(this.children,e),this.isDirty=!0}remove(e){kj(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(WEe),this.isDirty=!1,this.children.forEach(e)}}function KEe(t,e){const n=Ws.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Uu(r),t(a-e))};return Ln.setup(r,!0),()=>Uu(r)}function xw(t){return Is(t)?t.get():t}class GEe{constructor(){this.members=[]}add(e){i2(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&kj(this.members,r)}e.scheduleRender()}remove(e){if(kj(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],o=a.instance;if(a.isPresent!==!1&&(!o||o.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const bw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},QE=["","X","Y","Z"],YEe=1e3;let QEe=0;function XE(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function aX(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=EQ(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ln,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&aX(r)}function oX({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=QEe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JEe),this.nodes.forEach(rAe),this.nodes.forEach(sAe),this.nodes.forEach(eAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new HEe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new o2),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=E2(o)&&!Z1e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ln.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=KEe(f,250),bw.hasAnimatedSinceResize&&(bw.hasAnimatedSinceResize=!1,this.nodes.forEach($V)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||cAe,{onLayoutAnimationStart:p,onLayoutAnimationComplete:y}=u.getProps(),b=!this.targetLayout||!rX(this.targetLayout,m),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...x2(v,"layout"),onPlay:p,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,x)}else h||$V(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Uu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aX(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(LV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nAe),this.nodes.forEach(XEe),this.nodes.forEach(ZEe)):this.nodes.forEach(LV),this.clearAllSnapshots();const l=Ws.now();ls.delta=el(0,1e3/60,l-ls.timestamp),ls.timestamp=l,ls.isProcessing=!0,UE.update.process(ls),UE.preRender.process(ls),UE.render.process(ls),ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,N2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tAe),this.sharedNodes.forEach(aAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hs(this.snapshot.measuredBox.x)&&!Hs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!nX(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Pd(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),uAe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Lr();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(dAe))){const{scroll:d}=this.root;d&&(Kf(l.x,d.offset.x),Kf(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Lr();if(Ia(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ia(l,o),Kf(l.x,h.offset.x),Kf(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Lr();Ia(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Gf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Pd(d.latestValues)&&Gf(c,d.latestValues)}return Pd(this.latestValues)&&Gf(c,this.latestValues),c}removeTransform(o){const l=Lr();Ia(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Pd(u.latestValues))continue;lP(u.latestValues)&&u.updateSnapshot();const d=Lr(),h=u.measurePageBox();Ia(d,h),AV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Pd(this.latestValues)&&AV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=ls.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ia(this.target,this.layout.layoutBox),qQ(this.target,this.targetDelta)):Ia(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||lP(this.parent.latestValues)||zQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),$j(this.relativeTargetOrigin,l,c),Ia(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ls.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ia(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;cEe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lr());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wV(this.prevProjectionDelta.x,this.projectionDelta.x),wV(this.prevProjectionDelta.y,this.projectionDelta.y)),Wy(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!kV(this.projectionDelta.x,this.prevProjectionDelta.x)||!kV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hf(),this.projectionDelta=Hf(),this.projectionDeltaWithTransform=Hf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Hf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Lr(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,p=m!==v,y=this.getStack(),b=!y||y.members.length<=1,x=!!(p&&!b&&this.options.crossfade===!0&&!this.path.some(lAe));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const S=C/1e3;FV(h.x,o.x,S),FV(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($j(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oAe(this.relativeTarget,this.relativeTargetOrigin,f,S),w&&$Ee(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Lr()),Ia(w,this.relativeTarget)),p&&(this.animationValues=d,BEe(d,u,this.latestValues,S,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Uu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ln.update(()=>{bw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tp(0)),this.currentAnimation=qEe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YEe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&lX(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Lr();const h=Hs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Hs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ia(l,c),Gf(l,d),Wy(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GEe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&XE("z",o,u,this.animationValues);for(let d=0;d<QE.length;d++)XE(`rotate${QE[d]}`,o,u,this.animationValues),XE(`skew${QE[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=xw(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=xw(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pd(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=FEe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in uP){if(d[v]===void 0)continue;const{correct:p,applyTo:y,isCSSVariable:b}=uP[v],x=h==="none"?d[v]:p(d[v],u);if(y){const w=y.length;for(let C=0;C<w;C++)o[y[C]]=x}else b?this.options.visualElement.renderState.vars[v]=x:o[v]=x}this.options.layoutId&&(o.pointerEvents=u===this?xw(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(MV),this.root.sharedNodes.clear()}}}function XEe(t){t.updateLayout()}function ZEe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?_o(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Hs(f);f.min=r[h].min,f.max=f.min+m}):lX(a,e.layoutBox,r)&&_o(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Hs(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=Hf();Wy(l,r,e.layoutBox);const c=Hf();o?Wy(c,t.applyTransform(i,!0),e.measuredBox):Wy(c,r,e.layoutBox);const u=!nX(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=Lr();$j(v,e.layoutBox,f.layoutBox);const p=Lr();$j(p,r,m.layoutBox),rX(v,p)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function JEe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eAe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tAe(t){t.clearSnapshot()}function MV(t){t.clearMeasurements()}function LV(t){t.isLayoutDirty=!1}function nAe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $V(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rAe(t){t.resolveTargetDelta()}function sAe(t){t.calcProjection()}function iAe(t){t.resetSkewAndRotation()}function aAe(t){t.removeLeadSnapshot()}function FV(t,e,n){t.translate=nr(e.translate,0,n),t.scale=nr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function VV(t,e,n,r){t.min=nr(e.min,n.min,r),t.max=nr(e.max,n.max,r)}function oAe(t,e,n,r){VV(t.x,e.x,n.x,r),VV(t.y,e.y,n.y,r)}function lAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cAe={duration:.45,ease:[.4,0,.1,1]},BV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),UV=BV("applewebkit/")&&!BV("chrome/")?Math.round:ha;function zV(t){t.min=UV(t.min),t.max=UV(t.max)}function uAe(t){zV(t.x),zV(t.y)}function lX(t,e,n){return t==="position"||t==="preserve-aspect"&&!REe(IV(e),IV(n),.2)}function dAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const hAe=oX({attachResizeListener:(t,e)=>qv(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ZE={current:void 0},cX=oX({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ZE.current){const t=new hAe({});t.mount(window),t.setOptions({layoutScroll:!0}),ZE.current=t}return ZE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),I2=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fAe(...t){return e=>{let n=!1;const r=t.map(i=>{const a=qV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():qV(t[i],null)}}}}function mAe(...t){return j.useCallback(fAe(...t),t)}class pAe extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=aP(r)&&r.offsetWidth||0,a=aP(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function gAe({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){var f;const o=j.useId(),l=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=j.useContext(I2),d=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),h=mAe(l,d);return j.useInsertionEffect(()=>{const{width:m,height:v,top:p,left:y,right:b,bottom:x}=c.current;if(e||a===!1||!l.current||!m||!v)return;const w=n==="left"?`left: ${y}`:`right: ${b}`,C=r==="bottom"?`bottom: ${x}`:`top: ${p}`;l.current.dataset.motionPopId=o;const S=document.createElement("style");u&&(S.nonce=u);const P=i??document.head;return P.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${v}px !important;
            ${w}px !important;
            ${C}px !important;
          }
        `),()=>{P.contains(S)&&P.removeChild(S)}},[e]),s.jsx(pAe,{isPresent:e,childRef:l,sizeRef:c,pop:a,children:a===!1?t:j.cloneElement(t,{ref:h})})}const yAe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:l,anchorY:c,root:u})=>{const d=s2(vAe),h=j.useId();let f=!0,m=j.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const p of d.values())if(!p)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return a&&f&&(m={...m}),j.useMemo(()=>{d.forEach((v,p)=>d.set(p,!1))},[n]),j.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),t=s.jsx(gAe,{pop:o==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:t}),s.jsx(dS.Provider,{value:m,children:t})};function vAe(){return new Map}function uX(t=!0){const e=j.useContext(dS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=j.useId();j.useEffect(()=>{if(t)return i(a)},[t]);const o=j.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const _0=t=>t.key||"";function WV(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const dX=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,h]=uX(o),f=j.useMemo(()=>WV(t),[t]),m=o&&!d?[]:f.map(_0),v=j.useRef(!0),p=j.useRef(f),y=s2(()=>new Map),b=j.useRef(new Set),[x,w]=j.useState(f),[C,S]=j.useState(f);VY(()=>{v.current=!1,p.current=f;for(let g=0;g<C.length;g++){const T=_0(C[g]);m.includes(T)?(y.delete(T),b.current.delete(T)):y.get(T)!==!0&&y.set(T,!1)}},[C,m.length,m.join("-")]);const P=[];if(f!==x){let g=[...f];for(let T=0;T<C.length;T++){const E=C[T],A=_0(E);m.includes(A)||(g.splice(T,0,E),P.push(E))}return a==="wait"&&P.length&&(g=P),S(WV(g)),w(f),null}const{forceRender:_}=j.useContext(r2);return s.jsx(s.Fragment,{children:C.map(g=>{const T=_0(g),E=o&&!d?!1:f===C||m.includes(T),A=()=>{if(b.current.has(T))return;if(b.current.add(T),y.has(T))y.set(T,!0);else return;let I=!0;y.forEach(k=>{k||(I=!1)}),I&&(_==null||_(),S(p.current),o&&(h==null||h()),r&&r())};return s.jsx(yAe,{isPresent:E,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:E?void 0:A,anchorX:l,anchorY:c,children:g},T)})})},hX=j.createContext({strict:!1}),HV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let KV=!1;function xAe(){if(KV)return;const t={};for(const e in HV)t[e]={isEnabled:n=>HV[e].some(r=>!!n[r])};VQ(t),KV=!0}function fX(){return xAe(),iEe()}function bAe(t){const e=fX();for(const n in t)e[n]={...e[n],...t[n]};VQ(e)}const wAe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Fj(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wAe.has(t)}let mX=t=>!Fj(t);function jAe(t){typeof t=="function"&&(mX=e=>e.startsWith("on")?!Fj(e):t(e))}try{jAe(require("@emotion/is-prop-valid").default)}catch{}function _Ae(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(mX(i)||n===!0&&Fj(i)||!e&&!Fj(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const pS=j.createContext({});function NAe(t,e){if(mS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zv(n)?n:void 0,animate:zv(r)?r:void 0}}return t.inherit!==!1?e:{}}function SAe(t){const{initial:e,animate:n}=NAe(t,j.useContext(pS));return j.useMemo(()=>({initial:e,animate:n}),[GV(e),GV(n)])}function GV(t){return Array.isArray(t)?t.join(" "):t}const k2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pX(t,e,n){for(const r in e)!Is(e[r])&&!KQ(r,n)&&(t[r]=e[r])}function EAe({transformTemplate:t},e){return j.useMemo(()=>{const n=k2();return C2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function AAe(t,e){const n=t.style||{},r={};return pX(r,n,t),Object.assign(r,EAe(t,e)),r}function TAe(t,e){const n={},r=AAe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const gX=()=>({...k2(),attrs:{}});function CAe(t,e,n,r){const i=j.useMemo(()=>{const a=gX();return GQ(a,e,QQ(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};pX(a,t.style,t),i.style={...a,...i.style}}return i}const PAe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R2(t){return typeof t!="string"||t.includes("-")?!1:!!(PAe.indexOf(t)>-1||/[A-Z]/u.test(t))}function IAe(t,e,n,{latestValues:r},i,a=!1,o){const c=(o??R2(t)?CAe:TAe)(e,r,i,t),u=_Ae(e,typeof t=="string",a),d=t!==j.Fragment?{...u,...c,ref:n}:{},{children:h}=e,f=j.useMemo(()=>Is(h)?h.get():h,[h]);return j.createElement(t,{...d,children:f})}function kAe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:RAe(n,r,i,t),renderState:e()}}function RAe(t,e,n,r){const i={},a=r(t,{});for(const f in a)i[f]=xw(a[f]);let{initial:o,animate:l}=t;const c=mS(t),u=$Q(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!fS(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=w2(t,f[m]);if(v){const{transitionEnd:p,transition:y,...b}=v;for(const x in b){let w=b[x];if(Array.isArray(w)){const C=d?w.length-1:0;w=w[C]}w!==null&&(i[x]=w)}for(const x in p)i[x]=p[x]}}}return i}const yX=t=>(e,n)=>{const r=j.useContext(pS),i=j.useContext(dS),a=()=>kAe(t,e,r,i);return n?a():s2(a)},OAe=yX({scrapeMotionValuesFromProps:P2,createRenderState:k2}),DAe=yX({scrapeMotionValuesFromProps:XQ,createRenderState:gX}),MAe=Symbol.for("motionComponentSymbol");function LAe(t,e,n){const r=j.useRef(n);j.useInsertionEffect(()=>{r.current=n});const i=j.useRef(null);return j.useCallback(a=>{var l;a&&((l=t.onMount)==null||l.call(t,a)),e&&(a?e.mount(a):e.unmount());const o=r.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(a);else o&&(o.current=a)},[e])}const vX=j.createContext({});function Cf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $Ae(t,e,n,r,i,a){var w,C;const{visualElement:o}=j.useContext(pS),l=j.useContext(hX),c=j.useContext(dS),u=j.useContext(I2),d=u.reducedMotion,h=u.skipAnimations,f=j.useRef(null),m=j.useRef(!1);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:a}),m.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const v=f.current,p=j.useContext(vX);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&FAe(f.current,n,i,p);const y=j.useRef(!1);j.useInsertionEffect(()=>{v&&y.current&&v.update(n,c)});const b=n[SQ],x=j.useRef(!!b&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,b))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,b)));return VY(()=>{m.current=!0,v&&(y.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),x.current&&v.animationState&&v.animationState.animateChanges())}),j.useEffect(()=>{v&&(!x.current&&v.animationState&&v.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,b)}),x.current=!1),v.enteringChildren=void 0)}),v}function FAe(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xX(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&Cf(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function xX(t){if(t)return t.options.allowProjection!==!1?t.projection:xX(t.parent)}function JE(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&bAe(r);const a=n?n==="svg":R2(t),o=a?DAe:OAe;function l(u,d){let h;const f={...j.useContext(I2),...u,layoutId:VAe(u)},{isStatic:m}=f,v=SAe(u),p=o(u,m);if(!m&&FY){BAe();const y=UAe(f);h=y.MeasureLayout,v.visualElement=$Ae(t,p,f,i,y.ProjectionNode,a)}return s.jsxs(pS.Provider,{value:v,children:[h&&v.visualElement?s.jsx(h,{visualElement:v.visualElement,...f}):null,IAe(t,u,LAe(p,v.visualElement,d),p,m,e,a)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=j.forwardRef(l);return c[MAe]=t,c}function VAe({layoutId:t}){const e=j.useContext(r2).id;return e&&t!==void 0?e+"-"+t:t}function BAe(t,e){j.useContext(hX).strict}function UAe(t){const e=fX(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function zAe(t,e){if(typeof Proxy>"u")return JE;const n=new Map,r=(a,o)=>JE(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,JE(o,void 0,t,e)),n.get(o))})}const qAe=(t,e)=>e.isSVG??R2(t)?new jEe(e):new gEe(e,{allowProjection:t!==j.Fragment});class WAe extends rd{constructor(e){super(e),e.animationState||(e.animationState=AEe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let HAe=0;class KAe extends rd{constructor(){super(...arguments),this.id=HAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GAe={animation:{Feature:WAe},exit:{Feature:KAe}};function bb(t){return{point:{x:t.pageX,y:t.pageY}}}const YAe=t=>e=>S2(e)&&t(e,bb(e));function Hy(t,e,n,r){return qv(t,e,YAe(n),r)}const bX=({current:t})=>t?t.ownerDocument.defaultView:null,YV=(t,e)=>Math.abs(t-e);function QAe(t,e){const n=YV(t.x,e.x),r=YV(t.y,e.y);return Math.sqrt(n**2+r**2)}const QV=new Set(["auto","scroll"]);class wX{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=tA(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,p=QAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!p)return;const{point:y}=m,{timestamp:b}=ls;this.history.push({...y,timestamp:b});const{onStart:x,onMove:w}=this.handlers;v||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=eA(v,this.transformPagePoint),Ln.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:b}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=tA(m.type==="pointercancel"?this.lastMoveEventInfo:eA(v,this.transformPagePoint),this.history);this.startEvent&&p&&p(m,x),y&&y(m,x)},!S2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=bb(e),u=eA(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=ls;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,tA(u,this.history)),this.removeListeners=yb(Hy(this.contextWindow,"pointermove",this.handlePointerMove),Hy(this.contextWindow,"pointerup",this.handlePointerUp),Hy(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(QV.has(r.overflowX)||QV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),Ln.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Uu(this.updatePoint)}}function eA(t,e){return e?{point:e(t.point)}:t}function XV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tA({point:t},e){return{point:t,delta:XV(t,jX(e)),offset:XV(t,XAe(e)),velocity:ZAe(e,.1)}}function XAe(t){return t[0]}function jX(t){return t[t.length-1]}function ZAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=jX(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>fa(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>fa(e)*2&&(r=t[1]);const a=ia(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function JAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?nr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?nr(n,t,r.max):Math.min(t,n)),t}function ZV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function eTe(t,{top:e,left:n,bottom:r,right:i}){return{x:ZV(t.x,n,i),y:ZV(t.y,e,r)}}function JV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function tTe(t,e){return{x:JV(t.x,e.x),y:JV(t.y,e.y)}}function nTe(t,e){let n=.5;const r=Hs(t),i=Hs(e);return i>r?n=Vv(e.min,e.max-r,t.min):r>i&&(n=Vv(t.min,t.max-i,e.min)),el(0,1,n)}function rTe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const dP=.35;function sTe(t=dP){return t===!1?t=0:t===!0&&(t=dP),{x:eB(t,"left","right"),y:eB(t,"top","bottom")}}function eB(t,e,n){return{min:tB(t,e),max:tB(t,n)}}function tB(t,e){return typeof t=="number"?t:t[e]||0}const iTe=new WeakMap;class aTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(bb(h).point),this.stopAnimation()},o=(h,f)=>{const{drag:m,dragPropagation:v,onDragStart:p}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=D1e(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_o(b=>{let x=this.getAxisMotionValue(b).get()||0;if(Ho.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[b];C&&(x=Hs(C)*(parseFloat(x)/100))}}this.originPoint[b]=x}),p&&Ln.update(()=>p(h,f),!1,!0),rP(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:p,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=f;if(v&&this.currentDirection===null){this.currentDirection=lTe(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),y&&Ln.update(()=>y(h,f),!1,!0)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new wX(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:bX(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ln.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!N0(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=JAe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Cf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=eTe(r.layoutBox,e):this.constraints=!1,this.elastic=sTe(n),i!==this.constraints&&!Cf(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&_o(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rTe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Cf(e))return!1;const r=e.current;ep(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=uEe(r,i.root,this.visualElement.getTransformPagePoint());let o=tTe(i.layout.layoutBox,a);if(n){const l=n(oEe(o));this.hasMutatedConstraints=!!l,l&&(o=UQ(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=_o(d=>{if(!N0(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return rP(this.visualElement,e),r.start(b2(e,r,0,n,this.visualElement,!1))}stopAnimation(){_o(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_o(n=>{const{drag:r}=this.getProps();if(!N0(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-nr(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Cf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_o(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=nTe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),_o(o=>{if(!N0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(nr(c,u,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;iTe.set(this.visualElement,this);const e=this.visualElement.current,n=Hy(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps(),f=u.target,m=f!==e&&B1e(f);d&&h&&!m&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();Cf(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=oTe(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,o=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ln.read(i);const l=qv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(_o(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=dP,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function nB(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function oTe(t,e,n){const r=cV(t,nB(n)),i=cV(e,nB(n));return()=>{r(),i()}}function N0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lTe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cTe extends rd{constructor(e){super(e),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new aTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const nA=t=>(e,n)=>{t&&Ln.update(()=>t(e,n),!1,!0)};class uTe extends rd{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(e){this.session=new wX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:nA(e),onStart:nA(n),onMove:nA(r),onEnd:(a,o)=>{delete this.session,i&&Ln.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Hy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let rA=!1;class dTe extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),rA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),bw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),rA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Ln.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),N2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;rA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _X(t){const[e,n]=uX(),r=j.useContext(r2);return s.jsx(dTe,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(vX),isPresent:e,safeToRemove:n})}const hTe={pan:{Feature:uTe},drag:{Feature:cTe,ProjectionNode:cX,MeasureLayout:_X}};function rB(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Ln.postRender(()=>a(e,bb(e)))}class fTe extends rd{mount(){const{current:e}=this.node;e&&(this.unmount=L1e(e,(n,r)=>(rB(this.node,r,"Start"),i=>rB(this.node,i,"End"))))}unmount(){}}class mTe extends rd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yb(qv(this.node.current,"focus",()=>this.onFocus()),qv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sB(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Ln.postRender(()=>a(e,bb(e)))}class pTe extends rd{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=z1e(e,(i,a)=>(sB(this.node,a,"Start"),(o,{success:l})=>sB(this.node,o,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const hP=new WeakMap,sA=new WeakMap,gTe=t=>{const e=hP.get(t.target);e&&e(t)},yTe=t=>{t.forEach(gTe)};function vTe({root:t,...e}){const n=t||document;sA.has(n)||sA.set(n,{});const r=sA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(yTe,{root:t,...e})),r[i]}function xTe(t,e,n){const r=vTe(e);return hP.set(t,n),r.observe(t),()=>{hP.delete(t),r.unobserve(t)}}const bTe={some:0,all:1};class wTe extends rd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bTe[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return xTe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(jTe(e,n))&&this.startObserver()}unmount(){}}function jTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const _Te={inView:{Feature:wTe},tap:{Feature:pTe},focus:{Feature:mTe},hover:{Feature:fTe}},NTe={layout:{ProjectionNode:cX,MeasureLayout:_X}},STe={...GAe,..._Te,...hTe,...NTe},Ur=zAe(STe,qAe),kc=t=>{if(t==null)return null;const e=String(t);return e.trim()?e:null},ETe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),userId:String(e.userId??e.user_id??""),role:e.role??"read_only",status:e.status??"active",createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),ATe=(t,e)=>({id:t,name:String(e.name??e.companyName??e.company_name??""),organizationType:e.organizationType??e.organization_type??"business",businessType:kc(e.businessType??e.business_type)??void 0,taxType:kc(e.taxType??e.tax_type)??void 0,taxClassification:kc(e.taxClassification??e.tax_classification)??void 0,tpin:kc(e.tpin)??void 0,phone:kc(e.phone)??void 0,email:kc(e.email)??void 0,logoUrl:kc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),TTe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??t),companyName:String(e.companyName??e.company_name??""),isVatRegistered:!!(e.isVatRegistered??e.is_vat_registered??!1),vatRate:e.vatRate===null||e.vatRate===void 0?Number(e.vat_rate??0)||null:Number(e.vatRate),logoUrl:kc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),ze={async getPrimaryMembershipByUser(t){Rn();const e=Se(ae,ee.COMPANY_USERS),n=[Ce(e,ge("userId","==",t),ge("status","==","active"),Ts(1)),Ce(e,ge("user_id","==",t),ge("status","==","active"),Ts(1)),Ce(e,ge("userId","==",t),Ts(1)),Ce(e,ge("user_id","==",t),Ts(1))];for(const r of n){const i=await Pe(r);if(i.empty)continue;const a=i.docs[0];return ETe(a.id,a.data())}return null},async getCompanyById(t){Rn();const e=et(ae,ee.COMPANIES,t),n=await bi(e);return n.exists()?ATe(n.id,n.data()):null},async getCompanySettings(t){Rn();const e=et(ae,ee.COMPANY_SETTINGS,t),n=await bi(e);return n.exists()?TTe(n.id,n.data()):null},async completeCompanySetup(t){Rn();const e=et(ae,ee.COMPANIES,t.companyId);await fr(e,{name:t.name,organizationType:t.organizationType,businessType:t.businessType??null,taxType:t.taxType??null,taxClassification:t.taxClassification??null,address:t.address??null,phone:t.phone??null,email:t.email??null,tpin:t.tpin??null,registrationNumber:t.registrationNumber??null,industryType:t.industryType??null,logoUrl:t.logoUrl??null,updatedAt:Ie()},{merge:!0});const n=et(ae,ee.COMPANY_SETTINGS,t.companyId);await fr(n,{companyId:t.companyId,companyName:t.name,logoUrl:t.logoUrl??null,isVatRegistered:!!t.isVatRegistered,vatRate:t.vatRate??null,updatedAt:Ie()},{merge:!0})},async updateCompanyLogo(t,e){Rn();const n=et(ae,ee.COMPANIES,t);await Gl(n,{logoUrl:e,updatedAt:Ie()});const r=et(ae,ee.COMPANY_SETTINGS,t);await fr(r,{companyId:t,logoUrl:e,updatedAt:Ie()},{merge:!0})},async updateCompanyBasics(t){Rn();const e=et(ae,ee.COMPANIES,t.companyId),n=et(ae,ee.COMPANY_SETTINGS,t.companyId),r={updatedAt:Ie()},i={companyId:t.companyId,updatedAt:Ie()};typeof t.name=="string"&&(r.name=t.name,i.companyName=t.name),t.logoUrl!==void 0&&(r.logoUrl=t.logoUrl,i.logoUrl=t.logoUrl),await fr(e,r,{merge:!0}),await fr(n,i,{merge:!0})},async listCompanyUsers(t){return Rn(),bt("listCompanyUsers",{companyId:t})},async updateUserRole(t){return Rn(),bt("updateUserRole",t)},async removeCompanyUser(t){return Rn(),bt("removeCompanyUser",t)},async suspendUser(t){return Rn(),bt("suspendUser",t)},async reactivateUser(t){return Rn(),bt("reactivateUser",t)},async revokeInvitation(t){return Rn(),bt("revokeInvitation",t)}},jn={async getPostedJournalLines(t,e,n){Rn();const r=Se(ae,ee.JOURNAL_LINES),i=[ge("companyId","==",t),ge("isPosted","==",!0),QN("entryDate","desc"),Ts(5e3)];return e&&i.push(ge("entryDate",">=",e)),n&&i.push(ge("entryDate","<=",n)),(await Pe(Ce(r,...i))).docs.map(o=>({id:o.id,...o.data()}))},async postJournalEntry(t){return bt("postJournalEntry",t)},async getGLBalances(t){return bt("getGLBalances",t)},async getTrialBalance(t){return bt("getTrialBalance",t)},async postInvoiceToGL(t){return bt("postInvoiceToGL",{invoiceId:t})},async postBillToGL(t){return bt("postBillToGL",{billId:t})},async postExpenseToGL(t){return bt("postExpenseToGL",{expenseId:t})},async seedDefaultChartOfAccounts(t){return bt("seedDefaultChartOfAccounts",t)},async seedDefaultExpenseCategories(t){return bt("seedDefaultExpenseCategories",t)},async recordExpense(t){return bt("recordExpense",t)},async createBill(t){return bt("createBill",t)},async payBill(t){return bt("payBill",t)},async createInvoice(t){return bt("createInvoice",t)},async recordInvoicePayment(t){return bt("recordInvoicePayment",t)},async createQuotation(t){return bt("createQuotation",t)},async reverseJournalEntry(t){return bt("reverseJournalEntry",t)},async deleteChartOfAccount(t){return bt("deleteChartOfAccount",t)},async updateOverdueBills(t){return bt("updateOverdueBills",t)},async getExpenseReport(t){return bt("getExpenseReport",t)},async getGeneralLedger(t){return bt("getGeneralLedger",t)},async getProfitLossReport(t){return bt("getProfitLossReport",t)},async getBalanceSheetReport(t){return bt("getBalanceSheetReport",t)},async getTrialBalanceReport(t){return bt("getTrialBalanceReport",t)},async getCashFlowReport(t){return bt("getCashFlowReport",t)},async getDashboardLiveMetrics(t){return bt("getDashboardLiveMetrics",t)}},To={async getPayrollRuns(t){Rn();const e=Se(ae,ee.PAYROLL_RUNS);return(await Pe(Ce(e,ge("companyId","==",t),QN("runDate","desc")))).docs.map(r=>({id:r.id,...r.data()}))},async createPayrollDraft(t){return bt("createPayrollDraft",t)},async runPayrollTrial(t){return bt("runPayrollTrial",t)},async processPayroll(t){return bt("processPayroll",t)},async payPayroll(t){return bt("payPayroll",t)},async reversePayroll(t){return bt("reversePayroll",t)},async reversePayrollPayment(t){return bt("reversePayrollPayment",t)},async finalizePayroll(t){return bt("finalizePayroll",t)},async sendPayslipEmail(t){return bt("sendPayslipEmail",t)},async runDepreciation(t){return bt("runDepreciation",t)}},Nc={async seedDefaultLeaveTypes(t){return bt("seedDefaultLeaveTypes",t)},async saveLeaveType(t){return bt("saveLeaveType",t)},async setLeaveBalance(t){return bt("setLeaveBalance",t)},async submitLeaveRequest(t){return bt("submitLeaveRequest",t)},async reviewLeaveRequest(t){return bt("reviewLeaveRequest",t)},async clockAttendance(t){return bt("clockAttendance",t)},async adjustAttendance(t){return bt("adjustAttendance",t)},async logDisciplinaryRecord(t){return bt("logDisciplinaryRecord",t)},async resolveDisciplinaryRecord(t){return bt("resolveDisciplinaryRecord",t)}},CTe={async uploadCompanyLogo(t,e){Rn();const n=e.name.split(".").pop()??"png",r=`company-logos/${t}/logo.${n}`,i=X0e(swe,r);try{await Y0e(i,e,{contentType:e.type})}catch(a){throw(typeof a=="object"&&a!==null&&"code"in a?String(a.code):"")==="storage/bucket-not-found"?new Error("Firebase Storage is not enabled for this project. Open Firebase Console > Storage > Get Started."):a}return Q0e(i)}},PTe=new Set(Object.values(ee)),ITe=t=>{if(!PTe.has(t))throw new Error(`Dashboard query rejected for unknown collection: ${t}`)},kTe=(t,e)=>{var r;const n=[ge("companyId","==",t)];return(r=e.filters)==null||r.forEach(i=>{n.push(ge(i.field,i.op,i.value))}),e.orderByField&&n.push(QN(e.orderByField,e.orderDirection??"desc")),typeof e.limitCount=="number"&&e.limitCount>0&&n.push(Ts(e.limitCount)),n},iB=async(t,e)=>{ITe(e.collectionName);const n=kTe(t,e);return(await Pe(Ce(Se(ae,e.collectionName),...n))).docs.map(i=>({id:i.id,...i.data()}))},_r={async getCompanyIdForUser(t){Rn();const e=await ze.getPrimaryMembershipByUser(t);if(!(e!=null&&e.companyId))throw new Error("No active company membership found for this user.");return e.companyId},async runQuery(t,e){const n=await this.getCompanyIdForUser(t);return iB(n,e)},async runQueries(t,e){const n=await this.getCompanyIdForUser(t),r=Object.entries(e),i=await Promise.all(r.map(async([a,o])=>{const l=await iB(n,o);return[a,l]}));return Object.fromEntries(i)}},NX=t=>t.toLowerCase().replace(/[_\s-]/g,""),RTe=t=>{const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(NX(n),r)}),e},OTe=(t,e)=>{const n=t[e];return n!==void 0?n:RTe(t).get(NX(e))},Ud=(t,e,n=null)=>{for(const r of e){const i=OTe(t,r);if(i!=null)return i}return n},Ze=(t,e,n="")=>{const r=Ud(t,e);return typeof r=="string"?r:n},tn=(t,e,n=0)=>{const r=Ud(t,e),i=Number(r);return Number.isFinite(i)?i:n},jy=(t,e,n=!1)=>{const r=Ud(t,e);return typeof r=="boolean"?r:n},DTe=["Initiation","Planning","Design","Execution","Monitoring","Closing"],aB=new Set(["approved","implemented","completed","done"]),SX=new Set(["approved","implemented","completed","done"]),MTe=new Set(["pending","todo","open","in_progress","inprogress"]),LTe=t=>t.trim().toLowerCase().replace(/[\s_-]/g,""),qa=t=>t?LTe(t):"",ln=t=>{if(!t)return null;const e=t.trim();return e.length?e:null},oB=t=>t.split(/[\s_-]+/).filter(Boolean).map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`).join(" "),lB=t=>{if(!t)return new Date(0).toISOString();if(typeof t=="string"){const e=new Date(t);return Number.isNaN(e.getTime())?new Date(0).toISOString():e.toISOString()}if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return new Date(0).toISOString()},cB=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},is=(t,e,n,r="")=>{const i=Ze(t,n,"");if(i)return i;if(e){const a=Ze(e,n,"");if(a)return a}return r},uB=(t,e)=>{const n=Ud(e,["details"],null)??null,r=is(e,n,["companyId","company_id"]),i=is(e,n,["projectId","project_id"]);if(!r||!i)return null;const a=is(e,n,["action","event"],"Activity"),o=is(e,n,["activity","title"],a||"Activity"),l=is(e,n,["description","notes"],""),c=is(e,n,["source","sourceType","source_type","sourceCollection","source_collection","tableName","table_name"],"-"),u=ln(is(e,n,["sourceType","source_type","sourceCollection","source_collection"])),d=ln(is(e,n,["sourceId","source_id","recordId","record_id"])),h=ln(is(e,n,["role","actorRole","actor_role"])),f=ln(is(e,n,["assignedTo","assigned_to","assignee"])),m=ln(is(e,n,["phase","currentPhase","current_phase","stage"])),v=ln(is(e,n,["discipline"])),p=ln(is(e,n,["approvalStatus","approval_status"])),y=ln(is(e,n,["appliedToSection","applied_to_section","section"])),b=ln(is(e,n,["status"])),x=ln(is(e,n,["milestoneName","milestone_name","milestone"])),w=jy(e,["milestoneAchieved","milestone_achieved"],!1)||(n?jy(n,["milestoneAchieved","milestone_achieved"],!1):!1),C=jy(e,["implemented","isImplemented","is_implemented"],!1)||(n?jy(n,["implemented","isImplemented","is_implemented"],!1):!1);return{id:t,companyId:r,projectId:i,activity:o,description:l,source:c,sourceType:u,sourceId:d,role:h,assignedTo:f,phase:m,discipline:v,approvalStatus:p,appliedToSection:y,status:b,milestoneName:x,milestoneAchieved:w,implemented:C,createdBy:ln(is(e,n,["createdBy","created_by","userId","user_id","actorUid","actor_uid"])),createdAt:lB(Ud(e,["createdAt","created_at"])),updatedAt:lB(Ud(e,["updatedAt","updated_at","createdAt","created_at"])),metadata:Ud(e,["metadata"],null)??null}},dB=t=>{const e=qa(t.status),n=qa(t.approvalStatus);return aB.has(e)||aB.has(n)||t.implemented||t.milestoneAchieved},$Te=(t,e,n)=>{var a;const r=ln(Ze(t,["currentPhase","current_phase","phase","stage"],""));if(r)return oB(r);const i=(a=e.find(o=>o.phase))==null?void 0:a.phase;return i?oB(i):n>=90?"Closing":n>=65?"Execution":n>=40?"Design":n>=20?"Planning":"Initiation"},FTe=(t,e,n,r)=>{const i=qa(Ze(t,["status"],"")),a=n+r>=4;if(i==="completed"||e>=100&&a)return"completed";const o=cB(ln(Ze(t,["startDate","start_date"],""))),l=cB(ln(Ze(t,["endDate","end_date"],"")));let c=null;if(o&&l&&l.getTime()>o.getTime()){const u=Date.now();u<=o.getTime()?c=0:u>=l.getTime()?c=100:c=(u-o.getTime())/(l.getTime()-o.getTime())*100}return c!==null&&e+10<c?"behind":c!==null&&e>=c-8||r>0&&r>=n?"on_track":"in_progress"},VTe=(t,e)=>{const n=e.filter(A=>!!(A.status||A.approvalStatus||A.implemented||A.milestoneName||A.milestoneAchieved)),r=n.length?n:e,i=r.filter(dB).length,a=r.length,o=new Set(e.map(A=>ln(A.appliedToSection)).filter(A=>!!A)),l=new Set(e.filter(A=>qa(A.approvalStatus)==="approved").map(A=>ln(A.appliedToSection)).filter(A=>!!A)),c=e.filter(A=>!!(A.milestoneName||A.milestoneAchieved||/milestone/i.test(A.activity)||/milestone/i.test(A.description))),u=A=>ln(A.milestoneName)||ln(A.appliedToSection)||ln(A.activity)||A.id,d=new Set(c.map(u).filter(A=>!!A)),h=new Set(c.filter(A=>A.milestoneAchieved||dB(A)).map(u).filter(A=>!!A)),f=e.filter(A=>SX.has(qa(A.status))).length,m=e.filter(A=>MTe.has(qa(A.status))||qa(A.approvalStatus)==="pending").length,p=qa(Ze(t,["status"],""))==="completed",y=a>0?i/a:p?1:0,b=o.size>0?l.size/o.size:0,x=d.size>0?h.size/d.size:0,w=f+m,C=w>0?f/w:0,S=[{ratio:y,weight:.4,enabled:a>0||p},{ratio:b,weight:.2,enabled:o.size>0},{ratio:x,weight:.2,enabled:d.size>0},{ratio:C,weight:.2,enabled:w>0}],P=S.filter(A=>A.enabled).reduce((A,I)=>A+I.weight,0),_=S.filter(A=>A.enabled).reduce((A,I)=>A+I.ratio*I.weight,0);let g=P>0?_/P*100:0;if(p&&(g=100),!p){const A=Math.max(a,w,o.size,d.size);A<=1?g=Math.min(g,20):A===2&&(g=Math.min(g,45))}g=Math.max(0,Math.min(100,Math.round(g)));const T=$Te(t,e,g),E=FTe(t,g,m,f);return{projectId:t.id,currentPhase:T,completion:g,status:E,metrics:{completedActivities:i,totalActivities:a,approvedSections:l.size,totalSections:o.size,milestonesAchieved:h.size,totalMilestones:d.size,pendingCount:m,implementedCount:f}}},BTe=(t,e)=>{const n=new Map;return e.forEach(r=>{var i;n.has(r.projectId)||n.set(r.projectId,[]),(i=n.get(r.projectId))==null||i.push(r)}),new Map(t.map(r=>[r.id,VTe(r,n.get(r.id)??[])]))},Sl={async listByCompany(t,e){const n=[ge("companyId","==",t)];return e!=null&&e.limitCount&&e.limitCount>0&&n.push(Ts(e.limitCount)),(await Pe(Ce(Se(ae,ee.PROJECT_ACTIVITY_LOGS),...n))).docs.map(i=>uB(i.id,i.data())).filter(i=>!!i).sort((i,a)=>a.createdAt.localeCompare(i.createdAt))},async listByProject(t,e,n){const r=[ge("companyId","==",t),ge("projectId","==",e)];return n!=null&&n.limitCount&&n.limitCount>0&&r.push(Ts(n.limitCount)),(await Pe(Ce(Se(ae,ee.PROJECT_ACTIVITY_LOGS),...r))).docs.map(a=>uB(a.id,a.data())).filter(a=>!!a).sort((a,o)=>o.createdAt.localeCompare(a.createdAt))},async create(t){const e=ln(t.activity);e&&await es(Se(ae,ee.PROJECT_ACTIVITY_LOGS),{companyId:t.companyId,projectId:t.projectId,activity:e,description:ln(t.description)??null,source:ln(t.source)??"Project Workspace",sourceType:ln(t.sourceType)??null,sourceId:ln(t.sourceId)??null,role:ln(t.role)??null,assignedTo:ln(t.assignedTo)??null,phase:ln(t.phase)??null,discipline:ln(t.discipline)??null,approvalStatus:ln(t.approvalStatus)??null,appliedToSection:ln(t.appliedToSection)??null,status:ln(t.status)??"implemented",milestoneName:ln(t.milestoneName)??null,milestoneAchieved:!!t.milestoneAchieved,implemented:t.implemented??!0,createdBy:ln(t.createdBy)??null,metadata:t.metadata??null,createdAt:Ie(),updatedAt:Ie()})},getProjectHealthStats(t){var a;const e=t.filter(o=>qa(o.status)==="pending").length,n=t.filter(o=>SX.has(qa(o.status))).length,r=t.filter(o=>qa(o.approvalStatus)==="approved").length,i=t.length?Math.round((n+r)/Math.max(t.length,1)*100):0;return{pendingCount:e,implementedCount:n,approvedCount:r,completion:Math.min(100,Math.max(0,i)),lastUpdatedAt:((a=t[0])==null?void 0:a.createdAt)??null,totalItems:t.length}}};function UTe(){const[t,e]=j.useState(!1),[n,r]=j.useState(""),{messages:i,isLoading:a,askAI:o,clearChat:l}=kNe(),c=j.useRef(null),{user:u}=dt(),[d,h]=j.useState(void 0);j.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[i,t]),j.useEffect(()=>{async function m(){if(u){const v=await ze.getPrimaryMembershipByUser(u.id);v&&h(v.companyId)}}m()},[u]);const f=m=>{m.preventDefault(),!(!n.trim()||a)&&(o(n,d),r(""))};return s.jsxs(s.Fragment,{children:[s.jsx(dX,{children:t&&s.jsx(Ur.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-20 right-6 z-50 w-[90vw] md:w-[400px] shadow-2xl",children:s.jsxs(Z,{className:"border-primary/20 bg-background/95 backdrop-blur-sm h-[500px] flex flex-col",children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:s.jsx(cle,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx(re,{className:"text-sm font-medium",children:"ZedBooks AI"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Financial Assistant"})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:l,title:"Clear Chat",children:s.jsx(p8,{className:"h-4 w-4 text-muted-foreground"})}),s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e(!1),children:s.jsx(qm,{className:"h-4 w-4"})})]})]}),s.jsx(se,{className:"flex-1 p-0 overflow-hidden relative",children:s.jsxs("div",{ref:c,className:"h-full overflow-y-auto p-4 space-y-4 scroll-smooth",children:[i.map((m,v)=>s.jsx("div",{className:_e("flex w-full",m.role==="user"?"justify-end":"justify-start"),children:s.jsx("div",{className:_e("max-w-[80%] rounded-2xl px-4 py-2 text-sm",m.role==="user"?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:m.content})},v)),a&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-none px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.3s]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.15s]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce"})]})})})]})}),s.jsx($Y,{className:"p-3 border-t bg-muted/20",children:s.jsxs("form",{onSubmit:f,className:"flex gap-2 w-full",children:[s.jsx(Y,{placeholder:"Ask about your finances...",value:n,onChange:m=>r(m.target.value),className:"bg-background focus-visible:ring-offset-0"}),s.jsx(K,{type:"submit",size:"icon",disabled:a||!n.trim(),children:s.jsx(nR,{className:"h-4 w-4"})})]})})]})})}),s.jsx(Ur.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"fixed bottom-6 right-6 z-50",children:s.jsx(K,{onClick:()=>e(!t),size:"icon",className:_e("h-12 w-12 rounded-full shadow-lg transition-all duration-300",t?"bg-muted text-muted-foreground rotate-90":"bg-primary text-primary-foreground"),children:t?s.jsx(qm,{className:"h-6 w-6"}):s.jsx(zoe,{className:"h-6 w-6"})})})]})}function Ct({children:t}){return oS(),s.jsx(Et,{children:s.jsx(jY,{children:s.jsxs("div",{className:"flex min-h-screen w-full",children:[s.jsx(INe,{}),s.jsxs(SY,{className:"flex-1",children:[s.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 md:hidden",children:[s.jsx(NY,{className:"h-9 w-9",children:s.jsx(sle,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary flex items-center justify-center text-primary-foreground",children:s.jsx("span",{className:"text-xs font-bold",children:"Z"})}),s.jsx("span",{className:"font-semibold text-foreground",children:"ZedBooks"})]})]}),s.jsx("main",{className:"flex flex-col gap-4 p-4 md:p-6 lg:p-8",children:t}),s.jsx(n2,{}),s.jsx(UTe,{})]})]})})})}function kt({children:t,allowedRoles:e}){const n=il(),{hasRole:r,isLoading:i,userRole:a}=S_e(e||[]);return i?s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Checking permissions..."})]})}):e&&e.length>0?r?s.jsx(s.Fragment,{children:t}):s.jsx(cC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}}):LG(a,n.pathname)?s.jsx(s.Fragment,{children:t}):s.jsx(cC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}})}var wb=t=>t.type==="checkbox",zd=t=>t instanceof Date,qs=t=>t==null;const EX=t=>typeof t=="object";var jr=t=>!qs(t)&&!Array.isArray(t)&&EX(t)&&!zd(t),AX=t=>jr(t)&&t.target?wb(t.target)?t.target.checked:t.target.value:t,zTe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,TX=(t,e)=>t.has(zTe(e)),qTe=t=>{const e=t.constructor&&t.constructor.prototype;return jr(e)&&e.hasOwnProperty("isPrototypeOf")},O2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(O2&&(t instanceof Blob||r))&&(n||jr(t)))if(e=n?[]:{},!n&&!qTe(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Mr(t[i]));else return t;return e}var gS=t=>/^\w*$/.test(t),vr=t=>t===void 0,D2=t=>Array.isArray(t)?t.filter(Boolean):[],M2=t=>D2(t.replace(/["|']|\]/g,"").split(/\.|\[/)),We=(t,e,n)=>{if(!e||!jr(t))return n;const r=(gS(e)?[e]:M2(e)).reduce((i,a)=>qs(i)?i:i[a],t);return vr(r)||r===t?vr(t[e])?n:t[e]:r},Ii=t=>typeof t=="boolean",bn=(t,e,n)=>{let r=-1;const i=gS(e)?[e]:M2(e),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=n;if(r!==o){const u=t[l];c=jr(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Vj={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Wa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},hl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},L2=$.createContext(null);L2.displayName="HookFormContext";const yS=()=>$.useContext(L2),WTe=t=>{const{children:e,...n}=t;return $.createElement(L2.Provider,{value:n},e)};var CX=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Wa.all&&(e._proxyFormState[o]=!r||Wa.all),n&&(n[o]=!0),t[o]}});return i};const $2=typeof window<"u"?$.useLayoutEffect:$.useEffect;function HTe(t){const e=yS(),{control:n=e.control,disabled:r,name:i,exact:a}=t||{},[o,l]=$.useState(n._formState),c=$.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return $2(()=>n._subscribe({name:i,formState:c.current,exact:a,callback:u=>{!r&&l({...n._formState,...u})}}),[i,r,a]),$.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),$.useMemo(()=>CX(o,n,c.current,!1),[o,n])}var Ro=t=>typeof t=="string",PX=(t,e,n,r,i)=>Ro(t)?(r&&e.watch.add(t),We(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),We(n,a))):(r&&(e.watchAll=!0),n),fP=t=>qs(t)||!EX(t);function bl(t,e,n=new WeakSet){if(fP(t)||fP(e))return t===e;if(zd(t)&&zd(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const o=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=e[a];if(zd(o)&&zd(l)||jr(o)&&jr(l)||Array.isArray(o)&&Array.isArray(l)?!bl(o,l,n):o!==l)return!1}}return!0}function KTe(t){const e=yS(),{control:n=e.control,name:r,defaultValue:i,disabled:a,exact:o,compute:l}=t||{},c=$.useRef(i),u=$.useRef(l),d=$.useRef(void 0);u.current=l;const h=$.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=$.useState(u.current?u.current(h):h);return $2(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!a){const p=PX(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const y=u.current(p);bl(y,d.current)||(m(y),d.current=y)}else m(p)}}}),[n,a,r,o]),$.useEffect(()=>n._removeUnmounted()),f}function GTe(t){const e=yS(),{name:n,disabled:r,control:i=e.control,shouldUnregister:a,defaultValue:o}=t,l=TX(i._names.array,n),c=$.useMemo(()=>We(i._formValues,n,We(i._defaultValues,n,o)),[i,n,o]),u=KTe({control:i,name:n,defaultValue:c,exact:!0}),d=HTe({control:i,name:n,exact:!0}),h=$.useRef(t),f=$.useRef(i.register(n,{...t.rules,value:u,...Ii(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=$.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!We(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!We(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!We(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!We(d.validatingFields,n)},error:{enumerable:!0,get:()=>We(d.errors,n)}}),[d,n]),v=$.useCallback(x=>f.current.onChange({target:{value:AX(x),name:n},type:Vj.CHANGE}),[n]),p=$.useCallback(()=>f.current.onBlur({target:{value:We(i._formValues,n),name:n},type:Vj.BLUR}),[n,i._formValues]),y=$.useCallback(x=>{const w=We(i._fields,n);w&&x&&(w._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:C=>x.setCustomValidity(C),reportValidity:()=>x.reportValidity()})},[i._fields,n]),b=$.useMemo(()=>({name:n,value:u,...Ii(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:v,onBlur:p,ref:y}),[n,r,d.disabled,v,p,y,u]);return $.useEffect(()=>{const x=i._options.shouldUnregister||a;i.register(n,{...h.current.rules,...Ii(h.current.disabled)?{disabled:h.current.disabled}:{}});const w=(C,S)=>{const P=We(i._fields,C);P&&P._f&&(P._f.mount=S)};if(w(n,!0),x){const C=Mr(We(i._options.defaultValues,n));bn(i._defaultValues,n,C),vr(We(i._formValues,n))&&bn(i._formValues,n,C)}return!l&&i.register(n),()=>{(l?x&&!i._state.action:x)?i.unregister(n):w(n,!1)}},[n,i,l,a]),$.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),$.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const YTe=t=>t.render(GTe(t));var IX=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Ky=t=>Array.isArray(t)?t:[t],hB=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},ai=t=>jr(t)&&!Object.keys(t).length,F2=t=>t.type==="file",Ha=t=>typeof t=="function",Bj=t=>{if(!O2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},kX=t=>t.type==="select-multiple",V2=t=>t.type==="radio",QTe=t=>V2(t)||wb(t),iA=t=>Bj(t)&&t.isConnected;function XTe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=vr(t)?r++:t[e[r++]];return t}function ZTe(t){for(const e in t)if(t.hasOwnProperty(e)&&!vr(t[e]))return!1;return!0}function Nr(t,e){const n=Array.isArray(e)?e:gS(e)?[e]:M2(e),r=n.length===1?t:XTe(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(jr(r)&&ai(r)||Array.isArray(r)&&ZTe(r))&&Nr(t,n.slice(0,-1)),t}var RX=t=>{for(const e in t)if(Ha(t[e]))return!0;return!1};function Uj(t,e={}){const n=Array.isArray(t);if(jr(t)||n)for(const r in t)Array.isArray(t[r])||jr(t[r])&&!RX(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Uj(t[r],e[r])):qs(t[r])||(e[r]=!0);return e}function OX(t,e,n){const r=Array.isArray(t);if(jr(t)||r)for(const i in t)Array.isArray(t[i])||jr(t[i])&&!RX(t[i])?vr(e)||fP(n[i])?n[i]=Array.isArray(t[i])?Uj(t[i],[]):{...Uj(t[i])}:OX(t[i],qs(e)?{}:e[i],n[i]):n[i]=!bl(t[i],e[i]);return n}var Hg=(t,e)=>OX(t,e,Uj(e));const fB={value:!1,isValid:!1},mB={value:!0,isValid:!0};var DX=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!vr(t[0].attributes.value)?vr(t[0].value)||t[0].value===""?mB:{value:t[0].value,isValid:!0}:mB:fB}return fB},MX=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>vr(t)?t:e?t===""?NaN:t&&+t:n&&Ro(t)?new Date(t):r?r(t):t;const pB={isValid:!1,value:null};var LX=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,pB):pB;function gB(t){const e=t.ref;return F2(e)?e.files:V2(e)?LX(t.refs).value:kX(e)?[...e.selectedOptions].map(({value:n})=>n):wb(e)?DX(t.refs).value:MX(vr(e.value)?t.ref.value:e.value,t)}var JTe=(t,e,n,r)=>{const i={};for(const a of t){const o=We(e,a);o&&bn(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},zj=t=>t instanceof RegExp,Kg=t=>vr(t)?t:zj(t)?t.source:jr(t)?zj(t.value)?t.value.source:t.value:t,yB=t=>({isOnSubmit:!t||t===Wa.onSubmit,isOnBlur:t===Wa.onBlur,isOnChange:t===Wa.onChange,isOnAll:t===Wa.all,isOnTouch:t===Wa.onTouched});const vB="AsyncFunction";var eCe=t=>!!t&&!!t.validate&&!!(Ha(t.validate)&&t.validate.constructor.name===vB||jr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===vB)),tCe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),xB=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Gy=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=We(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Gy(l,e))break}else if(jr(l)&&Gy(l,e))break}}};function bB(t,e,n){const r=We(t,n);if(r||gS(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=We(e,a),l=We(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:n}}var nCe=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return ai(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Wa.all))},rCe=(t,e,n)=>!t||!e||t===e||Ky(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),sCe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,iCe=(t,e)=>!D2(We(t,e)).length&&Nr(t,e),aCe=(t,e,n)=>{const r=Ky(We(t,n));return bn(r,"root",e[n]),bn(t,n,r),t},ww=t=>Ro(t);function wB(t,e,n="validate"){if(ww(t)||Array.isArray(t)&&t.every(ww)||Ii(t)&&!t)return{type:n,message:ww(t)?t:"",ref:e}}var yf=t=>jr(t)&&!zj(t)?t:{value:t,message:""},jB=async(t,e,n,r,i,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:v,name:p,valueAsNumber:y,mount:b}=t._f,x=We(n,p);if(!b||e.has(p))return{};const w=l?l[0]:o,C=I=>{i&&w.reportValidity&&(w.setCustomValidity(Ii(I)?"":I||""),w.reportValidity())},S={},P=V2(o),_=wb(o),g=P||_,T=(y||F2(o))&&vr(o.value)&&vr(x)||Bj(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,E=IX.bind(null,p,r,S),A=(I,k,L,B=hl.maxLength,U=hl.minLength)=>{const V=I?k:L;S[p]={type:I?B:U,message:V,ref:o,...E(I?B:U,V)}};if(a?!Array.isArray(x)||!x.length:c&&(!g&&(T||qs(x))||Ii(x)&&!x||_&&!DX(l).isValid||P&&!LX(l).isValid)){const{value:I,message:k}=ww(c)?{value:!!c,message:c}:yf(c);if(I&&(S[p]={type:hl.required,message:k,ref:w,...E(hl.required,k)},!r))return C(k),S}if(!T&&(!qs(h)||!qs(f))){let I,k;const L=yf(f),B=yf(h);if(!qs(x)&&!isNaN(x)){const U=o.valueAsNumber||x&&+x;qs(L.value)||(I=U>L.value),qs(B.value)||(k=U<B.value)}else{const U=o.valueAsDate||new Date(x),V=W=>new Date(new Date().toDateString()+" "+W),D=o.type=="time",R=o.type=="week";Ro(L.value)&&x&&(I=D?V(x)>V(L.value):R?x>L.value:U>new Date(L.value)),Ro(B.value)&&x&&(k=D?V(x)<V(B.value):R?x<B.value:U<new Date(B.value))}if((I||k)&&(A(!!I,L.message,B.message,hl.max,hl.min),!r))return C(S[p].message),S}if((u||d)&&!T&&(Ro(x)||a&&Array.isArray(x))){const I=yf(u),k=yf(d),L=!qs(I.value)&&x.length>+I.value,B=!qs(k.value)&&x.length<+k.value;if((L||B)&&(A(L,I.message,k.message),!r))return C(S[p].message),S}if(m&&!T&&Ro(x)){const{value:I,message:k}=yf(m);if(zj(I)&&!x.match(I)&&(S[p]={type:hl.pattern,message:k,ref:o,...E(hl.pattern,k)},!r))return C(k),S}if(v){if(Ha(v)){const I=await v(x,n),k=wB(I,w);if(k&&(S[p]={...k,...E(hl.validate,k.message)},!r))return C(k.message),S}else if(jr(v)){let I={};for(const k in v){if(!ai(I)&&!r)break;const L=wB(await v[k](x,n),w,k);L&&(I={...L,...E(k,L.message)},C(L.message),r&&(S[p]=I))}if(!ai(I)&&(S[p]={ref:w,...I},!r))return S}}return C(!0),S};const oCe={mode:Wa.onSubmit,reValidateMode:Wa.onChange,shouldFocusError:!0};function lCe(t={}){let e={...oCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ha(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=jr(e.defaultValues)||jr(e.values)?Mr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Mr(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:hB(),state:hB()},m=e.criteriaMode===Wa.all,v=Q=>le=>{clearTimeout(u),u=setTimeout(Q,le)},p=async Q=>{if(!e.disabled&&(d.isValid||h.isValid||Q)){const le=e.resolver?ai((await _()).errors):await T(r,!0);le!==n.isValid&&f.state.next({isValid:le})}},y=(Q,le)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((Q||Array.from(l.mount)).forEach(be=>{be&&(le?bn(n.validatingFields,be,le):Nr(n.validatingFields,be))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ai(n.validatingFields)}))},b=(Q,le=[],be,Fe,Ve=!0,ke=!0)=>{if(Fe&&be&&!e.disabled){if(o.action=!0,ke&&Array.isArray(We(r,Q))){const Ye=be(We(r,Q),Fe.argA,Fe.argB);Ve&&bn(r,Q,Ye)}if(ke&&Array.isArray(We(n.errors,Q))){const Ye=be(We(n.errors,Q),Fe.argA,Fe.argB);Ve&&bn(n.errors,Q,Ye),iCe(n.errors,Q)}if((d.touchedFields||h.touchedFields)&&ke&&Array.isArray(We(n.touchedFields,Q))){const Ye=be(We(n.touchedFields,Q),Fe.argA,Fe.argB);Ve&&bn(n.touchedFields,Q,Ye)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Hg(i,a)),f.state.next({name:Q,isDirty:A(Q,le),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bn(a,Q,le)},x=(Q,le)=>{bn(n.errors,Q,le),f.state.next({errors:n.errors})},w=Q=>{n.errors=Q,f.state.next({errors:n.errors,isValid:!1})},C=(Q,le,be,Fe)=>{const Ve=We(r,Q);if(Ve){const ke=We(a,Q,vr(be)?We(i,Q):be);vr(ke)||Fe&&Fe.defaultChecked||le?bn(a,Q,le?ke:gB(Ve._f)):L(Q,ke),o.mount&&p()}},S=(Q,le,be,Fe,Ve)=>{let ke=!1,Ye=!1;const Kt={name:Q};if(!e.disabled){if(!be||Fe){(d.isDirty||h.isDirty)&&(Ye=n.isDirty,n.isDirty=Kt.isDirty=A(),ke=Ye!==Kt.isDirty);const dn=bl(We(i,Q),le);Ye=!!We(n.dirtyFields,Q),dn?Nr(n.dirtyFields,Q):bn(n.dirtyFields,Q,!0),Kt.dirtyFields=n.dirtyFields,ke=ke||(d.dirtyFields||h.dirtyFields)&&Ye!==!dn}if(be){const dn=We(n.touchedFields,Q);dn||(bn(n.touchedFields,Q,be),Kt.touchedFields=n.touchedFields,ke=ke||(d.touchedFields||h.touchedFields)&&dn!==be)}ke&&Ve&&f.state.next(Kt)}return ke?Kt:{}},P=(Q,le,be,Fe)=>{const Ve=We(n.errors,Q),ke=(d.isValid||h.isValid)&&Ii(le)&&n.isValid!==le;if(e.delayError&&be?(c=v(()=>x(Q,be)),c(e.delayError)):(clearTimeout(u),c=null,be?bn(n.errors,Q,be):Nr(n.errors,Q)),(be?!bl(Ve,be):Ve)||!ai(Fe)||ke){const Ye={...Fe,...ke&&Ii(le)?{isValid:le}:{},errors:n.errors,name:Q};n={...n,...Ye},f.state.next(Ye)}},_=async Q=>{y(Q,!0);const le=await e.resolver(a,e.context,JTe(Q||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(Q),le},g=async Q=>{const{errors:le}=await _(Q);if(Q)for(const be of Q){const Fe=We(le,be);Fe?bn(n.errors,be,Fe):Nr(n.errors,be)}else n.errors=le;return le},T=async(Q,le,be={valid:!0})=>{for(const Fe in Q){const Ve=Q[Fe];if(Ve){const{_f:ke,...Ye}=Ve;if(ke){const Kt=l.array.has(ke.name),dn=Ve._f&&eCe(Ve._f);dn&&d.validatingFields&&y([Fe],!0);const ys=await jB(Ve,l.disabled,a,m,e.shouldUseNativeValidation&&!le,Kt);if(dn&&d.validatingFields&&y([Fe]),ys[ke.name]&&(be.valid=!1,le))break;!le&&(We(ys,ke.name)?Kt?aCe(n.errors,ys,ke.name):bn(n.errors,ke.name,ys[ke.name]):Nr(n.errors,ke.name))}!ai(Ye)&&await T(Ye,le,be)}}return be.valid},E=()=>{for(const Q of l.unMount){const le=We(r,Q);le&&(le._f.refs?le._f.refs.every(be=>!iA(be)):!iA(le._f.ref))&&xe(Q)}l.unMount=new Set},A=(Q,le)=>!e.disabled&&(Q&&le&&bn(a,Q,le),!bl(W(),i)),I=(Q,le,be)=>PX(Q,l,{...o.mount?a:vr(le)?i:Ro(Q)?{[Q]:le}:le},be,le),k=Q=>D2(We(o.mount?a:i,Q,e.shouldUnregister?We(i,Q,[]):[])),L=(Q,le,be={})=>{const Fe=We(r,Q);let Ve=le;if(Fe){const ke=Fe._f;ke&&(!ke.disabled&&bn(a,Q,MX(le,ke)),Ve=Bj(ke.ref)&&qs(le)?"":le,kX(ke.ref)?[...ke.ref.options].forEach(Ye=>Ye.selected=Ve.includes(Ye.value)):ke.refs?wb(ke.ref)?ke.refs.forEach(Ye=>{(!Ye.defaultChecked||!Ye.disabled)&&(Array.isArray(Ve)?Ye.checked=!!Ve.find(Kt=>Kt===Ye.value):Ye.checked=Ve===Ye.value||!!Ve)}):ke.refs.forEach(Ye=>Ye.checked=Ye.value===Ve):F2(ke.ref)?ke.ref.value="":(ke.ref.value=Ve,ke.ref.type||f.state.next({name:Q,values:Mr(a)})))}(be.shouldDirty||be.shouldTouch)&&S(Q,Ve,be.shouldTouch,be.shouldDirty,!0),be.shouldValidate&&R(Q)},B=(Q,le,be)=>{for(const Fe in le){if(!le.hasOwnProperty(Fe))return;const Ve=le[Fe],ke=Q+"."+Fe,Ye=We(r,ke);(l.array.has(Q)||jr(Ve)||Ye&&!Ye._f)&&!zd(Ve)?B(ke,Ve,be):L(ke,Ve,be)}},U=(Q,le,be={})=>{const Fe=We(r,Q),Ve=l.array.has(Q),ke=Mr(le);bn(a,Q,ke),Ve?(f.array.next({name:Q,values:Mr(a)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&be.shouldDirty&&f.state.next({name:Q,dirtyFields:Hg(i,a),isDirty:A(Q,ke)})):Fe&&!Fe._f&&!qs(ke)?B(Q,ke,be):L(Q,ke,be),xB(Q,l)&&f.state.next({...n,name:Q}),f.state.next({name:o.mount?Q:void 0,values:Mr(a)})},V=async Q=>{o.mount=!0;const le=Q.target;let be=le.name,Fe=!0;const Ve=We(r,be),ke=dn=>{Fe=Number.isNaN(dn)||zd(dn)&&isNaN(dn.getTime())||bl(dn,We(a,be,dn))},Ye=yB(e.mode),Kt=yB(e.reValidateMode);if(Ve){let dn,ys;const Ea=le.type?gB(Ve._f):AX(Q),Ni=Q.type===Vj.BLUR||Q.type===Vj.FOCUS_OUT,pd=!tCe(Ve._f)&&!e.resolver&&!We(n.errors,be)&&!Ve._f.deps||sCe(Ni,We(n.touchedFields,be),n.isSubmitted,Kt,Ye),Si=xB(be,l,Ni);bn(a,be,Ea),Ni?(Ve._f.onBlur&&Ve._f.onBlur(Q),c&&c(0)):Ve._f.onChange&&Ve._f.onChange(Q);const ti=S(be,Ea,Ni),hc=!ai(ti)||Si;if(!Ni&&f.state.next({name:be,type:Q.type,values:Mr(a)}),pd)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?Ni&&p():Ni||p()),hc&&f.state.next({name:be,...Si?{}:ti});if(!Ni&&Si&&f.state.next({...n}),e.resolver){const{errors:ss}=await _([be]);if(ke(Ea),Fe){const lf=bB(n.errors,r,be),ul=bB(ss,r,lf.name||be);dn=ul.error,be=ul.name,ys=ai(ss)}}else y([be],!0),dn=(await jB(Ve,l.disabled,a,m,e.shouldUseNativeValidation))[be],y([be]),ke(Ea),Fe&&(dn?ys=!1:(d.isValid||h.isValid)&&(ys=await T(r,!0)));Fe&&(Ve._f.deps&&R(Ve._f.deps),P(be,ys,dn,ti))}},D=(Q,le)=>{if(We(n.errors,le)&&Q.focus)return Q.focus(),1},R=async(Q,le={})=>{let be,Fe;const Ve=Ky(Q);if(e.resolver){const ke=await g(vr(Q)?Q:Ve);be=ai(ke),Fe=Q?!Ve.some(Ye=>We(ke,Ye)):be}else Q?(Fe=(await Promise.all(Ve.map(async ke=>{const Ye=We(r,ke);return await T(Ye&&Ye._f?{[ke]:Ye}:Ye)}))).every(Boolean),!(!Fe&&!n.isValid)&&p()):Fe=be=await T(r);return f.state.next({...!Ro(Q)||(d.isValid||h.isValid)&&be!==n.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:be}:{},errors:n.errors}),le.shouldFocus&&!Fe&&Gy(r,D,Q?Ve:l.mount),Fe},W=Q=>{const le={...o.mount?a:i};return vr(Q)?le:Ro(Q)?We(le,Q):Q.map(be=>We(le,be))},J=(Q,le)=>({invalid:!!We((le||n).errors,Q),isDirty:!!We((le||n).dirtyFields,Q),error:We((le||n).errors,Q),isValidating:!!We(n.validatingFields,Q),isTouched:!!We((le||n).touchedFields,Q)}),oe=Q=>{Q&&Ky(Q).forEach(le=>Nr(n.errors,le)),f.state.next({errors:Q?n.errors:{}})},Ae=(Q,le,be)=>{const Fe=(We(r,Q,{_f:{}})._f||{}).ref,Ve=We(n.errors,Q)||{},{ref:ke,message:Ye,type:Kt,...dn}=Ve;bn(n.errors,Q,{...dn,...le,ref:Fe}),f.state.next({name:Q,errors:n.errors,isValid:!1}),be&&be.shouldFocus&&Fe&&Fe.focus&&Fe.focus()},z=(Q,le)=>Ha(Q)?f.state.subscribe({next:be=>"values"in be&&Q(I(void 0,le),be)}):I(Q,le,!0),ie=Q=>f.state.subscribe({next:le=>{rCe(Q.name,le.name,Q.exact)&&nCe(le,Q.formState||d,En,Q.reRenderRoot)&&Q.callback({values:{...a},...n,...le,defaultValues:i})}}).unsubscribe,ve=Q=>(o.mount=!0,h={...h,...Q.formState},ie({...Q,formState:h})),xe=(Q,le={})=>{for(const be of Q?Ky(Q):l.mount)l.mount.delete(be),l.array.delete(be),le.keepValue||(Nr(r,be),Nr(a,be)),!le.keepError&&Nr(n.errors,be),!le.keepDirty&&Nr(n.dirtyFields,be),!le.keepTouched&&Nr(n.touchedFields,be),!le.keepIsValidating&&Nr(n.validatingFields,be),!e.shouldUnregister&&!le.keepDefaultValue&&Nr(i,be);f.state.next({values:Mr(a)}),f.state.next({...n,...le.keepDirty?{isDirty:A()}:{}}),!le.keepIsValid&&p()},Be=({disabled:Q,name:le})=>{(Ii(Q)&&o.mount||Q||l.disabled.has(le))&&(Q?l.disabled.add(le):l.disabled.delete(le))},he=(Q,le={})=>{let be=We(r,Q);const Fe=Ii(le.disabled)||Ii(e.disabled);return bn(r,Q,{...be||{},_f:{...be&&be._f?be._f:{ref:{name:Q}},name:Q,mount:!0,...le}}),l.mount.add(Q),be?Be({disabled:Ii(le.disabled)?le.disabled:e.disabled,name:Q}):C(Q,!0,le.value),{...Fe?{disabled:le.disabled||e.disabled}:{},...e.progressive?{required:!!le.required,min:Kg(le.min),max:Kg(le.max),minLength:Kg(le.minLength),maxLength:Kg(le.maxLength),pattern:Kg(le.pattern)}:{},name:Q,onChange:V,onBlur:V,ref:Ve=>{if(Ve){he(Q,le),be=We(r,Q);const ke=vr(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,Ye=QTe(ke),Kt=be._f.refs||[];if(Ye?Kt.find(dn=>dn===ke):ke===be._f.ref)return;bn(r,Q,{_f:{...be._f,...Ye?{refs:[...Kt.filter(iA),ke,...Array.isArray(We(i,Q))?[{}]:[]],ref:{type:ke.type,name:Q}}:{ref:ke}}}),C(Q,!1,void 0,ke)}else be=We(r,Q,{}),be._f&&(be._f.mount=!1),(e.shouldUnregister||le.shouldUnregister)&&!(TX(l.array,Q)&&o.action)&&l.unMount.add(Q)}}},fe=()=>e.shouldFocusError&&Gy(r,D,l.mount),me=Q=>{Ii(Q)&&(f.state.next({disabled:Q}),Gy(r,(le,be)=>{const Fe=We(r,be);Fe&&(le.disabled=Fe._f.disabled||Q,Array.isArray(Fe._f.refs)&&Fe._f.refs.forEach(Ve=>{Ve.disabled=Fe._f.disabled||Q}))},0,!1))},ce=(Q,le)=>async be=>{let Fe;be&&(be.preventDefault&&be.preventDefault(),be.persist&&be.persist());let Ve=Mr(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:ke,values:Ye}=await _();n.errors=ke,Ve=Mr(Ye)}else await T(r);if(l.disabled.size)for(const ke of l.disabled)Nr(Ve,ke);if(Nr(n.errors,"root"),ai(n.errors)){f.state.next({errors:{}});try{await Q(Ve,be)}catch(ke){Fe=ke}}else le&&await le({...n.errors},be),fe(),setTimeout(fe);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ai(n.errors)&&!Fe,submitCount:n.submitCount+1,errors:n.errors}),Fe)throw Fe},Ke=(Q,le={})=>{We(r,Q)&&(vr(le.defaultValue)?U(Q,Mr(We(i,Q))):(U(Q,le.defaultValue),bn(i,Q,Mr(le.defaultValue))),le.keepTouched||Nr(n.touchedFields,Q),le.keepDirty||(Nr(n.dirtyFields,Q),n.isDirty=le.defaultValue?A(Q,Mr(We(i,Q))):A()),le.keepError||(Nr(n.errors,Q),d.isValid&&p()),f.state.next({...n}))},rt=(Q,le={})=>{const be=Q?Mr(Q):i,Fe=Mr(be),Ve=ai(Q),ke=Ve?i:Fe;if(le.keepDefaultValues||(i=be),!le.keepValues){if(le.keepDirtyValues){const Ye=new Set([...l.mount,...Object.keys(Hg(i,a))]);for(const Kt of Array.from(Ye))We(n.dirtyFields,Kt)?bn(ke,Kt,We(a,Kt)):U(Kt,We(ke,Kt))}else{if(O2&&vr(Q))for(const Ye of l.mount){const Kt=We(r,Ye);if(Kt&&Kt._f){const dn=Array.isArray(Kt._f.refs)?Kt._f.refs[0]:Kt._f.ref;if(Bj(dn)){const ys=dn.closest("form");if(ys){ys.reset();break}}}}if(le.keepFieldsRef)for(const Ye of l.mount)U(Ye,We(ke,Ye));else r={}}a=e.shouldUnregister?le.keepDefaultValues?Mr(i):{}:Mr(ke),f.array.next({values:{...ke}}),f.state.next({values:{...ke}})}l={mount:le.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!le.keepIsValid||!!le.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:le.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:le.keepDirty?n.isDirty:!!(le.keepDefaultValues&&!bl(Q,i)),isSubmitted:le.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:le.keepDirtyValues?le.keepDefaultValues&&a?Hg(i,a):n.dirtyFields:le.keepDefaultValues&&Q?Hg(i,Q):le.keepDirty?n.dirtyFields:{},touchedFields:le.keepTouched?n.touchedFields:{},errors:le.keepErrors?n.errors:{},isSubmitSuccessful:le.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},zt=(Q,le)=>rt(Ha(Q)?Q(a):Q,le),nn=(Q,le={})=>{const be=We(r,Q),Fe=be&&be._f;if(Fe){const Ve=Fe.refs?Fe.refs[0]:Fe.ref;Ve.focus&&(Ve.focus(),le.shouldSelect&&Ha(Ve.select)&&Ve.select())}},En=Q=>{n={...n,...Q}},on={control:{register:he,unregister:xe,getFieldState:J,handleSubmit:ce,setError:Ae,_subscribe:ie,_runSchema:_,_focusError:fe,_getWatch:I,_getDirty:A,_setValid:p,_setFieldArray:b,_setDisabledField:Be,_setErrors:w,_getFieldArray:k,_reset:rt,_resetDefaultValues:()=>Ha(e.defaultValues)&&e.defaultValues().then(Q=>{zt(Q,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:me,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return i},get _names(){return l},set _names(Q){l=Q},get _formState(){return n},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:ve,trigger:R,register:he,handleSubmit:ce,watch:z,setValue:U,getValues:W,reset:zt,resetField:Ke,clearErrors:oe,unregister:xe,setError:Ae,setFocus:nn,getFieldState:J};return{...on,formControl:on}}function sd(t={}){const e=$.useRef(void 0),n=$.useRef(void 0),[r,i]=$.useState({isDirty:!1,isValidating:!1,isLoading:Ha(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ha(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ha(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=lCe(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,$2(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),$.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),$.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),$.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),$.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),$.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),$.useEffect(()=>{t.values&&!bl(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),$.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=CX(r,a),e.current}const _B=(t,e,n)=>{if(t&&"reportValidity"in t){const r=We(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},$X=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?_B(r.ref,n,t):r.refs&&r.refs.forEach(i=>_B(i,n,t))}},cCe=(t,e)=>{e.shouldUseNativeValidation&&$X(t,e);const n={};for(const r in t){const i=We(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(uCe(e.names||Object.keys(t),r)){const o=Object.assign({},We(n,r));bn(o,"root",a),bn(n,r,o)}else bn(n,r,a)}return n},uCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var dCe=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=IX(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},id=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&$X({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:cCe(dCe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},hn;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(hn||(hn={}));var NB;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(NB||(NB={}));const ht=hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lc=t=>{switch(typeof t){case"undefined":return ht.undefined;case"string":return ht.string;case"number":return Number.isNaN(t)?ht.nan:ht.number;case"boolean":return ht.boolean;case"function":return ht.function;case"bigint":return ht.bigint;case"symbol":return ht.symbol;case"object":return Array.isArray(t)?ht.array:t===null?ht.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ht.promise:typeof Map<"u"&&t instanceof Map?ht.map:typeof Set<"u"&&t instanceof Set?ht.set:typeof Date<"u"&&t instanceof Date?ht.date:ht.object;default:return ht.unknown}},Me=hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Zl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Zl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Zl.create=t=>new Zl(t);const mP=(t,e)=>{let n;switch(t.code){case Me.invalid_type:t.received===ht.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hn.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:n=`Unrecognized key(s) in object: ${hn.joinValues(t.keys,", ")}`;break;case Me.invalid_union:n="Invalid input";break;case Me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hn.joinValues(t.options)}`;break;case Me.invalid_enum_value:n=`Invalid enum value. Expected ${hn.joinValues(t.options)}, received '${t.received}'`;break;case Me.invalid_arguments:n="Invalid function arguments";break;case Me.invalid_return_type:n="Invalid function return type";break;case Me.invalid_date:n="Invalid date";break;case Me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Me.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Me.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Me.custom:n="Invalid input";break;case Me.invalid_intersection_types:n="Intersection results could not be merged";break;case Me.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Me.not_finite:n="Number must be finite";break;default:n=e.defaultError,hn.assertNever(t)}return{message:n}};let hCe=mP;function fCe(){return hCe}const mCe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}};function Xe(t,e){const n=fCe(),r=mCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===mP?void 0:mP].filter(i=>!!i)});t.common.issues.push(r)}class qi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Lt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return qi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Lt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Lt=Object.freeze({status:"aborted"}),_y=t=>({status:"dirty",value:t}),_a=t=>({status:"valid",value:t}),SB=t=>t.status==="aborted",EB=t=>t.status==="dirty",np=t=>t.status==="valid",qj=t=>typeof Promise<"u"&&t instanceof Promise;var ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ft||(ft={}));class qu{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AB=(t,e)=>{if(np(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Zl(t.common.issues);return this._error=n,this._error}}};function Gt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class un{get description(){return this._def.description}_getType(e){return Lc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Lc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qi,ctx:{common:e.parent.common,data:e.data,parsedType:Lc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(qj(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lc(e)},i=this._parseSync({data:e,path:r.path,parent:r});return AB(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lc(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return np(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>np(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lc(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(qj(i)?i:Promise.resolve(i));return AB(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:Me.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new sp({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Eu.create(this,this._def)}nullable(){return ip.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ko.create(this)}promise(){return Gj.create(this,this._def)}or(e){return Hj.create([this,e],this._def)}and(e){return Kj.create(this,e,this._def)}transform(e){return new sp({...Gt(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new vP({...Gt(this._def),innerType:this,defaultValue:n,typeName:$t.ZodDefault})}brand(){return new LCe({typeName:$t.ZodBranded,type:this,...Gt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xP({...Gt(this._def),innerType:this,catchValue:n,typeName:$t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return B2.create(this,e)}readonly(){return bP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pCe=/^c[^\s-]{8,}$/i,gCe=/^[0-9a-z]+$/,yCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xCe=/^[a-z0-9_-]{21}$/i,bCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wCe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_Ce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let aA;const NCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ECe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ACe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",PCe=new RegExp(`^${FX}$`);function VX(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ICe(t){return new RegExp(`^${VX(t)}$`)}function kCe(t){let e=`${FX}T${VX(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function RCe(t,e){return!!((e==="v4"||!e)&&NCe.test(t)||(e==="v6"||!e)&&ECe.test(t))}function OCe(t,e){if(!bCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function DCe(t,e){return!!((e==="v4"||!e)&&SCe.test(t)||(e==="v6"||!e)&&ACe.test(t))}class lu extends un{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ht.string){const a=this._getOrReturnCtx(e);return Xe(a,{code:Me.invalid_type,expected:ht.string,received:a.parsedType}),Lt}const r=new qi;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Xe(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Xe(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")jCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"email",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")aA||(aA=new RegExp(_Ce,"u")),aA.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"emoji",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")vCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"uuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")xCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"nanoid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")pCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"cuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")gCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"cuid2",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")yCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"ulid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Xe(i,{validation:"url",code:Me.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"regex",code:Me.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?kCe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?PCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?ICe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?wCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"duration",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?RCe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"ip",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?OCe(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"jwt",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?DCe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"cidr",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?TCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"base64",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?CCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Xe(i,{validation:"base64url",code:Me.invalid_string,message:a.message}),r.dirty()):hn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Me.invalid_string,...ft.errToObj(r)})}_addCheck(e){return new lu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ft.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ft.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ft.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ft.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ft.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ft.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ft.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ft.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ft.errToObj(n)})}nonempty(e){return this.min(1,ft.errToObj(e))}trim(){return new lu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new lu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new lu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}lu.create=t=>new lu({checks:[],typeName:$t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Gt(t)});function MCe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Wv extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ht.number){const a=this._getOrReturnCtx(e);return Xe(a,{code:Me.invalid_type,expected:ht.number,received:a.parsedType}),Lt}let r;const i=new qi;for(const a of this._def.checks)a.kind==="int"?hn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?MCe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.not_finite,message:a.message}),i.dirty()):hn.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ft.toString(n))}setLimit(e,n,r,i){return new Wv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ft.toString(i)}]})}_addCheck(e){return new Wv({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ft.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Wv.create=t=>new Wv({checks:[],typeName:$t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class Hv extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ht.bigint)return this._getInvalidInput(e);let r;const i=new qi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):hn.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Xe(n,{code:Me.invalid_type,expected:ht.bigint,received:n.parsedType}),Lt}gte(e,n){return this.setLimit("min",e,!0,ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ft.toString(n))}setLimit(e,n,r,i){return new Hv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ft.toString(i)}]})}_addCheck(e){return new Hv({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hv.create=t=>new Hv({checks:[],typeName:$t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Gt(t)});class pP extends un{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ht.boolean){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.boolean,received:r.parsedType}),Lt}return _a(e.data)}}pP.create=t=>new pP({typeName:$t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class Wj extends un{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ht.date){const a=this._getOrReturnCtx(e);return Xe(a,{code:Me.invalid_type,expected:ht.date,received:a.parsedType}),Lt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Xe(a,{code:Me.invalid_date}),Lt}const r=new qi;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Xe(i,{code:Me.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):hn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Wj({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ft.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ft.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Wj.create=t=>new Wj({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$t.ZodDate,...Gt(t)});class TB extends un{_parse(e){if(this._getType(e)!==ht.symbol){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.symbol,received:r.parsedType}),Lt}return _a(e.data)}}TB.create=t=>new TB({typeName:$t.ZodSymbol,...Gt(t)});class CB extends un{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.undefined,received:r.parsedType}),Lt}return _a(e.data)}}CB.create=t=>new CB({typeName:$t.ZodUndefined,...Gt(t)});class PB extends un{_parse(e){if(this._getType(e)!==ht.null){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.null,received:r.parsedType}),Lt}return _a(e.data)}}PB.create=t=>new PB({typeName:$t.ZodNull,...Gt(t)});class IB extends un{constructor(){super(...arguments),this._any=!0}_parse(e){return _a(e.data)}}IB.create=t=>new IB({typeName:$t.ZodAny,...Gt(t)});class kB extends un{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _a(e.data)}}kB.create=t=>new kB({typeName:$t.ZodUnknown,...Gt(t)});class Wu extends un{_parse(e){const n=this._getOrReturnCtx(e);return Xe(n,{code:Me.invalid_type,expected:ht.never,received:n.parsedType}),Lt}}Wu.create=t=>new Wu({typeName:$t.ZodNever,...Gt(t)});class RB extends un{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.void,received:r.parsedType}),Lt}return _a(e.data)}}RB.create=t=>new RB({typeName:$t.ZodVoid,...Gt(t)});class Ko extends un{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ht.array)return Xe(n,{code:Me.invalid_type,expected:ht.array,received:n.parsedType}),Lt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Xe(n,{code:o?Me.too_big:Me.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Xe(n,{code:Me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Xe(n,{code:Me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new qu(n,o,n.path,l)))).then(o=>qi.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new qu(n,o,n.path,l)));return qi.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Ko({...this._def,minLength:{value:e,message:ft.toString(n)}})}max(e,n){return new Ko({...this._def,maxLength:{value:e,message:ft.toString(n)}})}length(e,n){return new Ko({...this._def,exactLength:{value:e,message:ft.toString(n)}})}nonempty(e){return this.min(1,e)}}Ko.create=(t,e)=>new Ko({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...Gt(e)});function Pf(t){if(t instanceof lr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Eu.create(Pf(r))}return new lr({...t._def,shape:()=>e})}else return t instanceof Ko?new Ko({...t._def,type:Pf(t.element)}):t instanceof Eu?Eu.create(Pf(t.unwrap())):t instanceof ip?ip.create(Pf(t.unwrap())):t instanceof Dh?Dh.create(t.items.map(e=>Pf(e))):t}class lr extends un{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ht.object){const u=this._getOrReturnCtx(e);return Xe(u,{code:Me.invalid_type,expected:ht.object,received:u.parsedType}),Lt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Wu&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new qu(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Wu){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Xe(i,{code:Me.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new qu(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>qi.mergeObjectSync(r,u)):qi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ft.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ft.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const n={};for(const r of hn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new lr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of hn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new lr({...this._def,shape:()=>n})}deepPartial(){return Pf(this)}partial(e){const n={};for(const r of hn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new lr({...this._def,shape:()=>n})}required(e){const n={};for(const r of hn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Eu;)a=a._def.innerType;n[r]=a}return new lr({...this._def,shape:()=>n})}keyof(){return BX(hn.objectKeys(this.shape))}}lr.create=(t,e)=>new lr({shape:()=>t,unknownKeys:"strip",catchall:Wu.create(),typeName:$t.ZodObject,...Gt(e)});lr.strictCreate=(t,e)=>new lr({shape:()=>t,unknownKeys:"strict",catchall:Wu.create(),typeName:$t.ZodObject,...Gt(e)});lr.lazycreate=(t,e)=>new lr({shape:t,unknownKeys:"strip",catchall:Wu.create(),typeName:$t.ZodObject,...Gt(e)});class Hj extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Zl(l.ctx.common.issues));return Xe(n,{code:Me.invalid_union,unionErrors:o}),Lt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Zl(c));return Xe(n,{code:Me.invalid_union,unionErrors:l}),Lt}}get options(){return this._def.options}}Hj.create=(t,e)=>new Hj({options:t,typeName:$t.ZodUnion,...Gt(e)});function gP(t,e){const n=Lc(t),r=Lc(e);if(t===e)return{valid:!0,data:t};if(n===ht.object&&r===ht.object){const i=hn.objectKeys(e),a=hn.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=gP(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===ht.array&&r===ht.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=gP(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ht.date&&r===ht.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Kj extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(SB(a)||SB(o))return Lt;const l=gP(a.value,o.value);return l.valid?((EB(a)||EB(o))&&n.dirty(),{status:n.value,value:l.data}):(Xe(r,{code:Me.invalid_intersection_types}),Lt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Kj.create=(t,e,n)=>new Kj({left:t,right:e,typeName:$t.ZodIntersection,...Gt(n)});class Dh extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.array)return Xe(r,{code:Me.invalid_type,expected:ht.array,received:r.parsedType}),Lt;if(r.data.length<this._def.items.length)return Xe(r,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Lt;!this._def.rest&&r.data.length>this._def.items.length&&(Xe(r,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new qu(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>qi.mergeArray(n,o)):qi.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Dh({...this._def,rest:e})}}Dh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dh({items:t,typeName:$t.ZodTuple,rest:null,...Gt(e)})};class OB extends un{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.map)return Xe(r,{code:Me.invalid_type,expected:ht.map,received:r.parsedType}),Lt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new qu(r,l,r.path,[u,"key"])),value:a._parse(new qu(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Lt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Lt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}OB.create=(t,e,n)=>new OB({valueType:e,keyType:t,typeName:$t.ZodMap,...Gt(n)});class Kv extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.set)return Xe(r,{code:Me.invalid_type,expected:ht.set,received:r.parsedType}),Lt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Xe(r,{code:Me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Xe(r,{code:Me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Lt;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new qu(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Kv({...this._def,minSize:{value:e,message:ft.toString(n)}})}max(e,n){return new Kv({...this._def,maxSize:{value:e,message:ft.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Kv.create=(t,e)=>new Kv({valueType:t,minSize:null,maxSize:null,typeName:$t.ZodSet,...Gt(e)});class DB extends un{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}DB.create=(t,e)=>new DB({getter:t,typeName:$t.ZodLazy,...Gt(e)});class yP extends un{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Xe(n,{received:n.data,code:Me.invalid_literal,expected:this._def.value}),Lt}return{status:"valid",value:e.data}}get value(){return this._def.value}}yP.create=(t,e)=>new yP({value:t,typeName:$t.ZodLiteral,...Gt(e)});function BX(t,e){return new rp({values:t,typeName:$t.ZodEnum,...Gt(e)})}class rp extends un{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Xe(n,{expected:hn.joinValues(r),received:n.parsedType,code:Me.invalid_type}),Lt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Xe(n,{received:n.data,code:Me.invalid_enum_value,options:r}),Lt}return _a(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return rp.create(e,{...this._def,...n})}exclude(e,n=this._def){return rp.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}rp.create=BX;class MB extends un{_parse(e){const n=hn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ht.string&&r.parsedType!==ht.number){const i=hn.objectValues(n);return Xe(r,{expected:hn.joinValues(i),received:r.parsedType,code:Me.invalid_type}),Lt}if(this._cache||(this._cache=new Set(hn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=hn.objectValues(n);return Xe(r,{received:r.data,code:Me.invalid_enum_value,options:i}),Lt}return _a(e.data)}get enum(){return this._def.values}}MB.create=(t,e)=>new MB({values:t,typeName:$t.ZodNativeEnum,...Gt(e)});class Gj extends un{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ht.promise&&n.common.async===!1)return Xe(n,{code:Me.invalid_type,expected:ht.promise,received:n.parsedType}),Lt;const r=n.parsedType===ht.promise?n.data:Promise.resolve(n.data);return _a(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Gj.create=(t,e)=>new Gj({type:t,typeName:$t.ZodPromise,...Gt(e)});class sp extends un{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Xe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Lt;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Lt:c.status==="dirty"||n.value==="dirty"?_y(c.value):c});{if(n.value==="aborted")return Lt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Lt:l.status==="dirty"||n.value==="dirty"?_y(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Lt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Lt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!np(o))return Lt;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>np(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):Lt);hn.assertNever(i)}}sp.create=(t,e,n)=>new sp({schema:t,typeName:$t.ZodEffects,effect:e,...Gt(n)});sp.createWithPreprocess=(t,e,n)=>new sp({schema:e,effect:{type:"preprocess",transform:t},typeName:$t.ZodEffects,...Gt(n)});class Eu extends un{_parse(e){return this._getType(e)===ht.undefined?_a(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Eu.create=(t,e)=>new Eu({innerType:t,typeName:$t.ZodOptional,...Gt(e)});class ip extends un{_parse(e){return this._getType(e)===ht.null?_a(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ip.create=(t,e)=>new ip({innerType:t,typeName:$t.ZodNullable,...Gt(e)});class vP extends un{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ht.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}vP.create=(t,e)=>new vP({innerType:t,typeName:$t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Gt(e)});class xP extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return qj(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Zl(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xP.create=(t,e)=>new xP({innerType:t,typeName:$t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Gt(e)});class LB extends un{_parse(e){if(this._getType(e)!==ht.nan){const r=this._getOrReturnCtx(e);return Xe(r,{code:Me.invalid_type,expected:ht.nan,received:r.parsedType}),Lt}return{status:"valid",value:e.data}}}LB.create=t=>new LB({typeName:$t.ZodNaN,...Gt(t)});class LCe extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class B2 extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Lt:a.status==="dirty"?(n.dirty(),_y(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Lt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new B2({in:e,out:n,typeName:$t.ZodPipeline})}}class bP extends un{_parse(e){const n=this._def.innerType._parse(e),r=i=>(np(i)&&(i.value=Object.freeze(i.value)),i);return qj(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}bP.create=(t,e)=>new bP({innerType:t,typeName:$t.ZodReadonly,...Gt(e)});lr.lazycreate;var $t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($t||($t={}));const Ge=lu.create,$B=pP.create;Wu.create;Ko.create;const ad=lr.create;lr.strictCreate;Hj.create;Kj.create;Dh.create;const UX=yP.create,zX=rp.create;Gj.create;Eu.create;ip.create;var $Ce="Label",qX=j.forwardRef((t,e)=>s.jsx(st.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qX.displayName=$Ce;var WX=qX;const FCe=Gh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=j.forwardRef(({className:t,...e},n)=>s.jsx(WX,{ref:n,className:_e(FCe(),t),...e}));X.displayName=WX.displayName;function rg({children:t,title:e,subtitle:n,visualContent:r}){return s.jsxs("div",{className:"min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 overflow-hidden bg-background",children:[s.jsxs("div",{className:"hidden lg:flex relative flex-col justify-between p-12 bg-[#0F172A] text-white overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid-pattern.svg')] opacity-10"}),s.jsx("div",{className:"absolute -left-[20%] -top-[20%] w-[60%] h-[60%] bg-blue-600/20 rounded-full blur-[120px]"}),s.jsx("div",{className:"absolute -right-[20%] -bottom-[20%] w-[60%] h-[60%] bg-indigo-600/20 rounded-full blur-[120px]"})]}),s.jsx("div",{className:"relative z-10",children:s.jsx(Fv,{variant:"full",size:"lg",className:"text-white [&_span]:text-white"})}),s.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center",children:s.jsx(Ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-full max-w-md",children:r})}),s.jsx("div",{className:"relative z-10 space-y-4",children:s.jsxs("blockquote",{className:"space-y-2",children:[s.jsx("p",{className:"text-lg font-medium text-slate-200 leading-relaxed",children:`"ZedBooks has completely transformed how we manage our organization's finances. It's not just a ledger; it's peace of mind."`}),s.jsx("footer",{className:"text-sm text-slate-400",children:" Sarah M., Financial Director"})]})})]}),s.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 sm:p-12 lg:p-24 bg-background",children:[s.jsx("div",{className:"lg:hidden absolute top-6 left-6",children:s.jsx(Fv,{variant:"full",size:"md"})}),s.jsxs(Ur.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-[440px] space-y-8",children:[s.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:e}),s.jsx("p",{className:"text-muted-foreground",children:n})]}),s.jsx("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl",children:t})]}),s.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-muted-foreground/50",children:s.jsx(n2,{})})]})]})}const VCe=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[s.jsxs(Ur.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.8},className:"absolute top-1/4 -left-12 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl w-64 shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:s.jsx(Gw,{className:"h-5 w-5 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-300",children:"Payroll Status"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:"Processed Successfully"})]})]}),s.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full w-full bg-emerald-500"})})]}),s.jsxs(Ur.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.8},className:"bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 p-6 rounded-2xl w-full max-w-sm shadow-2xl relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-400",children:"Total Revenue"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"K 245,000"})]}),s.jsx("div",{className:"text-emerald-400 text-sm font-medium",children:"+12.5%"})]}),s.jsx("div",{className:"flex items-end gap-2 h-24",children:[40,65,50,80,55,90,75].map((t,e)=>s.jsx("div",{className:"flex-1 bg-blue-500/20 rounded-t-sm relative overflow-hidden group",children:s.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.8+e*.1,duration:1},className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 w-full"})},e))})]})]}),BCe=ad({email:Ge().email("Invalid email address"),password:Ge().min(6,"Password must be at least 6 characters")});function FB({onForgotPassword:t,onSignup:e,onLoginSuccess:n}){const[r,i]=j.useState(!1),{register:a,handleSubmit:o,formState:{errors:l}}=sd({resolver:id(BCe)}),c=async u=>{i(!0);try{await Ps.signIn(u.email,u.password),G.success("Welcome back!"),n()}catch(d){const h=d instanceof Error?d.message:"Failed to log in";G.error(h)}finally{i(!1)}};return s.jsx(rg,{title:"Welcome back",subtitle:"Sign in to continue to your dashboard",visualContent:s.jsx(VCe,{}),children:s.jsxs("form",{onSubmit:o(c),className:"space-y-5 p-1",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...a("email")})]}),l.email&&s.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(X,{htmlFor:"password",children:"Password"}),s.jsx("button",{type:"button",onClick:t,className:"text-sm text-primary hover:underline font-medium",children:"Forgot Password?"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"password",type:"password",placeholder:"",className:"pl-10",...a("password")})]}),l.password&&s.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),s.jsx(K,{type:"submit",className:"w-full",size:"lg",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(K,{variant:"outline",disabled:!0,className:"w-full",children:"Google"}),s.jsx(K,{variant:"outline",disabled:!0,className:"w-full",children:"Microsoft"})]}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",s.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}function U2(t){const e=j.useRef({value:t,previous:t});return j.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var UCe=[" ","Enter","ArrowUp","ArrowDown"],zCe=[" ","Enter"],Mh="Select",[vS,xS,qCe]=gN(Mh),[sg,Gtt]=ps(Mh,[qCe,qp]),bS=qp(),[WCe,od]=sg(Mh),[HCe,KCe]=sg(Mh),HX=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:v}=t,p=bS(e),[y,b]=j.useState(null),[x,w]=j.useState(null),[C,S]=j.useState(!1),P=lb(u),[_,g]=lo({prop:r,defaultProp:i??!1,onChange:a,caller:Mh}),[T,E]=lo({prop:o,defaultProp:l,onChange:c,caller:Mh}),A=j.useRef(null),I=y?v||!!y.closest("form"):!0,[k,L]=j.useState(new Set),B=Array.from(k).map(U=>U.props.value).join(";");return s.jsx(pR,{...p,children:s.jsxs(WCe,{required:m,scope:e,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:ca(),value:T,onValueChange:E,open:_,onOpenChange:g,dir:P,triggerPointerDownPosRef:A,disabled:f,children:[s.jsx(vS.Provider,{scope:e,children:s.jsx(HCe,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(U=>{L(V=>new Set(V).add(U))},[]),onNativeOptionRemove:j.useCallback(U=>{L(V=>{const D=new Set(V);return D.delete(U),D})},[]),children:n})}),I?s.jsxs(gZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:T,onChange:U=>E(U.target.value),disabled:f,form:v,children:[T===void 0?s.jsx("option",{value:""}):null,Array.from(k)]},B):null]})})};HX.displayName=Mh;var KX="SelectTrigger",GX=j.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=bS(n),o=od(KX,n),l=o.disabled||r,c=Ft(e,o.onTriggerChange),u=xS(n),d=j.useRef("touch"),[h,f,m]=vZ(p=>{const y=u().filter(w=>!w.disabled),b=y.find(w=>w.value===o.value),x=xZ(y,p,b);x!==void 0&&o.onValueChange(x.value)}),v=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(gR,{asChild:!0,...a,children:s.jsx(st.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":yZ(o.value)?"":void 0,...i,ref:c,onClick:$e(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:$e(i.onPointerDown,p=>{d.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:$e(i.onKeyDown,p=>{const y=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(y&&p.key===" ")&&UCe.includes(p.key)&&(v(),p.preventDefault())})})})});GX.displayName=KX;var YX="SelectValue",QX=j.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=t,c=od(YX,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Ft(e,c.onValueNodeChange);return mr(()=>{u(d)},[u,d]),s.jsx(st.span,{...l,ref:h,style:{pointerEvents:"none"},children:yZ(c.value)?s.jsx(s.Fragment,{children:o}):a})});QX.displayName=YX;var GCe="SelectIcon",XX=j.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(st.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});XX.displayName=GCe;var YCe="SelectPortal",ZX=t=>s.jsx(Vx,{asChild:!0,...t});ZX.displayName=YCe;var Lh="SelectContent",JX=j.forwardRef((t,e)=>{const n=od(Lh,t.__scopeSelect),[r,i]=j.useState();if(mr(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Hh.createPortal(s.jsx(eZ,{scope:t.__scopeSelect,children:s.jsx(vS.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(tZ,{...t,ref:e})});JX.displayName=Lh;var Da=10,[eZ,ld]=sg(Lh),QCe="SelectContentImpl",XCe=vh("SelectContent.RemoveScroll"),tZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:y,...b}=t,x=od(Lh,n),[w,C]=j.useState(null),[S,P]=j.useState(null),_=Ft(e,xe=>C(xe)),[g,T]=j.useState(null),[E,A]=j.useState(null),I=xS(n),[k,L]=j.useState(!1),B=j.useRef(!1);j.useEffect(()=>{if(w)return RO(w)},[w]),kO();const U=j.useCallback(xe=>{const[Be,...he]=I().map(ce=>ce.ref.current),[fe]=he.slice(-1),me=document.activeElement;for(const ce of xe)if(ce===me||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===Be&&S&&(S.scrollTop=0),ce===fe&&S&&(S.scrollTop=S.scrollHeight),ce==null||ce.focus(),document.activeElement!==me))return},[I,S]),V=j.useCallback(()=>U([g,w]),[U,g,w]);j.useEffect(()=>{k&&V()},[k,V]);const{onOpenChange:D,triggerPointerDownPosRef:R}=x;j.useEffect(()=>{if(w){let xe={x:0,y:0};const Be=fe=>{var me,ce;xe={x:Math.abs(Math.round(fe.pageX)-(((me=R.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((ce=R.current)==null?void 0:ce.y)??0))}},he=fe=>{xe.x<=10&&xe.y<=10?fe.preventDefault():w.contains(fe.target)||D(!1),document.removeEventListener("pointermove",Be),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",Be),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Be),document.removeEventListener("pointerup",he,{capture:!0})}}},[w,D,R]),j.useEffect(()=>{const xe=()=>D(!1);return window.addEventListener("blur",xe),window.addEventListener("resize",xe),()=>{window.removeEventListener("blur",xe),window.removeEventListener("resize",xe)}},[D]);const[W,J]=vZ(xe=>{const Be=I().filter(me=>!me.disabled),he=Be.find(me=>me.ref.current===document.activeElement),fe=xZ(Be,xe,he);fe&&setTimeout(()=>fe.ref.current.focus())}),oe=j.useCallback((xe,Be,he)=>{const fe=!B.current&&!he;(x.value!==void 0&&x.value===Be||fe)&&(T(xe),fe&&(B.current=!0))},[x.value]),Ae=j.useCallback(()=>w==null?void 0:w.focus(),[w]),z=j.useCallback((xe,Be,he)=>{const fe=!B.current&&!he;(x.value!==void 0&&x.value===Be||fe)&&A(xe)},[x.value]),ie=r==="popper"?wP:nZ,ve=ie===wP?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:y}:{};return s.jsx(eZ,{scope:n,content:w,viewport:S,onViewportChange:P,itemRefCallback:oe,selectedItem:g,onItemLeave:Ae,itemTextRefCallback:z,focusSelectedItem:V,selectedItemText:E,position:r,isPositioned:k,searchRef:W,children:s.jsx(tS,{as:XCe,allowPinchZoom:!0,children:s.jsx(ZN,{asChild:!0,trapped:x.open,onMountAutoFocus:xe=>{xe.preventDefault()},onUnmountAutoFocus:$e(i,xe=>{var Be;(Be=x.trigger)==null||Be.focus({preventScroll:!0}),xe.preventDefault()}),children:s.jsx($p,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:xe=>xe.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(ie,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:xe=>xe.preventDefault(),...b,...ve,onPlaced:()=>L(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:$e(b.onKeyDown,xe=>{const Be=xe.ctrlKey||xe.altKey||xe.metaKey;if(xe.key==="Tab"&&xe.preventDefault(),!Be&&xe.key.length===1&&J(xe.key),["ArrowUp","ArrowDown","Home","End"].includes(xe.key)){let fe=I().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(xe.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(xe.key)){const me=xe.target,ce=fe.indexOf(me);fe=fe.slice(ce+1)}setTimeout(()=>U(fe)),xe.preventDefault()}})})})})})})});tZ.displayName=QCe;var ZCe="SelectItemAlignedPosition",nZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=od(Lh,n),o=ld(Lh,n),[l,c]=j.useState(null),[u,d]=j.useState(null),h=Ft(e,_=>d(_)),f=xS(n),m=j.useRef(!1),v=j.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:b,focusSelectedItem:x}=o,w=j.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&p&&y&&b){const _=a.trigger.getBoundingClientRect(),g=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(a.dir!=="rtl"){const me=E.left-g.left,ce=T.left-me,Ke=_.left-ce,rt=_.width+Ke,zt=Math.max(rt,g.width),nn=window.innerWidth-Da,En=zC(ce,[Da,Math.max(Da,nn-zt)]);l.style.minWidth=rt+"px",l.style.left=En+"px"}else{const me=g.right-E.right,ce=window.innerWidth-T.right-me,Ke=window.innerWidth-_.right-ce,rt=_.width+Ke,zt=Math.max(rt,g.width),nn=window.innerWidth-Da,En=zC(ce,[Da,Math.max(Da,nn-zt)]);l.style.minWidth=rt+"px",l.style.right=En+"px"}const A=f(),I=window.innerHeight-Da*2,k=p.scrollHeight,L=window.getComputedStyle(u),B=parseInt(L.borderTopWidth,10),U=parseInt(L.paddingTop,10),V=parseInt(L.borderBottomWidth,10),D=parseInt(L.paddingBottom,10),R=B+U+k+D+V,W=Math.min(y.offsetHeight*5,R),J=window.getComputedStyle(p),oe=parseInt(J.paddingTop,10),Ae=parseInt(J.paddingBottom,10),z=_.top+_.height/2-Da,ie=I-z,ve=y.offsetHeight/2,xe=y.offsetTop+ve,Be=B+U+xe,he=R-Be;if(Be<=z){const me=A.length>0&&y===A[A.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-p.offsetTop-p.offsetHeight,Ke=Math.max(ie,ve+(me?Ae:0)+ce+V),rt=Be+Ke;l.style.height=rt+"px"}else{const me=A.length>0&&y===A[0].ref.current;l.style.top="0px";const Ke=Math.max(z,B+p.offsetTop+(me?oe:0)+ve)+he;l.style.height=Ke+"px",p.scrollTop=Be-z+p.offsetTop}l.style.margin=`${Da}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,p,y,b,a.dir,r]);mr(()=>w(),[w]);const[C,S]=j.useState();mr(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const P=j.useCallback(_=>{_&&v.current===!0&&(w(),x==null||x(),v.current=!1)},[w,x]);return s.jsx(ePe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:P,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(st.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nZ.displayName=ZCe;var JCe="SelectPopperPosition",wP=j.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Da,...a}=t,o=bS(n);return s.jsx(yR,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wP.displayName=JCe;var[ePe,z2]=sg(Lh,{}),jP="SelectViewport",rZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=ld(jP,n),o=z2(jP,n),l=Ft(e,a.onViewportChange),c=j.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(vS.Slot,{scope:n,children:s.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$e(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-Da*2,p=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),b=Math.max(p,y);if(b<v){const x=b+m,w=Math.min(v,x),C=x-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});rZ.displayName=jP;var sZ="SelectGroup",[tPe,nPe]=sg(sZ),rPe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=ca();return s.jsx(tPe,{scope:n,id:i,children:s.jsx(st.div,{role:"group","aria-labelledby":i,...r,ref:e})})});rPe.displayName=sZ;var iZ="SelectLabel",aZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=nPe(iZ,n);return s.jsx(st.div,{id:i.id,...r,ref:e})});aZ.displayName=iZ;var Yj="SelectItem",[sPe,oZ]=sg(Yj),lZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,l=od(Yj,n),c=ld(Yj,n),u=l.value===r,[d,h]=j.useState(a??""),[f,m]=j.useState(!1),v=Ft(e,x=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,x,r,i)}),p=ca(),y=j.useRef("touch"),b=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(sPe,{scope:n,value:r,disabled:i,textId:p,isSelected:u,onItemTextChange:j.useCallback(x=>{h(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(vS.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:s.jsx(st.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:$e(o.onFocus,()=>m(!0)),onBlur:$e(o.onBlur,()=>m(!1)),onClick:$e(o.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:$e(o.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:$e(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:$e(o.onPointerMove,x=>{var w;y.current=x.pointerType,i?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:$e(o.onKeyDown,x=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(zCe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});lZ.displayName=Yj;var Ny="SelectItemText",cZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=od(Ny,n),l=ld(Ny,n),c=oZ(Ny,n),u=KCe(Ny,n),[d,h]=j.useState(null),f=Ft(e,b=>h(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=j.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=u;return mr(()=>(p(v),()=>y(v)),[p,y,v]),s.jsxs(s.Fragment,{children:[s.jsx(st.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hh.createPortal(a.children,o.valueNode):null]})});cZ.displayName=Ny;var uZ="SelectItemIndicator",dZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return oZ(uZ,n).isSelected?s.jsx(st.span,{"aria-hidden":!0,...r,ref:e}):null});dZ.displayName=uZ;var _P="SelectScrollUpButton",hZ=j.forwardRef((t,e)=>{const n=ld(_P,t.__scopeSelect),r=z2(_P,t.__scopeSelect),[i,a]=j.useState(!1),o=Ft(e,r.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(mZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});hZ.displayName=_P;var NP="SelectScrollDownButton",fZ=j.forwardRef((t,e)=>{const n=ld(NP,t.__scopeSelect),r=z2(NP,t.__scopeSelect),[i,a]=j.useState(!1),o=Ft(e,r.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(mZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});fZ.displayName=NP;var mZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=ld("SelectScrollButton",n),o=j.useRef(null),l=xS(n),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),mr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(st.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:$e(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:$e(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:$e(i.onPointerLeave,()=>{c()})})}),iPe="SelectSeparator",pZ=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(st.div,{"aria-hidden":!0,...r,ref:e})});pZ.displayName=iPe;var SP="SelectArrow",aPe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=bS(n),a=od(SP,n),o=ld(SP,n);return a.open&&o.position==="popper"?s.jsx(vR,{...i,...r,ref:e}):null});aPe.displayName=SP;var oPe="SelectBubbleInput",gZ=j.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=j.useRef(null),a=Ft(r,i),o=U2(e);return j.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),s.jsx(st.select,{...n,style:{...L9,...n.style},ref:a,defaultValue:e})});gZ.displayName=oPe;function yZ(t){return t===""||t===void 0}function vZ(t){const e=hr(t),n=j.useRef(""),r=j.useRef(0),i=j.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function xZ(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=lPe(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function lPe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cPe=HX,bZ=GX,uPe=QX,dPe=XX,hPe=ZX,wZ=JX,fPe=rZ,jZ=aZ,_Z=lZ,mPe=cZ,pPe=dZ,NZ=hZ,SZ=fZ,EZ=pZ;const AZ="__lovable_empty__",gt=({onValueChange:t,...e})=>s.jsx(cPe,{...e,onValueChange:n=>{t==null||t(n===AZ?"":n)}}),yt=uPe,mt=j.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(bZ,{ref:r,className:_e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(dPe,{asChild:!0,children:s.jsx(eR,{className:"h-4 w-4 opacity-50"})})]}));mt.displayName=bZ.displayName;const TZ=j.forwardRef(({className:t,...e},n)=>s.jsx(NZ,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(Hoe,{className:"h-4 w-4"})}));TZ.displayName=NZ.displayName;const CZ=j.forwardRef(({className:t,...e},n)=>s.jsx(SZ,{ref:n,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(eR,{className:"h-4 w-4"})}));CZ.displayName=SZ.displayName;const pt=j.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(hPe,{children:s.jsxs(wZ,{ref:i,className:_e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(TZ,{}),s.jsx(fPe,{className:_e("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(CZ,{})]})}));pt.displayName=wZ.displayName;const gPe=j.forwardRef(({className:t,...e},n)=>s.jsx(jZ,{ref:n,className:_e("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));gPe.displayName=jZ.displayName;const ye=j.forwardRef(({className:t,children:e,value:n,...r},i)=>s.jsxs(_Z,{ref:i,value:n===""?AZ:n,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(pPe,{children:s.jsx(Ux,{className:"h-4 w-4"})})}),s.jsx(mPe,{children:e})]}));ye.displayName=_Z.displayName;const yPe=j.forwardRef(({className:t,...e},n)=>s.jsx(EZ,{ref:n,className:_e("-mx-1 my-1 h-px bg-muted",t),...e}));yPe.displayName=EZ.displayName;const vPe=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[s.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"absolute top-20 right-10 bg-white p-4 rounded-xl shadow-2xl flex items-center gap-4 z-20",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:"+"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-800",children:"New Customer"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Just joined your network"})]})]}),s.jsxs("div",{className:"w-full max-w-sm bg-slate-800/50 backdrop-blur-md border border-slate-700/50 p-6 rounded-2xl relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Monthly Growth"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"Revenue vs Expenses"})]}),s.jsxs("div",{className:"bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold flex items-center gap-1",children:[s.jsx(i8,{className:"h-3 w-3"})," 24%"]})]}),s.jsx("div",{className:"h-32 flex items-end justify-between gap-2",children:[30,45,35,60,50,75,65,90].map((t,e)=>s.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.5+e*.1,duration:.8,ease:"easeOut"},className:"w-full bg-gradient-to-t from-blue-600 to-indigo-400 rounded-t-sm opacity-80 hover:opacity-100 transition-opacity"},e))})]})]}),xPe=ad({organizationName:Ge().min(1,"Organization name is required"),email:Ge().email("Invalid email address"),password:Ge().min(6,"Password must be at least 6 characters"),phone:Ge().min(10,"Phone number must be at least 10 digits").regex(/^\+?[0-9]+$/,"Invalid phone number"),organizationType:zX(["business","non_profit"]),taxClassification:Ge().min(1,"Tax classification is required"),tpin:Ge().regex(/^\d{10}$/,"TPIN must be exactly 10 digits")});function bPe({onLogin:t,onSignupSuccess:e}){const[n,r]=j.useState(!1),{register:i,handleSubmit:a,setValue:o,watch:l,formState:{errors:c}}=sd({resolver:id(xPe),defaultValues:{organizationType:"business",taxClassification:""}}),u=l("organizationType"),d=async h=>{r(!0);try{await Ps.signUp({email:h.email,password:h.password,organizationName:h.organizationName,phone:h.phone,organizationType:h.organizationType,taxClassification:h.taxClassification,tpin:h.tpin}),G.success("Account created successfully!"),e(h.email)}catch(f){const m=f instanceof Error?f.message:"Failed to create account";G.error(m)}finally{r(!1)}};return s.jsx(rg,{title:"Create Account",subtitle:"Start your journey with ZedBooks today",visualContent:s.jsx(vPe,{}),children:s.jsxs("form",{onSubmit:a(d),className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"orgName",children:"Organization Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"orgName",placeholder:"e.g. Acme Corp",className:"pl-10",...i("organizationName")})]}),c.organizationName&&s.jsx("p",{className:"text-sm text-destructive",children:c.organizationName.message})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Organization Type"}),s.jsxs(gt,{onValueChange:h=>{o("organizationType",h),o("taxClassification","")},defaultValue:"business",children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select type"})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"business",children:"Business"}),s.jsx(ye,{value:"non_profit",children:"Non-profit"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Tax Classification"}),s.jsxs(gt,{onValueChange:h=>o("taxClassification",h),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select class"})}),s.jsx(pt,{children:u==="business"?s.jsxs(s.Fragment,{children:[s.jsx(ye,{value:"vat_registered",children:"VAT Registered"}),s.jsx(ye,{value:"turnover_tax",children:"Turnover Tax"}),s.jsx(ye,{value:"non_vat",children:"Non-VAT"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ye,{value:"tax_exempt",children:"Tax Exempt"}),s.jsx(ye,{value:"grant_funded",children:"Grant Funded"}),s.jsx(ye,{value:"charitable",children:"Charitable"})]})})]}),c.taxClassification&&s.jsx("p",{className:"text-sm text-destructive",children:c.taxClassification.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"TPIN (10 digits)"}),s.jsxs("div",{className:"relative",children:[s.jsx(h8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"1234567890",className:"pl-10",...i("tpin"),onChange:h=>{const f=h.target.value.replace(/\D/g,"").slice(0,10);o("tpin",f)}})]}),c.tpin&&s.jsx("p",{className:"text-sm text-destructive",children:c.tpin.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...i("email")})]}),c.email&&s.jsx("p",{className:"text-sm text-destructive",children:c.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"phone",children:"Phone"}),s.jsxs("div",{className:"relative",children:[s.jsx(f8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"phone",placeholder:"+260...",className:"pl-10",...i("phone")})]}),c.phone&&s.jsx("p",{className:"text-sm text-destructive",children:c.phone.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"password",type:"password",placeholder:"",className:"pl-10",...i("password")})]}),c.password&&s.jsx("p",{className:"text-sm text-destructive",children:c.password.message})]}),s.jsx(K,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["Already have an account?"," ",s.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Sign in"})]})]})})}const wPe=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[s.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 p-8 rounded-full shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),s.jsx(rR,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),s.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Secure Account Recovery"}),s.jsx("p",{className:"text-sm text-slate-400",children:"We use industry-standard encryption to verify your identity and protect your data."})]})]}),jPe=ad({email:Ge().email("Invalid email address")});function _Pe({onLogin:t}){const[e,n]=j.useState(!1),{register:r,handleSubmit:i,formState:{errors:a},reset:o}=sd({resolver:id(jPe)}),l=async c=>{n(!0);try{await Ps.sendResetPasswordEmail(c.email),G.success("Reset link sent! Please check your inbox."),o()}catch(u){const d=u instanceof Error?u.message:"Failed to send reset link";G.error(d)}finally{n(!1)}};return s.jsx(rg,{title:"Forgot Password?",subtitle:"No worries, we'll send you reset instructions.",visualContent:s.jsx(wPe,{}),children:s.jsxs("form",{onSubmit:i(l),className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...r("email")})]}),a.email&&s.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),s.jsx(K,{type:"submit",className:"w-full",size:"lg",disabled:e,children:e?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Link..."]}):"Send Reset Link"}),s.jsx("div",{className:"text-center text-sm",children:s.jsx("button",{type:"button",onClick:t,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const NPe=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[s.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-emerald-900/40 backdrop-blur-xl border border-emerald-500/30 p-8 rounded-full shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl animate-pulse"}),s.jsx(rR,{className:"h-24 w-24 text-emerald-400 relative z-10"})]}),s.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reset Credentials"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Create a strong password to ensure your organization's data remains secure."})]})]}),SPe=ad({password:Ge().min(6,"Password must be at least 6 characters"),confirmPassword:Ge().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function EPe({actionCode:t,onLogin:e}){const[n,r]=j.useState(!1),{register:i,handleSubmit:a,formState:{errors:o}}=sd({resolver:id(SPe)}),l=async c=>{r(!0);try{await Ipe(Sj,t,c.password),G.success("Password updated successfully!"),e()}catch(u){const d=u instanceof Error?u.message:"Failed to update password";G.error(d)}finally{r(!1)}};return s.jsx(rg,{title:"Set New Password",subtitle:"Enter your new password below.",visualContent:s.jsx(NPe,{}),children:s.jsxs("form",{onSubmit:a(l),className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"password",type:"password",placeholder:"",className:"pl-10",...i("password")})]}),o.password&&s.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{id:"confirmPassword",type:"password",placeholder:"",className:"pl-10",...i("confirmPassword")})]}),o.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:o.confirmPassword.message})]}),s.jsx(K,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"}),s.jsx("div",{className:"text-center text-sm",children:s.jsx("button",{type:"button",onClick:e,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const APe=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[s.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-blue-900/40 backdrop-blur-xl border border-blue-500/30 p-8 rounded-full shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),s.jsx(Xu,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),s.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Check Your Inbox"}),s.jsx("p",{className:"text-sm text-slate-400",children:"We've sent a secure verification link to your email address."})]})]});function TPe({email:t,onLogin:e}){const[n,r]=j.useState(!1),[i,a]=j.useState(0);j.useEffect(()=>{if(i>0){const l=setTimeout(()=>a(i-1),1e3);return()=>clearTimeout(l)}},[i]);const o=async()=>{if(!(i>0)){r(!0);try{await Ps.resendVerificationEmail(),G.success("Verification email resent!"),a(60)}catch(l){const c=l instanceof Error?l.message:"Failed to resend";G.error(c)}finally{r(!1)}}};return s.jsx(rg,{title:"Verify Your Email",subtitle:`We've sent a link to ${t}`,visualContent:s.jsx(APe,{}),children:s.jsxs("div",{className:"space-y-6 text-center",children:[s.jsx("div",{className:"bg-muted/50 p-4 rounded-lg border border-border text-sm text-muted-foreground text-left",children:s.jsx("p",{children:"Click the link in the email we sent to verify your account. If you don't see it, check your spam folder."})}),s.jsx(K,{onClick:o,disabled:n||i>0,className:"w-full",variant:"outline",children:n?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):i>0?s.jsxs(s.Fragment,{children:[s.jsx(p8,{className:"mr-2 h-4 w-4"}),"Resend in ",i,"s"]}):"Resend Verification Email"}),s.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium text-sm",children:"Back to Login"})]})})}function CPe(){const t=Fn(),[e,n]=j.useState(!0),[r,i]=j.useState("login"),[a,o]=j.useState(""),[l,c]=j.useState(null),[u,d]=j.useState(null),h=j.useCallback(async m=>{try{try{await Ps.ensureCurrentMembership()}catch{}const v=await ze.getPrimaryMembershipByUser(m);if(!v){t("/setup",{replace:!0});return}const p=await ze.getCompanySettings(v.companyId);if(!(p!=null&&p.companyName)){t("/setup",{replace:!0});return}t("/dashboard",{replace:!0})}catch{t("/dashboard",{replace:!0})}},[t]),f=j.useCallback(async m=>{try{await Ps.acceptInvitation(m),G.success("Invitation accepted. Your company access is configured."),sessionStorage.removeItem("pendingInviteToken")}catch(p){const y=p instanceof Error?p.message:"Unable to accept invitation";G.error(`Invitation link error: ${y}`)}const v=new URL(window.location.href);v.searchParams.delete("token"),v.searchParams.delete("invite"),window.history.replaceState({},"",v.toString()),d(null)},[]);return j.useEffect(()=>{const m=new URLSearchParams(window.location.search),v=m.get("mode"),p=m.get("oobCode"),y=m.get("token")||m.get("invite"),b=m.get("view");if(y)d(y),sessionStorage.setItem("pendingInviteToken",y);else{const P=sessionStorage.getItem("pendingInviteToken");P&&d(P)}let x=!0;const w=()=>{const P=new URL(window.location.href);["mode","oobCode","apiKey","lang","continueUrl"].forEach(_=>P.searchParams.delete(_)),window.history.replaceState({},"",P.toString())};(async()=>{if(!Wo){n(!1);return}if(v==="resetPassword"&&p){try{await Ope(Sj,p),x&&(c(p),i("reset-password"))}catch{G.error("Invalid or expired password reset link."),i("login")}finally{x&&n(!1)}return}if(v==="verifyEmail"&&p){try{await kpe(Sj,p),G.success("Email verified successfully. You can now log in."),w(),i("login")}catch{G.error("Email verification link is invalid or expired."),i("login")}x&&n(!1);return}const P=Ps.getCurrentUser();if(P){const _=y||sessionStorage.getItem("pendingInviteToken");_&&await f(_),await h(P.uid)}else x&&(b==="signup"?i("signup"):b==="login"&&i("login"),n(!1))})();const S=Ps.onAuthStateChanged(async P=>{if(!x)return;if(!P){n(!1);return}const _=y||sessionStorage.getItem("pendingInviteToken");_&&await f(_),setTimeout(()=>{h(P.uid)},500)});return()=>{x=!1,S.unsubscribe()}},[f,h]),e?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx(mn,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):r==="login"?s.jsx(FB,{onForgotPassword:()=>i("forgot-password"),onSignup:()=>i("signup"),onLoginSuccess:()=>{}}):r==="signup"?s.jsx(bPe,{onLogin:()=>i("login"),onSignupSuccess:m=>{o(m),i("verify-email")}}):r==="forgot-password"?s.jsx(_Pe,{onLogin:()=>i("login")}):r==="reset-password"&&l?s.jsx(EPe,{actionCode:l,onLogin:()=>i("login")}):r==="verify-email"?s.jsx(TPe,{email:a,onLogin:()=>i("login")}):s.jsx(FB,{onForgotPassword:()=>i("forgot-password"),onSignup:()=>i("signup"),onLoginSuccess:()=>{}})}function PPe(){const t=Fn(),[e]=TR(),{user:n,isLoading:r}=dt(),i=(e.get("token")||"").trim(),[a,o]=j.useState(!0),[l,c]=j.useState(!1),[u,d]=j.useState(null),[h,f]=j.useState(null);return j.useEffect(()=>{(async()=>{if(!i){f("Invitation token is missing."),o(!1);return}try{const v=await bt("getInvitationByToken",{token:i});d(v)}catch(v){const p=v instanceof Error?v.message:"Invitation is invalid or expired.";f(p)}finally{o(!1)}})()},[i]),j.useEffect(()=>{!r&&n&&(async()=>{if(!(!n||!i)){c(!0);try{await Ps.acceptInvitation(i),G.success("Invitation accepted. Redirecting to dashboard."),t("/dashboard",{replace:!0})}catch(v){const p=v instanceof Error?v.message:"Failed to accept invitation.";G.error(p)}finally{c(!1)}}})()},[r,t,i,n]),a||r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(mn,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading invitation..."})]})}):h||!u?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Invitation Error"}),s.jsx(wt,{children:h||"Invitation not found."})]}),s.jsx(se,{children:s.jsx(K,{onClick:()=>t("/auth"),className:"w-full",children:"Go to Login"})})]})}):n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(mn,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:l?"Accepting invitation...":"Redirecting..."})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Organization Invitation"}),s.jsxs(wt,{children:["You were invited to join ",u.companyName||"this organization"," as ",u.role,"."]})]}),s.jsxs(se,{className:"space-y-2",children:[u.email&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",u.email]}),u.expiresAt&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",new Date(u.expiresAt).toLocaleString()]}),s.jsxs("div",{className:"pt-4 space-y-2",children:[s.jsx(K,{className:"w-full",onClick:()=>t(`/auth?token=${encodeURIComponent(i)}${u.userExists?"":"&view=signup"}`),children:u.userExists?"Continue to Login":"Create Account to Accept"}),s.jsx(K,{variant:"outline",className:"w-full",onClick:()=>t("/auth"),children:"Cancel"})]})]})]})})}var PZ={exports:{}},IZ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap=j;function IPe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kPe=typeof Object.is=="function"?Object.is:IPe,RPe=ap.useState,OPe=ap.useEffect,DPe=ap.useLayoutEffect,MPe=ap.useDebugValue;function LPe(t,e){var n=e(),r=RPe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return DPe(function(){i.value=n,i.getSnapshot=e,oA(i)&&a({inst:i})},[t,n,e]),OPe(function(){return oA(i)&&a({inst:i}),t(function(){oA(i)&&a({inst:i})})},[t]),MPe(n),n}function oA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kPe(t,n)}catch{return!0}}function $Pe(t,e){return e()}var FPe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$Pe:LPe;IZ.useSyncExternalStore=ap.useSyncExternalStore!==void 0?ap.useSyncExternalStore:FPe;PZ.exports=IZ;var VPe=PZ.exports;function BPe(){return VPe.useSyncExternalStore(UPe,()=>!0,()=>!1)}function UPe(){return()=>{}}var q2="Avatar",[zPe,Ytt]=ps(q2),[qPe,kZ]=zPe(q2),RZ=j.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=j.useState("idle");return s.jsx(qPe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(st.span,{...r,ref:e})})});RZ.displayName=q2;var OZ="AvatarImage",DZ=j.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=kZ(OZ,n),l=WPe(r,a),c=hr(u=>{i(u),o.onImageLoadingStatusChange(u)});return mr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(st.img,{...a,ref:e,src:r}):null});DZ.displayName=OZ;var MZ="AvatarFallback",LZ=j.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=kZ(MZ,n),[o,l]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(st.span,{...i,ref:e}):null});LZ.displayName=MZ;function VB(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WPe(t,{referrerPolicy:e,crossOrigin:n}){const r=BPe(),i=j.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=j.useState(()=>VB(a,t));return mr(()=>{l(VB(a,t))},[a,t]),mr(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,e]),o}var $Z=RZ,FZ=DZ,VZ=LZ;const EP=j.forwardRef(({className:t,...e},n)=>s.jsx($Z,{ref:n,className:_e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));EP.displayName=$Z.displayName;const HPe=j.forwardRef(({className:t,...e},n)=>s.jsx(FZ,{ref:n,className:_e("aspect-square h-full w-full",t),...e}));HPe.displayName=FZ.displayName;const AP=j.forwardRef(({className:t,...e},n)=>s.jsx(VZ,{ref:n,className:_e("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));AP.displayName=VZ.displayName;const KPe=Gh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function De({className:t,variant:e,...n}){return s.jsx("div",{className:_e(KPe({variant:e}),t),...n})}var wS="Switch",[GPe,Qtt]=ps(wS),[YPe,QPe]=GPe(wS),BZ=j.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=j.useState(null),v=Ft(e,w=>m(w)),p=j.useRef(!1),y=f?d||!!f.closest("form"):!0,[b,x]=lo({prop:i,defaultProp:a??!1,onChange:u,caller:wS});return s.jsxs(YPe,{scope:n,checked:b,disabled:l,children:[s.jsx(st.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":WZ(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:$e(t.onClick,w=>{x(C=>!C),y&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),y&&s.jsx(qZ,{control:f,bubbles:!p.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});BZ.displayName=wS;var UZ="SwitchThumb",zZ=j.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=QPe(UZ,n);return s.jsx(st.span,{"data-state":WZ(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});zZ.displayName=UZ;var XPe="SwitchBubbleInput",qZ=j.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const o=j.useRef(null),l=Ft(o,a),c=U2(n),u=hR(e);return j.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const v=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(v)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qZ.displayName=XPe;function WZ(t){return t?"checked":"unchecked"}var HZ=BZ,ZPe=zZ;const us=j.forwardRef(({className:t,...e},n)=>s.jsx(HZ,{className:_e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:s.jsx(ZPe,{className:_e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));us.displayName=HZ.displayName;const JPe=[{min:0,max:5100,rate:0},{min:5100,max:7100,rate:.2},{min:7100,max:9200,rate:.3},{min:9200,max:1/0,rate:.37}],eIe=.05,tIe=1342,nIe=.01,rIe=250;function KZ(t){let e=0,n=t;for(const r of JPe){if(n<=0)break;const i=Math.min(n,r.max-r.min);e+=i*r.rate,n-=i}return Math.round(e*100)/100}function GZ(t){const e=Math.round(t*eIe*100)/100,n=Math.min(e,tIe);return{employee:n,employer:n}}function YZ(t){const e=Math.round(t*nIe*100)/100,n=Math.min(e,rIe);return{employee:n,employer:n}}function sIe(t,e=0,n=0,r=0,i=0,a=0){const o=t+e+n+r,l=GZ(o),c=YZ(t),u=KZ(o),d=l.employee+c.employee+u+i+a,h=o-d;return{basicSalary:t,housingAllowance:e,transportAllowance:n,otherAllowances:r,grossSalary:o,paye:u,napsaEmployee:l.employee,napsaEmployer:l.employer,nhimaEmployee:c.employee,nhimaEmployer:c.employer,advancesDeducted:i,totalDeductions:d,netSalary:h}}function de(t){return`K${t.toLocaleString("en-ZM",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var iIe=Array.isArray,_i=iIe,aIe=typeof Vb=="object"&&Vb&&Vb.Object===Object&&Vb,QZ=aIe,oIe=QZ,lIe=typeof self=="object"&&self&&self.Object===Object&&self,cIe=oIe||lIe||Function("return this")(),ll=cIe,uIe=ll,dIe=uIe.Symbol,jb=dIe,BB=jb,XZ=Object.prototype,hIe=XZ.hasOwnProperty,fIe=XZ.toString,Gg=BB?BB.toStringTag:void 0;function mIe(t){var e=hIe.call(t,Gg),n=t[Gg];try{t[Gg]=void 0;var r=!0}catch{}var i=fIe.call(t);return r&&(e?t[Gg]=n:delete t[Gg]),i}var pIe=mIe,gIe=Object.prototype,yIe=gIe.toString;function vIe(t){return yIe.call(t)}var xIe=vIe,UB=jb,bIe=pIe,wIe=xIe,jIe="[object Null]",_Ie="[object Undefined]",zB=UB?UB.toStringTag:void 0;function NIe(t){return t==null?t===void 0?_Ie:jIe:zB&&zB in Object(t)?bIe(t):wIe(t)}var oc=NIe;function SIe(t){return t!=null&&typeof t=="object"}var lc=SIe,EIe=oc,AIe=lc,TIe="[object Symbol]";function CIe(t){return typeof t=="symbol"||AIe(t)&&EIe(t)==TIe}var ig=CIe,PIe=_i,IIe=ig,kIe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,RIe=/^\w*$/;function OIe(t,e){if(PIe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||IIe(t)?!0:RIe.test(t)||!kIe.test(t)||e!=null&&t in Object(e)}var W2=OIe;function DIe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cd=DIe;const ag=xn(cd);var MIe=oc,LIe=cd,$Ie="[object AsyncFunction]",FIe="[object Function]",VIe="[object GeneratorFunction]",BIe="[object Proxy]";function UIe(t){if(!LIe(t))return!1;var e=MIe(t);return e==FIe||e==VIe||e==$Ie||e==BIe}var H2=UIe;const Pt=xn(H2);var zIe=ll,qIe=zIe["__core-js_shared__"],WIe=qIe,lA=WIe,qB=function(){var t=/[^.]+$/.exec(lA&&lA.keys&&lA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function HIe(t){return!!qB&&qB in t}var KIe=HIe,GIe=Function.prototype,YIe=GIe.toString;function QIe(t){if(t!=null){try{return YIe.call(t)}catch{}try{return t+""}catch{}}return""}var ZZ=QIe,XIe=H2,ZIe=KIe,JIe=cd,eke=ZZ,tke=/[\\^$.*+?()[\]{}|]/g,nke=/^\[object .+?Constructor\]$/,rke=Function.prototype,ske=Object.prototype,ike=rke.toString,ake=ske.hasOwnProperty,oke=RegExp("^"+ike.call(ake).replace(tke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lke(t){if(!JIe(t)||ZIe(t))return!1;var e=XIe(t)?oke:nke;return e.test(eke(t))}var cke=lke;function uke(t,e){return t==null?void 0:t[e]}var dke=uke,hke=cke,fke=dke;function mke(t,e){var n=fke(t,e);return hke(n)?n:void 0}var tf=mke,pke=tf,gke=pke(Object,"create"),jS=gke,WB=jS;function yke(){this.__data__=WB?WB(null):{},this.size=0}var vke=yke;function xke(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bke=xke,wke=jS,jke="__lodash_hash_undefined__",_ke=Object.prototype,Nke=_ke.hasOwnProperty;function Ske(t){var e=this.__data__;if(wke){var n=e[t];return n===jke?void 0:n}return Nke.call(e,t)?e[t]:void 0}var Eke=Ske,Ake=jS,Tke=Object.prototype,Cke=Tke.hasOwnProperty;function Pke(t){var e=this.__data__;return Ake?e[t]!==void 0:Cke.call(e,t)}var Ike=Pke,kke=jS,Rke="__lodash_hash_undefined__";function Oke(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kke&&e===void 0?Rke:e,this}var Dke=Oke,Mke=vke,Lke=bke,$ke=Eke,Fke=Ike,Vke=Dke;function og(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}og.prototype.clear=Mke;og.prototype.delete=Lke;og.prototype.get=$ke;og.prototype.has=Fke;og.prototype.set=Vke;var Bke=og;function Uke(){this.__data__=[],this.size=0}var zke=Uke;function qke(t,e){return t===e||t!==t&&e!==e}var K2=qke,Wke=K2;function Hke(t,e){for(var n=t.length;n--;)if(Wke(t[n][0],e))return n;return-1}var _S=Hke,Kke=_S,Gke=Array.prototype,Yke=Gke.splice;function Qke(t){var e=this.__data__,n=Kke(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Yke.call(e,n,1),--this.size,!0}var Xke=Qke,Zke=_S;function Jke(t){var e=this.__data__,n=Zke(e,t);return n<0?void 0:e[n][1]}var eRe=Jke,tRe=_S;function nRe(t){return tRe(this.__data__,t)>-1}var rRe=nRe,sRe=_S;function iRe(t,e){var n=this.__data__,r=sRe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var aRe=iRe,oRe=zke,lRe=Xke,cRe=eRe,uRe=rRe,dRe=aRe;function lg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lg.prototype.clear=oRe;lg.prototype.delete=lRe;lg.prototype.get=cRe;lg.prototype.has=uRe;lg.prototype.set=dRe;var NS=lg,hRe=tf,fRe=ll,mRe=hRe(fRe,"Map"),G2=mRe,HB=Bke,pRe=NS,gRe=G2;function yRe(){this.size=0,this.__data__={hash:new HB,map:new(gRe||pRe),string:new HB}}var vRe=yRe;function xRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var bRe=xRe,wRe=bRe;function jRe(t,e){var n=t.__data__;return wRe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var SS=jRe,_Re=SS;function NRe(t){var e=_Re(this,t).delete(t);return this.size-=e?1:0,e}var SRe=NRe,ERe=SS;function ARe(t){return ERe(this,t).get(t)}var TRe=ARe,CRe=SS;function PRe(t){return CRe(this,t).has(t)}var IRe=PRe,kRe=SS;function RRe(t,e){var n=kRe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var ORe=RRe,DRe=vRe,MRe=SRe,LRe=TRe,$Re=IRe,FRe=ORe;function cg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}cg.prototype.clear=DRe;cg.prototype.delete=MRe;cg.prototype.get=LRe;cg.prototype.has=$Re;cg.prototype.set=FRe;var Y2=cg,JZ=Y2,VRe="Expected a function";function Q2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(VRe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Q2.Cache||JZ),n}Q2.Cache=JZ;var eJ=Q2;const BRe=xn(eJ);var URe=eJ,zRe=500;function qRe(t){var e=URe(t,function(r){return n.size===zRe&&n.clear(),r}),n=e.cache;return e}var WRe=qRe,HRe=WRe,KRe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GRe=/\\(\\)?/g,YRe=HRe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(KRe,function(n,r,i,a){e.push(i?a.replace(GRe,"$1"):r||n)}),e}),QRe=YRe;function XRe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var X2=XRe,KB=jb,ZRe=X2,JRe=_i,eOe=ig,tOe=1/0,GB=KB?KB.prototype:void 0,YB=GB?GB.toString:void 0;function tJ(t){if(typeof t=="string")return t;if(JRe(t))return ZRe(t,tJ)+"";if(eOe(t))return YB?YB.call(t):"";var e=t+"";return e=="0"&&1/t==-tOe?"-0":e}var nOe=tJ,rOe=nOe;function sOe(t){return t==null?"":rOe(t)}var nJ=sOe,iOe=_i,aOe=W2,oOe=QRe,lOe=nJ;function cOe(t,e){return iOe(t)?t:aOe(t,e)?[t]:oOe(lOe(t))}var rJ=cOe,uOe=ig,dOe=1/0;function hOe(t){if(typeof t=="string"||uOe(t))return t;var e=t+"";return e=="0"&&1/t==-dOe?"-0":e}var ES=hOe,fOe=rJ,mOe=ES;function pOe(t,e){e=fOe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[mOe(e[n++])];return n&&n==r?t:void 0}var Z2=pOe,gOe=Z2;function yOe(t,e,n){var r=t==null?void 0:gOe(t,e);return r===void 0?n:r}var sJ=yOe;const Ui=xn(sJ);function vOe(t){return t==null}var xOe=vOe;const Ut=xn(xOe);var bOe=oc,wOe=_i,jOe=lc,_Oe="[object String]";function NOe(t){return typeof t=="string"||!wOe(t)&&jOe(t)&&bOe(t)==_Oe}var SOe=NOe;const $h=xn(SOe);var iJ={exports:{}},Sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2=Symbol.for("react.element"),eD=Symbol.for("react.portal"),AS=Symbol.for("react.fragment"),TS=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),PS=Symbol.for("react.provider"),IS=Symbol.for("react.context"),EOe=Symbol.for("react.server_context"),kS=Symbol.for("react.forward_ref"),RS=Symbol.for("react.suspense"),OS=Symbol.for("react.suspense_list"),DS=Symbol.for("react.memo"),MS=Symbol.for("react.lazy"),AOe=Symbol.for("react.offscreen"),aJ;aJ=Symbol.for("react.module.reference");function Na(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case J2:switch(t=t.type,t){case AS:case CS:case TS:case RS:case OS:return t;default:switch(t=t&&t.$$typeof,t){case EOe:case IS:case kS:case MS:case DS:case PS:return t;default:return e}}case eD:return e}}}Sn.ContextConsumer=IS;Sn.ContextProvider=PS;Sn.Element=J2;Sn.ForwardRef=kS;Sn.Fragment=AS;Sn.Lazy=MS;Sn.Memo=DS;Sn.Portal=eD;Sn.Profiler=CS;Sn.StrictMode=TS;Sn.Suspense=RS;Sn.SuspenseList=OS;Sn.isAsyncMode=function(){return!1};Sn.isConcurrentMode=function(){return!1};Sn.isContextConsumer=function(t){return Na(t)===IS};Sn.isContextProvider=function(t){return Na(t)===PS};Sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===J2};Sn.isForwardRef=function(t){return Na(t)===kS};Sn.isFragment=function(t){return Na(t)===AS};Sn.isLazy=function(t){return Na(t)===MS};Sn.isMemo=function(t){return Na(t)===DS};Sn.isPortal=function(t){return Na(t)===eD};Sn.isProfiler=function(t){return Na(t)===CS};Sn.isStrictMode=function(t){return Na(t)===TS};Sn.isSuspense=function(t){return Na(t)===RS};Sn.isSuspenseList=function(t){return Na(t)===OS};Sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===AS||t===CS||t===TS||t===RS||t===OS||t===AOe||typeof t=="object"&&t!==null&&(t.$$typeof===MS||t.$$typeof===DS||t.$$typeof===PS||t.$$typeof===IS||t.$$typeof===kS||t.$$typeof===aJ||t.getModuleId!==void 0)};Sn.typeOf=Na;iJ.exports=Sn;var TOe=iJ.exports,COe=oc,POe=lc,IOe="[object Number]";function kOe(t){return typeof t=="number"||POe(t)&&COe(t)==IOe}var oJ=kOe;const ROe=xn(oJ);var OOe=oJ;function DOe(t){return OOe(t)&&t!=+t}var MOe=DOe;const ug=xn(MOe);var Ks=function(e){return e===0?0:e>0?1:-1},qd=function(e){return $h(e)&&e.indexOf("%")===e.length-1},Re=function(e){return ROe(e)&&!ug(e)},LOe=function(e){return Ut(e)},zr=function(e){return Re(e)||$h(e)},$Oe=0,dg=function(e){var n=++$Oe;return"".concat(e||"").concat(n)},Gs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Re(e)&&!$h(e))return r;var a;if(qd(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return ug(a)&&(a=r),i&&a>n&&(a=n),a},Hc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},FOe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ui=function(e,n){return Re(e)&&Re(n)?function(r){return e+r*(n-e)}:function(){return n}};function Qj(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ui(r,e))===n})}var VOe=function(e,n){return Re(e)&&Re(n)?e-n:$h(e)&&$h(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ym(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function TP(t){"@babel/helpers - typeof";return TP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TP(t)}var BOe=["viewBox","children"],UOe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],QB=["points","pathLength"],cA={svg:BOe,polygon:QB,polyline:QB},tD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xj=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),!ag(r))return null;var i={};return Object.keys(r).forEach(function(a){tD.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},zOe=function(e,n,r){return function(i){return e(n,r,i),null}},Fh=function(e,n,r){if(!ag(e)||TP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];tD.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=zOe(o,n,r))}),i},qOe=["children"],WOe=["children"];function XB(t,e){if(t==null)return{};var n=HOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CP(t){"@babel/helpers - typeof";return CP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CP(t)}var ZB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Rl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},JB=null,uA=null,nD=function t(e){if(e===JB&&Array.isArray(uA))return uA;var n=[];return j.Children.forEach(e,function(r){Ut(r)||(TOe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),uA=n,JB=e,n};function ma(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Rl(i)}):r=[Rl(e)],nD(t).forEach(function(i){var a=Ui(i,"type.displayName")||Ui(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Pi(t,e){var n=ma(t,e);return n&&n[0]}var e3=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Re(r)||r<=0||!Re(i)||i<=0)},KOe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],GOe=function(e){return e&&e.type&&$h(e.type)&&KOe.indexOf(e.type)>=0},YOe=function(e){return e&&CP(e)==="object"&&"clipDot"in e},QOe=function(e,n,r,i){var a,o=(a=cA==null?void 0:cA[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Pt(e)&&(i&&o.includes(n)||UOe.includes(n))||r&&tD.includes(n)},_t=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(j.isValidElement(e)&&(i=e.props),!ag(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;QOe((l=i)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=i[o])}),a},PP=function t(e,n){if(e===n)return!0;var r=j.Children.count(e);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return t3(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!t3(a,o))return!1}return!0},t3=function(e,n){if(Ut(e)&&Ut(n))return!0;if(!Ut(e)&&!Ut(n)){var r=e.props||{},i=r.children,a=XB(r,qOe),o=n.props||{},l=o.children,c=XB(o,WOe);return i&&l?ym(a,c)&&PP(i,l):!i&&!l?ym(a,c):!1}return!1},n3=function(e,n){var r=[],i={};return nD(e).forEach(function(a,o){if(GOe(a))r.push(a);else if(a){var l=Rl(a.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var h=u(a,l,o);r.push(h),i[l]=!0}}}),r},XOe=function(e){var n=e&&e.type;return n&&ZB[n]?ZB[n]:null},ZOe=function(e,n){return nD(n).indexOf(e)},JOe=["children","width","height","viewBox","className","style","title","desc"];function IP(){return IP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IP.apply(this,arguments)}function e2e(t,e){if(t==null)return{};var n=t2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function t2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kP(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=e2e(t,JOe),d=i||{width:n,height:r,x:0,y:0},h=Bt("recharts-surface",a);return $.createElement("svg",IP({},_t(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),e)}var n2e=["children","className"];function RP(){return RP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RP.apply(this,arguments)}function r2e(t,e){if(t==null)return{};var n=s2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sn=$.forwardRef(function(t,e){var n=t.children,r=t.className,i=r2e(t,n2e),a=Bt("recharts-layer",r);return $.createElement("g",RP({className:a},_t(i,!0),{ref:e}),n)}),ao=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function i2e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var a2e=i2e,o2e=a2e;function l2e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:o2e(t,e,n)}var c2e=l2e,u2e="\\ud800-\\udfff",d2e="\\u0300-\\u036f",h2e="\\ufe20-\\ufe2f",f2e="\\u20d0-\\u20ff",m2e=d2e+h2e+f2e,p2e="\\ufe0e\\ufe0f",g2e="\\u200d",y2e=RegExp("["+g2e+u2e+m2e+p2e+"]");function v2e(t){return y2e.test(t)}var lJ=v2e;function x2e(t){return t.split("")}var b2e=x2e,cJ="\\ud800-\\udfff",w2e="\\u0300-\\u036f",j2e="\\ufe20-\\ufe2f",_2e="\\u20d0-\\u20ff",N2e=w2e+j2e+_2e,S2e="\\ufe0e\\ufe0f",E2e="["+cJ+"]",OP="["+N2e+"]",DP="\\ud83c[\\udffb-\\udfff]",A2e="(?:"+OP+"|"+DP+")",uJ="[^"+cJ+"]",dJ="(?:\\ud83c[\\udde6-\\uddff]){2}",hJ="[\\ud800-\\udbff][\\udc00-\\udfff]",T2e="\\u200d",fJ=A2e+"?",mJ="["+S2e+"]?",C2e="(?:"+T2e+"(?:"+[uJ,dJ,hJ].join("|")+")"+mJ+fJ+")*",P2e=mJ+fJ+C2e,I2e="(?:"+[uJ+OP+"?",OP,dJ,hJ,E2e].join("|")+")",k2e=RegExp(DP+"(?="+DP+")|"+I2e+P2e,"g");function R2e(t){return t.match(k2e)||[]}var O2e=R2e,D2e=b2e,M2e=lJ,L2e=O2e;function $2e(t){return M2e(t)?L2e(t):D2e(t)}var F2e=$2e,V2e=c2e,B2e=lJ,U2e=F2e,z2e=nJ;function q2e(t){return function(e){e=z2e(e);var n=B2e(e)?U2e(e):void 0,r=n?n[0]:e.charAt(0),i=n?V2e(n,1).join(""):e.slice(1);return r[t]()+i}}var W2e=q2e,H2e=W2e,K2e=H2e("toUpperCase"),G2e=K2e;const LS=xn(G2e);function On(t){return function(){return t}}const pJ=Math.cos,Zj=Math.sin,yo=Math.sqrt,Jj=Math.PI,$S=2*Jj,MP=Math.PI,LP=2*MP,Id=1e-6,Y2e=LP-Id;function gJ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Q2e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return gJ;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class X2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?gJ:Q2e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-e,u=i-n,d=o-e,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Id)if(!(Math.abs(h*c-u*d)>Id)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,v=i-l,p=c*c+u*u,y=m*m+v*v,b=Math.sqrt(p),x=Math.sqrt(f),w=a*Math.tan((MP-Math.acos((p+f-y)/(2*b*x)))/2),C=w/x,S=w/b;Math.abs(C-1)>Id&&this._append`L${e+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*m>d*v)},${this._x1=e+S*c},${this._y1=n+S*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Id||Math.abs(this._y1-d)>Id)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%LP+LP),f>Y2e?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Id&&this._append`A${r},${r},0,${+(f>=MP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function rD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new X2e(e)}function sD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yJ(t){this._context=t}yJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function FS(t){return new yJ(t)}function vJ(t){return t[0]}function xJ(t){return t[1]}function bJ(t,e){var n=On(!0),r=null,i=FS,a=null,o=rD(l);t=typeof t=="function"?t:t===void 0?vJ:On(t),e=typeof e=="function"?e:e===void 0?xJ:On(e);function l(c){var u,d=(c=sD(c)).length,h,f=!1,m;for(r==null&&(a=i(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:On(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:On(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:On(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function S0(t,e,n){var r=null,i=On(!0),a=null,o=FS,l=null,c=rD(u);t=typeof t=="function"?t:t===void 0?vJ:On(+t),e=typeof e=="function"?e:On(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?xJ:On(+n);function u(h){var f,m,v,p=(h=sD(h)).length,y,b=!1,x,w=new Array(p),C=new Array(p);for(a==null&&(l=o(x=c())),f=0;f<=p;++f){if(!(f<p&&i(y=h[f],f,h))===b)if(b=!b)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(w[v],C[v]);l.lineEnd(),l.areaEnd()}b&&(w[f]=+t(y,f,h),C[f]=+e(y,f,h),l.point(r?+r(y,f,h):w[f],n?+n(y,f,h):C[f]))}if(x)return l=null,x+""||null}function d(){return bJ().defined(i).curve(o).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:On(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:On(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:On(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:On(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:On(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:On(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:On(!!h),u):i},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class wJ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Z2e(t){return new wJ(t,!0)}function J2e(t){return new wJ(t,!1)}const iD={draw(t,e){const n=yo(e/Jj);t.moveTo(n,0),t.arc(0,0,n,0,$S)}},eDe={draw(t,e){const n=yo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},jJ=yo(1/3),tDe=jJ*2,nDe={draw(t,e){const n=yo(e/tDe),r=n*jJ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},rDe={draw(t,e){const n=yo(e),r=-n/2;t.rect(r,r,n,n)}},sDe=.8908130915292852,_J=Zj(Jj/10)/Zj(7*Jj/10),iDe=Zj($S/10)*_J,aDe=-pJ($S/10)*_J,oDe={draw(t,e){const n=yo(e*sDe),r=iDe*n,i=aDe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=$S*a/5,l=pJ(o),c=Zj(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},dA=yo(3),lDe={draw(t,e){const n=-yo(e/(dA*3));t.moveTo(0,n*2),t.lineTo(-dA*n,-n),t.lineTo(dA*n,-n),t.closePath()}},Yi=-.5,Qi=yo(3)/2,$P=1/yo(12),cDe=($P/2+1)*3,uDe={draw(t,e){const n=yo(e/cDe),r=n/2,i=n*$P,a=r,o=n*$P+n,l=-a,c=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Yi*r-Qi*i,Qi*r+Yi*i),t.lineTo(Yi*a-Qi*o,Qi*a+Yi*o),t.lineTo(Yi*l-Qi*c,Qi*l+Yi*c),t.lineTo(Yi*r+Qi*i,Yi*i-Qi*r),t.lineTo(Yi*a+Qi*o,Yi*o-Qi*a),t.lineTo(Yi*l+Qi*c,Yi*c-Qi*l),t.closePath()}};function dDe(t,e){let n=null,r=rD(i);t=typeof t=="function"?t:On(t||iD),e=typeof e=="function"?e:On(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:On(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:On(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function e_(){}function t_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function NJ(t){this._context=t}NJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hDe(t){return new NJ(t)}function SJ(t){this._context=t}SJ.prototype={areaStart:e_,areaEnd:e_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:t_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fDe(t){return new SJ(t)}function EJ(t){this._context=t}EJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:t_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mDe(t){return new EJ(t)}function AJ(t){this._context=t}AJ.prototype={areaStart:e_,areaEnd:e_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function pDe(t){return new AJ(t)}function r3(t){return t<0?-1:1}function s3(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(r3(a)+r3(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function i3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function hA(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,i+l*e,a-l,o-l*n,a,o)}function n_(t){this._context=t}n_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hA(this,this._t0,i3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,hA(this,i3(this,n=s3(this,t,e)),n);break;default:hA(this,this._t0,n=s3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function TJ(t){this._context=new CJ(t)}(TJ.prototype=Object.create(n_.prototype)).point=function(t,e){n_.prototype.point.call(this,e,t)};function CJ(t){this._context=t}CJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function gDe(t){return new n_(t)}function yDe(t){return new TJ(t)}function PJ(t){this._context=t}PJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=a3(t),i=a3(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function a3(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function vDe(t){return new PJ(t)}function VS(t,e){this._context=t,this._t=e}VS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function xDe(t){return new VS(t,.5)}function bDe(t){return new VS(t,0)}function wDe(t){return new VS(t,1)}function op(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,l=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function FP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function jDe(t,e){return t[e]}function _De(t){const e=[];return e.key=t,e}function NDe(){var t=On([]),e=FP,n=op,r=jDe;function i(a){var o=Array.from(t.apply(this,arguments),_De),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,a)]).data=h;for(l=0,d=sD(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:On(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:On(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?FP:typeof a=="function"?a:On(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??op,i):n},i}function SDe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}op(t,e)}}function EDe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}op(t,e)}}function ADe(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var p=t[e[v]],y=p[r][1]||0,b=p[r-1][1]||0;m+=y-b}c+=h,u+=m*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,op(t,e)}}function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}var TDe=["type","size","sizeType"];function VP(){return VP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VP.apply(this,arguments)}function o3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o3(Object(n),!0).forEach(function(r){CDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CDe(t,e,n){return e=PDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PDe(t){var e=IDe(t,"string");return Gv(e)=="symbol"?e:e+""}function IDe(t,e){if(Gv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kDe(t,e){if(t==null)return{};var n=RDe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var IJ={symbolCircle:iD,symbolCross:eDe,symbolDiamond:nDe,symbolSquare:rDe,symbolStar:oDe,symbolTriangle:lDe,symbolWye:uDe},ODe=Math.PI/180,DDe=function(e){var n="symbol".concat(LS(e));return IJ[n]||iD},MDe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*ODe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},LDe=function(e,n){IJ["symbol".concat(LS(e))]=n},aD=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=kDe(e,TDe),u=l3(l3({},c),{},{type:r,size:a,sizeType:l}),d=function(){var y=DDe(r),b=dDe().type(y).size(MDe(a,l,r));return b()},h=u.className,f=u.cx,m=u.cy,v=_t(u,!0);return f===+f&&m===+m&&a===+a?$.createElement("path",VP({},v,{className:Bt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};aD.registerSymbol=LDe;function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(this,arguments)}function c3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $De(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c3(Object(n),!0).forEach(function(r){Yv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VDe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RJ(r.key),r)}}function BDe(t,e,n){return e&&VDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UDe(t,e,n){return e=r_(e),zDe(t,kJ()?Reflect.construct(e,n||[],r_(t).constructor):e.apply(t,n))}function zDe(t,e){if(e&&(lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qDe(t)}function qDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kJ=function(){return!!t})()}function r_(t){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r_(t)}function WDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UP(t,e)}function UP(t,e){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UP(t,e)}function Yv(t,e,n){return e=RJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RJ(t){var e=HDe(t,"string");return lp(e)=="symbol"?e:e+""}function HDe(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xi=32,oD=function(t){function e(){return FDe(this,e),UDe(this,e,arguments)}return WDe(e,t),BDe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Xi/2,o=Xi/6,l=Xi/3,c=r.inactive?i:r.color;if(r.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Xi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Xi,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Xi/8,"h").concat(Xi,"v").concat(Xi*3/4,"h").concat(-Xi,"z"),className:"recharts-legend-icon"});if($.isValidElement(r.legendIcon)){var u=$De({},r);return delete u.legendIcon,$.cloneElement(r.legendIcon,u)}return $.createElement(aD,{fill:c,cx:a,cy:a,size:Xi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Xi,height:Xi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,v){var p=m.formatter||c,y=Bt(Yv(Yv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Pt(m.value)?null:m.value;ao(!Pt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return $.createElement("li",BP({className:y,style:h,key:"legend-item-".concat(v)},Fh(r.props,m,v)),$.createElement(kP,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},p?p(b,m,v):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Yv(oD,"displayName","Legend");Yv(oD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var KDe=NS;function GDe(){this.__data__=new KDe,this.size=0}var YDe=GDe;function QDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var XDe=QDe;function ZDe(t){return this.__data__.get(t)}var JDe=ZDe;function eMe(t){return this.__data__.has(t)}var tMe=eMe,nMe=NS,rMe=G2,sMe=Y2,iMe=200;function aMe(t,e){var n=this.__data__;if(n instanceof nMe){var r=n.__data__;if(!rMe||r.length<iMe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sMe(r)}return n.set(t,e),this.size=n.size,this}var oMe=aMe,lMe=NS,cMe=YDe,uMe=XDe,dMe=JDe,hMe=tMe,fMe=oMe;function hg(t){var e=this.__data__=new lMe(t);this.size=e.size}hg.prototype.clear=cMe;hg.prototype.delete=uMe;hg.prototype.get=dMe;hg.prototype.has=hMe;hg.prototype.set=fMe;var OJ=hg,mMe="__lodash_hash_undefined__";function pMe(t){return this.__data__.set(t,mMe),this}var gMe=pMe;function yMe(t){return this.__data__.has(t)}var vMe=yMe,xMe=Y2,bMe=gMe,wMe=vMe;function s_(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new xMe;++e<n;)this.add(t[e])}s_.prototype.add=s_.prototype.push=bMe;s_.prototype.has=wMe;var DJ=s_;function jMe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var MJ=jMe;function _Me(t,e){return t.has(e)}var LJ=_Me,NMe=DJ,SMe=MJ,EMe=LJ,AMe=1,TMe=2;function CMe(t,e,n,r,i,a){var o=n&AMe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=n&TMe?new NMe:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var v=t[h],p=e[h];if(r)var y=o?r(p,v,h,e,t,a):r(v,p,h,t,e,a);if(y!==void 0){if(y)continue;f=!1;break}if(m){if(!SMe(e,function(b,x){if(!EMe(m,x)&&(v===b||i(v,b,n,r,a)))return m.push(x)})){f=!1;break}}else if(!(v===p||i(v,p,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var $J=CMe,PMe=ll,IMe=PMe.Uint8Array,kMe=IMe;function RMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var OMe=RMe;function DMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var lD=DMe,u3=jb,d3=kMe,MMe=K2,LMe=$J,$Me=OMe,FMe=lD,VMe=1,BMe=2,UMe="[object Boolean]",zMe="[object Date]",qMe="[object Error]",WMe="[object Map]",HMe="[object Number]",KMe="[object RegExp]",GMe="[object Set]",YMe="[object String]",QMe="[object Symbol]",XMe="[object ArrayBuffer]",ZMe="[object DataView]",h3=u3?u3.prototype:void 0,fA=h3?h3.valueOf:void 0;function JMe(t,e,n,r,i,a,o){switch(n){case ZMe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case XMe:return!(t.byteLength!=e.byteLength||!a(new d3(t),new d3(e)));case UMe:case zMe:case HMe:return MMe(+t,+e);case qMe:return t.name==e.name&&t.message==e.message;case KMe:case YMe:return t==e+"";case WMe:var l=$Me;case GMe:var c=r&VMe;if(l||(l=FMe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=BMe,o.set(t,e);var d=LMe(l(t),l(e),r,i,a,o);return o.delete(t),d;case QMe:if(fA)return fA.call(t)==fA.call(e)}return!1}var eLe=JMe;function tLe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var FJ=tLe,nLe=FJ,rLe=_i;function sLe(t,e,n){var r=e(t);return rLe(t)?r:nLe(r,n(t))}var iLe=sLe;function aLe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}var oLe=aLe;function lLe(){return[]}var cLe=lLe,uLe=oLe,dLe=cLe,hLe=Object.prototype,fLe=hLe.propertyIsEnumerable,f3=Object.getOwnPropertySymbols,mLe=f3?function(t){return t==null?[]:(t=Object(t),uLe(f3(t),function(e){return fLe.call(t,e)}))}:dLe,pLe=mLe;function gLe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var yLe=gLe,vLe=oc,xLe=lc,bLe="[object Arguments]";function wLe(t){return xLe(t)&&vLe(t)==bLe}var jLe=wLe,m3=jLe,_Le=lc,VJ=Object.prototype,NLe=VJ.hasOwnProperty,SLe=VJ.propertyIsEnumerable,ELe=m3(function(){return arguments}())?m3:function(t){return _Le(t)&&NLe.call(t,"callee")&&!SLe.call(t,"callee")},cD=ELe,i_={exports:{}};function ALe(){return!1}var TLe=ALe;i_.exports;(function(t,e){var n=ll,r=TLe,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(i_,i_.exports);var BJ=i_.exports,CLe=9007199254740991,PLe=/^(?:0|[1-9]\d*)$/;function ILe(t,e){var n=typeof t;return e=e??CLe,!!e&&(n=="number"||n!="symbol"&&PLe.test(t))&&t>-1&&t%1==0&&t<e}var uD=ILe,kLe=9007199254740991;function RLe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kLe}var dD=RLe,OLe=oc,DLe=dD,MLe=lc,LLe="[object Arguments]",$Le="[object Array]",FLe="[object Boolean]",VLe="[object Date]",BLe="[object Error]",ULe="[object Function]",zLe="[object Map]",qLe="[object Number]",WLe="[object Object]",HLe="[object RegExp]",KLe="[object Set]",GLe="[object String]",YLe="[object WeakMap]",QLe="[object ArrayBuffer]",XLe="[object DataView]",ZLe="[object Float32Array]",JLe="[object Float64Array]",e4e="[object Int8Array]",t4e="[object Int16Array]",n4e="[object Int32Array]",r4e="[object Uint8Array]",s4e="[object Uint8ClampedArray]",i4e="[object Uint16Array]",a4e="[object Uint32Array]",zn={};zn[ZLe]=zn[JLe]=zn[e4e]=zn[t4e]=zn[n4e]=zn[r4e]=zn[s4e]=zn[i4e]=zn[a4e]=!0;zn[LLe]=zn[$Le]=zn[QLe]=zn[FLe]=zn[XLe]=zn[VLe]=zn[BLe]=zn[ULe]=zn[zLe]=zn[qLe]=zn[WLe]=zn[HLe]=zn[KLe]=zn[GLe]=zn[YLe]=!1;function o4e(t){return MLe(t)&&DLe(t.length)&&!!zn[OLe(t)]}var l4e=o4e;function c4e(t){return function(e){return t(e)}}var UJ=c4e,a_={exports:{}};a_.exports;(function(t,e){var n=QZ,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(a_,a_.exports);var u4e=a_.exports,d4e=l4e,h4e=UJ,p3=u4e,g3=p3&&p3.isTypedArray,f4e=g3?h4e(g3):d4e,zJ=f4e,m4e=yLe,p4e=cD,g4e=_i,y4e=BJ,v4e=uD,x4e=zJ,b4e=Object.prototype,w4e=b4e.hasOwnProperty;function j4e(t,e){var n=g4e(t),r=!n&&p4e(t),i=!n&&!r&&y4e(t),a=!n&&!r&&!i&&x4e(t),o=n||r||i||a,l=o?m4e(t.length,String):[],c=l.length;for(var u in t)(e||w4e.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||v4e(u,c)))&&l.push(u);return l}var _4e=j4e,N4e=Object.prototype;function S4e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||N4e;return t===n}var E4e=S4e;function A4e(t,e){return function(n){return t(e(n))}}var qJ=A4e,T4e=qJ,C4e=T4e(Object.keys,Object),P4e=C4e,I4e=E4e,k4e=P4e,R4e=Object.prototype,O4e=R4e.hasOwnProperty;function D4e(t){if(!I4e(t))return k4e(t);var e=[];for(var n in Object(t))O4e.call(t,n)&&n!="constructor"&&e.push(n);return e}var M4e=D4e,L4e=H2,$4e=dD;function F4e(t){return t!=null&&$4e(t.length)&&!L4e(t)}var _b=F4e,V4e=_4e,B4e=M4e,U4e=_b;function z4e(t){return U4e(t)?V4e(t):B4e(t)}var BS=z4e,q4e=iLe,W4e=pLe,H4e=BS;function K4e(t){return q4e(t,H4e,W4e)}var G4e=K4e,y3=G4e,Y4e=1,Q4e=Object.prototype,X4e=Q4e.hasOwnProperty;function Z4e(t,e,n,r,i,a){var o=n&Y4e,l=y3(t),c=l.length,u=y3(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:X4e.call(e,f)))return!1}var m=a.get(t),v=a.get(e);if(m&&v)return m==e&&v==t;var p=!0;a.set(t,e),a.set(e,t);for(var y=o;++h<c;){f=l[h];var b=t[f],x=e[f];if(r)var w=o?r(x,b,f,e,t,a):r(b,x,f,t,e,a);if(!(w===void 0?b===x||i(b,x,n,r,a):w)){p=!1;break}y||(y=f=="constructor")}if(p&&!y){var C=t.constructor,S=e.constructor;C!=S&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(p=!1)}return a.delete(t),a.delete(e),p}var J4e=Z4e,e$e=tf,t$e=ll,n$e=e$e(t$e,"DataView"),r$e=n$e,s$e=tf,i$e=ll,a$e=s$e(i$e,"Promise"),o$e=a$e,l$e=tf,c$e=ll,u$e=l$e(c$e,"Set"),WJ=u$e,d$e=tf,h$e=ll,f$e=d$e(h$e,"WeakMap"),m$e=f$e,zP=r$e,qP=G2,WP=o$e,HP=WJ,KP=m$e,HJ=oc,fg=ZZ,v3="[object Map]",p$e="[object Object]",x3="[object Promise]",b3="[object Set]",w3="[object WeakMap]",j3="[object DataView]",g$e=fg(zP),y$e=fg(qP),v$e=fg(WP),x$e=fg(HP),b$e=fg(KP),kd=HJ;(zP&&kd(new zP(new ArrayBuffer(1)))!=j3||qP&&kd(new qP)!=v3||WP&&kd(WP.resolve())!=x3||HP&&kd(new HP)!=b3||KP&&kd(new KP)!=w3)&&(kd=function(t){var e=HJ(t),n=e==p$e?t.constructor:void 0,r=n?fg(n):"";if(r)switch(r){case g$e:return j3;case y$e:return v3;case v$e:return x3;case x$e:return b3;case b$e:return w3}return e});var w$e=kd,mA=OJ,j$e=$J,_$e=eLe,N$e=J4e,_3=w$e,N3=_i,S3=BJ,S$e=zJ,E$e=1,E3="[object Arguments]",A3="[object Array]",E0="[object Object]",A$e=Object.prototype,T3=A$e.hasOwnProperty;function T$e(t,e,n,r,i,a){var o=N3(t),l=N3(e),c=o?A3:_3(t),u=l?A3:_3(e);c=c==E3?E0:c,u=u==E3?E0:u;var d=c==E0,h=u==E0,f=c==u;if(f&&S3(t)){if(!S3(e))return!1;o=!0,d=!1}if(f&&!d)return a||(a=new mA),o||S$e(t)?j$e(t,e,n,r,i,a):_$e(t,e,c,n,r,i,a);if(!(n&E$e)){var m=d&&T3.call(t,"__wrapped__"),v=h&&T3.call(e,"__wrapped__");if(m||v){var p=m?t.value():t,y=v?e.value():e;return a||(a=new mA),i(p,y,n,r,a)}}return f?(a||(a=new mA),N$e(t,e,n,r,i,a)):!1}var C$e=T$e,P$e=C$e,C3=lc;function KJ(t,e,n,r,i){return t===e?!0:t==null||e==null||!C3(t)&&!C3(e)?t!==t&&e!==e:P$e(t,e,n,r,KJ,i)}var hD=KJ,I$e=OJ,k$e=hD,R$e=1,O$e=2;function D$e(t,e,n,r){var i=n.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var l=n[i];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<a;){l=n[i];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new I$e;if(r)var f=r(u,d,c,t,e,h);if(!(f===void 0?k$e(d,u,R$e|O$e,r,h):f))return!1}}return!0}var M$e=D$e,L$e=cd;function $$e(t){return t===t&&!L$e(t)}var GJ=$$e,F$e=GJ,V$e=BS;function B$e(t){for(var e=V$e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,F$e(i)]}return e}var U$e=B$e;function z$e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var YJ=z$e,q$e=M$e,W$e=U$e,H$e=YJ;function K$e(t){var e=W$e(t);return e.length==1&&e[0][2]?H$e(e[0][0],e[0][1]):function(n){return n===t||q$e(n,t,e)}}var G$e=K$e;function Y$e(t,e){return t!=null&&e in Object(t)}var Q$e=Y$e,X$e=rJ,Z$e=cD,J$e=_i,eFe=uD,tFe=dD,nFe=ES;function rFe(t,e,n){e=X$e(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=nFe(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&tFe(i)&&eFe(o,i)&&(J$e(t)||Z$e(t)))}var sFe=rFe,iFe=Q$e,aFe=sFe;function oFe(t,e){return t!=null&&aFe(t,e,iFe)}var lFe=oFe,cFe=hD,uFe=sJ,dFe=lFe,hFe=W2,fFe=GJ,mFe=YJ,pFe=ES,gFe=1,yFe=2;function vFe(t,e){return hFe(t)&&fFe(e)?mFe(pFe(t),e):function(n){var r=uFe(n,t);return r===void 0&&r===e?dFe(n,t):cFe(e,r,gFe|yFe)}}var xFe=vFe;function bFe(t){return t}var mg=bFe;function wFe(t){return function(e){return e==null?void 0:e[t]}}var jFe=wFe,_Fe=Z2;function NFe(t){return function(e){return _Fe(e,t)}}var SFe=NFe,EFe=jFe,AFe=SFe,TFe=W2,CFe=ES;function PFe(t){return TFe(t)?EFe(CFe(t)):AFe(t)}var IFe=PFe,kFe=G$e,RFe=xFe,OFe=mg,DFe=_i,MFe=IFe;function LFe(t){return typeof t=="function"?t:t==null?OFe:typeof t=="object"?DFe(t)?RFe(t[0],t[1]):kFe(t):MFe(t)}var cl=LFe;function $Fe(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var QJ=$Fe;function FFe(t){return t!==t}var VFe=FFe;function BFe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var UFe=BFe,zFe=QJ,qFe=VFe,WFe=UFe;function HFe(t,e,n){return e===e?WFe(t,e,n):zFe(t,qFe,n)}var KFe=HFe,GFe=KFe;function YFe(t,e){var n=t==null?0:t.length;return!!n&&GFe(t,e,0)>-1}var QFe=YFe;function XFe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var ZFe=XFe;function JFe(){}var eVe=JFe,pA=WJ,tVe=eVe,nVe=lD,rVe=1/0,sVe=pA&&1/nVe(new pA([,-0]))[1]==rVe?function(t){return new pA(t)}:tVe,iVe=sVe,aVe=DJ,oVe=QFe,lVe=ZFe,cVe=LJ,uVe=iVe,dVe=lD,hVe=200;function fVe(t,e,n){var r=-1,i=oVe,a=t.length,o=!0,l=[],c=l;if(n)o=!1,i=lVe;else if(a>=hVe){var u=e?null:uVe(t);if(u)return dVe(u);o=!1,i=cVe,c=new aVe}else c=e?[]:l;e:for(;++r<a;){var d=t[r],h=e?e(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else i(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var mVe=fVe,pVe=cl,gVe=mVe;function yVe(t,e){return t&&t.length?gVe(t,pVe(e)):[]}var vVe=yVe;const P3=xn(vVe);function XJ(t,e,n){return e===!0?P3(t,n):Pt(e)?P3(t,e):t}function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}var xVe=["ref"];function I3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I3(Object(n),!0).forEach(function(r){US(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JJ(r.key),r)}}function wVe(t,e,n){return e&&k3(t.prototype,e),n&&k3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jVe(t,e,n){return e=o_(e),_Ve(t,ZJ()?Reflect.construct(e,n||[],o_(t).constructor):e.apply(t,n))}function _Ve(t,e){if(e&&(cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NVe(t)}function NVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZJ=function(){return!!t})()}function o_(t){return o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o_(t)}function SVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GP(t,e)}function US(t,e,n){return e=JJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JJ(t){var e=EVe(t,"string");return cp(e)=="symbol"?e:e+""}function EVe(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AVe(t,e){if(t==null)return{};var n=TVe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CVe(t){return t.value}function PVe(t,e){if($.isValidElement(t))return $.cloneElement(t,e);if(typeof t=="function")return $.createElement(t,e);e.ref;var n=AVe(e,xVe);return $.createElement(oD,n)}var R3=1,vm=function(t){function e(){var n;bVe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=jVe(this,e,[].concat(i)),US(n,"lastBoundingBox",{width:-1,height:-1}),n}return SVe(e,t),wVe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>R3||Math.abs(i.height-this.lastBoundingBox.height)>R3)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((d||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fl(fl({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=fl(fl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},PVe(a,fl(fl({},this.props),{},{payload:XJ(d,u,CVe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=fl(fl({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Re(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(j.PureComponent);US(vm,"displayName","Legend");US(vm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var O3=jb,IVe=cD,kVe=_i,D3=O3?O3.isConcatSpreadable:void 0;function RVe(t){return kVe(t)||IVe(t)||!!(D3&&t&&t[D3])}var OVe=RVe,DVe=FJ,MVe=OVe;function eee(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=MVe),i||(i=[]);++a<o;){var l=t[a];e>0&&n(l)?e>1?eee(l,e-1,n,r,i):DVe(i,l):r||(i[i.length]=l)}return i}var tee=eee;function LVe(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++i];if(n(a[c],c,a)===!1)break}return e}}var $Ve=LVe,FVe=$Ve,VVe=FVe(),BVe=VVe,UVe=BVe,zVe=BS;function qVe(t,e){return t&&UVe(t,e,zVe)}var nee=qVe,WVe=_b;function HVe(t,e){return function(n,r){if(n==null)return n;if(!WVe(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var KVe=HVe,GVe=nee,YVe=KVe,QVe=YVe(GVe),fD=QVe,XVe=fD,ZVe=_b;function JVe(t,e){var n=-1,r=ZVe(t)?Array(t.length):[];return XVe(t,function(i,a,o){r[++n]=e(i,a,o)}),r}var ree=JVe;function eBe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var tBe=eBe,M3=ig;function nBe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=M3(t),o=e!==void 0,l=e===null,c=e===e,u=M3(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var rBe=nBe,sBe=rBe;function iBe(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,l=n.length;++r<o;){var c=sBe(i[r],a[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var aBe=iBe,gA=X2,oBe=Z2,lBe=cl,cBe=ree,uBe=tBe,dBe=UJ,hBe=aBe,fBe=mg,mBe=_i;function pBe(t,e,n){e.length?e=gA(e,function(a){return mBe(a)?function(o){return oBe(o,a.length===1?a[0]:a)}:a}):e=[fBe];var r=-1;e=gA(e,dBe(lBe));var i=cBe(t,function(a,o,l){var c=gA(e,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return uBe(i,function(a,o){return hBe(a,o,n)})}var gBe=pBe;function yBe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var vBe=yBe,xBe=vBe,L3=Math.max;function bBe(t,e,n){return e=L3(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=L3(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),xBe(t,this,l)}}var wBe=bBe;function jBe(t){return function(){return t}}var _Be=jBe,NBe=tf,SBe=function(){try{var t=NBe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),see=SBe,EBe=_Be,$3=see,ABe=mg,TBe=$3?function(t,e){return $3(t,"toString",{configurable:!0,enumerable:!1,value:EBe(e),writable:!0})}:ABe,CBe=TBe,PBe=800,IBe=16,kBe=Date.now;function RBe(t){var e=0,n=0;return function(){var r=kBe(),i=IBe-(r-n);if(n=r,i>0){if(++e>=PBe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var OBe=RBe,DBe=CBe,MBe=OBe,LBe=MBe(DBe),$Be=LBe,FBe=mg,VBe=wBe,BBe=$Be;function UBe(t,e){return BBe(VBe(t,e,FBe),t+"")}var zBe=UBe,qBe=K2,WBe=_b,HBe=uD,KBe=cd;function GBe(t,e,n){if(!KBe(n))return!1;var r=typeof e;return(r=="number"?WBe(n)&&HBe(e,n.length):r=="string"&&e in n)?qBe(n[e],t):!1}var zS=GBe,YBe=tee,QBe=gBe,XBe=zBe,F3=zS,ZBe=XBe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&F3(t,e[0],e[1])?e=[]:n>2&&F3(e[0],e[1],e[2])&&(e=[e[0]]),QBe(t,YBe(e,1),[])}),JBe=ZBe;const mD=xn(JBe);function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YP.apply(this,arguments)}function e3e(t,e){return s3e(t)||r3e(t,e)||n3e(t,e)||t3e()}function t3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n3e(t,e){if(t){if(typeof t=="string")return V3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V3(t,e)}}function V3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function s3e(t){if(Array.isArray(t))return t}function B3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(n),!0).forEach(function(r){i3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i3e(t,e,n){return e=a3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a3e(t){var e=o3e(t,"string");return Qv(e)=="symbol"?e:e+""}function o3e(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l3e(t){return Array.isArray(t)&&zr(t[0])&&zr(t[1])?t.join(" ~ "):t}var c3e=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,p=e.label,y=e.labelFormatter,b=e.accessibilityLayer,x=b===void 0?!1:b,w=function(){if(d&&d.length){var I={padding:0,margin:0},k=(f?mD(d,f):d).map(function(L,B){if(L.type==="none")return null;var U=yA({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),V=L.formatter||h||l3e,D=L.value,R=L.name,W=D,J=R;if(V&&W!=null&&J!=null){var oe=V(D,R,L,B,d);if(Array.isArray(oe)){var Ae=e3e(oe,2);W=Ae[0],J=Ae[1]}else W=oe}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:U},zr(J)?$.createElement("span",{className:"recharts-tooltip-item-name"},J):null,zr(J)?$.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,$.createElement("span",{className:"recharts-tooltip-item-value"},W),$.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:I},k)}return null},C=yA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),S=yA({margin:0},u),P=!Ut(p),_=P?p:"",g=Bt("recharts-default-tooltip",m),T=Bt("recharts-tooltip-label",v);P&&y&&d!==void 0&&d!==null&&(_=y(p,d));var E=x?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",YP({className:g,style:C},E),$.createElement("p",{className:T,style:S},$.isValidElement(_)?_:"".concat(_)),w())};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function A0(t,e,n){return e=u3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u3e(t){var e=d3e(t,"string");return Xv(e)=="symbol"?e:e+""}function d3e(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yg="recharts-tooltip-wrapper",h3e={visibility:"hidden"};function f3e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Bt(Yg,A0(A0(A0(A0({},"".concat(Yg,"-right"),Re(n)&&e&&Re(e.x)&&n>=e.x),"".concat(Yg,"-left"),Re(n)&&e&&Re(e.x)&&n<e.x),"".concat(Yg,"-bottom"),Re(r)&&e&&Re(e.y)&&r>=e.y),"".concat(Yg,"-top"),Re(r)&&e&&Re(e.y)&&r<e.y))}function U3(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&Re(a[r]))return a[r];var d=n[r]-l-i,h=n[r]+i;if(e[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,p=c[r]+u;return v>p?Math.max(d,c[r]):Math.max(h,c[r])}function m3e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function p3e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=U3({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=U3({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=m3e({translateX:d,translateY:h,useTranslate3d:l})):u=h3e,{cssProperties:u,cssClasses:f3e({translateX:d,translateY:h,coordinate:n})}}function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function z3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(n),!0).forEach(function(r){XP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aee(r.key),r)}}function v3e(t,e,n){return e&&y3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x3e(t,e,n){return e=l_(e),b3e(t,iee()?Reflect.construct(e,n||[],l_(t).constructor):e.apply(t,n))}function b3e(t,e){if(e&&(up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w3e(t)}function w3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iee=function(){return!!t})()}function l_(t){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l_(t)}function j3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QP(t,e)}function XP(t,e,n){return e=aee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aee(t){var e=_3e(t,"string");return up(e)=="symbol"?e:e+""}function _3e(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W3=1,N3e=function(t){function e(){var n;g3e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=x3e(this,e,[].concat(i)),XP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),XP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return j3e(e,t),v3e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>W3||Math.abs(r.height-this.state.lastBoundingBox.height)>W3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,m=i.offset,v=i.position,p=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,x=i.wrapperStyle,w=p3e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:b}),C=w.cssClasses,S=w.cssProperties,P=q3(q3({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return $.createElement("div",{tabIndex:-1,className:C,style:P,ref:function(g){r.wrapperNode=g}},u)}}])}(j.PureComponent),S3e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Go={isSsr:S3e(),get:function(e){return Go[e]},set:function(e,n){if(typeof e=="string")Go[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){Go[i]=e[i]})}}};function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function H3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(n),!0).forEach(function(r){pD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lee(r.key),r)}}function T3e(t,e,n){return e&&A3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C3e(t,e,n){return e=c_(e),P3e(t,oee()?Reflect.construct(e,n||[],c_(t).constructor):e.apply(t,n))}function P3e(t,e){if(e&&(dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I3e(t)}function I3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oee=function(){return!!t})()}function c_(t){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c_(t)}function k3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZP(t,e)}function pD(t,e,n){return e=lee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lee(t){var e=R3e(t,"string");return dp(e)=="symbol"?e:e+""}function R3e(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O3e(t){return t.dataKey}function D3e(t,e){return $.isValidElement(t)?$.cloneElement(t,e):typeof t=="function"?$.createElement(t,e):$.createElement(c3e,e)}var Va=function(t){function e(){return E3e(this,e),C3e(this,e,arguments)}return k3e(e,t),T3e(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,m=i.offset,v=i.payload,p=i.payloadUniqBy,y=i.position,b=i.reverseDirection,x=i.useTranslate3d,w=i.viewBox,C=i.wrapperStyle,S=v??[];h&&S.length&&(S=XJ(v.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),p,O3e));var P=S.length>0;return $.createElement(N3e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:P,offset:m,position:y,reverseDirection:b,useTranslate3d:x,viewBox:w,wrapperStyle:C},D3e(u,K3(K3({},this.props),{},{payload:S})))}}])}(j.PureComponent);pD(Va,"displayName","Tooltip");pD(Va,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Go.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var M3e=ll,L3e=function(){return M3e.Date.now()},$3e=L3e,F3e=/\s/;function V3e(t){for(var e=t.length;e--&&F3e.test(t.charAt(e)););return e}var B3e=V3e,U3e=B3e,z3e=/^\s+/;function q3e(t){return t&&t.slice(0,U3e(t)+1).replace(z3e,"")}var W3e=q3e,H3e=W3e,G3=cd,K3e=ig,Y3=NaN,G3e=/^[-+]0x[0-9a-f]+$/i,Y3e=/^0b[01]+$/i,Q3e=/^0o[0-7]+$/i,X3e=parseInt;function Z3e(t){if(typeof t=="number")return t;if(K3e(t))return Y3;if(G3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=H3e(t);var n=Y3e.test(t);return n||Q3e.test(t)?X3e(t.slice(2),n?2:8):G3e.test(t)?Y3:+t}var cee=Z3e,J3e=cd,vA=$3e,Q3=cee,e5e="Expected a function",t5e=Math.max,n5e=Math.min;function r5e(t,e,n){var r,i,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(e5e);e=Q3(e)||0,J3e(n)&&(d=!!n.leading,h="maxWait"in n,a=h?t5e(Q3(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function m(P){var _=r,g=i;return r=i=void 0,u=P,o=t.apply(g,_),o}function v(P){return u=P,l=setTimeout(b,e),d?m(P):o}function p(P){var _=P-c,g=P-u,T=e-_;return h?n5e(T,a-g):T}function y(P){var _=P-c,g=P-u;return c===void 0||_>=e||_<0||h&&g>=a}function b(){var P=vA();if(y(P))return x(P);l=setTimeout(b,p(P))}function x(P){return l=void 0,f&&r?m(P):(r=i=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=i=l=void 0}function C(){return l===void 0?o:x(vA())}function S(){var P=vA(),_=y(P);if(r=arguments,i=this,c=P,_){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(b,e),m(c)}return l===void 0&&(l=setTimeout(b,e)),o}return S.cancel=w,S.flush=C,S}var s5e=r5e,i5e=s5e,a5e=cd,o5e="Expected a function";function l5e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(o5e);return a5e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),i5e(t,e,{leading:r,maxWait:e,trailing:i})}var c5e=l5e;const uee=xn(c5e);function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function X3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(n),!0).forEach(function(r){u5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u5e(t,e,n){return e=d5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d5e(t){var e=h5e(t,"string");return Zv(e)=="symbol"?e:e+""}function h5e(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f5e(t,e){return y5e(t)||g5e(t,e)||p5e(t,e)||m5e()}function m5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p5e(t,e){if(t){if(typeof t=="string")return Z3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z3(t,e)}}function Z3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function y5e(t){if(Array.isArray(t))return t}var xA=j.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,v=t.debounce,p=v===void 0?0:v,y=t.id,b=t.className,x=t.onResize,w=t.style,C=w===void 0?{}:w,S=j.useRef(null),P=j.useRef();P.current=x,j.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var _=j.useState({containerWidth:i.width,containerHeight:i.height}),g=f5e(_,2),T=g[0],E=g[1],A=j.useCallback(function(k,L){E(function(B){var U=Math.round(k),V=Math.round(L);return B.containerWidth===U&&B.containerHeight===V?B:{containerWidth:U,containerHeight:V}})},[]);j.useEffect(function(){var k=function(R){var W,J=R[0].contentRect,oe=J.width,Ae=J.height;A(oe,Ae),(W=P.current)===null||W===void 0||W.call(P,oe,Ae)};p>0&&(k=uee(k,p,{trailing:!0,leading:!1}));var L=new ResizeObserver(k),B=S.current.getBoundingClientRect(),U=B.width,V=B.height;return A(U,V),L.observe(S.current),function(){L.disconnect()}},[A,p]);var I=j.useMemo(function(){var k=T.containerWidth,L=T.containerHeight;if(k<0||L<0)return null;ao(qd(o)||qd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ao(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=qd(o)?k:o,U=qd(c)?L:c;n&&n>0&&(B?U=B/n:U&&(B=U*n),f&&U>f&&(U=f)),ao(B>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,U,o,c,d,h,n);var V=!Array.isArray(m)&&Rl(m.type).endsWith("Chart");return $.Children.map(m,function(D){return $.isValidElement(D)?j.cloneElement(D,T0({width:B,height:U},V?{style:T0({height:"100%",width:"100%",maxHeight:U,maxWidth:B},D.props.style)}:{})):D})},[n,m,c,f,h,d,T,o]);return $.createElement("div",{id:y?"".concat(y):void 0,className:Bt("recharts-responsive-container",b),style:T0(T0({},C),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:S},I)}),qS=function(e){return null};qS.displayName="Cell";function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}function J3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J3(Object(n),!0).forEach(function(r){v5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v5e(t,e,n){return e=x5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x5e(t){var e=b5e(t,"string");return Jv(e)=="symbol"?e:e+""}function b5e(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vf={widthCache:{},cacheCount:0},w5e=2e3,j5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},e5="recharts_measurement_span";function _5e(t){var e=JP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Yy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Go.isSsr)return{width:0,height:0};var r=_5e(n),i=JSON.stringify({text:e,copyStyle:r});if(vf.widthCache[i])return vf.widthCache[i];try{var a=document.getElementById(e5);a||(a=document.createElement("span"),a.setAttribute("id",e5),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=JP(JP({},j5e),r);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return vf.widthCache[i]=c,++vf.cacheCount>w5e&&(vf.cacheCount=0,vf.widthCache={}),c}catch{return{width:0,height:0}}},N5e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function u_(t,e){return T5e(t)||A5e(t,e)||E5e(t,e)||S5e()}function S5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5e(t,e){if(t){if(typeof t=="string")return t5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t5(t,e)}}function t5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function T5e(t){if(Array.isArray(t))return t}function C5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I5e(r.key),r)}}function P5e(t,e,n){return e&&n5(t.prototype,e),n&&n5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I5e(t){var e=k5e(t,"string");return ex(e)=="symbol"?e:e+""}function k5e(t,e){if(ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var r5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,s5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,O5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},D5e=Object.keys(dee),Yf="NaN";function M5e(t,e){return t*dee[e]}var C0=function(){function t(e,n){C5e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!R5e.test(n)&&(this.num=NaN,this.unit=""),D5e.includes(n)&&(this.num=M5e(e,n),this.unit="px")}return P5e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=O5e.exec(n))!==null&&r!==void 0?r:[],a=u_(i,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function hee(t){if(t.includes(Yf))return Yf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=r5.exec(e))!==null&&n!==void 0?n:[],i=u_(r,4),a=i[1],o=i[2],l=i[3],c=C0.parse(a??""),u=C0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Yf;e=e.replace(r5,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=s5.exec(e))!==null&&h!==void 0?h:[],m=u_(f,4),v=m[1],p=m[2],y=m[3],b=C0.parse(v??""),x=C0.parse(y??""),w=p==="+"?b.add(x):b.subtract(x);if(w.isNaN())return Yf;e=e.replace(s5,w.toString())}return e}var i5=/\(([^()]*)\)/;function L5e(t){for(var e=t;e.includes("(");){var n=i5.exec(e),r=u_(n,2),i=r[1];e=e.replace(i5,hee(i))}return e}function $5e(t){var e=t.replace(/\s+/g,"");return e=L5e(e),e=hee(e),e}function F5e(t){try{return $5e(t)}catch{return Yf}}function bA(t){var e=F5e(t.slice(5,-1));return e===Yf?"":e}var V5e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],B5e=["dx","dy","angle","className","breakAll"];function eI(){return eI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eI.apply(this,arguments)}function a5(t,e){if(t==null)return{};var n=U5e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function U5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function o5(t,e){return H5e(t)||W5e(t,e)||q5e(t,e)||z5e()}function z5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5e(t,e){if(t){if(typeof t=="string")return l5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l5(t,e)}}function l5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function H5e(t){if(Array.isArray(t))return t}var fee=/[ \f\n\r\t\v\u2028\u2029]+/,mee=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Ut(n)||(r?a=n.toString().split(""):a=n.toString().split(fee));var o=a.map(function(c){return{word:c,width:Yy(c,i).width}}),l=r?0:Yy("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},K5e=function(e,n,r,i,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Re(o),h=l,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(U,V){var D=V.word,R=V.width,W=U[U.length-1];if(W&&(i==null||a||W.width+R+r<Number(i)))W.words.push(D),W.width+=R+r;else{var J={words:[D],width:R};U.push(J)}return U},[])},m=f(n),v=function(B){return B.reduce(function(U,V){return U.width>V.width?U:V})};if(!d)return m;for(var p="",y=function(B){var U=h.slice(0,B),V=mee({breakAll:u,style:c,children:U+p}).wordsWithComputedWidth,D=f(V),R=D.length>o||v(D).width>Number(i);return[R,D]},b=0,x=h.length-1,w=0,C;b<=x&&w<=h.length-1;){var S=Math.floor((b+x)/2),P=S-1,_=y(P),g=o5(_,2),T=g[0],E=g[1],A=y(S),I=o5(A,1),k=I[0];if(!T&&!k&&(b=S+1),T&&k&&(x=S-1),!T&&k){C=E;break}w++}return C||m},c5=function(e){var n=Ut(e)?[]:e.toString().split(fee);return[{words:n}]},G5e=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!Go.isSsr){var c,u,d=mee({breakAll:o,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return c5(i);return K5e({breakAll:o,children:i,maxLines:l,style:a},c,u,n,r)}return c5(i)},u5="#808080",Vh=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,v=e.verticalAnchor,p=v===void 0?"end":v,y=e.fill,b=y===void 0?u5:y,x=a5(e,V5e),w=j.useMemo(function(){return G5e({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),C=x.dx,S=x.dy,P=x.angle,_=x.className,g=x.breakAll,T=a5(x,B5e);if(!zr(r)||!zr(a))return null;var E=r+(Re(C)?C:0),A=a+(Re(S)?S:0),I;switch(p){case"start":I=bA("calc(".concat(u,")"));break;case"middle":I=bA("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=bA("calc(".concat(w.length-1," * -").concat(l,")"));break}var k=[];if(h){var L=w[0].width,B=x.width;k.push("scale(".concat((Re(B)?B/L:1)/L,")"))}return P&&k.push("rotate(".concat(P,", ").concat(E,", ").concat(A,")")),k.length&&(T.transform=k.join(" ")),$.createElement("text",eI({},_t(T,!0),{x:E,y:A,className:Bt("recharts-text",_),textAnchor:m,fill:b.includes("url")?u5:b}),w.map(function(U,V){var D=U.words.join(g?"":" ");return $.createElement("tspan",{x:E,dy:V===0?I:l,key:"".concat(D,"-").concat(V)},D)}))};function Au(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y5e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gD(t){let e,n,r;t.length!==2?(e=Au,n=(l,c)=>Au(t(l),c),r=(l,c)=>t(l)-c):(e=t===Au||t===Y5e?t:Q5e,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=i(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function Q5e(){return 0}function pee(t){return t===null?NaN:+t}function*X5e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Z5e=gD(Au),Nb=Z5e.right;gD(pee).center;class d5 extends Map{constructor(e,n=tUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(h5(this,e))}has(e){return super.has(h5(this,e))}set(e,n){return super.set(J5e(this,e),n)}delete(e){return super.delete(eUe(this,e))}}function h5({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function J5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function eUe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function tUe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nUe(t=Au){if(t===Au)return gee;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function gee(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const rUe=Math.sqrt(50),sUe=Math.sqrt(10),iUe=Math.sqrt(2);function d_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=rUe?10:a>=sUe?5:a>=iUe?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?d_(t,e,n*2):[l,c,u]}function tI(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?d_(e,t,n):d_(t,e,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function nI(t,e,n){return e=+e,t=+t,n=+n,d_(t,e,n)[2]}function rI(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?nI(e,t,n):nI(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function f5(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function m5(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function yee(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?gee:nUe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+f)),v=Math.min(r,Math.floor(e+(c-u)*h/c+f));yee(t,e,m,v,i)}const a=t[e];let o=n,l=r;for(Qg(t,n,e),i(t[r],a)>0&&Qg(t,n,r);o<l;){for(Qg(t,o,l),++o,--l;i(t[o],a)<0;)++o;for(;i(t[l],a)>0;)--l}i(t[n],a)===0?Qg(t,n,l):(++l,Qg(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Qg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function aUe(t,e,n){if(t=Float64Array.from(X5e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return m5(t);if(e>=1)return f5(t);var r,i=(r-1)*e,a=Math.floor(i),o=f5(yee(t,a).subarray(0,a+1)),l=m5(t.subarray(a+1));return o+(l-o)*(i-a)}}function oUe(t,e,n=pee){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return o+(l-o)*(i-a)}}function lUe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Sa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function cc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const sI=Symbol("implicit");function yD(){var t=new d5,e=[],n=[],r=sI;function i(a){let o=t.get(a);if(o===void 0){if(r!==sI)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new d5;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return yD(e,n).unknown(r)},Sa.apply(i,arguments),i}function tx(){var t=yD().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=i<r,v=m?i:r,p=m?r:i;a=(p-v)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),v+=(p-v-a*(f-c))*d,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=lUe(f).map(function(b){return v+a*b});return n(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return tx(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Sa.apply(h(),arguments)}function vee(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vee(e())},t}function Qy(){return vee(tx.apply(null,arguments).paddingInner(1))}function vD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sb(){}var nx=.7,h_=1/nx,xm="\\s*([+-]?\\d+)\\s*",rx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cUe=/^#([0-9a-f]{3,8})$/,uUe=new RegExp(`^rgb\\(${xm},${xm},${xm}\\)$`),dUe=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),hUe=new RegExp(`^rgba\\(${xm},${xm},${xm},${rx}\\)$`),fUe=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${rx}\\)$`),mUe=new RegExp(`^hsl\\(${rx},${Yo},${Yo}\\)$`),pUe=new RegExp(`^hsla\\(${rx},${Yo},${Yo},${rx}\\)$`),p5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vD(Sb,sx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:g5,formatHex:g5,formatHex8:gUe,formatHsl:yUe,formatRgb:y5,toString:y5});function g5(){return this.rgb().formatHex()}function gUe(){return this.rgb().formatHex8()}function yUe(){return bee(this).formatHsl()}function y5(){return this.rgb().formatRgb()}function sx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cUe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?v5(e):n===3?new gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?P0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?P0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uUe.exec(t))?new gi(e[1],e[2],e[3],1):(e=dUe.exec(t))?new gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hUe.exec(t))?P0(e[1],e[2],e[3],e[4]):(e=fUe.exec(t))?P0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mUe.exec(t))?w5(e[1],e[2]/100,e[3]/100,1):(e=pUe.exec(t))?w5(e[1],e[2]/100,e[3]/100,e[4]):p5.hasOwnProperty(t)?v5(p5[t]):t==="transparent"?new gi(NaN,NaN,NaN,0):null}function v5(t){return new gi(t>>16&255,t>>8&255,t&255,1)}function P0(t,e,n,r){return r<=0&&(t=e=n=NaN),new gi(t,e,n,r)}function vUe(t){return t instanceof Sb||(t=sx(t)),t?(t=t.rgb(),new gi(t.r,t.g,t.b,t.opacity)):new gi}function iI(t,e,n,r){return arguments.length===1?vUe(t):new gi(t,e,n,r??1)}function gi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vD(gi,iI,xee(Sb,{brighter(t){return t=t==null?h_:Math.pow(h_,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nx:Math.pow(nx,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gi(uh(this.r),uh(this.g),uh(this.b),f_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x5,formatHex:x5,formatHex8:xUe,formatRgb:b5,toString:b5}));function x5(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}`}function xUe(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}${Wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function b5(){const t=f_(this.opacity);return`${t===1?"rgb(":"rgba("}${uh(this.r)}, ${uh(this.g)}, ${uh(this.b)}${t===1?")":`, ${t})`}`}function f_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function uh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wd(t){return t=uh(t),(t<16?"0":"")+t.toString(16)}function w5(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ka(t,e,n,r)}function bee(t){if(t instanceof Ka)return new Ka(t.h,t.s,t.l,t.opacity);if(t instanceof Sb||(t=sx(t)),!t)return new Ka;if(t instanceof Ka)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,c=(a+i)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new Ka(o,l,c,t.opacity)}function bUe(t,e,n,r){return arguments.length===1?bee(t):new Ka(t,e,n,r??1)}function Ka(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vD(Ka,bUe,xee(Sb,{brighter(t){return t=t==null?h_:Math.pow(h_,t),new Ka(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nx:Math.pow(nx,t),new Ka(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gi(wA(t>=240?t-240:t+120,i,r),wA(t,i,r),wA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ka(j5(this.h),I0(this.s),I0(this.l),f_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=f_(this.opacity);return`${t===1?"hsl(":"hsla("}${j5(this.h)}, ${I0(this.s)*100}%, ${I0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function j5(t){return t=(t||0)%360,t<0?t+360:t}function I0(t){return Math.max(0,Math.min(1,t||0))}function wA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xD=t=>()=>t;function wUe(t,e){return function(n){return t+n*e}}function jUe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _Ue(t){return(t=+t)==1?wee:function(e,n){return n-e?jUe(e,n,t):xD(isNaN(e)?n:e)}}function wee(t,e){var n=e-t;return n?wUe(t,n):xD(isNaN(t)?e:t)}const _5=function t(e){var n=_Ue(e);function r(i,a){var o=n((i=iI(i)).r,(a=iI(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=wee(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function NUe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function SUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function EUe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=pg(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function AUe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function m_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function TUe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=pg(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var aI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jA=new RegExp(aI.source,"g");function CUe(t){return function(){return t}}function PUe(t){return function(e){return t(e)+""}}function IUe(t,e){var n=aI.lastIndex=jA.lastIndex=0,r,i,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=aI.exec(t))&&(i=jA.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:m_(r,i)})),n=jA.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?PUe(c[0].x):CUe(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function pg(t,e){var n=typeof e,r;return e==null||n==="boolean"?xD(e):(n==="number"?m_:n==="string"?(r=sx(e))?(e=r,_5):IUe:e instanceof sx?_5:e instanceof Date?AUe:SUe(e)?NUe:Array.isArray(e)?EUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?TUe:m_)(t,e)}function bD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function kUe(t,e){e===void 0&&(e=t,t=pg);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function RUe(t){return function(){return t}}function p_(t){return+t}var N5=[0,1];function Ys(t){return t}function oI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:RUe(isNaN(e)?NaN:.5)}function OUe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function DUe(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=oI(i,r),a=n(o,a)):(r=oI(r,i),a=n(a,o)),function(l){return a(r(l))}}function MUe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=oI(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=Nb(t,l,1,r)-1;return a[c](i[c](l))}}function Eb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function WS(){var t=N5,e=N5,n=pg,r,i,a,o=Ys,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Ys&&(o=OUe(t[0],t[f-1])),l=f>2?MUe:DUe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((u||(u=l(e,t.map(r),m_)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,p_),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=bD,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Ys,d()):o!==Ys},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return r=f,i=m,d()}}function wD(){return WS()(Ys,Ys)}function LUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function g_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hp(t){return t=g_(Math.abs(t)),t?t[1]:NaN}function $Ue(t,e){return function(n,r){for(var i=n.length,a=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function FUe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var VUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ix(t){if(!(e=VUe.exec(t)))throw new Error("invalid format: "+t);var e;return new jD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ix.prototype=jD.prototype;function jD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}jD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BUe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var jee;function UUe(t,e){var n=g_(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(jee=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+g_(t,Math.max(0,e+a-1))[0]}function S5(t,e){var n=g_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const E5={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:LUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>S5(t*100,e),r:S5,s:UUe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function A5(t){return t}var T5=Array.prototype.map,C5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zUe(t){var e=t.grouping===void 0||t.thousands===void 0?A5:$Ue(T5.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?A5:FUe(T5.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ix(h);var f=h.fill,m=h.align,v=h.sign,p=h.symbol,y=h.zero,b=h.width,x=h.comma,w=h.precision,C=h.trim,S=h.type;S==="n"?(x=!0,S="g"):E5[S]||(w===void 0&&(w=12),C=!0,S="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var P=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",_=p==="$"?r:/[%p]/.test(S)?o:"",g=E5[S],T=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(A){var I=P,k=_,L,B,U;if(S==="c")k=g(A)+k,A="";else{A=+A;var V=A<0||1/A<0;if(A=isNaN(A)?c:g(Math.abs(A),w),C&&(A=BUe(A)),V&&+A==0&&v!=="+"&&(V=!1),I=(V?v==="("?v:l:v==="-"||v==="("?"":v)+I,k=(S==="s"?C5[8+jee/3]:"")+k+(V&&v==="("?")":""),T){for(L=-1,B=A.length;++L<B;)if(U=A.charCodeAt(L),48>U||U>57){k=(U===46?i+A.slice(L+1):A.slice(L))+k,A=A.slice(0,L);break}}}x&&!y&&(A=e(A,1/0));var D=I.length+A.length+k.length,R=D<b?new Array(b-D+1).join(f):"";switch(x&&y&&(A=e(R+A,R.length?b-k.length:1/0),R=""),m){case"<":A=I+A+k+R;break;case"=":A=I+R+A+k;break;case"^":A=R.slice(0,D=R.length>>1)+I+A+k+R.slice(D);break;default:A=R+I+A+k;break}return a(A)}return E.toString=function(){return h+""},E}function d(h,f){var m=u((h=ix(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(hp(f)/3)))*3,p=Math.pow(10,-v),y=C5[8+v/3];return function(b){return m(p*b)+y}}return{format:u,formatPrefix:d}}var k0,_D,_ee;qUe({thousands:",",grouping:[3],currency:["$",""]});function qUe(t){return k0=zUe(t),_D=k0.format,_ee=k0.formatPrefix,k0}function WUe(t){return Math.max(0,-hp(Math.abs(t)))}function HUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hp(e)/3)))*3-hp(Math.abs(t)))}function KUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hp(e)-hp(t))+1}function Nee(t,e,n,r){var i=rI(t,e,n),a;switch(r=ix(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=HUe(i,o))&&(r.precision=a),_ee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=KUe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=WUe(i))&&(r.precision=a-(r.type==="%")*2);break}}return _D(r)}function ud(t){var e=t.domain;return t.ticks=function(n){var r=e();return tI(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Nee(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=nI(o,l,n),u===c)return r[i]=o,r[a]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function y_(){var t=wD();return t.copy=function(){return Eb(t,y_())},Sa.apply(t,arguments),ud(t)}function See(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,p_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return See(t).unknown(e)},t=arguments.length?Array.from(t,p_):[0,1],ud(n)}function Eee(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function P5(t){return Math.log(t)}function I5(t){return Math.exp(t)}function GUe(t){return-Math.log(-t)}function YUe(t){return-Math.exp(-t)}function QUe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function XUe(t){return t===10?QUe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ZUe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function k5(t){return(e,n)=>-t(-e,n)}function ND(t){const e=t(P5,I5),n=e.domain;let r=10,i,a;function o(){return i=ZUe(r),a=XUe(r),n()[0]<0?(i=k5(i),a=k5(a),t(GUe,YUe)):t(P5,I5),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),m=i(d),v,p;const y=l==null?10:+l;let b=[];if(!(r%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<r;++v)if(p=f<0?v/a(-f):v*a(f),!(p<u)){if(p>d)break;b.push(p)}}else for(;f<=m;++f)for(v=r-1;v>=1;--v)if(p=f>0?v/a(-f):v*a(f),!(p<u)){if(p>d)break;b.push(p)}b.length*2<y&&(b=tI(u,d,y))}else b=tI(f,m,Math.min(m-f,y)).map(a);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ix(c)).precision==null&&(c.trim=!0),c=_D(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(Eee(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function Aee(){const t=ND(WS()).domain([1,10]);return t.copy=()=>Eb(t,Aee()).base(t.base()),Sa.apply(t,arguments),t}function R5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function O5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SD(t){var e=1,n=t(R5(e),O5(e));return n.constant=function(r){return arguments.length?t(R5(e=+r),O5(e)):e},ud(n)}function Tee(){var t=SD(WS());return t.copy=function(){return Eb(t,Tee()).constant(t.constant())},Sa.apply(t,arguments)}function D5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function JUe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function e6e(t){return t<0?-t*t:t*t}function ED(t){var e=t(Ys,Ys),n=1;function r(){return n===1?t(Ys,Ys):n===.5?t(JUe,e6e):t(D5(n),D5(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ud(e)}function AD(){var t=ED(WS());return t.copy=function(){return Eb(t,AD()).exponent(t.exponent())},Sa.apply(t,arguments),t}function t6e(){return AD.apply(null,arguments).exponent(.5)}function M5(t){return Math.sign(t)*t*t}function n6e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Cee(){var t=wD(),e=[0,1],n=!1,r;function i(a){var o=n6e(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(M5(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,p_)).map(M5)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Cee(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Sa.apply(i,arguments),ud(i)}function Pee(){var t=[],e=[],n=[],r;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=oUe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Nb(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Au),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Pee().domain(t).range(e).unknown(r)},Sa.apply(a,arguments)}function Iee(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Nb(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Iee().domain([t,e]).range(i).unknown(a)},Sa.apply(ud(o),arguments)}function kee(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Nb(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return kee().domain(t).range(e).unknown(n)},Sa.apply(i,arguments)}const _A=new Date,NA=new Date;function Wr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},i.filter=a=>Wr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(_A.setTime(+a),NA.setTime(+o),t(_A),t(NA),Math.floor(n(_A,NA))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const v_=Wr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);v_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):v_);v_.range;const El=1e3,aa=El*60,Al=aa*60,Jl=Al*24,TD=Jl*7,L5=Jl*30,SA=Jl*365,Hd=Wr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getUTCSeconds());Hd.range;const CD=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*El)},(t,e)=>{t.setTime(+t+e*aa)},(t,e)=>(e-t)/aa,t=>t.getMinutes());CD.range;const PD=Wr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*aa)},(t,e)=>(e-t)/aa,t=>t.getUTCMinutes());PD.range;const ID=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*El-t.getMinutes()*aa)},(t,e)=>{t.setTime(+t+e*Al)},(t,e)=>(e-t)/Al,t=>t.getHours());ID.range;const kD=Wr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Al)},(t,e)=>(e-t)/Al,t=>t.getUTCHours());kD.range;const Ab=Wr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*aa)/Jl,t=>t.getDate()-1);Ab.range;const HS=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>t.getUTCDate()-1);HS.range;const Ree=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>Math.floor(t/Jl));Ree.range;function nf(t){return Wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*aa)/TD)}const KS=nf(0),x_=nf(1),r6e=nf(2),s6e=nf(3),fp=nf(4),i6e=nf(5),a6e=nf(6);KS.range;x_.range;r6e.range;s6e.range;fp.range;i6e.range;a6e.range;function rf(t){return Wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/TD)}const GS=rf(0),b_=rf(1),o6e=rf(2),l6e=rf(3),mp=rf(4),c6e=rf(5),u6e=rf(6);GS.range;b_.range;o6e.range;l6e.range;mp.range;c6e.range;u6e.range;const RD=Wr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RD.range;const OD=Wr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());OD.range;const ec=Wr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ec.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ec.range;const tc=Wr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());tc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});tc.range;function Oee(t,e,n,r,i,a){const o=[[Hd,1,El],[Hd,5,5*El],[Hd,15,15*El],[Hd,30,30*El],[a,1,aa],[a,5,5*aa],[a,15,15*aa],[a,30,30*aa],[i,1,Al],[i,3,3*Al],[i,6,6*Al],[i,12,12*Al],[r,1,Jl],[r,2,2*Jl],[n,1,TD],[e,1,L5],[e,3,3*L5],[t,1,SA]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=gD(([,,y])=>y).right(o,f);if(m===o.length)return t.every(rI(u/SA,d/SA,h));if(m===0)return v_.every(Math.max(rI(u,d,h),1));const[v,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(p)}return[l,c]}const[d6e,h6e]=Oee(tc,OD,GS,Ree,kD,PD),[f6e,m6e]=Oee(ec,RD,KS,Ab,ID,CD);function EA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function AA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function p6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Zg(i),d=Jg(i),h=Zg(a),f=Jg(a),m=Zg(o),v=Jg(o),p=Zg(l),y=Jg(l),b=Zg(c),x=Jg(c),w={a:V,A:D,b:R,B:W,c:null,d:z5,e:z5,f:$6e,g:G6e,G:Q6e,H:D6e,I:M6e,j:L6e,L:Dee,m:F6e,M:V6e,p:J,q:oe,Q:H5,s:K5,S:B6e,u:U6e,U:z6e,V:q6e,w:W6e,W:H6e,x:null,X:null,y:K6e,Y:Y6e,Z:X6e,"%":W5},C={a:Ae,A:z,b:ie,B:ve,c:null,d:q5,e:q5,f:tze,g:dze,G:fze,H:Z6e,I:J6e,j:eze,L:Lee,m:nze,M:rze,p:xe,q:Be,Q:H5,s:K5,S:sze,u:ize,U:aze,V:oze,w:lze,W:cze,x:null,X:null,y:uze,Y:hze,Z:mze,"%":W5},S={a:E,A,b:I,B:k,c:L,d:B5,e:B5,f:I6e,g:V5,G:F5,H:U5,I:U5,j:A6e,L:P6e,m:E6e,M:T6e,p:T,q:S6e,Q:R6e,s:O6e,S:C6e,u:b6e,U:w6e,V:j6e,w:x6e,W:_6e,x:B,X:U,y:V5,Y:F5,Z:N6e,"%":k6e};w.x=P(n,w),w.X=P(r,w),w.c=P(e,w),C.x=P(n,C),C.X=P(r,C),C.c=P(e,C);function P(he,fe){return function(me){var ce=[],Ke=-1,rt=0,zt=he.length,nn,En,Hr;for(me instanceof Date||(me=new Date(+me));++Ke<zt;)he.charCodeAt(Ke)===37&&(ce.push(he.slice(rt,Ke)),(En=$5[nn=he.charAt(++Ke)])!=null?nn=he.charAt(++Ke):En=nn==="e"?" ":"0",(Hr=fe[nn])&&(nn=Hr(me,En)),ce.push(nn),rt=Ke+1);return ce.push(he.slice(rt,Ke)),ce.join("")}}function _(he,fe){return function(me){var ce=Xg(1900,void 0,1),Ke=g(ce,he,me+="",0),rt,zt;if(Ke!=me.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(fe&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(rt=AA(Xg(ce.y,0,1)),zt=rt.getUTCDay(),rt=zt>4||zt===0?b_.ceil(rt):b_(rt),rt=HS.offset(rt,(ce.V-1)*7),ce.y=rt.getUTCFullYear(),ce.m=rt.getUTCMonth(),ce.d=rt.getUTCDate()+(ce.w+6)%7):(rt=EA(Xg(ce.y,0,1)),zt=rt.getDay(),rt=zt>4||zt===0?x_.ceil(rt):x_(rt),rt=Ab.offset(rt,(ce.V-1)*7),ce.y=rt.getFullYear(),ce.m=rt.getMonth(),ce.d=rt.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),zt="Z"in ce?AA(Xg(ce.y,0,1)).getUTCDay():EA(Xg(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(zt+5)%7:ce.w+ce.U*7-(zt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,AA(ce)):EA(ce)}}function g(he,fe,me,ce){for(var Ke=0,rt=fe.length,zt=me.length,nn,En;Ke<rt;){if(ce>=zt)return-1;if(nn=fe.charCodeAt(Ke++),nn===37){if(nn=fe.charAt(Ke++),En=S[nn in $5?fe.charAt(Ke++):nn],!En||(ce=En(he,me,ce))<0)return-1}else if(nn!=me.charCodeAt(ce++))return-1}return ce}function T(he,fe,me){var ce=u.exec(fe.slice(me));return ce?(he.p=d.get(ce[0].toLowerCase()),me+ce[0].length):-1}function E(he,fe,me){var ce=m.exec(fe.slice(me));return ce?(he.w=v.get(ce[0].toLowerCase()),me+ce[0].length):-1}function A(he,fe,me){var ce=h.exec(fe.slice(me));return ce?(he.w=f.get(ce[0].toLowerCase()),me+ce[0].length):-1}function I(he,fe,me){var ce=b.exec(fe.slice(me));return ce?(he.m=x.get(ce[0].toLowerCase()),me+ce[0].length):-1}function k(he,fe,me){var ce=p.exec(fe.slice(me));return ce?(he.m=y.get(ce[0].toLowerCase()),me+ce[0].length):-1}function L(he,fe,me){return g(he,e,fe,me)}function B(he,fe,me){return g(he,n,fe,me)}function U(he,fe,me){return g(he,r,fe,me)}function V(he){return o[he.getDay()]}function D(he){return a[he.getDay()]}function R(he){return c[he.getMonth()]}function W(he){return l[he.getMonth()]}function J(he){return i[+(he.getHours()>=12)]}function oe(he){return 1+~~(he.getMonth()/3)}function Ae(he){return o[he.getUTCDay()]}function z(he){return a[he.getUTCDay()]}function ie(he){return c[he.getUTCMonth()]}function ve(he){return l[he.getUTCMonth()]}function xe(he){return i[+(he.getUTCHours()>=12)]}function Be(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var fe=P(he+="",w);return fe.toString=function(){return he},fe},parse:function(he){var fe=_(he+="",!1);return fe.toString=function(){return he},fe},utcFormat:function(he){var fe=P(he+="",C);return fe.toString=function(){return he},fe},utcParse:function(he){var fe=_(he+="",!0);return fe.toString=function(){return he},fe}}}var $5={"-":"",_:" ",0:"0"},rs=/^\s*\d+/,g6e=/^%/,y6e=/[\\^$*+?|[\]().{}]/g;function fn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function v6e(t){return t.replace(y6e,"\\$&")}function Zg(t){return new RegExp("^(?:"+t.map(v6e).join("|")+")","i")}function Jg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function x6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function b6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function w6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function j6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function F5(t,e,n){var r=rs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function V5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function N6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function S6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function E6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function B5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function A6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function U5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function T6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function C6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function P6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function I6e(t,e,n){var r=rs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function k6e(t,e,n){var r=g6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function R6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function O6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function z5(t,e){return fn(t.getDate(),e,2)}function D6e(t,e){return fn(t.getHours(),e,2)}function M6e(t,e){return fn(t.getHours()%12||12,e,2)}function L6e(t,e){return fn(1+Ab.count(ec(t),t),e,3)}function Dee(t,e){return fn(t.getMilliseconds(),e,3)}function $6e(t,e){return Dee(t,e)+"000"}function F6e(t,e){return fn(t.getMonth()+1,e,2)}function V6e(t,e){return fn(t.getMinutes(),e,2)}function B6e(t,e){return fn(t.getSeconds(),e,2)}function U6e(t){var e=t.getDay();return e===0?7:e}function z6e(t,e){return fn(KS.count(ec(t)-1,t),e,2)}function Mee(t){var e=t.getDay();return e>=4||e===0?fp(t):fp.ceil(t)}function q6e(t,e){return t=Mee(t),fn(fp.count(ec(t),t)+(ec(t).getDay()===4),e,2)}function W6e(t){return t.getDay()}function H6e(t,e){return fn(x_.count(ec(t)-1,t),e,2)}function K6e(t,e){return fn(t.getFullYear()%100,e,2)}function G6e(t,e){return t=Mee(t),fn(t.getFullYear()%100,e,2)}function Y6e(t,e){return fn(t.getFullYear()%1e4,e,4)}function Q6e(t,e){var n=t.getDay();return t=n>=4||n===0?fp(t):fp.ceil(t),fn(t.getFullYear()%1e4,e,4)}function X6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fn(e/60|0,"0",2)+fn(e%60,"0",2)}function q5(t,e){return fn(t.getUTCDate(),e,2)}function Z6e(t,e){return fn(t.getUTCHours(),e,2)}function J6e(t,e){return fn(t.getUTCHours()%12||12,e,2)}function eze(t,e){return fn(1+HS.count(tc(t),t),e,3)}function Lee(t,e){return fn(t.getUTCMilliseconds(),e,3)}function tze(t,e){return Lee(t,e)+"000"}function nze(t,e){return fn(t.getUTCMonth()+1,e,2)}function rze(t,e){return fn(t.getUTCMinutes(),e,2)}function sze(t,e){return fn(t.getUTCSeconds(),e,2)}function ize(t){var e=t.getUTCDay();return e===0?7:e}function aze(t,e){return fn(GS.count(tc(t)-1,t),e,2)}function $ee(t){var e=t.getUTCDay();return e>=4||e===0?mp(t):mp.ceil(t)}function oze(t,e){return t=$ee(t),fn(mp.count(tc(t),t)+(tc(t).getUTCDay()===4),e,2)}function lze(t){return t.getUTCDay()}function cze(t,e){return fn(b_.count(tc(t)-1,t),e,2)}function uze(t,e){return fn(t.getUTCFullYear()%100,e,2)}function dze(t,e){return t=$ee(t),fn(t.getUTCFullYear()%100,e,2)}function hze(t,e){return fn(t.getUTCFullYear()%1e4,e,4)}function fze(t,e){var n=t.getUTCDay();return t=n>=4||n===0?mp(t):mp.ceil(t),fn(t.getUTCFullYear()%1e4,e,4)}function mze(){return"+0000"}function W5(){return"%"}function H5(t){return+t}function K5(t){return Math.floor(+t/1e3)}var xf,Fee,Vee;pze({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pze(t){return xf=p6e(t),Fee=xf.format,xf.parse,Vee=xf.utcFormat,xf.utcParse,xf}function gze(t){return new Date(t)}function yze(t){return t instanceof Date?+t:+new Date(+t)}function DD(t,e,n,r,i,a,o,l,c,u){var d=wD(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),p=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),x=u("%b %d"),w=u("%B"),C=u("%Y");function S(P){return(c(P)<P?m:l(P)<P?v:o(P)<P?p:a(P)<P?y:r(P)<P?i(P)<P?b:x:n(P)<P?w:C)(P)}return d.invert=function(P){return new Date(h(P))},d.domain=function(P){return arguments.length?f(Array.from(P,yze)):f().map(gze)},d.ticks=function(P){var _=f();return t(_[0],_[_.length-1],P??10)},d.tickFormat=function(P,_){return _==null?S:u(_)},d.nice=function(P){var _=f();return(!P||typeof P.range!="function")&&(P=e(_[0],_[_.length-1],P??10)),P?f(Eee(_,P)):d},d.copy=function(){return Eb(d,DD(t,e,n,r,i,a,o,l,c,u))},d}function vze(){return Sa.apply(DD(f6e,m6e,ec,RD,KS,Ab,ID,CD,Hd,Fee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xze(){return Sa.apply(DD(d6e,h6e,tc,OD,GS,HS,kD,PD,Hd,Vee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function YS(){var t=0,e=1,n,r,i,a,o=Ys,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-n)*i,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),u):[o(0),o(1)]}}return u.range=d(pg),u.rangeRound=d(bD),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function dd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Bee(){var t=ud(YS()(Ys));return t.copy=function(){return dd(t,Bee())},cc.apply(t,arguments)}function Uee(){var t=ND(YS()).domain([1,10]);return t.copy=function(){return dd(t,Uee()).base(t.base())},cc.apply(t,arguments)}function zee(){var t=SD(YS());return t.copy=function(){return dd(t,zee()).constant(t.constant())},cc.apply(t,arguments)}function MD(){var t=ED(YS());return t.copy=function(){return dd(t,MD()).exponent(t.exponent())},cc.apply(t,arguments)}function bze(){return MD.apply(null,arguments).exponent(.5)}function qee(){var t=[],e=Ys;function n(r){if(r!=null&&!isNaN(r=+r))return e((Nb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Au),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>aUe(t,a/r))},n.copy=function(){return qee(e).domain(t)},cc.apply(n,arguments)}function QS(){var t=0,e=.5,n=1,r=1,i,a,o,l,c,u=Ys,d,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-a)*(r*p<r*a?l:c),u(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,e,n]=p,i=d(t=+t),a=d(e=+e),o=d(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(u=p,m):u};function v(p){return function(y){var b,x,w;return arguments.length?([b,x,w]=y,u=kUe(p,[b,x,w]),m):[u(0),u(.5),u(1)]}}return m.range=v(pg),m.rangeRound=v(bD),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return d=p,i=p(t),a=p(e),o=p(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m}}function Wee(){var t=ud(QS()(Ys));return t.copy=function(){return dd(t,Wee())},cc.apply(t,arguments)}function Hee(){var t=ND(QS()).domain([.1,1,10]);return t.copy=function(){return dd(t,Hee()).base(t.base())},cc.apply(t,arguments)}function Kee(){var t=SD(QS());return t.copy=function(){return dd(t,Kee()).constant(t.constant())},cc.apply(t,arguments)}function LD(){var t=ED(QS());return t.copy=function(){return dd(t,LD()).exponent(t.exponent())},cc.apply(t,arguments)}function wze(){return LD.apply(null,arguments).exponent(.5)}const G5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tx,scaleDiverging:Wee,scaleDivergingLog:Hee,scaleDivergingPow:LD,scaleDivergingSqrt:wze,scaleDivergingSymlog:Kee,scaleIdentity:See,scaleImplicit:sI,scaleLinear:y_,scaleLog:Aee,scaleOrdinal:yD,scalePoint:Qy,scalePow:AD,scaleQuantile:Pee,scaleQuantize:Iee,scaleRadial:Cee,scaleSequential:Bee,scaleSequentialLog:Uee,scaleSequentialPow:MD,scaleSequentialQuantile:qee,scaleSequentialSqrt:bze,scaleSequentialSymlog:zee,scaleSqrt:t6e,scaleSymlog:Tee,scaleThreshold:kee,scaleTime:vze,scaleUtc:xze,tickFormat:Nee},Symbol.toStringTag,{value:"Module"}));var jze=ig;function _ze(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(o!=null&&(l===void 0?o===o&&!jze(o):n(o,l)))var l=o,c=a}return c}var XS=_ze;function Nze(t,e){return t>e}var Gee=Nze,Sze=XS,Eze=Gee,Aze=mg;function Tze(t){return t&&t.length?Sze(t,Aze,Eze):void 0}var Cze=Tze;const cu=xn(Cze);function Pze(t,e){return t<e}var Yee=Pze,Ize=XS,kze=Yee,Rze=mg;function Oze(t){return t&&t.length?Ize(t,Rze,kze):void 0}var Dze=Oze;const ZS=xn(Dze);var Mze=X2,Lze=cl,$ze=ree,Fze=_i;function Vze(t,e){var n=Fze(t)?Mze:$ze;return n(t,Lze(e))}var Bze=Vze,Uze=tee,zze=Bze;function qze(t,e){return Uze(zze(t,e),1)}var Wze=qze;const Hze=xn(Wze);var Kze=hD;function Gze(t,e){return Kze(t,e)}var Yze=Gze;const pp=xn(Yze);var gg=1e9,Qze={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FD,Xn=!0,wa="[DecimalError] ",dh=wa+"Invalid argument: ",$D=wa+"Exponent out of range: ",yg=Math.floor,Rd=Math.pow,Xze=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Oi,Qr=1e7,qn=7,Qee=9007199254740991,w_=yg(Qee/qn),nt={};nt.absoluteValue=nt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};nt.comparedTo=nt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*qn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(t){return Ol(this,new this.constructor(t))};nt.dividedToIntegerBy=nt.idiv=function(t){var e=this,n=e.constructor;return Cn(Ol(e,new n(t),0,1),n.precision)};nt.equals=nt.eq=function(t){return!this.cmp(t)};nt.exponent=function(){return Ir(this)};nt.greaterThan=nt.gt=function(t){return this.cmp(t)>0};nt.greaterThanOrEqualTo=nt.gte=function(t){return this.cmp(t)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(t){return this.cmp(t)<0};nt.lessThanOrEqualTo=nt.lte=function(t){return this.cmp(t)<1};nt.logarithm=nt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Oi))throw Error(wa+"NaN");if(n.s<1)throw Error(wa+(n.s?"NaN":"-Infinity"));return n.eq(Oi)?new r(0):(Xn=!1,e=Ol(ax(n,a),ax(t,a),a),Xn=!0,Cn(e,i))};nt.minus=nt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Jee(e,t):Xee(e,(t.s=-t.s,t))};nt.modulo=nt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(wa+"NaN");return n.s?(Xn=!1,e=Ol(n,t,0,1).times(t),Xn=!0,n.minus(e)):Cn(new r(n),i)};nt.naturalExponential=nt.exp=function(){return Zee(this)};nt.naturalLogarithm=nt.ln=function(){return ax(this)};nt.negated=nt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};nt.plus=nt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Xee(e,t):Jee(e,(t.s=-t.s,t))};nt.precision=nt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(dh+t);if(e=Ir(i)+1,r=i.d.length-1,n=r*qn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};nt.squareRoot=nt.sqrt=function(){var t,e,n,r,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(wa+"NaN")}for(t=Ir(l),Xn=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Oo(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=yg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=r,r=a.plus(Ol(l,a,o+2)).times(.5),Oo(a.d).slice(0,o)===(e=Oo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Cn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;o+=4}return Xn=!0,Cn(r,n)};nt.times=nt.mul=function(t){var e,n,r,i,a,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=f.length,u=m.length,c<u&&(a=f,f=m,m=a,o=c,c=u,u=o),a=[],o=c+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)l=a[i]+m[r]*f[i-r-1]+e,a[i--]=l%Qr|0,e=l/Qr|0;a[i]=(a[i]+e)%Qr|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Xn?Cn(t,h.precision):t};nt.toDecimalPlaces=nt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(tl(t,0,gg),e===void 0?e=r.rounding:tl(e,0,8),Cn(n,t+Ir(n)+1,e))};nt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Bh(r,!0):(tl(t,0,gg),e===void 0?e=i.rounding:tl(e,0,8),r=Cn(new i(r),t+1,e),n=Bh(r,!0,t+1)),n};nt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Bh(i):(tl(t,0,gg),e===void 0?e=a.rounding:tl(e,0,8),r=Cn(new a(i),t+Ir(i)+1,e),n=Bh(r.abs(),!1,t+Ir(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var t=this,e=t.constructor;return Cn(new e(t),Ir(t)+1,e.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(t){var e,n,r,i,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Oi);if(l=new c(l),!l.s){if(t.s<1)throw Error(wa+"Infinity");return l}if(l.eq(Oi))return l;if(r=c.precision,t.eq(Oi))return Cn(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=l.s,o){if((n=d<0?-d:d)<=Qee){for(i=new c(Oi),e=Math.ceil(r/qn+4),Xn=!1;n%2&&(i=i.times(l),Q5(i.d,e)),n=yg(n/2),n!==0;)l=l.times(l),Q5(l.d,e);return Xn=!0,t.s<0?new c(Oi).div(i):Cn(i,r)}}else if(a<0)throw Error(wa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Xn=!1,i=t.times(ax(l,r+u)),Xn=!0,i=Zee(i),i.s=a,i};nt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Ir(i),r=Bh(i,n<=a.toExpNeg||n>=a.toExpPos)):(tl(t,1,gg),e===void 0?e=a.rounding:tl(e,0,8),i=Cn(new a(i),t,e),n=Ir(i),r=Bh(i,t<=n||n<=a.toExpNeg,t)),r};nt.toSignificantDigits=nt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(tl(t,1,gg),e===void 0?e=r.rounding:tl(e,0,8)),Cn(new r(n),t,e)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ir(t),n=t.constructor;return Bh(t,e<=n.toExpNeg||e>=n.toExpPos)};function Xee(t,e){var n,r,i,a,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Xn?Cn(e,h):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(r=c,a=-a,l=u.length):(r=u,i=o,l=c.length),o=Math.ceil(h/qn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Qr|0,c[a]%=Qr;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Xn?Cn(e,h):e}function tl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(dh+t)}function Oo(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=qn-r.length,n&&(a+=$c(n)),a+=r;o=t[e],r=o+"",n=qn-r.length,n&&(a+=$c(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Ol=function(){function t(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%Qr|0,o=a/Qr|0;return o&&r.unshift(o),r}function e(r,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Qr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,c,u,d,h,f,m,v,p,y,b,x,w,C,S,P,_,g,T=r.constructor,E=r.s==i.s?1:-1,A=r.d,I=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(wa+"Division by zero");for(c=r.e-i.e,_=I.length,S=A.length,m=new T(E),v=m.d=[],u=0;I[u]==(A[u]||0);)++u;if(I[u]>(A[u]||0)&&--c,a==null?x=a=T.precision:o?x=a+(Ir(r)-Ir(i))+1:x=a,x<0)return new T(0);if(x=x/qn+2|0,u=0,_==1)for(d=0,I=I[0],x++;(u<S||d)&&x--;u++)w=d*Qr+(A[u]||0),v[u]=w/I|0,d=w%I|0;else{for(d=Qr/(I[0]+1)|0,d>1&&(I=t(I,d),A=t(A,d),_=I.length,S=A.length),C=_,p=A.slice(0,_),y=p.length;y<_;)p[y++]=0;g=I.slice(),g.unshift(0),P=I[0],I[1]>=Qr/2&&++P;do d=0,l=e(I,p,_,y),l<0?(b=p[0],_!=y&&(b=b*Qr+(p[1]||0)),d=b/P|0,d>1?(d>=Qr&&(d=Qr-1),h=t(I,d),f=h.length,y=p.length,l=e(h,p,f,y),l==1&&(d--,n(h,_<f?g:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<y&&h.unshift(0),n(p,h,y),l==-1&&(y=p.length,l=e(I,p,_,y),l<1&&(d++,n(p,_<y?g:I,y))),y=p.length):l===0&&(d++,p=[0]),v[u++]=d,l&&p[0]?p[y++]=A[C]||0:(p=[A[C]],y=1);while((C++<S||p[0]!==void 0)&&x--)}return v[0]||v.shift(),m.e=c,Cn(m,o?a+Ir(m)+1:a)}}();function Zee(t,e){var n,r,i,a,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Ir(t)>16)throw Error($D+Ir(t));if(!t.s)return new d(Oi);for(e==null?(Xn=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Rd(2,u))/Math.LN10*2+5|0,l+=r,n=i=a=new d(Oi),d.precision=l;;){if(i=Cn(i.times(t),l),n=n.times(++c),o=a.plus(Ol(i,n,l)),Oo(o.d).slice(0,l)===Oo(a.d).slice(0,l)){for(;u--;)a=Cn(a.times(a),l);return d.precision=h,e==null?(Xn=!0,Cn(a,h)):a}a=o}}function Ir(t){for(var e=t.e*qn,n=t.d[0];n>=10;n/=10)e++;return e}function TA(t,e,n){if(e>t.LN10.sd())throw Xn=!0,n&&(t.precision=n),Error(wa+"LN10 precision limit exceeded");return Cn(new t(t.LN10),e)}function $c(t){for(var e="";t--;)e+="0";return e}function ax(t,e){var n,r,i,a,o,l,c,u,d,h=1,f=10,m=t,v=m.d,p=m.constructor,y=p.precision;if(m.s<1)throw Error(wa+(m.s?"NaN":"-Infinity"));if(m.eq(Oi))return new p(0);if(e==null?(Xn=!1,u=y):u=e,m.eq(10))return e==null&&(Xn=!0),TA(p,u);if(u+=f,p.precision=u,n=Oo(v),r=n.charAt(0),a=Ir(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=Oo(m.d),r=n.charAt(0),h++;a=Ir(m),r>1?(m=new p("0."+n),a++):m=new p(r+"."+n.slice(1))}else return c=TA(p,u+2,y).times(a+""),m=ax(new p(r+"."+n.slice(1)),u-f).plus(c),p.precision=y,e==null?(Xn=!0,Cn(m,y)):m;for(l=o=m=Ol(m.minus(Oi),m.plus(Oi),u),d=Cn(m.times(m),u),i=3;;){if(o=Cn(o.times(d),u),c=l.plus(Ol(o,new p(i),u)),Oo(c.d).slice(0,u)===Oo(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(TA(p,u+2,y).times(a+""))),l=Ol(l,new p(h),u),p.precision=y,e==null?(Xn=!0,Cn(l,y)):l;l=c,i+=2}}function Y5(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=yg(n/qn),t.d=[],r=(n+1)%qn,n<0&&(r+=qn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=qn;r<i;)t.d.push(+e.slice(r,r+=qn));e=e.slice(r),r=qn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Xn&&(t.e>w_||t.e<-w_))throw Error($D+n)}else t.s=0,t.e=0,t.d=[0];return t}function Cn(t,e,n){var r,i,a,o,l,c,u,d,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=qn,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/qn),a=h.length,d>=a)return t;for(u=a=h[d],o=1;a>=10;a/=10)o++;r%=qn,i=r-qn+o}if(n!==void 0&&(a=Rd(10,o-i-1),l=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/Rd(10,o-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Ir(t),h.length=1,e=e-a-1,h[0]=Rd(10,(qn-e%qn)%qn),t.e=yg(-e/qn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Rd(10,qn-r),h[d]=i>0?(u/Rd(10,o-i)%Rd(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==Qr&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=Qr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Xn&&(t.e>w_||t.e<-w_))throw Error($D+Ir(t));return t}function Jee(t,e){var n,r,i,a,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Xn?Cn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),i=Math.max(Math.ceil(m/qn),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=h.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Qr-1;--c[a],c[i]+=Qr}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Xn?Cn(e,m):e):new f(0)}function Bh(t,e,n){var r,i=Ir(t),a=Oo(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+$c(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$c(-i-1)+a,n&&(r=n-o)>0&&(a+=$c(r))):i>=o?(a+=$c(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+$c(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=$c(r))),t.s<0?"-"+a:a}function Q5(t,e){if(t.length>e)return t.length=e,!0}function ete(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(dh+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Y5(o,a.toString())}else if(typeof a!="string")throw Error(dh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Xze.test(a))Y5(o,a);else throw Error(dh+a)}if(i.prototype=nt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ete,i.config=i.set=Zze,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Zze(t){if(!t||typeof t!="object")throw Error(wa+"Object expected");var e,n,r,i=["precision",1,gg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(yg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(dh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(dh+n+": "+r);return this}var FD=ete(Qze);Oi=new FD(1);const An=FD;function Jze(t){return rqe(t)||nqe(t)||tqe(t)||eqe()}function eqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tqe(t,e){if(t){if(typeof t=="string")return lI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(t,e)}}function nqe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function rqe(t){if(Array.isArray(t))return lI(t)}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sqe=function(e){return e},tte={"@@functional/placeholder":!0},nte=function(e){return e===tte},X5=function(e){return function n(){return arguments.length===0||arguments.length===1&&nte(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},iqe=function t(e,n){return e===1?n:X5(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==tte}).length;return o>=e?n.apply(void 0,i):t(e-o,X5(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(h){return nte(h)?c.shift():h});return n.apply(void 0,Jze(d).concat(c))}))})},JS=function(e){return iqe(e.length,e)},cI=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},aqe=JS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),oqe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return sqe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},uI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},rte=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function lqe(t){var e;return t===0?e=1:e=Math.floor(new An(t).abs().log(10).toNumber())+1,e}function cqe(t,e,n){for(var r=new An(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var uqe=JS(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),dqe=JS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),hqe=JS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const e1={rangeStep:cqe,getDigitCount:lqe,interpolateNumber:uqe,uninterpolateNumber:dqe,uninterpolateTruncation:hqe};function dI(t){return pqe(t)||mqe(t)||ste(t)||fqe()}function fqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mqe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pqe(t){if(Array.isArray(t))return hI(t)}function ox(t,e){return vqe(t)||yqe(t,e)||ste(t,e)||gqe()}function gqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ste(t,e){if(t){if(typeof t=="string")return hI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(t,e)}}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yqe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function vqe(t){if(Array.isArray(t))return t}function ite(t){var e=ox(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function ate(t,e,n){if(t.lte(0))return new An(0);var r=e1.getDigitCount(t.toNumber()),i=new An(10).pow(r),a=t.div(i),o=r!==1?.05:.1,l=new An(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new An(Math.ceil(c))}function xqe(t,e,n){var r=1,i=new An(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new An(10).pow(e1.getDigitCount(t)-1),i=new An(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new An(Math.floor(t)))}else t===0?i=new An(Math.floor((e-1)/2)):n||(i=new An(Math.floor(t)));var o=Math.floor((e-1)/2),l=oqe(aqe(function(c){return i.add(new An(c-o).mul(r)).toNumber()}),cI);return l(0,e)}function ote(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new An(0),tickMin:new An(0),tickMax:new An(0)};var a=ate(new An(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new An(0):(o=new An(t).add(e).div(2),o=o.sub(new An(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new An(e).sub(o).div(a).toNumber()),u=l+c+1;return u>n?ote(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:a,tickMin:o.sub(new An(l).mul(a)),tickMax:o.add(new An(c).mul(a))})}function bqe(t){var e=ox(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=ite([n,r]),c=ox(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(dI(cI(0,i-1).map(function(){return 1/0}))):[].concat(dI(cI(0,i-1).map(function(){return-1/0})),[d]);return n>r?uI(h):h}if(u===d)return xqe(u,i,a);var f=ote(u,d,o,a),m=f.step,v=f.tickMin,p=f.tickMax,y=e1.rangeStep(v,p.add(new An(.1).mul(m)),m);return n>r?uI(y):y}function wqe(t,e){var n=ox(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=ite([r,i]),l=ox(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=ate(new An(u).sub(c).div(d-1),a,0),f=[].concat(dI(e1.rangeStep(new An(c),new An(u).sub(new An(.99).mul(h)),h)),[u]);return r>i?uI(f):f}var jqe=rte(bqe),_qe=rte(wqe),Nqe="Invariant failed";function Uh(t,e){throw new Error(Nqe)}var Sqe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(this,arguments)}function Eqe(t,e){return Pqe(t)||Cqe(t,e)||Tqe(t,e)||Aqe()}function Aqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tqe(t,e){if(t){if(typeof t=="string")return Z5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z5(t,e)}}function Z5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Pqe(t){if(Array.isArray(t))return t}function Iqe(t,e){if(t==null)return{};var n=kqe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oqe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ute(r.key),r)}}function Dqe(t,e,n){return e&&Oqe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mqe(t,e,n){return e=__(e),Lqe(t,lte()?Reflect.construct(e,n||[],__(t).constructor):e.apply(t,n))}function Lqe(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $qe(t)}function $qe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lte=function(){return!!t})()}function __(t){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},__(t)}function Fqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fI(t,e)}function cte(t,e,n){return e=ute(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ute(t){var e=Vqe(t,"string");return gp(e)=="symbol"?e:e+""}function Vqe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t1=function(t){function e(){return Rqe(this,e),Mqe(this,e,arguments)}return Fqe(e,t),Dqe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=Iqe(r,Sqe),m=_t(f,!1);this.props.direction==="x"&&d.type!=="number"&&Uh();var v=c.map(function(p){var y=u(p,l),b=y.x,x=y.y,w=y.value,C=y.errorVal;if(!C)return null;var S=[],P,_;if(Array.isArray(C)){var g=Eqe(C,2);P=g[0],_=g[1]}else P=_=C;if(a==="vertical"){var T=d.scale,E=x+i,A=E+o,I=E-o,k=T(w-P),L=T(w+_);S.push({x1:L,y1:A,x2:L,y2:I}),S.push({x1:k,y1:E,x2:L,y2:E}),S.push({x1:k,y1:A,x2:k,y2:I})}else if(a==="horizontal"){var B=h.scale,U=b+i,V=U-o,D=U+o,R=B(w-P),W=B(w+_);S.push({x1:V,y1:W,x2:D,y2:W}),S.push({x1:U,y1:R,x2:U,y2:W}),S.push({x1:V,y1:R,x2:D,y2:R})}return $.createElement(sn,j_({className:"recharts-errorBar",key:"bar-".concat(S.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},m),S.map(function(J){return $.createElement("line",j_({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return $.createElement(sn,{className:"recharts-errorBars"},v)}}])}($.Component);cte(t1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});cte(t1,"displayName","ErrorBar");function lx(t){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(t)}function J5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J5(Object(n),!0).forEach(function(r){Bqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bqe(t,e,n){return e=Uqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uqe(t){var e=zqe(t,"string");return lx(e)=="symbol"?e:e+""}function zqe(t,e){if(lx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dte=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Pi(n,vm);if(!o)return null;var l=vm.defaultProps,c=l!==void 0?jd(jd({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return d.concat(v.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?jd(jd({},f),h.props):{},v=m.dataKey,p=m.name,y=m.legendType,b=m.hide;return{inactive:b,dataKey:v,type:c.iconType||y||"square",color:VD(h),value:p||v,payload:m}}),jd(jd(jd({},c),vm.getWithHeight(o,i)),{},{payload:u,item:o})};function cx(t){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cx(t)}function eU(t){return Kqe(t)||Hqe(t)||Wqe(t)||qqe()}function qqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wqe(t,e){if(t){if(typeof t=="string")return mI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mI(t,e)}}function Hqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kqe(t){if(Array.isArray(t))return mI(t)}function mI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(n),!0).forEach(function(r){bm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bm(t,e,n){return e=Gqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gqe(t){var e=Yqe(t,"string");return cx(e)=="symbol"?e:e+""}function Yqe(t,e){if(cx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vr(t,e,n){return Ut(t)||Ut(e)?n:zr(e)?Ui(t,e,n):Pt(e)?e(t):n}function Xy(t,e,n,r){var i=Hze(t,function(l){return Vr(l,e)});if(n==="number"){var a=i.filter(function(l){return Re(l)||parseFloat(l)});return a.length?[ZS(a),cu(a)]:[1/0,-1/0]}var o=r?i.filter(function(l){return!Ut(l)}):i;return o.map(function(l){return zr(l)||l instanceof Date?l:""})}var Qqe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,h=i[u].coordinate,f=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(Ks(h-d)!==Ks(f-h)){var v=[];if(Ks(f-h)===Ks(c[1]-c[0])){m=f;var p=h+c[1]-c[0];v[0]=Math.min(p,(p+d)/2),v[1]=Math.max(p,(p+d)/2)}else{m=d;var y=f+c[1]-c[0];v[0]=Math.min(h,(y+h)/2),v[1]=Math.max(h,(y+h)/2)}var b=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>b[0]&&e<=b[1]||e>=v[0]&&e<=v[1]){o=i[u].index;break}}else{var x=Math.min(d,f),w=Math.max(d,f);if(e>(x+h)/2&&e<=(w+h)/2){o=i[u].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<l-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===l-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){o=r[C].index;break}return o},VD=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Xqe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var v=d[h[f]],p=v.items,y=v.cateAxisId,b=p.filter(function(_){return Rl(_.type).indexOf("Bar")>=0});if(b&&b.length){var x=b[0].type.defaultProps,w=x!==void 0?ur(ur({},x),b[0].props):b[0].props,C=w.barSize,S=w[y];o[S]||(o[S]=[]);var P=Ut(C)?n:C;o[S].push({item:b[0],stackList:b.slice(1),barSize:Ut(P)?void 0:Gs(P,r,0)})}}return o},Zqe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Gs(n,i,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=i/c,v=o.reduce(function(C,S){return C+S.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&m>0&&(f=!0,m*=.9,v=c*m);var p=(i-v)/2>>0,y={offset:p-u,size:0};d=o.reduce(function(C,S){var P={item:S.item,position:{offset:y.offset+y.size+u,size:f?m:S.barSize}},_=[].concat(eU(C),[P]);return y=_[_.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(g){_.push({item:g,position:y})}),_},h)}else{var b=Gs(r,i,0,!0);i-2*b-(c-1)*u<=0&&(u=0);var x=(i-2*b-(c-1)*u)/c;x>1&&(x>>=0);var w=l===+l?Math.min(x,l):x;d=o.reduce(function(C,S,P){var _=[].concat(eU(C),[{item:S.item,position:{offset:b+(x+u)*P+(x-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(g){_.push({item:g,position:_[_.length-1].position})}),_},h)}return d},Jqe=function(e,n,r,i){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=dte({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,f=d.height,m=u.align,v=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&m!=="center"&&Re(e[m]))return ur(ur({},e),{},bm({},m,e[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&v!=="middle"&&Re(e[v]))return ur(ur({},e),{},bm({},v,e[v]+(f||0)))}return e},e9e=function(e,n,r){return Ut(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},hte=function(e,n,r,i,a){var o=n.props.children,l=ma(o,t1).filter(function(u){return e9e(i,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Vr(d,r);if(Ut(h))return u;var f=Array.isArray(h)?[ZS(h),cu(h)]:[h,h],m=c.reduce(function(v,p){var y=Vr(d,p,0),b=f[0]-Math.abs(Array.isArray(y)?y[0]:y),x=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(b,v[0]),Math.max(x,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},t9e=function(e,n,r,i,a){var o=n.map(function(l){return hte(e,l,r,a,i)}).filter(function(l){return!Ut(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},fte=function(e,n,r,i,a){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&hte(e,c,u,i)||Xy(e,u,r,a)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},mte=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},pte=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},Tl=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ks(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!ug(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:a?a[h]:h,index:f,offset:u}})},CA=new WeakMap,R0=function(e,n){if(typeof n!="function")return e;CA.has(e)||CA.set(e,new WeakMap);var r=CA.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},gte=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:tx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:y_(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Qy(),realScaleType:"point"}:a==="category"?{scale:tx(),realScaleType:"band"}:{scale:y_(),realScaleType:"linear"};if($h(i)){var c="scale".concat(LS(i));return{scale:(G5[c]||Qy)(),realScaleType:G5[c]?c:"point"}}return Pt(i)?{scale:i}:{scale:Qy(),realScaleType:"point"}},nU=1e-4,yte=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-nU,o=Math.max(i[0],i[1])+nU,l=e(n[0]),c=e(n[r-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[r-1]])}},n9e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},r9e=function(e,n){if(!n||n.length!==2||!Re(n[0])||!Re(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Re(e[0])||e[0]<r)&&(a[0]=r),(!Re(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},s9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,l=0;l<n;++l){var c=ug(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},i9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var l=ug(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},a9e={sign:s9e,expand:SDe,none:op,silhouette:EDe,wiggle:ADe,positive:i9e},o9e=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),a=a9e[r],o=NDe().keys(i).value(function(l,c){return+Vr(l,c,0)}).order(FP).offset(a);return o(e)},l9e=function(e,n,r,i,a,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?ur(ur({},f.type.defaultProps),f.props):f.props,p=v.stackId,y=v.hide;if(y)return h;var b=v[r],x=h[b]||{hasStack:!1,stackGroups:{}};if(zr(p)){var w=x.stackGroups[p]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(f),x.hasStack=!0,x.stackGroups[p]=w}else x.stackGroups[dg("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return ur(ur({},h),{},bm({},b,x))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,y){var b=m.stackGroups[y];return ur(ur({},p),{},bm({},y,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:o9e(e,b.items,a)}))},v)}return ur(ur({},h),{},bm({},f,m))},d)},vte=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=jqe(u,a,l);return e.domain([ZS(d),cu(d)]),{niceTicks:d}}if(a&&i==="number"){var h=e.domain(),f=_qe(h,a,l);return{niceTicks:f}}return null};function rU(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ut(i[e.dataKey])){var l=Qj(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Vr(i,Ut(o)?e.dataKey:o);return Ut(c)?null:e.scale(c)}var sU=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=Vr(o,n.dataKey,n.domain[l]);return Ut(c)?null:n.scale(c)-a/2+i},c9e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},u9e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(zr(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},d9e=function(e){return e.reduce(function(n,r){return[ZS(r.concat([n[0]]).filter(Re)),cu(r.concat([n[1]]).filter(Re))]},[1/0,-1/0])},xte=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var h=d9e(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},iU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pI=function(e,n,r){if(Pt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Re(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(iU.test(e[0])){var a=+iU.exec(e[0])[1];i[0]=n[0]-a}else Pt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Re(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(aU.test(e[1])){var o=+aU.exec(e[1])[1];i[1]=n[1]+o}else Pt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},N_=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=mD(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},oU=function(e,n,r){return!e||!e.length||pp(e,Ui(r,"type.defaultProps.domain"))?n:e},bte=function(e,n){var r=e.type.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return ur(ur({},_t(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:VD(e),value:Vr(n,i),type:c,payload:n,chartType:u,hide:d})};function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(t)}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wte(t,e,n){return e=h9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h9e(t){var e=f9e(t,"string");return ux(e)=="symbol"?e:e+""}function f9e(t,e){if(ux(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m9e(t,e){return v9e(t)||y9e(t,e)||g9e(t,e)||p9e()}function p9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g9e(t,e){if(t){if(typeof t=="string")return cU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(t,e)}}function cU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function v9e(t){if(Array.isArray(t))return t}var S_=Math.PI/180,x9e=function(e){return e*180/Math.PI},$n=function(e,n,r,i){return{x:e+Math.cos(-S_*i)*r,y:n+Math.sin(-S_*i)*r}},jte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},b9e=function(e,n,r,i,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Gs(e.cx,o,o/2),h=Gs(e.cy,l,l/2),f=jte(o,l,r),m=Gs(e.innerRadius,f,0),v=Gs(e.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(y,b){var x=n[b],w=x.domain,C=x.reversed,S;if(Ut(x.range))i==="angleAxis"?S=[c,u]:i==="radiusAxis"&&(S=[m,v]),C&&(S=[S[1],S[0]]);else{S=x.range;var P=S,_=m9e(P,2);c=_[0],u=_[1]}var g=gte(x,a),T=g.realScaleType,E=g.scale;E.domain(w).range(S),yte(E);var A=vte(E,gl(gl({},x),{},{realScaleType:T})),I=gl(gl(gl({},x),A),{},{range:S,radius:v,realScaleType:T,scale:E,cx:d,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return gl(gl({},y),{},wte({},b,I))},{})},w9e=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},j9e=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,l=w9e({x:r,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:x9e(u),angleInRadian:u}},_9e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},N9e=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),l=Math.min(a,o);return e+l*360},uU=function(e,n){var r=e.x,i=e.y,a=j9e({x:r,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=_9e(n),h=d.startAngle,f=d.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?gl(gl({},n),{},{radius:o,angle:N9e(m,n)}):null},_te=function(e){return!j.isValidElement(e)&&!Pt(e)&&typeof e!="boolean"?e.className:""};function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}var S9e=["offset"];function E9e(t){return P9e(t)||C9e(t)||T9e(t)||A9e()}function A9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T9e(t,e){if(t){if(typeof t=="string")return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}}function C9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function P9e(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I9e(t,e){if(t==null)return{};var n=k9e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){R9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R9e(t,e,n){return e=O9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O9e(t){var e=D9e(t,"string");return dx(e)=="symbol"?e:e+""}function D9e(t,e){if(dx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hx.apply(this,arguments)}var M9e=function(e){var n=e.value,r=e.formatter,i=Ut(e.children)?n:e.children;return Pt(r)?r(i):i},L9e=function(e,n){var r=Ks(n-e),i=Math.min(Math.abs(n-e),360);return r*i},$9e=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,p=c.clockWise,y=(h+f)/2,b=L9e(m,v),x=b>=0?1:-1,w,C;i==="insideStart"?(w=m+x*o,C=p):i==="insideEnd"?(w=v-x*o,C=!p):i==="end"&&(w=v+x*o,C=p),C=b<=0?C:!C;var S=$n(u,d,y,w),P=$n(u,d,y,w+(C?1:-1)*359),_="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(P.x,",").concat(P.y),g=Ut(e.id)?dg("recharts-radial-line-"):e.id;return $.createElement("text",hx({},r,{dominantBaseline:"central",className:Bt("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:g,d:_})),$.createElement("textPath",{xlinkHref:"#".concat(g)},n))},F9e=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(i==="outside"){var m=$n(o,l,u+r,f),v=m.x,p=m.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,b=$n(o,l,y,f),x=b.x,w=b.y;return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},V9e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*i,m=h>0?"end":"start",v=h>0?"start":"end",p=u>=0?1:-1,y=p*i,b=p>0?"end":"start",x=p>0?"start":"end";if(a==="top"){var w={x:l+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:m};return Dr(Dr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var C={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:v};return Dr(Dr({},C),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var S={x:l-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Dr(Dr({},S),r?{width:Math.max(S.x-r.x,0),height:d}:{})}if(a==="right"){var P={x:l+u+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Dr(Dr({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:d}:{})}var _=r?{width:u,height:d}:{};return a==="insideLeft"?Dr({x:l+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},_):a==="insideRight"?Dr({x:l+u-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},_):a==="insideTop"?Dr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:v},_):a==="insideBottom"?Dr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},_):a==="insideTopLeft"?Dr({x:l+y,y:c+f,textAnchor:x,verticalAnchor:v},_):a==="insideTopRight"?Dr({x:l+u-y,y:c+f,textAnchor:b,verticalAnchor:v},_):a==="insideBottomLeft"?Dr({x:l+y,y:c+d-f,textAnchor:x,verticalAnchor:m},_):a==="insideBottomRight"?Dr({x:l+u-y,y:c+d-f,textAnchor:b,verticalAnchor:m},_):ag(a)&&(Re(a.x)||qd(a.x))&&(Re(a.y)||qd(a.y))?Dr({x:l+Gs(a.x,u),y:c+Gs(a.y,d),textAnchor:"end",verticalAnchor:"end"},_):Dr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},B9e=function(e){return"cx"in e&&Re(e.cx)};function Zr(t){var e=t.offset,n=e===void 0?5:e,r=I9e(t,S9e),i=Dr({offset:n},r),a=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!a||Ut(l)&&Ut(c)&&!j.isValidElement(u)&&!Pt(u))return null;if(j.isValidElement(u))return j.cloneElement(u,i);var m;if(Pt(u)){if(m=j.createElement(u,i),j.isValidElement(m))return m}else m=M9e(i);var v=B9e(a),p=_t(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return $9e(i,m,p);var y=v?F9e(i):V9e(i);return $.createElement(Vh,hx({className:Bt("recharts-label",h)},p,y,{breakAll:f}),m)}Zr.displayName="Label";var Nte=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,v=e.left,p=e.width,y=e.height,b=e.clockWise,x=e.labelViewBox;if(x)return x;if(Re(p)&&Re(y)){if(Re(h)&&Re(f))return{x:h,y:f,width:p,height:y};if(Re(m)&&Re(v))return{x:m,y:v,width:p,height:y}}return Re(h)&&Re(f)?{x:h,y:f,width:0,height:0}:Re(n)&&Re(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},U9e=function(e,n){return e?e===!0?$.createElement(Zr,{key:"label-implicit",viewBox:n}):zr(e)?$.createElement(Zr,{key:"label-implicit",viewBox:n,value:e}):j.isValidElement(e)?e.type===Zr?j.cloneElement(e,{key:"label-implicit",viewBox:n}):$.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):Pt(e)?$.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):ag(e)?$.createElement(Zr,hx({viewBox:n},e,{key:"label-implicit"})):null:null},z9e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=Nte(e),o=ma(i,Zr).map(function(c,u){return j.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var l=U9e(e.label,n||a);return[l].concat(E9e(o))};Zr.parseViewBox=Nte;Zr.renderCallByParent=z9e;function q9e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var W9e=q9e;const H9e=xn(W9e);function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}var K9e=["valueAccessor"],G9e=["data","dataKey","clockWise","id","textBreakAll"];function Y9e(t){return J9e(t)||Z9e(t)||X9e(t)||Q9e()}function Q9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9e(t,e){if(t){if(typeof t=="string")return yI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yI(t,e)}}function Z9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J9e(t){if(Array.isArray(t))return yI(t)}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E_.apply(this,arguments)}function hU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(n),!0).forEach(function(r){e8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e8e(t,e,n){return e=t8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8e(t){var e=n8e(t,"string");return fx(e)=="symbol"?e:e+""}function n8e(t,e){if(fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mU(t,e){if(t==null)return{};var n=r8e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function r8e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var s8e=function(e){return Array.isArray(e.value)?H9e(e.value):e.value};function Dl(t){var e=t.valueAccessor,n=e===void 0?s8e:e,r=mU(t,K9e),i=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=mU(r,G9e);return!i||!i.length?null:$.createElement(sn,{className:"recharts-label-list"},i.map(function(d,h){var f=Ut(a)?n(d,h):Vr(d&&d.payload,a),m=Ut(l)?{}:{id:"".concat(l,"-").concat(h)};return $.createElement(Zr,E_({},_t(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Zr.parseViewBox(Ut(o)?d:fU(fU({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Dl.displayName="LabelList";function i8e(t,e){return t?t===!0?$.createElement(Dl,{key:"labelList-implicit",data:e}):$.isValidElement(t)||Pt(t)?$.createElement(Dl,{key:"labelList-implicit",data:e,content:t}):ag(t)?$.createElement(Dl,E_({data:e},t,{key:"labelList-implicit"})):null:null}function a8e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=ma(r,Dl).map(function(o,l){return j.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var a=i8e(t.label,e);return[a].concat(Y9e(i))}Dl.renderCallByParent=a8e;function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}function vI(){return vI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vI.apply(this,arguments)}function pU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(n),!0).forEach(function(r){o8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o8e(t,e,n){return e=l8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l8e(t){var e=c8e(t,"string");return mx(e)=="symbol"?e:e+""}function c8e(t,e){if(mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u8e=function(e,n){var r=Ks(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},O0=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,h=Math.asin(c/d)/S_,f=u?a:a+o*h,m=$n(n,r,d,f),v=$n(n,r,i,f),p=u?a-o*h:a,y=$n(n,r,d*Math.cos(h*S_),p);return{center:m,circleTangency:v,lineTangency:y,theta:h}},Ste=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=u8e(o,l),u=o+c,d=$n(n,r,a,o),h=$n(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var m=$n(n,r,i,o),v=$n(n,r,i,u);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},d8e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Ks(d-u),f=O0({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,p=f.theta,y=O0({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=y.circleTangency,x=y.lineTangency,w=y.theta,C=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(C<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Ste({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var P=O0({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=P.circleTangency,g=P.lineTangency,T=P.theta,E=O0({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=E.circleTangency,I=E.lineTangency,k=E.theta,L=c?Math.abs(u-d):Math.abs(u-d)-T-k;if(L<0&&o===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},h8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ete=function(e){var n=gU(gU({},h8e),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<a||d===h)return null;var m=Bt("recharts-sector",f),v=o-a,p=Gs(l,v,0,!0),y;return p>0&&Math.abs(d-h)<360?y=d8e({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):y=Ste({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),$.createElement("path",vI({},_t(n,!0),{className:m,d:y,role:"img"}))};function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}function xI(){return xI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xI.apply(this,arguments)}function yU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(n),!0).forEach(function(r){f8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f8e(t,e,n){return e=m8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m8e(t){var e=p8e(t,"string");return px(e)=="symbol"?e:e+""}function p8e(t,e){if(px(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(px(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xU={curveBasisClosed:fDe,curveBasisOpen:mDe,curveBasis:hDe,curveBumpX:Z2e,curveBumpY:J2e,curveLinearClosed:pDe,curveLinear:FS,curveMonotoneX:gDe,curveMonotoneY:yDe,curveNatural:vDe,curveStep:xDe,curveStepAfter:wDe,curveStepBefore:bDe},D0=function(e){return e.x===+e.x&&e.y===+e.y},ey=function(e){return e.x},ty=function(e){return e.y},g8e=function(e,n){if(Pt(e))return e;var r="curve".concat(LS(e));return(r==="curveMonotone"||r==="curveBump")&&n?xU["".concat(r).concat(n==="vertical"?"Y":"X")]:xU[r]||FS},y8e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=g8e(r,l),h=u?a.filter(function(p){return D0(p)}):a,f;if(Array.isArray(o)){var m=u?o.filter(function(p){return D0(p)}):o,v=h.map(function(p,y){return vU(vU({},p),{},{base:m[y]})});return l==="vertical"?f=S0().y(ty).x1(ey).x0(function(p){return p.base.x}):f=S0().x(ey).y1(ty).y0(function(p){return p.base.y}),f.defined(D0).curve(d),f(v)}return l==="vertical"&&Re(o)?f=S0().y(ty).x1(ey).x0(o):Re(o)?f=S0().x(ey).y1(ty).y0(o):f=bJ().x(ey).y(ty),f.defined(D0).curve(d),f(h)},wm=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?y8e(e):i;return j.createElement("path",xI({},_t(e,!1),Xj(e),{className:Bt("recharts-curve",n),d:o,ref:a}))},Ate={exports:{}},v8e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",x8e=v8e,b8e=x8e;function Tte(){}function Cte(){}Cte.resetWarningCache=Tte;var w8e=function(){function t(r,i,a,o,l,c){if(c!==b8e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Cte,resetWarningCache:Tte};return n.PropTypes=n,n};Ate.exports=w8e();var j8e=Ate.exports;const gn=xn(j8e);var _8e=Object.getOwnPropertyNames,N8e=Object.getOwnPropertySymbols,S8e=Object.prototype.hasOwnProperty;function bU(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function M0(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function wU(t){return _8e(t).concat(N8e(t))}var E8e=Object.hasOwn||function(t,e){return S8e.call(t,e)};function sf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var A8e="__v",T8e="__o",C8e="_owner",jU=Object.getOwnPropertyDescriptor,_U=Object.keys;function P8e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function I8e(t,e){return sf(t.getTime(),e.getTime())}function k8e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function R8e(t,e){return t===e}function NU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(i[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var O8e=sf;function D8e(t,e,n){var r=_U(t),i=r.length;if(_U(e).length!==i)return!1;for(;i-- >0;)if(!Pte(t,e,n,r[i]))return!1;return!0}function ny(t,e,n){var r=wU(t),i=r.length;if(wU(e).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=r[i],!Pte(t,e,n,a)||(o=jU(t,a),l=jU(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function M8e(t,e){return sf(t.valueOf(),e.valueOf())}function L8e(t,e){return t.source===e.source&&t.flags===e.flags}function SU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function $8e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function F8e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Pte(t,e,n,r){return(r===C8e||r===T8e||r===A8e)&&(t.$$typeof||e.$$typeof)?!0:E8e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var V8e="[object Arguments]",B8e="[object Boolean]",U8e="[object Date]",z8e="[object Error]",q8e="[object Map]",W8e="[object Number]",H8e="[object Object]",K8e="[object RegExp]",G8e="[object Set]",Y8e="[object String]",Q8e="[object URL]",X8e=Array.isArray,EU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,AU=Object.assign,Z8e=Object.prototype.toString.call.bind(Object.prototype.toString);function J8e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(v,p,y){if(v===p)return!0;if(v==null||p==null)return!1;var b=typeof v;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(v,p,y):b==="function"?i(v,p,y):!1;var x=v.constructor;if(x!==p.constructor)return!1;if(x===Object)return l(v,p,y);if(X8e(v))return e(v,p,y);if(EU!=null&&EU(v))return h(v,p,y);if(x===Date)return n(v,p,y);if(x===RegExp)return u(v,p,y);if(x===Map)return a(v,p,y);if(x===Set)return d(v,p,y);var w=Z8e(v);return w===U8e?n(v,p,y):w===K8e?u(v,p,y):w===q8e?a(v,p,y):w===G8e?d(v,p,y):w===H8e?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,y):w===Q8e?f(v,p,y):w===z8e?r(v,p,y):w===V8e?l(v,p,y):w===B8e||w===W8e||w===Y8e?c(v,p,y):!1}}function eWe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?ny:P8e,areDatesEqual:I8e,areErrorsEqual:k8e,areFunctionsEqual:R8e,areMapsEqual:r?bU(NU,ny):NU,areNumbersEqual:O8e,areObjectsEqual:r?ny:D8e,arePrimitiveWrappersEqual:M8e,areRegExpsEqual:L8e,areSetsEqual:r?bU(SU,ny):SU,areTypedArraysEqual:r?ny:$8e,areUrlsEqual:F8e};if(n&&(i=AU({},i,n(i))),e){var a=M0(i.areArraysEqual),o=M0(i.areMapsEqual),l=M0(i.areObjectsEqual),c=M0(i.areSetsEqual);i=AU({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function tWe(t){return function(e,n,r,i,a,o,l){return t(e,n,l)}}function nWe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:i,meta:m,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var rWe=hd();hd({strict:!0});hd({circular:!0});hd({circular:!0,strict:!0});hd({createInternalComparator:function(){return sf}});hd({strict:!0,createInternalComparator:function(){return sf}});hd({circular:!0,createInternalComparator:function(){return sf}});hd({circular:!0,createInternalComparator:function(){return sf},strict:!0});function hd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,l=eWe(t),c=J8e(l),u=r?r(c):tWe(c);return nWe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function sWe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function TU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):sWe(i)};requestAnimationFrame(r)}function bI(t){"@babel/helpers - typeof";return bI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bI(t)}function iWe(t){return cWe(t)||lWe(t)||oWe(t)||aWe()}function aWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oWe(t,e){if(t){if(typeof t=="string")return CU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CU(t,e)}}function CU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cWe(t){if(Array.isArray(t))return t}function uWe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=iWe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){TU(i.bind(null,u),c);return}i(c),TU(i.bind(null,u));return}bI(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gx(t)}function PU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(n),!0).forEach(function(r){Ite(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ite(t,e,n){return e=dWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dWe(t){var e=hWe(t,"string");return gx(e)==="symbol"?e:String(e)}function hWe(t,e){if(gx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fWe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},mWe=function(e){return e},pWe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Zy=function(e,n){return Object.keys(n).reduce(function(r,i){return IU(IU({},r),{},Ite({},i,e(i,n[i])))},{})},kU=function(e,n,r){return e.map(function(i){return"".concat(pWe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function gWe(t,e){return xWe(t)||vWe(t,e)||kte(t,e)||yWe()}function yWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function xWe(t){if(Array.isArray(t))return t}function bWe(t){return _We(t)||jWe(t)||kte(t)||wWe()}function wWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function jWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _We(t){if(Array.isArray(t))return wI(t)}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A_=1e-4,Rte=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Ote=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},RU=function(e,n){return function(r){var i=Rte(e,n);return Ote(i,r)}},NWe=function(e,n){return function(r){var i=Rte(e,n),a=[].concat(bWe(i.map(function(o,l){return o*l}).slice(1)),[0]);return Ote(a,r)}},OU=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=gWe(u,4);i=d[0],a=d[1],o=d[2],l=d[3]}}}var h=RU(i,o),f=RU(a,l),m=NWe(i,o),v=function(b){return b>1?1:b<0?0:b},p=function(b){for(var x=b>1?1:b,w=x,C=0;C<8;++C){var S=h(w)-x,P=m(w);if(Math.abs(S-x)<A_||P<A_)return f(w);w=v(w-S/P)}return f(w)};return p.isStepper=!1,p},SWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,v=f*a,p=f+(m-v)*l/1e3,y=f*l/1e3+d;return Math.abs(y-h)<A_&&Math.abs(p)<A_?[h,0]:[y,p]};return c.isStepper=!0,c.dt=l,c},EWe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OU(i);case"spring":return SWe();default:if(i.split("(")[0]==="cubic-bezier")return OU(i)}return typeof i=="function"?i:null};function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(t)}function DU(t){return CWe(t)||TWe(t)||Dte(t)||AWe()}function AWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CWe(t){if(Array.isArray(t))return _I(t)}function MU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(n),!0).forEach(function(r){jI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jI(t,e,n){return e=PWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PWe(t){var e=IWe(t,"string");return yx(e)==="symbol"?e:String(e)}function IWe(t,e){if(yx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kWe(t,e){return DWe(t)||OWe(t,e)||Dte(t,e)||RWe()}function RWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dte(t,e){if(t){if(typeof t=="string")return _I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _I(t,e)}}function _I(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function DWe(t){if(Array.isArray(t))return t}var T_=function(e,n,r){return e+(n-e)*r},NI=function(e){var n=e.from,r=e.to;return n!==r},MWe=function t(e,n,r){var i=Zy(function(a,o){if(NI(o)){var l=e(o.from,o.to,o.velocity),c=kWe(l,2),u=c[0],d=c[1];return as(as({},o),{},{from:u,velocity:d})}return o},n);return r<1?Zy(function(a,o){return NI(o)?as(as({},o),{},{velocity:T_(o.velocity,i[a].velocity,r),from:T_(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const LWe=function(t,e,n,r,i){var a=fWe(t,e),o=a.reduce(function(y,b){return as(as({},y),{},jI({},b,[t[b],e[b]]))},{}),l=a.reduce(function(y,b){return as(as({},y),{},jI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Zy(function(b,x){return x.from},l)},m=function(){return!Object.values(l).filter(NI).length},v=function(b){u||(u=b);var x=b-u,w=x/n.dt;l=MWe(n,l,w),i(as(as(as({},t),e),f())),u=b,m()||(c=requestAnimationFrame(h))},p=function(b){d||(d=b);var x=(b-d)/r,w=Zy(function(S,P){return T_.apply(void 0,DU(P).concat([n(x)]))},o);if(i(as(as(as({},t),e),w)),x<1)c=requestAnimationFrame(h);else{var C=Zy(function(S,P){return T_.apply(void 0,DU(P).concat([n(1)]))},o);i(as(as(as({},t),e),C))}};return h=n.isStepper?v:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}var $We=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function FWe(t,e){if(t==null)return{};var n=VWe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VWe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function PA(t){return qWe(t)||zWe(t)||UWe(t)||BWe()}function BWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UWe(t,e){if(t){if(typeof t=="string")return SI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SI(t,e)}}function zWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qWe(t){if(Array.isArray(t))return SI(t)}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(n),!0).forEach(function(r){Sy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sy(t,e,n){return e=Mte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HWe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mte(r.key),r)}}function KWe(t,e,n){return e&&HWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mte(t){var e=GWe(t,"string");return yp(e)==="symbol"?e:String(e)}function GWe(t,e){if(yp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EI(t,e)}function EI(t,e){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EI(t,e)}function QWe(t){var e=XWe();return function(){var r=C_(t),i;if(e){var a=C_(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return AI(this,i)}}function AI(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TI(t)}function TI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C_(t)}var nl=function(t){YWe(n,t);var e=QWe(n);function n(r,i){var a;WWe(this,n),a=e.call(this,r,i);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(TI(a)),a.changeStyle=a.changeStyle.bind(TI(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),AI(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},AI(a);a.state={style:c?Sy({},c,u):u}}else a.state={style:{}};return a}return KWe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?Sy({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(rWe(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||u?h:i.to;if(this.state&&f){var y={style:c?Sy({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(y)}this.runAnimation(ka(ka({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,m=LWe(o,l,EWe(u),c,this.changeStyle),v=function(){a.stopJSAnimation=m()};this.manager.start([f,d,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(p,y,b){if(b===0)return p;var x=y.duration,w=y.easing,C=w===void 0?"ease":w,S=y.style,P=y.properties,_=y.onAnimationEnd,g=b>0?o[b-1]:y,T=P||Object.keys(S);if(typeof C=="function"||C==="spring")return[].concat(PA(p),[a.runJSAnimation.bind(a,{from:g.style,to:S,duration:x,easing:C}),x]);var E=kU(T,x,C),A=ka(ka(ka({},g.style),S),{},{transition:E});return[].concat(PA(p),[A,x,_]).filter(mWe)};return this.manager.start([c].concat(PA(o.reduce(m,[d,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=uWe());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,m=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=l?Sy({},l,c):c,y=kU(Object.keys(p),o,u);v.start([d,a,ka(ka({},p),{},{transition:y}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=FWe(i,$We),u=j.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(m){var v=m.props,p=v.style,y=p===void 0?{}:p,b=v.className,x=j.cloneElement(m,ka(ka({},c),{},{style:ka(ka({},y),d),className:b}));return x};return u===1?h(j.Children.only(a)):$.createElement("div",null,j.Children.map(a,function(f){return h(f)}))}}]),n}(j.PureComponent);nl.displayName="Animate";nl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};nl.propTypes={from:gn.oneOfType([gn.object,gn.string]),to:gn.oneOfType([gn.object,gn.string]),attributeName:gn.string,duration:gn.number,begin:gn.number,easing:gn.oneOfType([gn.string,gn.func]),steps:gn.arrayOf(gn.shape({duration:gn.number.isRequired,style:gn.object.isRequired,easing:gn.oneOfType([gn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),gn.func]),properties:gn.arrayOf("string"),onAnimationEnd:gn.func})),children:gn.oneOfType([gn.node,gn.func]),isActive:gn.bool,canBegin:gn.bool,onAnimationEnd:gn.func,shouldReAnimate:gn.bool,onAnimationStart:gn.func,onAnimationReStart:gn.func};function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(t)}function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P_.apply(this,arguments)}function ZWe(t,e){return nHe(t)||tHe(t,e)||eHe(t,e)||JWe()}function JWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eHe(t,e){if(t){if(typeof t=="string")return $U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $U(t,e)}}function $U(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function nHe(t){if(Array.isArray(t))return t}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){rHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rHe(t,e,n){return e=sHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sHe(t){var e=iHe(t,"string");return vx(e)=="symbol"?e:e+""}function iHe(t,e){if(vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BU=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];d="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*h[1])),d+="L ".concat(e+r,",").concat(n+i-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+i)),d+="L ".concat(e+c*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);d="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*v,`
            L `).concat(e+r,",").concat(n+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},aHe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&i>=h&&i<=f}return!1},oHe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BD=function(e){var n=VU(VU({},oHe),e),r=j.useRef(),i=j.useState(-1),a=ZWe(i,2),o=a[0],l=a[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,p=n.animationDuration,y=n.animationBegin,b=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=Bt("recharts-rectangle",m);return x?$.createElement(nl,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:v,isActive:x},function(C){var S=C.width,P=C.height,_=C.x,g=C.y;return $.createElement(nl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:b,easing:v},$.createElement("path",P_({},_t(n,!0),{className:w,d:BU(_,g,S,P,f),ref:r})))}):$.createElement("path",P_({},_t(n,!0),{className:w,d:BU(c,u,d,h,f)}))},lHe=["points","className","baseLinePoints","connectNulls"];function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function cHe(t,e){if(t==null)return{};var n=uHe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function UU(t){return mHe(t)||fHe(t)||hHe(t)||dHe()}function dHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hHe(t,e){if(t){if(typeof t=="string")return CI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CI(t,e)}}function fHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mHe(t){if(Array.isArray(t))return CI(t)}function CI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zU=function(e){return e&&e.x===+e.x&&e.y===+e.y},pHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){zU(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),zU(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Jy=function(e,n){var r=pHe(e);n&&(r=[r.reduce(function(a,o){return[].concat(UU(a),UU(o))},[])]);var i=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},gHe=function(e,n,r){var i=Jy(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Jy(n.reverse(),r).slice(1))},yHe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,o=cHe(e,lHe);if(!n||!n.length)return null;var l=Bt("recharts-polygon",r);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=gHe(n,i,a);return $.createElement("g",{className:l},$.createElement("path",Qf({},_t(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?$.createElement("path",Qf({},_t(o,!0),{fill:"none",d:Jy(n,a)})):null,c?$.createElement("path",Qf({},_t(o,!0),{fill:"none",d:Jy(i,a)})):null)}var d=Jy(n,a);return $.createElement("path",Qf({},_t(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}var n1=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=Bt("recharts-dot",a);return n===+n&&r===+r&&i===+i?j.createElement("circle",PI({},_t(e,!1),Xj(e),{className:o,cx:n,cy:r,r:i})):null};function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(t)}var vHe=["x","y","top","left","width","height","className"];function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},II.apply(this,arguments)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){bHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bHe(t,e,n){return e=wHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wHe(t){var e=jHe(t,"string");return xx(e)=="symbol"?e:e+""}function jHe(t,e){if(xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _He(t,e){if(t==null)return{};var n=NHe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var SHe=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},EHe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,v=e.className,p=_He(e,vHe),y=xHe({x:r,y:a,top:l,left:u,width:h,height:m},p);return!Re(r)||!Re(a)||!Re(h)||!Re(m)||!Re(l)||!Re(u)?null:$.createElement("path",II({},_t(y,!0),{className:Bt("recharts-cross",v),d:SHe(r,a,h,m,l,u)}))},AHe=XS,THe=Gee,CHe=cl;function PHe(t,e){return t&&t.length?AHe(t,CHe(e),THe):void 0}var IHe=PHe;const kHe=xn(IHe);var RHe=XS,OHe=cl,DHe=Yee;function MHe(t,e){return t&&t.length?RHe(t,OHe(e),DHe):void 0}var LHe=MHe;const $He=xn(LHe);var FHe=["cx","cy","angle","ticks","axisLine"],VHe=["ticks","tick","angle","tickFormatter","stroke"];function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ev.apply(this,arguments)}function WU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(n),!0).forEach(function(r){r1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HU(t,e){if(t==null)return{};var n=BHe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function UHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$te(r.key),r)}}function zHe(t,e,n){return e&&KU(t.prototype,e),n&&KU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qHe(t,e,n){return e=I_(e),WHe(t,Lte()?Reflect.construct(e,n||[],I_(t).constructor):e.apply(t,n))}function WHe(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HHe(t)}function HHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lte=function(){return!!t})()}function I_(t){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I_(t)}function KHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kI(t,e)}function kI(t,e){return kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kI(t,e)}function r1(t,e,n){return e=$te(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $te(t){var e=GHe(t,"string");return vp(e)=="symbol"?e:e+""}function GHe(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s1=function(t){function e(){return UHe(this,e),qHe(this,e,arguments)}return KHe(e,t),zHe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return $n(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=kHe(l,function(d){return d.coordinate||0}),u=$He(l,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=HU(r,FHe),d=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),h=$n(i,a,d[0],o),f=$n(i,a,d[1],o),m=_d(_d(_d({},_t(u,!1)),{},{fill:"none"},_t(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return $.createElement("line",ev({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=HU(i,VHe),h=this.getTickTextAnchor(),f=_t(d,!1),m=_t(o,!1),v=a.map(function(p,y){var b=r.getTickValueCoord(p),x=_d(_d(_d(_d({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:y},b),{},{payload:p});return $.createElement(sn,ev({className:Bt("recharts-polar-radius-axis-tick",_te(o)),key:"tick-".concat(p.coordinate)},Fh(r.props,p,y)),e.renderTickItem(o,x,c?c(p.value,y):p.value))});return $.createElement(sn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,o=r.tick;return!i||!i.length?null:$.createElement(sn,{className:Bt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Zr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return $.isValidElement(r)?o=$.cloneElement(r,i):Pt(r)?o=r(i):o=$.createElement(Vh,ev({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(j.PureComponent);r1(s1,"displayName","PolarRadiusAxis");r1(s1,"axisType","radiusAxis");r1(s1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dd.apply(this,arguments)}function GU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(n),!0).forEach(function(r){i1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vte(r.key),r)}}function QHe(t,e,n){return e&&YU(t.prototype,e),n&&YU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function XHe(t,e,n){return e=k_(e),ZHe(t,Fte()?Reflect.construct(e,n||[],k_(t).constructor):e.apply(t,n))}function ZHe(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JHe(t)}function JHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fte=function(){return!!t})()}function k_(t){return k_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k_(t)}function eKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RI(t,e)}function i1(t,e,n){return e=Vte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=tKe(t,"string");return xp(e)=="symbol"?e:e+""}function tKe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nKe=Math.PI/180,QU=1e-5,a1=function(t){function e(){return YHe(this,e),XHe(this,e,arguments)}return eKe(e,t),QHe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,h=$n(a,o,l,r.coordinate),f=$n(a,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*nKe),o;return a>QU?o=i==="outer"?"start":"end":a<-QU?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Nd(Nd({},_t(this.props,!1)),{},{fill:"none"},_t(l,!1));if(c==="circle")return $.createElement(n1,Dd({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(f){return $n(i,a,o,f.coordinate)});return $.createElement(yHe,Dd({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=_t(this.props,!1),h=_t(o,!1),f=Nd(Nd({},d),{},{fill:"none"},_t(l,!1)),m=a.map(function(v,p){var y=r.getTickLineCoord(v),b=r.getTickTextAnchor(v),x=Nd(Nd(Nd({textAnchor:b},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:v,x:y.x2,y:y.y2});return $.createElement(sn,Dd({className:Bt("recharts-polar-angle-axis-tick",_te(o)),key:"tick-".concat(v.coordinate)},Fh(r.props,v,p)),l&&$.createElement("line",Dd({className:"recharts-polar-angle-axis-tick-line"},f,y)),o&&e.renderTickItem(o,x,c?c(v.value,p):v.value))});return $.createElement(sn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!i||!i.length?null:$.createElement(sn,{className:Bt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var o;return $.isValidElement(r)?o=$.cloneElement(r,i):Pt(r)?o=r(i):o=$.createElement(Vh,Dd({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(j.PureComponent);i1(a1,"displayName","PolarAngleAxis");i1(a1,"axisType","angleAxis");i1(a1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var rKe=qJ,sKe=rKe(Object.getPrototypeOf,Object),iKe=sKe,aKe=oc,oKe=iKe,lKe=lc,cKe="[object Object]",uKe=Function.prototype,dKe=Object.prototype,Bte=uKe.toString,hKe=dKe.hasOwnProperty,fKe=Bte.call(Object);function mKe(t){if(!lKe(t)||aKe(t)!=cKe)return!1;var e=oKe(t);if(e===null)return!0;var n=hKe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Bte.call(n)==fKe}var pKe=mKe;const gKe=xn(pKe);var yKe=oc,vKe=lc,xKe="[object Boolean]";function bKe(t){return t===!0||t===!1||vKe(t)&&yKe(t)==xKe}var wKe=bKe;const jKe=xn(wKe);function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bx(t)}function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(this,arguments)}function _Ke(t,e){return AKe(t)||EKe(t,e)||SKe(t,e)||NKe()}function NKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SKe(t,e){if(t){if(typeof t=="string")return XU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XU(t,e)}}function XU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function EKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function AKe(t){if(Array.isArray(t))return t}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(r){TKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TKe(t,e,n){return e=CKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CKe(t){var e=PKe(t,"string");return bx(e)=="symbol"?e:e+""}function PKe(t,e){if(bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e6=function(e,n,r,i,a){var o=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+a),l+="L ".concat(e+r-o/2-i,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},IKe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kKe=function(e){var n=JU(JU({},IKe),e),r=j.useRef(),i=j.useState(-1),a=_Ke(i,2),o=a[0],l=a[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,p=n.animationDuration,y=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var x=Bt("recharts-trapezoid",m);return b?$.createElement(nl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:p,animationEasing:v,isActive:b},function(w){var C=w.upperWidth,S=w.lowerWidth,P=w.height,_=w.x,g=w.y;return $.createElement(nl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:v},$.createElement("path",R_({},_t(n,!0),{className:x,d:e6(_,g,C,S,P),ref:r})))}):$.createElement("g",null,$.createElement("path",R_({},_t(n,!0),{className:x,d:e6(c,u,d,h,f)})))},RKe=["option","shapeType","propTransformer","activeClassName","isActive"];function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wx(t)}function OKe(t,e){if(t==null)return{};var n=DKe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function t6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t6(Object(n),!0).forEach(function(r){MKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MKe(t,e,n){return e=LKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LKe(t){var e=$Ke(t,"string");return wx(e)=="symbol"?e:e+""}function $Ke(t,e){if(wx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FKe(t,e){return O_(O_({},e),t)}function VKe(t,e){return t==="symbols"}function n6(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return $.createElement(BD,n);case"trapezoid":return $.createElement(kKe,n);case"sector":return $.createElement(Ete,n);case"symbols":if(VKe(e))return $.createElement(aD,n);break;default:return null}}function BKe(t){return j.isValidElement(t)?t.props:t}function Ute(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?FKe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=OKe(t,RKe),u;if(j.isValidElement(e))u=j.cloneElement(e,O_(O_({},c),BKe(e)));else if(Pt(e))u=e(c);else if(gKe(e)&&!jKe(e)){var d=i(e,c);u=$.createElement(n6,{shapeType:n,elementProps:d})}else{var h=c;u=$.createElement(n6,{shapeType:n,elementProps:h})}return l?$.createElement(sn,{className:o},u):u}function o1(t,e){return e!=null&&"trapezoids"in t.props}function l1(t,e){return e!=null&&"sectors"in t.props}function jx(t,e){return e!=null&&"points"in t.props}function UKe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function zKe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function qKe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function WKe(t,e){var n;return o1(t,e)?n=UKe:l1(t,e)?n=zKe:jx(t,e)&&(n=qKe),n}function HKe(t,e){var n;return o1(t,e)?n="trapezoids":l1(t,e)?n="sectors":jx(t,e)&&(n="points"),n}function KKe(t,e){if(o1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(l1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return jx(t,e)?e.payload:{}}function GKe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=HKe(n,e),a=KKe(n,e),o=r.filter(function(c,u){var d=pp(a,c),h=n.props[i].filter(function(v){var p=WKe(n,e);return p(v,e)}),f=n.props[i].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var jw;function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xf.apply(this,arguments)}function r6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(n),!0).forEach(function(r){ra(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qte(r.key),r)}}function QKe(t,e,n){return e&&s6(t.prototype,e),n&&s6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function XKe(t,e,n){return e=D_(e),ZKe(t,zte()?Reflect.construct(e,n||[],D_(t).constructor):e.apply(t,n))}function ZKe(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JKe(t)}function JKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zte=function(){return!!t})()}function D_(t){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D_(t)}function e7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OI(t,e)}function ra(t,e,n){return e=qte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=t7e(t,"string");return bp(e)=="symbol"?e:e+""}function t7e(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uc=function(t){function e(n){var r;return YKe(this,e),r=XKe(this,e,[n]),ra(r,"pieRef",null),ra(r,"sectorRefs",[]),ra(r,"id",dg("recharts-pie-")),ra(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Pt(i)&&i()}),ra(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Pt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return e7e(e,t),QKe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=_t(this.props,!1),h=_t(o,!1),f=_t(l,!1),m=o&&o.offsetRadius||20,v=r.map(function(p,y){var b=(p.startAngle+p.endAngle)/2,x=$n(p.cx,p.cy,p.outerRadius+m,b),w=kn(kn(kn(kn({},d),p),{},{stroke:"none"},h),{},{index:y,textAnchor:e.getTextAnchor(x.x,p.cx)},x),C=kn(kn(kn(kn({},d),p),{},{fill:"none",stroke:p.fill},f),{},{index:y,points:[$n(p.cx,p.cy,p.outerRadius,b),x]}),S=c;return Ut(c)&&Ut(u)?S="value":Ut(c)&&(S=u),$.createElement(sn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,w,Vr(p,S)))});return $.createElement(sn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=i.isActiveIndex(d),f=c&&i.hasActiveIndex()?c:null,m=h?o:f,v=kn(kn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return $.createElement(sn,Xf({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Fh(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),$.createElement(Ute,Xf({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return $.createElement(nl,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,y=[],b=a&&a[0],x=b.startAngle;return a.forEach(function(w,C){var S=f&&f[C],P=C>0?Ui(w,"paddingAngle",0):0;if(S){var _=ui(S.endAngle-S.startAngle,w.endAngle-w.startAngle),g=kn(kn({},w),{},{startAngle:x+P,endAngle:x+_(p)+P});y.push(g),x=g.endAngle}else{var T=w.endAngle,E=w.startAngle,A=ui(0,T-E),I=A(p),k=kn(kn({},w),{},{startAngle:x+P,endAngle:x+I+P});y.push(k),x=k.endAngle}}),$.createElement(sn,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!pp(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!Re(u)||!Re(d)||!Re(h)||!Re(f))return null;var p=Bt("recharts-pie",l);return $.createElement(sn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(b){r.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),Zr.renderCallByParent(this.props,null,!1),(!m||v)&&Dl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if($.isValidElement(r))return $.cloneElement(r,i);if(Pt(r))return r(i);var o=Bt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return $.createElement(wm,Xf({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,a){if($.isValidElement(r))return $.cloneElement(r,i);var o=a;if(Pt(r)&&(o=r(i),$.isValidElement(o)))return o;var l=Bt("recharts-pie-label-text",typeof r!="boolean"&&!Pt(r)?r.className:"");return $.createElement(Vh,Xf({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(j.PureComponent);jw=uc;ra(uc,"displayName","Pie");ra(uc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Go.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ra(uc,"parseDeltaAngle",function(t,e){var n=Ks(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ra(uc,"getRealPieData",function(t){var e=t.data,n=t.children,r=_t(t,!1),i=ma(n,qS);return e&&e.length?e.map(function(a,o){return kn(kn(kn({payload:a},r),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return kn(kn({},r),a.props)}):[]});ra(uc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,o=jte(i,a),l=r+Gs(t.cx,i,i/2),c=n+Gs(t.cy,a,a/2),u=Gs(t.innerRadius,o,0),d=Gs(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});ra(uc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?kn(kn({},e.type.defaultProps),e.props):e.props,i=jw.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),v=jw.parseCoordinateOfPie(r,n),p=jw.parseDeltaAngle(o,l),y=Math.abs(p),b=u;Ut(u)&&Ut(h)?(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Ut(u)&&(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var x=i.filter(function(g){return Vr(g,b,0)!==0}).length,w=(y>=360?x:x-1)*c,C=y-x*m-w,S=i.reduce(function(g,T){var E=Vr(T,b,0);return g+(Re(E)?E:0)},0),P;if(S>0){var _;P=i.map(function(g,T){var E=Vr(g,b,0),A=Vr(g,d,T),I=(Re(E)?E:0)/S,k;T?k=_.endAngle+Ks(p)*c*(E!==0?1:0):k=o;var L=k+Ks(p)*((E!==0?m:0)+I*C),B=(k+L)/2,U=(v.innerRadius+v.outerRadius)/2,V=[{name:A,value:E,payload:g,dataKey:b,type:f}],D=$n(v.cx,v.cy,U,B);return _=kn(kn(kn({percent:I,cornerRadius:a,name:A,tooltipPayload:V,midAngle:B,middleRadius:U,tooltipPosition:D},g),v),{},{value:Vr(g,b),startAngle:k,endAngle:L,payload:g,paddingAngle:Ks(p)*c}),_})}return kn(kn({},v),{},{sectors:P,data:i})});var n7e=Math.ceil,r7e=Math.max;function s7e(t,e,n,r){for(var i=-1,a=r7e(n7e((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}var i7e=s7e,a7e=cee,i6=1/0,o7e=17976931348623157e292;function l7e(t){if(!t)return t===0?t:0;if(t=a7e(t),t===i6||t===-i6){var e=t<0?-1:1;return e*o7e}return t===t?t:0}var Wte=l7e,c7e=i7e,u7e=zS,IA=Wte;function d7e(t){return function(e,n,r){return r&&typeof r!="number"&&u7e(e,n,r)&&(n=r=void 0),e=IA(e),n===void 0?(n=e,e=0):n=IA(n),r=r===void 0?e<n?1:-1:IA(r),c7e(e,n,r,t)}}var h7e=d7e,f7e=h7e,m7e=f7e(),p7e=m7e;const M_=xn(p7e);function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(t)}function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){Hte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hte(t,e,n){return e=g7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g7e(t){var e=y7e(t,"string");return _x(e)=="symbol"?e:e+""}function y7e(t,e){if(_x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v7e=["Webkit","Moz","O","ms"],x7e=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=v7e.reduce(function(a,o){return o6(o6({},a),{},Hte({},o+r,n))},{});return i[e]=n,i};function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function L_(){return L_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L_.apply(this,arguments)}function l6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(n),!0).forEach(function(r){Ti(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gte(r.key),r)}}function w7e(t,e,n){return e&&c6(t.prototype,e),n&&c6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function j7e(t,e,n){return e=$_(e),_7e(t,Kte()?Reflect.construct(e,n||[],$_(t).constructor):e.apply(t,n))}function _7e(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N7e(t)}function N7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kte=function(){return!!t})()}function $_(t){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$_(t)}function S7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DI(t,e)}function DI(t,e){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DI(t,e)}function Ti(t,e,n){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gte(t){var e=E7e(t,"string");return wp(e)=="symbol"?e:e+""}function E7e(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A7e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Qy().domain(M_(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},u6=function(e){return e.changedTouches&&!!e.changedTouches.length},jp=function(t){function e(n){var r;return b7e(this,e),r=j7e(this,e,[n]),Ti(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ti(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ti(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),Ti(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ti(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ti(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ti(r,"handleSlideDragStart",function(i){var a=u6(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return S7e(e,t),w7e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(i,a),f=Math.max(i,a),m=e.getIndexInRange(o,h),v=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=Vr(a[r],l,r);return Pt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,p=r.pageX-a;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var y=this.getIndex({startX:o+p,endX:l+p});(y.startIndex!==f||y.endIndex!==m)&&v&&v(y),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=u6(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,v=d.onChange,p=d.gap,y=d.data,b={startX:this.state.startX,endX:this.state.endX},x=r.pageX-a;x>0?x=Math.min(x,h+f-m-u):x<0&&(x=Math.max(x,h-u)),b[o]=u+x;var w=this.getIndex(b),C=w.startIndex,S=w.endIndex,P=function(){var g=y.length-1;return o==="startX"&&(l>c?C%p===0:S%p===0)||l<c&&S===g||o==="endX"&&(l>c?S%p===0:C%p===0)||l>c&&S===g};this.setState(Ti(Ti({},o,u+x),"brushMoveStartX",r.pageX),function(){v&&P()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(Ti({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return $.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=j.Children.only(u);return h?$.cloneElement(h,{x:i,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,p=c.startIndex,y=c.endIndex,b=Math.max(r,this.props.x),x=kA(kA({},_t(this.props,!1)),{},{x:b,y:u,width:d,height:h}),w=m||"Min value: ".concat((a=v[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[y])===null||o===void 0?void 0:o.name);return $.createElement(sn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,v={pointerEvents:"none",fill:u};return $.createElement(sn,{className:"recharts-brush-texts"},$.createElement(Vh,L_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(i)),$.createElement(Vh,L_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,v=f.endX,p=f.isTextActive,y=f.isSlideMoving,b=f.isTravellerMoving,x=f.isTravellerFocused;if(!i||!i.length||!Re(l)||!Re(c)||!Re(u)||!Re(d)||u<=0||d<=0)return null;var w=Bt("recharts-brush",a),C=$.Children.count(o)===1,S=x7e("userSelect","none");return $.createElement(sn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(p||y||b||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(a+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return $.isValidElement(r)?a=$.cloneElement(r,i):Pt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return kA({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?A7e({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>i?l=c:o=c}return i>=r[l]?l:o}}])}(j.PureComponent);Ti(jp,"displayName","Brush");Ti(jp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var T7e=fD;function C7e(t,e){var n;return T7e(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var P7e=C7e,I7e=MJ,k7e=cl,R7e=P7e,O7e=_i,D7e=zS;function M7e(t,e,n){var r=O7e(t)?I7e:R7e;return n&&D7e(t,e,n)&&(e=void 0),r(t,k7e(e))}var L7e=M7e;const $7e=xn(L7e);var Qo=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},d6=see;function F7e(t,e,n){e=="__proto__"&&d6?d6(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var V7e=F7e,B7e=V7e,U7e=nee,z7e=cl;function q7e(t,e){var n={};return e=z7e(e),U7e(t,function(r,i,a){B7e(n,i,e(r,i,a))}),n}var W7e=q7e;const H7e=xn(W7e);function K7e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var G7e=K7e,Y7e=fD;function Q7e(t,e){var n=!0;return Y7e(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var X7e=Q7e,Z7e=G7e,J7e=X7e,eGe=cl,tGe=_i,nGe=zS;function rGe(t,e,n){var r=tGe(t)?Z7e:J7e;return n&&nGe(t,e,n)&&(e=void 0),r(t,eGe(e))}var sGe=rGe;const Yte=xn(sGe);var iGe=["x","y"];function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nx(t)}function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}function h6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(n),!0).forEach(function(r){aGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aGe(t,e,n){return e=oGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oGe(t){var e=lGe(t,"string");return Nx(e)=="symbol"?e:e+""}function lGe(t,e){if(Nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cGe(t,e){if(t==null)return{};var n=uGe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dGe(t,e){var n=t.x,r=t.y,i=cGe(t,iGe),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return ry(ry(ry(ry(ry({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function f6(t){return $.createElement(Ute,MI({shapeType:"rectangle",propTransformer:dGe,activeClassName:"recharts-active-bar"},t))}var hGe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=Re(r)||LOe(r);return a?e(r,i):(a||Uh(),n)}},fGe=["value","background"],Qte;function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function mGe(t,e){if(t==null)return{};var n=pGe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function F_(){return F_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F_.apply(this,arguments)}function m6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(n),!0).forEach(function(r){uu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zte(r.key),r)}}function yGe(t,e,n){return e&&p6(t.prototype,e),n&&p6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vGe(t,e,n){return e=V_(e),xGe(t,Xte()?Reflect.construct(e,n||[],V_(t).constructor):e.apply(t,n))}function xGe(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bGe(t)}function bGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xte=function(){return!!t})()}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V_(t)}function wGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LI(t,e)}function uu(t,e,n){return e=Zte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zte(t){var e=jGe(t,"string");return _p(e)=="symbol"?e:e+""}function jGe(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var af=function(t){function e(){var n;gGe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=vGe(this,e,[].concat(i)),uu(n,"state",{isAnimationFinished:!1}),uu(n,"id",dg("recharts-bar-")),uu(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),uu(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return wGe(e,t),yGe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=_t(this.props,!1);return r&&r.map(function(h,f){var m=f===c,v=m?u:o,p=Er(Er(Er({},d),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return $.createElement(sn,F_({className:"recharts-bar-rectangle"},Fh(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),$.createElement(f6,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return $.createElement(nl,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,p=a.map(function(y,b){var x=f&&f[b];if(x){var w=ui(x.x,y.x),C=ui(x.y,y.y),S=ui(x.width,y.width),P=ui(x.height,y.height);return Er(Er({},y),{},{x:w(v),y:C(v),width:S(v),height:P(v)})}if(o==="horizontal"){var _=ui(0,y.height),g=_(v);return Er(Er({},y),{},{y:y.y+y.height-g,height:g})}var T=ui(0,y.width),E=T(v);return Er(Er({},y),{},{width:E})});return $.createElement(sn,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!pp(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=_t(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=mGe(u,fGe);if(!h)return null;var m=Er(Er(Er(Er(Er({},f),{},{fill:"#eee"},h),c),Fh(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return $.createElement(f6,F_({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=ma(d,t1);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,b){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:Vr(y,b)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return $.createElement(sn,v,h.map(function(p){return $.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,v=r.background,p=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,b=Bt("recharts-bar",o),x=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,C=x||w,S=Ut(p)?this.id:p;return $.createElement(sn,{className:b},x||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(S)},$.createElement("rect",{x:x?u:u-h/2,y:w?d:d-f/2,width:x?h:h*2,height:w?f:f*2}))):null,$.createElement(sn,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,S),(!m||y)&&Dl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(j.PureComponent);Qte=af;uu(af,"displayName","Bar");uu(af,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Go.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uu(af,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=n9e(r,n);if(!m)return null;var v=e.layout,p=n.type.defaultProps,y=p!==void 0?Er(Er({},p),n.props):n.props,b=y.dataKey,x=y.children,w=y.minPointSize,C=v==="horizontal"?o:a,S=u?C.scale.domain():null,P=c9e({numericAxis:C}),_=ma(x,qS),g=h.map(function(T,E){var A,I,k,L,B,U;u?A=r9e(u[d+E],S):(A=Vr(T,b),Array.isArray(A)||(A=[P,A]));var V=hGe(w,Qte.defaultProps.minPointSize)(A[1],E);if(v==="horizontal"){var D,R=[o.scale(A[0]),o.scale(A[1])],W=R[0],J=R[1];I=sU({axis:a,ticks:l,bandSize:i,offset:m.offset,entry:T,index:E}),k=(D=J??W)!==null&&D!==void 0?D:void 0,L=m.size;var oe=W-J;if(B=Number.isNaN(oe)?0:oe,U={x:I,y:o.y,width:L,height:o.height},Math.abs(V)>0&&Math.abs(B)<Math.abs(V)){var Ae=Ks(B||V)*(Math.abs(V)-Math.abs(B));k-=Ae,B+=Ae}}else{var z=[a.scale(A[0]),a.scale(A[1])],ie=z[0],ve=z[1];if(I=ie,k=sU({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:T,index:E}),L=ve-ie,B=m.size,U={x:a.x,y:k,width:a.width,height:B},Math.abs(V)>0&&Math.abs(L)<Math.abs(V)){var xe=Ks(L||V)*(Math.abs(V)-Math.abs(L));L+=xe}}return Er(Er(Er({},T),{},{x:I,y:k,width:L,height:B,value:u?A:A[1],payload:T,background:U},_&&_[E]&&_[E].props),{},{tooltipPayload:[bte(n,T)],tooltipPosition:{x:I+L/2,y:k+B/2}})});return Er({data:g,layout:v},f)});function Sx(t){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sx(t)}function _Ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jte(r.key),r)}}function NGe(t,e,n){return e&&g6(t.prototype,e),n&&g6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){c1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c1(t,e,n){return e=Jte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jte(t){var e=SGe(t,"string");return Sx(e)=="symbol"?e:e+""}function SGe(t,e){if(Sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ene=function(e,n,r,i,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!Pi(u,af);return d.reduce(function(m,v){var p=n[v],y=p.orientation,b=p.domain,x=p.padding,w=x===void 0?{}:x,C=p.mirror,S=p.reversed,P="".concat(y).concat(C?"Mirror":""),_,g,T,E,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=b[1]-b[0],k=1/0,L=p.categoricalDomain.sort(VOe);if(L.forEach(function(z,ie){ie>0&&(k=Math.min((z||0)-(L[ie-1]||0),k))}),Number.isFinite(k)){var B=k/I,U=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(_=B*U/2),p.padding==="no-gap"){var V=Gs(e.barCategoryGap,B*U),D=B*U/2;_=D-V-(D-V)/U*V}}}i==="xAxis"?g=[r.left+(w.left||0)+(_||0),r.left+r.width-(w.right||0)-(_||0)]:i==="yAxis"?g=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(_||0),r.top+r.height-(w.bottom||0)-(_||0)]:g=p.range,S&&(g=[g[1],g[0]]);var R=gte(p,a,f),W=R.scale,J=R.realScaleType;W.domain(b).range(g),yte(W);var oe=vte(W,Ba(Ba({},p),{},{realScaleType:J}));i==="xAxis"?(A=y==="top"&&!C||y==="bottom"&&C,T=r.left,E=h[P]-A*p.height):i==="yAxis"&&(A=y==="left"&&!C||y==="right"&&C,T=h[P]-A*p.width,E=r.top);var Ae=Ba(Ba(Ba({},p),oe),{},{realScaleType:J,x:T,y:E,scale:W,width:i==="xAxis"?r.width:p.width,height:i==="yAxis"?r.height:p.height});return Ae.bandSize=N_(Ae,oe),!p.hide&&i==="xAxis"?h[P]+=(A?-1:1)*Ae.height:p.hide||(h[P]+=(A?-1:1)*Ae.width),Ba(Ba({},m),{},c1({},v,Ae))},{})},tne=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},EGe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return tne({x:n,y:r},{x:i,y:a})},nne=function(){function t(e){_Ge(this,t),this.scale=e}return NGe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();c1(nne,"EPS",1e-4);var UD=function(e){var n=Object.keys(e).reduce(function(r,i){return Ba(Ba({},r),{},c1({},i,nne.create(e[i])))},{});return Ba(Ba({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return H7e(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return Yte(i,function(a,o){return n[o].isInRange(a)})}})};function AGe(t){return(t%180+180)%180}var TGe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=AGe(i),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},CGe=cl,PGe=_b,IGe=BS;function kGe(t){return function(e,n,r){var i=Object(e);if(!PGe(e)){var a=CGe(n);e=IGe(e),n=function(l){return a(i[l],l,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:void 0}}var RGe=kGe,OGe=Wte;function DGe(t){var e=OGe(t),n=e%1;return e===e?n?e-n:e:0}var MGe=DGe,LGe=QJ,$Ge=cl,FGe=MGe,VGe=Math.max;function BGe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:FGe(n);return i<0&&(i=VGe(r+i,0)),LGe(t,$Ge(e),i)}var UGe=BGe,zGe=RGe,qGe=UGe,WGe=zGe(qGe),HGe=WGe;const KGe=xn(HGe);var GGe=BRe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),zD=j.createContext(void 0),qD=j.createContext(void 0),rne=j.createContext(void 0),sne=j.createContext({}),ine=j.createContext(void 0),ane=j.createContext(0),one=j.createContext(0),v6=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=GGe(a);return $.createElement(zD.Provider,{value:r},$.createElement(qD.Provider,{value:i},$.createElement(sne.Provider,{value:a},$.createElement(rne.Provider,{value:d},$.createElement(ine.Provider,{value:o},$.createElement(ane.Provider,{value:u},$.createElement(one.Provider,{value:c},l)))))))},YGe=function(){return j.useContext(ine)},lne=function(e){var n=j.useContext(zD);n==null&&Uh();var r=n[e];return r==null&&Uh(),r},QGe=function(){var e=j.useContext(zD);return Hc(e)},XGe=function(){var e=j.useContext(qD),n=KGe(e,function(r){return Yte(r.domain,Number.isFinite)});return n||Hc(e)},cne=function(e){var n=j.useContext(qD);n==null&&Uh();var r=n[e];return r==null&&Uh(),r},ZGe=function(){var e=j.useContext(rne);return e},JGe=function(){return j.useContext(sne)},WD=function(){return j.useContext(one)},HD=function(){return j.useContext(ane)};function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function eYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dne(r.key),r)}}function nYe(t,e,n){return e&&tYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rYe(t,e,n){return e=B_(e),sYe(t,une()?Reflect.construct(e,n||[],B_(t).constructor):e.apply(t,n))}function sYe(t,e){if(e&&(Np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iYe(t)}function iYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function une(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(une=function(){return!!t})()}function B_(t){return B_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},B_(t)}function aYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$I(t,e)}function $I(t,e){return $I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$I(t,e)}function x6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(n),!0).forEach(function(r){KD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KD(t,e,n){return e=dne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=oYe(t,"string");return Np(e)=="symbol"?e:e+""}function oYe(t,e){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lYe(t,e){return hYe(t)||dYe(t,e)||uYe(t,e)||cYe()}function cYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uYe(t,e){if(t){if(typeof t=="string")return w6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w6(t,e)}}function w6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function hYe(t){if(Array.isArray(t))return t}function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}var fYe=function(e,n){var r;return $.isValidElement(e)?r=$.cloneElement(e,n):Pt(e)?r=e(n):r=$.createElement("line",FI({},n,{className:"recharts-reference-line-line"})),r},mYe=function(e,n,r,i,a,o,l,c,u){var d=a.x,h=a.y,f=a.width,m=a.height;if(r){var v=u.y,p=e.y.apply(v,{position:o});if(Qo(u,"discard")&&!e.y.isInRange(p))return null;var y=[{x:d+f,y:p},{x:d,y:p}];return c==="left"?y.reverse():y}if(n){var b=u.x,x=e.x.apply(b,{position:o});if(Qo(u,"discard")&&!e.x.isInRange(x))return null;var w=[{x,y:h+m},{x,y:h}];return l==="top"?w.reverse():w}if(i){var C=u.segment,S=C.map(function(P){return e.apply(P,{position:o})});return Qo(u,"discard")&&$7e(S,function(P){return!e.isInRange(P)})?null:S}return null};function pYe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=YGe(),d=lne(i),h=cne(a),f=ZGe();if(!u||!f)return null;ao(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=UD({x:d.scale,y:h.scale}),v=zr(e),p=zr(n),y=r&&r.length===2,b=mYe(m,v,p,y,f,t.position,d.orientation,h.orientation,t);if(!b)return null;var x=lYe(b,2),w=x[0],C=w.x,S=w.y,P=x[1],_=P.x,g=P.y,T=Qo(t,"hidden")?"url(#".concat(u,")"):void 0,E=b6(b6({clipPath:T},_t(t,!0)),{},{x1:C,y1:S,x2:_,y2:g});return $.createElement(sn,{className:Bt("recharts-reference-line",l)},fYe(o,E),Zr.renderCallByParent(t,EGe({x1:C,y1:S,x2:_,y2:g})))}var GD=function(t){function e(){return eYe(this,e),rYe(this,e,arguments)}return aYe(e,t),nYe(e,[{key:"render",value:function(){return $.createElement(pYe,this.props)}}])}($.Component);KD(GD,"displayName","ReferenceLine");KD(GD,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VI.apply(this,arguments)}function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){u1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fne(r.key),r)}}function vYe(t,e,n){return e&&yYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xYe(t,e,n){return e=U_(e),bYe(t,hne()?Reflect.construct(e,n||[],U_(t).constructor):e.apply(t,n))}function bYe(t,e){if(e&&(Sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wYe(t)}function wYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hne=function(){return!!t})()}function U_(t){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U_(t)}function jYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BI(t,e)}function u1(t,e,n){return e=fne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fne(t){var e=_Ye(t,"string");return Sp(e)=="symbol"?e:e+""}function _Ye(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NYe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=UD({x:i.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Qo(e,"discard")&&!o.isInRange(l)?null:l},d1=function(t){function e(){return gYe(this,e),xYe(this,e,arguments)}return jYe(e,t),vYe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=zr(i),d=zr(a);if(ao(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=NYe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,p=v.shape,y=v.className,b=Qo(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=_6(_6({clipPath:b},_t(this.props,!0)),{},{cx:f,cy:m});return $.createElement(sn,{className:Bt("recharts-reference-dot",y)},e.renderDot(p,x),Zr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}($.Component);u1(d1,"displayName","ReferenceDot");u1(d1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});u1(d1,"renderDot",function(t,e){var n;return $.isValidElement(t)?n=$.cloneElement(t,e):Pt(t)?n=t(e):n=$.createElement(n1,VI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function N6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(n),!0).forEach(function(r){h1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pne(r.key),r)}}function AYe(t,e,n){return e&&EYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TYe(t,e,n){return e=z_(e),CYe(t,mne()?Reflect.construct(e,n||[],z_(t).constructor):e.apply(t,n))}function CYe(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PYe(t)}function PYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mne=function(){return!!t})()}function z_(t){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z_(t)}function IYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zI(t,e)}function zI(t,e){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zI(t,e)}function h1(t,e,n){return e=pne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pne(t){var e=kYe(t,"string");return Ep(e)=="symbol"?e:e+""}function kYe(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RYe=function(e,n,r,i,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=UD({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Qo(a,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:tne(m,v)},f1=function(t){function e(){return SYe(this,e),TYe(this,e,arguments)}return IYe(e,t),AYe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ao(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=zr(i),f=zr(a),m=zr(o),v=zr(l),p=this.props.shape;if(!h&&!f&&!m&&!v&&!p)return null;var y=RYe(h,f,m,v,this.props);if(!y&&!p)return null;var b=Qo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return $.createElement(sn,{className:Bt("recharts-reference-area",c)},e.renderRect(p,S6(S6({clipPath:b},_t(this.props,!0)),y)),Zr.renderCallByParent(this.props,y))}}])}($.Component);h1(f1,"displayName","ReferenceArea");h1(f1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});h1(f1,"renderRect",function(t,e){var n;return $.isValidElement(t)?n=$.cloneElement(t,e):Pt(t)?n=t(e):n=$.createElement(BD,UI({},e,{className:"recharts-reference-area-rect"})),n});function gne(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function OYe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return TGe(r,n)}function DYe(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function q_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function MYe(t,e){return gne(t,e+1)}function LYe(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:gne(r,u)};var p=c,y,b=function(){return y===void 0&&(y=n(v,p)),y},x=v.coordinate,w=c===0||q_(t,x,b,d,l);w||(c=0,d=o,u+=1),w&&(d=x+t*(b()/2+i),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function Ex(t){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ex(t)}function E6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E6(Object(n),!0).forEach(function(r){$Ye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ye(t,e,n){return e=FYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FYe(t){var e=VYe(t,"string");return Ex(e)=="symbol"?e:e+""}function VYe(t,e){if(Ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BYe(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var m=a[f],v,p=function(){return v===void 0&&(v=n(m,f)),v};if(f===o-1){var y=t*(m.coordinate+t*p()/2-c);a[f]=m=js(js({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else a[f]=m=js(js({},m),{},{tickCoord:m.coordinate});var b=q_(t,m.tickCoord,p,l,c);b&&(c=m.tickCoord-t*(p()/2+i),a[f]=js(js({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function UYe(t,e,n,r,i,a){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=r[l-1],h=n(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=js(js({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=q_(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+i),o[l-1]=js(js({},d),{},{isShow:!0}))}for(var v=a?l-1:l,p=function(x){var w=o[x],C,S=function(){return C===void 0&&(C=n(w,x)),C};if(x===0){var P=t*(w.coordinate-t*S()/2-c);o[x]=w=js(js({},w),{},{tickCoord:P<0?w.coordinate-P*t:w.coordinate})}else o[x]=w=js(js({},w),{},{tickCoord:w.coordinate});var _=q_(t,w.tickCoord,S,c,u);_&&(c=w.tickCoord+t*(S()/2+i),o[x]=js(js({},w),{},{isShow:!0}))},y=0;y<v;y++)p(y);return o}function YD(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(Re(c)||Go.isSsr)return MYe(i,typeof c=="number"&&Re(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?Yy(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(w,C){var S=Pt(u)?u(w.value,C):w.value;return m==="width"?OYe(Yy(S,{fontSize:e,letterSpacing:n}),v,h):Yy(S,{fontSize:e,letterSpacing:n})[m]},y=i.length>=2?Ks(i[1].coordinate-i[0].coordinate):1,b=DYe(a,y,m);return c==="equidistantPreserveStart"?LYe(y,b,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=UYe(y,b,p,i,o,c==="preserveStartEnd"):f=BYe(y,b,p,i,o),f.filter(function(x){return x.isShow}))}var zYe=["viewBox"],qYe=["viewBox"],WYe=["ticks"];function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){QD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RA(t,e){if(t==null)return{};var n=HYe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vne(r.key),r)}}function GYe(t,e,n){return e&&T6(t.prototype,e),n&&T6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YYe(t,e,n){return e=W_(e),QYe(t,yne()?Reflect.construct(e,n||[],W_(t).constructor):e.apply(t,n))}function QYe(t,e){if(e&&(Ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XYe(t)}function XYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yne=function(){return!!t})()}function W_(t){return W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W_(t)}function ZYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qI(t,e)}function QD(t,e,n){return e=vne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vne(t){var e=JYe(t,"string");return Ap(e)=="symbol"?e:e+""}function JYe(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vg=function(t){function e(n){var r;return KYe(this,e),r=YYe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return ZYe(e,t),GYe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=RA(r,zYe),l=this.props,c=l.viewBox,u=RA(l,qYe);return!ym(a,c)||!ym(o,u)||!ym(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,m,v,p,y,b,x,w=h?-1:1,C=r.tickSize||d,S=Re(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=v=r.coordinate,y=o+ +!h*c,p=y-w*C,x=p-w*f,b=S;break;case"left":p=y=r.coordinate,v=a+ +!h*l,m=v-w*C,b=m-w*f,x=S;break;case"right":p=y=r.coordinate,v=a+ +h*l,m=v+w*C,b=m+w*f,x=S;break;default:m=v=r.coordinate,y=o+ +h*c,p=y+w*C,x=p+w*f,b=S;break}return{line:{x1:m,y1:p,x2:v,y2:y},tick:{x:b,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Or(Or(Or({},_t(this.props,!1)),_t(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Or(Or({},h),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Or(Or({},h),{},{x1:i+m*o,y1:a,x2:i+m*o,y2:a+l})}return $.createElement("line",Zf({},h,{className:Bt("recharts-cartesian-axis-line",Ui(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=YD(Or(Or({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=_t(this.props,!1),b=_t(d,!1),x=Or(Or({},y),{},{fill:"none"},_t(c,!1)),w=m.map(function(C,S){var P=o.getTickLineCoord(C),_=P.line,g=P.tick,T=Or(Or(Or(Or({textAnchor:v,verticalAnchor:p},y),{},{stroke:"none",fill:u},b),g),{},{index:S,payload:C,visibleTicksCount:m.length,tickFormatter:h});return $.createElement(sn,Zf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Fh(o.props,C,S)),c&&$.createElement("line",Zf({},x,_,{className:Bt("recharts-cartesian-axis-tick-line",Ui(c,"className"))})),d&&e.renderTickItem(d,T,"".concat(Pt(h)?h(C.value,S):C.value).concat(f||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,m=RA(h,WYe),v=f;return Pt(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:$.createElement(sn,{className:Bt("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Zr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o,l=Bt(i.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(r)?o=$.cloneElement(r,Or(Or({},i),{},{className:l})):Pt(r)?o=r(Or(Or({},i),{},{className:l})):o=$.createElement(Vh,Zf({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(j.Component);QD(vg,"displayName","CartesianAxis");QD(vg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var eQe=["x1","y1","x2","y2","key"],tQe=["offset"];function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function C6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(n),!0).forEach(function(r){nQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nQe(t,e,n){return e=rQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rQe(t){var e=sQe(t,"string");return zh(e)=="symbol"?e:e+""}function sQe(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(this,arguments)}function P6(t,e){if(t==null)return{};var n=iQe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var aQe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return $.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function xne(t,e){var n;if($.isValidElement(t))n=$.cloneElement(t,e);else if(Pt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,l=e.key,c=P6(e,eQe),u=_t(c,!1);u.offset;var d=P6(u,tQe);n=$.createElement("line",Kd({},d,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function oQe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return xne(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function lQe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return xne(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function cQe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],p=v?i+o-f:d[m+1]-f;if(p<=0)return null;var y=m%e.length;return $.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:p,width:a,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function uQe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],p=v?a+l-f:d[m+1]-f;if(p<=0)return null;var y=m%r.length;return $.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var dQe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return pte(YD(Cs(Cs(Cs({},vg.defaultProps),r),{},{ticks:Tl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},hQe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return pte(YD(Cs(Cs(Cs({},vg.defaultProps),r),{},{ticks:Tl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},bf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function bne(t){var e,n,r,i,a,o,l=WD(),c=HD(),u=JGe(),d=Cs(Cs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:bf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:bf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:bf.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:bf.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:bf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:bf.verticalFill,x:Re(t.x)?t.x:u.left,y:Re(t.y)?t.y:u.top,width:Re(t.width)?t.width:u.width,height:Re(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,v=d.height,p=d.syncWithTicks,y=d.horizontalValues,b=d.verticalValues,x=QGe(),w=XGe();if(!Re(m)||m<=0||!Re(v)||v<=0||!Re(h)||h!==+h||!Re(f)||f!==+f)return null;var C=d.verticalCoordinatesGenerator||dQe,S=d.horizontalCoordinatesGenerator||hQe,P=d.horizontalPoints,_=d.verticalPoints;if((!P||!P.length)&&Pt(S)){var g=y&&y.length,T=S({yAxis:w?Cs(Cs({},w),{},{ticks:g?y:w.ticks}):void 0,width:l,height:c,offset:u},g?!0:p);ao(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(zh(T),"]")),Array.isArray(T)&&(P=T)}if((!_||!_.length)&&Pt(C)){var E=b&&b.length,A=C({xAxis:x?Cs(Cs({},x),{},{ticks:E?b:x.ticks}):void 0,width:l,height:c,offset:u},E?!0:p);ao(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(zh(A),"]")),Array.isArray(A)&&(_=A)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(aQe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),$.createElement(oQe,Kd({},d,{offset:u,horizontalPoints:P,xAxis:x,yAxis:w})),$.createElement(lQe,Kd({},d,{offset:u,verticalPoints:_,xAxis:x,yAxis:w})),$.createElement(cQe,Kd({},d,{horizontalPoints:P})),$.createElement(uQe,Kd({},d,{verticalPoints:_})))}bne.displayName="CartesianGrid";var fQe=["layout","type","stroke","connectNulls","isRange","ref"],mQe=["key"],wne;function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function jne(t,e){if(t==null)return{};var n=pQe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){Do(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nne(r.key),r)}}function yQe(t,e,n){return e&&k6(t.prototype,e),n&&k6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vQe(t,e,n){return e=H_(e),xQe(t,_ne()?Reflect.construct(e,n||[],H_(t).constructor):e.apply(t,n))}function xQe(t,e){if(e&&(Tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bQe(t)}function bQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ne=function(){return!!t})()}function H_(t){return H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H_(t)}function wQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WI(t,e)}function WI(t,e){return WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WI(t,e)}function Do(t,e,n){return e=Nne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nne(t){var e=jQe(t,"string");return Tp(e)=="symbol"?e:e+""}function jQe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nc=function(t){function e(){var n;gQe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=vQe(this,e,[].concat(i)),Do(n,"state",{isAnimationFinished:!0}),Do(n,"id",dg("recharts-area-")),Do(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Pt(o)&&o()}),Do(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Pt(o)&&o()}),n}return wQe(e,t),yQe(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=_t(this.props,!1),m=_t(u,!0),v=d.map(function(y,b){var x=Rc(Rc(Rc({key:"dot-".concat(b),r:3},f),m),{},{index:b,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,x)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return $.createElement(sn,Gd({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=cu(o.map(function(f){return f.y||0}));return Re(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(cu(a.map(function(f){return f.y||0})),h)),Re(h)?$.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=cu(o.map(function(f){return f.x||0}));return Re(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(cu(a.map(function(f){return f.x||0})),h)),Re(h)?$.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=jne(l,fQe);return $.createElement(sn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},$.createElement(wm,Gd({},_t(m,!0),{points:r,connectNulls:h,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&$.createElement(wm,Gd({},_t(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&$.createElement(wm,Gd({},_t(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=this.state,p=v.prevPoints,y=v.prevBaseLine;return $.createElement(nl,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var x=b.t;if(p){var w=p.length/l.length,C=l.map(function(g,T){var E=Math.floor(T*w);if(p[E]){var A=p[E],I=ui(A.x,g.x),k=ui(A.y,g.y);return Rc(Rc({},g),{},{x:I(x),y:k(x)})}return g}),S;if(Re(c)&&typeof c=="number"){var P=ui(y,c);S=P(x)}else if(Ut(c)||ug(c)){var _=ui(y,0);S=_(x)}else S=c.map(function(g,T){var E=Math.floor(T*w);if(y[E]){var A=y[E],I=ui(A.x,g.x),k=ui(A.y,g.y);return Rc(Rc({},g),{},{x:I(x),y:k(x)})}return g});return a.renderAreaStatically(C,S,r,i)}return $.createElement(sn,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(x))),$.createElement(sn,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!pp(d,o)||!pp(h,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,l,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,h=i.xAxis,f=i.yAxis,m=i.width,v=i.height,p=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,x=l.length===1,w=Bt("recharts-area",c),C=h&&h.allowDataOverflow,S=f&&f.allowDataOverflow,P=C||S,_=Ut(y)?this.id:y,g=(r=_t(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=g.r,E=T===void 0?3:T,A=g.strokeWidth,I=A===void 0?2:A,k=YOe(o)?o:{},L=k.clipDot,B=L===void 0?!0:L,U=E*2+I;return $.createElement(sn,{className:w},C||S?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(_)},$.createElement("rect",{x:C?d:d-m/2,y:S?u:u-v/2,width:C?m:m*2,height:S?v:v*2})),!B&&$.createElement("clipPath",{id:"clipPath-dots-".concat(_)},$.createElement("rect",{x:d-U/2,y:u-U/2,width:m+U,height:v+U}))):null,x?null:this.renderArea(P,_),(o||x)&&this.renderDots(P,B,_),(!p||b)&&Dl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(j.PureComponent);wne=nc;Do(nc,"displayName","Area");Do(nc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Go.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Do(nc,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(Re(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Do(nc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,v=u&&u.length,p=wne.getBaseValue(e,n,r,i),y=m==="horizontal",b=!1,x=h.map(function(C,S){var P;v?P=u[d+S]:(P=Vr(C,c),Array.isArray(P)?b=!0:P=[p,P]);var _=P[1]==null||v&&Vr(C,c)==null;return y?{x:rU({axis:r,ticks:a,bandSize:l,entry:C,index:S}),y:_?null:i.scale(P[1]),value:P,payload:C}:{x:_?null:r.scale(P[1]),y:rU({axis:i,ticks:o,bandSize:l,entry:C,index:S}),value:P,payload:C}}),w;return v||b?w=x.map(function(C){var S=Array.isArray(C.value)?C.value[0]:null;return y?{x:C.x,y:S!=null&&C.y!=null?i.scale(S):null}:{x:S!=null?r.scale(S):null,y:C.y}}):w=y?i.scale(p):r.scale(p),Rc({points:x,baseLine:w,layout:m,isRange:b},f)});Do(nc,"renderDotItem",function(t,e){var n;if($.isValidElement(t))n=$.cloneElement(t,e);else if(Pt(t))n=t(e);else{var r=Bt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=jne(e,mQe);n=$.createElement(n1,Gd({},a,{key:i,className:r}))}return n});function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function _Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ane(r.key),r)}}function SQe(t,e,n){return e&&NQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EQe(t,e,n){return e=K_(e),AQe(t,Sne()?Reflect.construct(e,n||[],K_(t).constructor):e.apply(t,n))}function AQe(t,e){if(e&&(Cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQe(t)}function TQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sne=function(){return!!t})()}function K_(t){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K_(t)}function CQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HI(t,e)}function HI(t,e){return HI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HI(t,e)}function Ene(t,e,n){return e=Ane(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ane(t){var e=PQe(t,"string");return Cp(e)=="symbol"?e:e+""}function PQe(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KI.apply(this,arguments)}function IQe(t){var e=t.xAxisId,n=WD(),r=HD(),i=lne(e);return i==null?null:j.createElement(vg,KI({},i,{className:Bt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Tl(o,!0)}}))}var Pp=function(t){function e(){return _Qe(this,e),EQe(this,e,arguments)}return CQe(e,t),SQe(e,[{key:"render",value:function(){return j.createElement(IQe,this.props)}}])}(j.Component);Ene(Pp,"displayName","XAxis");Ene(Pp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function kQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pne(r.key),r)}}function OQe(t,e,n){return e&&RQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DQe(t,e,n){return e=G_(e),MQe(t,Tne()?Reflect.construct(e,n||[],G_(t).constructor):e.apply(t,n))}function MQe(t,e){if(e&&(Ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LQe(t)}function LQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tne=function(){return!!t})()}function G_(t){return G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G_(t)}function $Qe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GI(t,e)}function Cne(t,e,n){return e=Pne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pne(t){var e=FQe(t,"string");return Ip(e)=="symbol"?e:e+""}function FQe(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}var VQe=function(e){var n=e.yAxisId,r=WD(),i=HD(),a=cne(n);return a==null?null:j.createElement(vg,YI({},a,{className:Bt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Tl(l,!0)}}))},kp=function(t){function e(){return kQe(this,e),DQe(this,e,arguments)}return $Qe(e,t),OQe(e,[{key:"render",value:function(){return j.createElement(VQe,this.props)}}])}(j.Component);Cne(kp,"displayName","YAxis");Cne(kp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function R6(t){return qQe(t)||zQe(t)||UQe(t)||BQe()}function BQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UQe(t,e){if(t){if(typeof t=="string")return QI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QI(t,e)}}function zQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qQe(t){if(Array.isArray(t))return QI(t)}function QI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var XI=function(e,n,r,i,a){var o=ma(e,GD),l=ma(e,d1),c=[].concat(R6(o),R6(l)),u=ma(e,f1),d="".concat(i,"Id"),h=i[0],f=n;if(c.length&&(f=c.reduce(function(p,y){if(y.props[d]===r&&Qo(y.props,"extendDomain")&&Re(y.props[h])){var b=y.props[h];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},f)),u.length){var m="".concat(h,"1"),v="".concat(h,"2");f=u.reduce(function(p,y){if(y.props[d]===r&&Qo(y.props,"extendDomain")&&Re(y.props[m])&&Re(y.props[v])){var b=y.props[m],x=y.props[v];return[Math.min(p[0],b,x),Math.max(p[1],b,x)]}return p},f)}return a&&a.length&&(f=a.reduce(function(p,y){return Re(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},f)),f},Ine={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,h||c,f),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var p=n?n+u:u;if(!this._events[p])return!1;var y=this._events[p],b=arguments.length,x,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,f),!0;case 5:return y.fn.call(y.context,d,h,f,m),!0;case 6:return y.fn.call(y.context,d,h,f,m,v),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];y.fn.apply(y.context,x)}else{var C=y.length,S;for(w=0;w<C;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,h);break;case 4:y[w].fn.call(y[w].context,d,h,f);break;default:if(!x)for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];y[w].fn.apply(y[w].context,x)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var p=0,y=[],b=v.length;p<b;p++)(v[p].fn!==d||f&&!v[p].once||h&&v[p].context!==h)&&y.push(v[p]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Ine);var WQe=Ine.exports;const HQe=xn(WQe);var OA=new HQe,DA="recharts.syncMouseEvents";function Ax(t){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ax(t)}function KQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kne(r.key),r)}}function YQe(t,e,n){return e&&GQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MA(t,e,n){return e=kne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kne(t){var e=QQe(t,"string");return Ax(e)=="symbol"?e:e+""}function QQe(t,e){if(Ax(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var XQe=function(){function t(){KQe(this,t),MA(this,"activeIndex",0),MA(this,"coordinateList",[]),MA(this,"layout","horizontal")}return YQe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function ZQe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Re(r)&&Re(i))return!0}return!1}function JQe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Rne(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=$n(e,n,r,i),l=$n(e,n,r,a);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function eXe(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=$n(l,c,u,h),m=$n(l,c,d,h);r=f.x,i=f.y,a=m.x,o=m.y}else return Rne(e);return[{x:r,y:i},{x:a,y:o}]}function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(t)}function O6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(n),!0).forEach(function(r){tXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tXe(t,e,n){return e=nXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nXe(t){var e=rXe(t,"string");return Tx(e)=="symbol"?e:e+""}function rXe(t,e){if(Tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sXe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var v,p=wm;if(f==="ScatterChart")v=o,p=EHe;else if(f==="BarChart")v=JQe(h,o,c,d),p=BD;else if(h==="radial"){var y=Rne(o),b=y.cx,x=y.cy,w=y.radius,C=y.startAngle,S=y.endAngle;v={cx:b,cy:x,startAngle:C,endAngle:S,innerRadius:w,outerRadius:w},p=Ete}else v={points:eXe(h,o,c)},p=wm;var P=L0(L0(L0(L0({stroke:"#ccc",pointerEvents:"none"},c),v),_t(m,!1)),{},{payload:l,payloadIndex:u,className:Bt("recharts-tooltip-cursor",m.className)});return j.isValidElement(m)?j.cloneElement(m,P):j.createElement(p,P)}var iXe=["item"],aXe=["children","className","width","height","style","compact","title","desc"];function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}function D6(t,e){return cXe(t)||lXe(t,e)||Dne(t,e)||oXe()}function oXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function cXe(t){if(Array.isArray(t))return t}function M6(t,e){if(t==null)return{};var n=uXe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hXe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mne(r.key),r)}}function fXe(t,e,n){return e&&hXe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mXe(t,e,n){return e=Y_(e),pXe(t,One()?Reflect.construct(e,n||[],Y_(t).constructor):e.apply(t,n))}function pXe(t,e){if(e&&(Rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gXe(t)}function gXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function One(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(One=function(){return!!t})()}function Y_(t){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y_(t)}function yXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZI(t,e)}function ZI(t,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZI(t,e)}function Op(t){return bXe(t)||xXe(t)||Dne(t)||vXe()}function vXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dne(t,e){if(t){if(typeof t=="string")return JI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JI(t,e)}}function xXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bXe(t){if(Array.isArray(t))return JI(t)}function JI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(r){At(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function At(t,e,n){return e=Mne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mne(t){var e=wXe(t,"string");return Rp(e)=="symbol"?e:e+""}function wXe(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jXe={xAxis:["bottom","top"],yAxis:["left","right"]},_Xe={width:"100%",height:"100%"},Lne={x:0,y:0};function $0(t){return t}var NXe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},SXe=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=i.radius;return we(we(we({},i),$n(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=i.angle;return we(we(we({},i),$n(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return Lne},m1=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Op(l),Op(u)):l},[]);return o.length>0?o:e&&e.length&&Re(i)&&Re(a)?e.slice(i,a+1):[]};function $ne(t){return t==="number"?[0,"auto"]:void 0}var ek=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,l=m1(n,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=Qj(m,o.dataKey,i)}else f=h&&h[r]||l[r];return f?[].concat(Op(c),[bte(u,f)]):c},[])},$6=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=NXe(a,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=Qqe(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=ek(e,n,d,h),m=SXe(r,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},EXe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=mte(d,a);return r.reduce(function(v,p){var y,b=p.type.defaultProps!==void 0?we(we({},p.type.defaultProps),p.props):p.props,x=b.type,w=b.dataKey,C=b.allowDataOverflow,S=b.allowDuplicatedCategory,P=b.scale,_=b.ticks,g=b.includeHidden,T=b[o];if(v[T])return v;var E=m1(e.data,{graphicalItems:i.filter(function(oe){var Ae,z=o in oe.props?oe.props[o]:(Ae=oe.type.defaultProps)===null||Ae===void 0?void 0:Ae[o];return z===T}),dataStartIndex:c,dataEndIndex:u}),A=E.length,I,k,L;ZQe(b.domain,C,x)&&(I=pI(b.domain,null,C),m&&(x==="number"||P!=="auto")&&(L=Xy(E,w,"category")));var B=$ne(x);if(!I||I.length===0){var U,V=(U=b.domain)!==null&&U!==void 0?U:B;if(w){if(I=Xy(E,w,x),x==="category"&&m){var D=FOe(I);S&&D?(k=I,I=M_(0,A)):S||(I=oU(V,I,p).reduce(function(oe,Ae){return oe.indexOf(Ae)>=0?oe:[].concat(Op(oe),[Ae])},[]))}else if(x==="category")S?I=I.filter(function(oe){return oe!==""&&!Ut(oe)}):I=oU(V,I,p).reduce(function(oe,Ae){return oe.indexOf(Ae)>=0||Ae===""||Ut(Ae)?oe:[].concat(Op(oe),[Ae])},[]);else if(x==="number"){var R=t9e(E,i.filter(function(oe){var Ae,z,ie=o in oe.props?oe.props[o]:(Ae=oe.type.defaultProps)===null||Ae===void 0?void 0:Ae[o],ve="hide"in oe.props?oe.props.hide:(z=oe.type.defaultProps)===null||z===void 0?void 0:z.hide;return ie===T&&(g||!ve)}),w,a,d);R&&(I=R)}m&&(x==="number"||P!=="auto")&&(L=Xy(E,w,"category"))}else m?I=M_(0,A):l&&l[T]&&l[T].hasStack&&x==="number"?I=f==="expand"?[0,1]:xte(l[T].stackGroups,c,u):I=fte(E,i.filter(function(oe){var Ae=o in oe.props?oe.props[o]:oe.type.defaultProps[o],z="hide"in oe.props?oe.props.hide:oe.type.defaultProps.hide;return Ae===T&&(g||!z)}),x,d,!0);if(x==="number")I=XI(h,I,T,a,_),V&&(I=pI(V,I,C));else if(x==="category"&&V){var W=V,J=I.every(function(oe){return W.indexOf(oe)>=0});J&&(I=W)}}return we(we({},v),{},At({},T,we(we({},b),{},{axisType:a,domain:I,categoricalDomain:L,duplicateDomain:k,originalDomain:(y=b.domain)!==null&&y!==void 0?y:B,isCategorical:m,layout:d})))},{})},AXe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=m1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,v=mte(d,a),p=-1;return r.reduce(function(y,b){var x=b.type.defaultProps!==void 0?we(we({},b.type.defaultProps),b.props):b.props,w=x[o],C=$ne("number");if(!y[w]){p++;var S;return v?S=M_(0,m):l&&l[w]&&l[w].hasStack?(S=xte(l[w].stackGroups,c,u),S=XI(h,S,w,a)):(S=pI(C,fte(f,r.filter(function(P){var _,g,T=o in P.props?P.props[o]:(_=P.type.defaultProps)===null||_===void 0?void 0:_[o],E="hide"in P.props?P.props.hide:(g=P.type.defaultProps)===null||g===void 0?void 0:g.hide;return T===w&&!E}),"number",d),i.defaultProps.allowDataOverflow),S=XI(h,S,w,a)),we(we({},y),{},At({},w,we(we({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ui(jXe,"".concat(a,".").concat(p%2),null),domain:S,originalDomain:C,isCategorical:v,layout:d})))}return y},{})},TXe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(i,"Id"),f=ma(d,a),m={};return f&&f.length?m=EXe(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=AXe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},CXe=function(e){var n=Hc(e),r=Tl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:mD(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:N_(n,r)}},F6=function(e){var n=e.children,r=e.defaultShowTooltip,i=Pi(n,jp),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},PXe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Rl(n&&n.type);return r&&r.indexOf("Bar")>=0})},V6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IXe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=Pi(h,jp),v=Pi(h,vm),p=Object.keys(c).reduce(function(S,P){var _=c[P],g=_.orientation;return!_.mirror&&!_.hide?we(we({},S),{},At({},g,S[g]+_.width)):S},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(S,P){var _=o[P],g=_.orientation;return!_.mirror&&!_.hide?we(we({},S),{},At({},g,Ui(S,"".concat(g))+_.height)):S},{top:f.top||0,bottom:f.bottom||0}),b=we(we({},y),p),x=b.bottom;m&&(b.bottom+=m.props.height||jp.defaultProps.height),v&&n&&(b=Jqe(b,i,r,n));var w=u-b.left-b.right,C=d-b.top-b.bottom;return we(we({brushBottom:x},b),{},{width:Math.max(w,0),height:Math.max(C,0)})},kXe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},XD=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(b,x){var w=x.graphicalItems,C=x.stackGroups,S=x.offset,P=x.updateId,_=x.dataStartIndex,g=x.dataEndIndex,T=b.barSize,E=b.layout,A=b.barGap,I=b.barCategoryGap,k=b.maxBarSize,L=V6(E),B=L.numericAxisName,U=L.cateAxisName,V=PXe(w),D=[];return w.forEach(function(R,W){var J=m1(b.data,{graphicalItems:[R],dataStartIndex:_,dataEndIndex:g}),oe=R.type.defaultProps!==void 0?we(we({},R.type.defaultProps),R.props):R.props,Ae=oe.dataKey,z=oe.maxBarSize,ie=oe["".concat(B,"Id")],ve=oe["".concat(U,"Id")],xe={},Be=c.reduce(function(le,be){var Fe=x["".concat(be.axisType,"Map")],Ve=oe["".concat(be.axisType,"Id")];Fe&&Fe[Ve]||be.axisType==="zAxis"||Uh();var ke=Fe[Ve];return we(we({},le),{},At(At({},be.axisType,ke),"".concat(be.axisType,"Ticks"),Tl(ke)))},xe),he=Be[U],fe=Be["".concat(U,"Ticks")],me=C&&C[ie]&&C[ie].hasStack&&u9e(R,C[ie].stackGroups),ce=Rl(R.type).indexOf("Bar")>=0,Ke=N_(he,fe),rt=[],zt=V&&Xqe({barSize:T,stackGroups:C,totalSize:kXe(Be,U)});if(ce){var nn,En,Hr=Ut(z)?k:z,on=(nn=(En=N_(he,fe,!0))!==null&&En!==void 0?En:Hr)!==null&&nn!==void 0?nn:0;rt=Zqe({barGap:A,barCategoryGap:I,bandSize:on!==Ke?on:Ke,sizeList:zt[ve],maxBarSize:Hr}),on!==Ke&&(rt=rt.map(function(le){return we(we({},le),{},{position:we(we({},le.position),{},{offset:le.position.offset-on/2})})}))}var Q=R&&R.type&&R.type.getComposedData;Q&&D.push({props:we(we({},Q(we(we({},Be),{},{displayedData:J,props:b,dataKey:Ae,item:R,bandSize:Ke,barPosition:rt,offset:S,stackedData:me,layout:E,dataStartIndex:_,dataEndIndex:g}))),{},At(At(At({key:R.key||"item-".concat(W)},B,Be[B]),U,Be[U]),"animationId",P)),childIndex:ZOe(R,b.children),item:R})}),D},m=function(b,x){var w=b.props,C=b.dataStartIndex,S=b.dataEndIndex,P=b.updateId;if(!e3({props:w}))return null;var _=w.children,g=w.layout,T=w.stackOffset,E=w.data,A=w.reverseStackOrder,I=V6(g),k=I.numericAxisName,L=I.cateAxisName,B=ma(_,r),U=l9e(E,B,"".concat(k,"Id"),"".concat(L,"Id"),T,A),V=c.reduce(function(oe,Ae){var z="".concat(Ae.axisType,"Map");return we(we({},oe),{},At({},z,TXe(w,we(we({},Ae),{},{graphicalItems:B,stackGroups:Ae.axisType===k&&U,dataStartIndex:C,dataEndIndex:S}))))},{}),D=IXe(we(we({},V),{},{props:w,graphicalItems:B}),x==null?void 0:x.legendBBox);Object.keys(V).forEach(function(oe){V[oe]=d(w,V[oe],D,oe.replace("Map",""),n)});var R=V["".concat(L,"Map")],W=CXe(R),J=f(w,we(we({},V),{},{dataStartIndex:C,dataEndIndex:S,updateId:P,graphicalItems:B,stackGroups:U,offset:D}));return we(we({formattedGraphicalItems:J,graphicalItems:B,offset:D,stackGroups:U},W),V)},v=function(y){function b(x){var w,C,S;return dXe(this,b),S=mXe(this,b,[x]),At(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),At(S,"accessibilityManager",new XQe),At(S,"handleLegendBBoxUpdate",function(P){if(P){var _=S.state,g=_.dataStartIndex,T=_.dataEndIndex,E=_.updateId;S.setState(we({legendBBox:P},m({props:S.props,dataStartIndex:g,dataEndIndex:T,updateId:E},we(we({},S.state),{},{legendBBox:P}))))}}),At(S,"handleReceiveSyncEvent",function(P,_,g){if(S.props.syncId===P){if(g===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(_)}}),At(S,"handleBrushChange",function(P){var _=P.startIndex,g=P.endIndex;if(_!==S.state.dataStartIndex||g!==S.state.dataEndIndex){var T=S.state.updateId;S.setState(function(){return we({dataStartIndex:_,dataEndIndex:g},m({props:S.props,dataStartIndex:_,dataEndIndex:g,updateId:T},S.state))}),S.triggerSyncEvent({dataStartIndex:_,dataEndIndex:g})}}),At(S,"handleMouseEnter",function(P){var _=S.getMouseInfo(P);if(_){var g=we(we({},_),{},{isTooltipActive:!0});S.setState(g),S.triggerSyncEvent(g);var T=S.props.onMouseEnter;Pt(T)&&T(g,P)}}),At(S,"triggeredAfterMouseMove",function(P){var _=S.getMouseInfo(P),g=_?we(we({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(g),S.triggerSyncEvent(g);var T=S.props.onMouseMove;Pt(T)&&T(g,P)}),At(S,"handleItemMouseEnter",function(P){S.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),At(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),At(S,"handleMouseMove",function(P){P.persist(),S.throttleTriggeredAfterMouseMove(P)}),At(S,"handleMouseLeave",function(P){S.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};S.setState(_),S.triggerSyncEvent(_);var g=S.props.onMouseLeave;Pt(g)&&g(_,P)}),At(S,"handleOuterEvent",function(P){var _=XOe(P),g=Ui(S.props,"".concat(_));if(_&&Pt(g)){var T,E;/.*touch.*/i.test(_)?E=S.getMouseInfo(P.changedTouches[0]):E=S.getMouseInfo(P),g((T=E)!==null&&T!==void 0?T:{},P)}}),At(S,"handleClick",function(P){var _=S.getMouseInfo(P);if(_){var g=we(we({},_),{},{isTooltipActive:!0});S.setState(g),S.triggerSyncEvent(g);var T=S.props.onClick;Pt(T)&&T(g,P)}}),At(S,"handleMouseDown",function(P){var _=S.props.onMouseDown;if(Pt(_)){var g=S.getMouseInfo(P);_(g,P)}}),At(S,"handleMouseUp",function(P){var _=S.props.onMouseUp;if(Pt(_)){var g=S.getMouseInfo(P);_(g,P)}}),At(S,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),At(S,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseDown(P.changedTouches[0])}),At(S,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseUp(P.changedTouches[0])}),At(S,"handleDoubleClick",function(P){var _=S.props.onDoubleClick;if(Pt(_)){var g=S.getMouseInfo(P);_(g,P)}}),At(S,"handleContextMenu",function(P){var _=S.props.onContextMenu;if(Pt(_)){var g=S.getMouseInfo(P);_(g,P)}}),At(S,"triggerSyncEvent",function(P){S.props.syncId!==void 0&&OA.emit(DA,S.props.syncId,P,S.eventEmitterSymbol)}),At(S,"applySyncEvent",function(P){var _=S.props,g=_.layout,T=_.syncMethod,E=S.state.updateId,A=P.dataStartIndex,I=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)S.setState(we({dataStartIndex:A,dataEndIndex:I},m({props:S.props,dataStartIndex:A,dataEndIndex:I,updateId:E},S.state)));else if(P.activeTooltipIndex!==void 0){var k=P.chartX,L=P.chartY,B=P.activeTooltipIndex,U=S.state,V=U.offset,D=U.tooltipTicks;if(!V)return;if(typeof T=="function")B=T(D,P);else if(T==="value"){B=-1;for(var R=0;R<D.length;R++)if(D[R].value===P.activeLabel){B=R;break}}var W=we(we({},V),{},{x:V.left,y:V.top}),J=Math.min(k,W.x+W.width),oe=Math.min(L,W.y+W.height),Ae=D[B]&&D[B].value,z=ek(S.state,S.props.data,B),ie=D[B]?{x:g==="horizontal"?D[B].coordinate:J,y:g==="horizontal"?oe:D[B].coordinate}:Lne;S.setState(we(we({},P),{},{activeLabel:Ae,activeCoordinate:ie,activePayload:z,activeTooltipIndex:B}))}else S.setState(P)}),At(S,"renderCursor",function(P){var _,g=S.state,T=g.isTooltipActive,E=g.activeCoordinate,A=g.activePayload,I=g.offset,k=g.activeTooltipIndex,L=g.tooltipAxisBandSize,B=S.getTooltipEventType(),U=(_=P.props.active)!==null&&_!==void 0?_:T,V=S.props.layout,D=P.key||"_recharts-cursor";return $.createElement(sXe,{key:D,activeCoordinate:E,activePayload:A,activeTooltipIndex:k,chartName:n,element:P,isActive:U,layout:V,offset:I,tooltipAxisBandSize:L,tooltipEventType:B})}),At(S,"renderPolarAxis",function(P,_,g){var T=Ui(P,"type.axisType"),E=Ui(S.state,"".concat(T,"Map")),A=P.type.defaultProps,I=A!==void 0?we(we({},A),P.props):P.props,k=E&&E[I["".concat(T,"Id")]];return j.cloneElement(P,we(we({},k),{},{className:Bt(T,k.className),key:P.key||"".concat(_,"-").concat(g),ticks:Tl(k,!0)}))}),At(S,"renderPolarGrid",function(P){var _=P.props,g=_.radialLines,T=_.polarAngles,E=_.polarRadius,A=S.state,I=A.radiusAxisMap,k=A.angleAxisMap,L=Hc(I),B=Hc(k),U=B.cx,V=B.cy,D=B.innerRadius,R=B.outerRadius;return j.cloneElement(P,{polarAngles:Array.isArray(T)?T:Tl(B,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(E)?E:Tl(L,!0).map(function(W){return W.coordinate}),cx:U,cy:V,innerRadius:D,outerRadius:R,key:P.key||"polar-grid",radialLines:g})}),At(S,"renderLegend",function(){var P=S.state.formattedGraphicalItems,_=S.props,g=_.children,T=_.width,E=_.height,A=S.props.margin||{},I=T-(A.left||0)-(A.right||0),k=dte({children:g,formattedGraphicalItems:P,legendWidth:I,legendContent:u});if(!k)return null;var L=k.item,B=M6(k,iXe);return j.cloneElement(L,we(we({},B),{},{chartWidth:T,chartHeight:E,margin:A,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),At(S,"renderTooltip",function(){var P,_=S.props,g=_.children,T=_.accessibilityLayer,E=Pi(g,Va);if(!E)return null;var A=S.state,I=A.isTooltipActive,k=A.activeCoordinate,L=A.activePayload,B=A.activeLabel,U=A.offset,V=(P=E.props.active)!==null&&P!==void 0?P:I;return j.cloneElement(E,{viewBox:we(we({},U),{},{x:U.left,y:U.top}),active:V,label:B,payload:V?L:[],coordinate:k,accessibilityLayer:T})}),At(S,"renderBrush",function(P){var _=S.props,g=_.margin,T=_.data,E=S.state,A=E.offset,I=E.dataStartIndex,k=E.dataEndIndex,L=E.updateId;return j.cloneElement(P,{key:P.key||"_recharts-brush",onChange:R0(S.handleBrushChange,P.props.onChange),data:T,x:Re(P.props.x)?P.props.x:A.left,y:Re(P.props.y)?P.props.y:A.top+A.height+A.brushBottom-(g.bottom||0),width:Re(P.props.width)?P.props.width:A.width,startIndex:I,endIndex:k,updateId:"brush-".concat(L)})}),At(S,"renderReferenceElement",function(P,_,g){if(!P)return null;var T=S,E=T.clipPathId,A=S.state,I=A.xAxisMap,k=A.yAxisMap,L=A.offset,B=P.type.defaultProps||{},U=P.props,V=U.xAxisId,D=V===void 0?B.xAxisId:V,R=U.yAxisId,W=R===void 0?B.yAxisId:R;return j.cloneElement(P,{key:P.key||"".concat(_,"-").concat(g),xAxis:I[D],yAxis:k[W],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:E})}),At(S,"renderActivePoints",function(P){var _=P.item,g=P.activePoint,T=P.basePoint,E=P.childIndex,A=P.isRange,I=[],k=_.props.key,L=_.item.type.defaultProps!==void 0?we(we({},_.item.type.defaultProps),_.item.props):_.item.props,B=L.activeDot,U=L.dataKey,V=we(we({index:E,dataKey:U,cx:g.x,cy:g.y,r:4,fill:VD(_.item),strokeWidth:2,stroke:"#fff",payload:g.payload,value:g.value},_t(B,!1)),Xj(B));return I.push(b.renderActiveDot(B,V,"".concat(k,"-activePoint-").concat(E))),T?I.push(b.renderActiveDot(B,we(we({},V),{},{cx:T.x,cy:T.y}),"".concat(k,"-basePoint-").concat(E))):A&&I.push(null),I}),At(S,"renderGraphicChild",function(P,_,g){var T=S.filterFormatItem(P,_,g);if(!T)return null;var E=S.getTooltipEventType(),A=S.state,I=A.isTooltipActive,k=A.tooltipAxis,L=A.activeTooltipIndex,B=A.activeLabel,U=S.props.children,V=Pi(U,Va),D=T.props,R=D.points,W=D.isRange,J=D.baseLine,oe=T.item.type.defaultProps!==void 0?we(we({},T.item.type.defaultProps),T.item.props):T.item.props,Ae=oe.activeDot,z=oe.hide,ie=oe.activeBar,ve=oe.activeShape,xe=!!(!z&&I&&V&&(Ae||ie||ve)),Be={};E!=="axis"&&V&&V.props.trigger==="click"?Be={onClick:R0(S.handleItemMouseEnter,P.props.onClick)}:E!=="axis"&&(Be={onMouseLeave:R0(S.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:R0(S.handleItemMouseEnter,P.props.onMouseEnter)});var he=j.cloneElement(P,we(we({},T.props),Be));function fe(be){return typeof k.dataKey=="function"?k.dataKey(be.payload):null}if(xe)if(L>=0){var me,ce;if(k.dataKey&&!k.allowDuplicatedCategory){var Ke=typeof k.dataKey=="function"?fe:"payload.".concat(k.dataKey.toString());me=Qj(R,Ke,B),ce=W&&J&&Qj(J,Ke,B)}else me=R==null?void 0:R[L],ce=W&&J&&J[L];if(ve||ie){var rt=P.props.activeIndex!==void 0?P.props.activeIndex:L;return[j.cloneElement(P,we(we(we({},T.props),Be),{},{activeIndex:rt})),null,null]}if(!Ut(me))return[he].concat(Op(S.renderActivePoints({item:T,activePoint:me,basePoint:ce,childIndex:L,isRange:W})))}else{var zt,nn=(zt=S.getItemByXY(S.state.activeCoordinate))!==null&&zt!==void 0?zt:{graphicalItem:he},En=nn.graphicalItem,Hr=En.item,on=Hr===void 0?P:Hr,Q=En.childIndex,le=we(we(we({},T.props),Be),{},{activeIndex:Q});return[j.cloneElement(on,le),null,null]}return W?[he,null,null]:[he,null]}),At(S,"renderCustomized",function(P,_,g){return j.cloneElement(P,we(we({key:"recharts-customized-".concat(g)},S.props),S.state))}),At(S,"renderMap",{CartesianGrid:{handler:$0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:$0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:$0},YAxis:{handler:$0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=x.id)!==null&&w!==void 0?w:dg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=uee(S.triggeredAfterMouseMove,(C=x.throttleDelay)!==null&&C!==void 0?C:1e3/60),S.state={},S}return yXe(b,y),fXe(b,[{key:"componentDidMount",value:function(){var w,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,C=w.children,S=w.data,P=w.height,_=w.layout,g=Pi(C,Va);if(g){var T=g.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,A=ek(this.state,S,T,E),I=this.state.tooltipTicks[T].coordinate,k=(this.state.offset.top+P)/2,L=_==="horizontal",B=L?{x:I,y:k}:{y:I,x:k},U=this.state.formattedGraphicalItems.find(function(D){var R=D.item;return R.type.name==="Scatter"});U&&(B=we(we({},B),U.props.points[T].tooltipPosition),A=U.props.points[T].tooltipPayload);var V={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:E,activePayload:A,activeCoordinate:B};this.setState(V),this.renderCursor(g),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,P;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){PP([Pi(w.children,Va)],[Pi(this.props.children,Va)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Pi(this.props.children,Va);if(w&&typeof w.props.shared=="boolean"){var C=w.props.shared?"axis":"item";return l.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var C=this.container,S=C.getBoundingClientRect(),P=N5e(S),_={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},g=S.width/C.offsetWidth||1,T=this.inRange(_.chartX,_.chartY,g);if(!T)return null;var E=this.state,A=E.xAxisMap,I=E.yAxisMap,k=this.getTooltipEventType(),L=$6(this.state,this.props.data,this.props.layout,T);if(k!=="axis"&&A&&I){var B=Hc(A).scale,U=Hc(I).scale,V=B&&B.invert?B.invert(_.chartX):null,D=U&&U.invert?U.invert(_.chartY):null;return we(we({},_),{},{xValue:V,yValue:D},L)}return L?we(we({},_),L):null}},{key:"inRange",value:function(w,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,_=w/S,g=C/S;if(P==="horizontal"||P==="vertical"){var T=this.state.offset,E=_>=T.left&&_<=T.left+T.width&&g>=T.top&&g<=T.top+T.height;return E?{x:_,y:g}:null}var A=this.state,I=A.angleAxisMap,k=A.radiusAxisMap;if(I&&k){var L=Hc(I);return uU({x:_,y:g},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,C=this.getTooltipEventType(),S=Pi(w,Va),P={};S&&C==="axis"&&(S.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Xj(this.props,this.handleOuterEvent);return we(we({},_),P)}},{key:"addListener",value:function(){OA.on(DA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){OA.removeListener(DA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,C,S){for(var P=this.state.formattedGraphicalItems,_=0,g=P.length;_<g;_++){var T=P[_];if(T.item===w||T.props.key===w.key||C===Rl(T.item.type)&&S===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,C=this.state.offset,S=C.left,P=C.top,_=C.height,g=C.width;return $.createElement("defs",null,$.createElement("clipPath",{id:w},$.createElement("rect",{x:S,y:P,height:_,width:g})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(C,S){var P=D6(S,2),_=P[0],g=P[1];return we(we({},C),{},At({},_,g.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(C,S){var P=D6(S,2),_=P[0],g=P[1];return we(we({},C),{},At({},_,g.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(w){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(w){var C=this.state,S=C.formattedGraphicalItems,P=C.activeItem;if(S&&S.length)for(var _=0,g=S.length;_<g;_++){var T=S[_],E=T.props,A=T.item,I=A.type.defaultProps!==void 0?we(we({},A.type.defaultProps),A.props):A.props,k=Rl(A.type);if(k==="Bar"){var L=(E.data||[]).find(function(D){return aHe(w,D)});if(L)return{graphicalItem:T,payload:L}}else if(k==="RadialBar"){var B=(E.data||[]).find(function(D){return uU(w,D)});if(B)return{graphicalItem:T,payload:B}}else if(o1(T,P)||l1(T,P)||jx(T,P)){var U=GKe({graphicalItem:T,activeTooltipItem:P,itemData:I.data}),V=I.activeIndex===void 0?U:I.activeIndex;return{graphicalItem:we(we({},T),{},{childIndex:V}),payload:jx(T,P)?I.data[U]:T.props.data[U]}}}return null}},{key:"render",value:function(){var w=this;if(!e3(this))return null;var C=this.props,S=C.children,P=C.className,_=C.width,g=C.height,T=C.style,E=C.compact,A=C.title,I=C.desc,k=M6(C,aXe),L=_t(k,!1);if(E)return $.createElement(v6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(kP,Jf({},L,{width:_,height:g,title:A,desc:I}),this.renderClipPath(),n3(S,this.renderMap)));if(this.props.accessibilityLayer){var B,U;L.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,L.role=(U=this.props.role)!==null&&U!==void 0?U:"application",L.onKeyDown=function(D){w.accessibilityManager.keyboardEvent(D)},L.onFocus=function(){w.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return $.createElement(v6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",Jf({className:Bt("recharts-wrapper",P),style:we({position:"relative",cursor:"default",width:_,height:g},T)},V,{ref:function(R){w.container=R}}),$.createElement(kP,Jf({},L,{width:_,height:g,title:A,desc:I,style:_Xe}),this.renderClipPath(),n3(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);At(v,"displayName",n),At(v,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),At(v,"getDerivedStateFromProps",function(y,b){var x=y.dataKey,w=y.data,C=y.children,S=y.width,P=y.height,_=y.layout,g=y.stackOffset,T=y.margin,E=b.dataStartIndex,A=b.dataEndIndex;if(b.updateId===void 0){var I=F6(y);return we(we(we({},I),{},{updateId:0},m(we(we({props:y},I),{},{updateId:0}),b)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:P,prevLayout:_,prevStackOffset:g,prevMargin:T,prevChildren:C})}if(x!==b.prevDataKey||w!==b.prevData||S!==b.prevWidth||P!==b.prevHeight||_!==b.prevLayout||g!==b.prevStackOffset||!ym(T,b.prevMargin)){var k=F6(y),L={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},B=we(we({},$6(b,w,_)),{},{updateId:b.updateId+1}),U=we(we(we({},k),L),B);return we(we(we({},U),m(we({props:y},U),b)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:P,prevLayout:_,prevStackOffset:g,prevMargin:T,prevChildren:C})}if(!PP(C,b.prevChildren)){var V,D,R,W,J=Pi(C,jp),oe=J&&(V=(D=J.props)===null||D===void 0?void 0:D.startIndex)!==null&&V!==void 0?V:E,Ae=J&&(R=(W=J.props)===null||W===void 0?void 0:W.endIndex)!==null&&R!==void 0?R:A,z=oe!==E||Ae!==A,ie=!Ut(w),ve=ie&&!z?b.updateId:b.updateId+1;return we(we({updateId:ve},m(we(we({props:y},b),{},{updateId:ve,dataStartIndex:oe,dataEndIndex:Ae}),b)),{},{prevChildren:C,dataStartIndex:oe,dataEndIndex:Ae})}return null}),At(v,"renderActiveDot",function(y,b,x){var w;return j.isValidElement(y)?w=j.cloneElement(y,b):Pt(y)?w=y(b):w=$.createElement(n1,b),$.createElement(sn,{className:"recharts-active-dot",key:x},w)});var p=j.forwardRef(function(b,x){return $.createElement(v,Jf({},b,{ref:x}))});return p.displayName=v.displayName,p},RXe=XD({chartName:"BarChart",GraphicalChild:af,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Pp},{axisType:"yAxis",AxisComp:kp}],formatAxisMap:ene}),OXe=XD({chartName:"PieChart",GraphicalChild:uc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:a1},{axisType:"radiusAxis",AxisComp:s1}],formatAxisMap:b9e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),DXe=XD({chartName:"AreaChart",GraphicalChild:nc,axisComponents:[{axisType:"xAxis",AxisComp:Pp},{axisType:"yAxis",AxisComp:kp}],formatAxisMap:ene});function MXe(){return s.jsxs("div",{className:"space-y-6 p-4 md:p-8 pt-6",children:[s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx(Mc,{className:"h-8 w-[250px]"}),s.jsx(Mc,{className:"h-4 w-[350px]"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((t,e)=>s.jsx(Mc,{className:"h-[120px] rounded-xl"},e))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsx(Mc,{className:"col-span-4 h-[400px] rounded-xl"}),s.jsx(Mc,{className:"col-span-3 h-[400px] rounded-xl"})]}),s.jsx(Mc,{className:"h-[300px] w-full rounded-xl"})]})}const F0=["#0f172a","#334155","#475569","#64748b","#94a3b8"];function LXe(){var l,c,u,d;const{user:t}=dt(),{data:e,isLoading:n}=Ee({queryKey:["admin-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]};const h=await _r.getCompanyIdForUser(t.id),[f,{invoices:m,employees:v,payrollRuns:p,projects:y,customers:b}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:h}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},employees:{collectionName:ee.EMPLOYEES},payrollRuns:{collectionName:ee.PAYROLL_RUNS},projects:{collectionName:ee.PROJECTS},customers:{collectionName:ee.CUSTOMERS}})]),x=v.reduce((P,_)=>{const g=Ze(_,["department"],"Other");return P[g]||(P[g]=0),P[g]++,P},{}),w=Array.from({length:6}).map((P,_)=>{const g=new Date;g.setDate(1),g.setMonth(g.getMonth()-(5-_));const T=new Date(g.getFullYear(),g.getMonth(),1),E=new Date(g.getFullYear(),g.getMonth()+1,0);return{label:T.toLocaleString("en-US",{month:"short"}),startDate:T.toISOString().slice(0,10),endDate:E.toISOString().slice(0,10)}}),C=await Promise.all(w.map(P=>jn.getProfitLossReport({companyId:h,startDate:P.startDate,endDate:P.endDate}))),S=w.map((P,_)=>{var g,T;return{name:P.label,revenue:((g=C[_])==null?void 0:g.totalIncome)||0,expenses:((T=C[_])==null?void 0:T.totalExpenses)||0}});return{totalRevenue:f.monthlyIncome,pendingInvoices:m.filter(P=>{const _=Ze(P,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(_)}).length,activeEmployees:v.filter(P=>Ze(P,["employmentStatus","employment_status"])==="active").length,totalEmployees:v.length,totalPayroll:p.filter(P=>{const _=Ze(P,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","payment_reversed","approved","final"].includes(_)}).reduce((P,_)=>P+tn(_,["totalNet","total_net"]),0),totalExpenses:f.monthlyExpenses,activeProjects:y.filter(P=>Ze(P,["status"])==="active").length,totalCustomers:b.length,departmentData:Object.entries(x).map(([P,_])=>({name:P,value:_})),monthlyRevenue:S,projects:y.slice(0,5)}}}),r=(t==null?void 0:t.displayName)||((l=t==null?void 0:t.email)==null?void 0:l.split("@")[0])||"Admin";if(n)return s.jsx(MXe,{});const a=[{title:"Total Revenue",value:`ZMW ${(e||{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]}).totalRevenue.toLocaleString()}`,icon:Zn,trend:"Current month (GL)",color:"text-green-600",bgColor:"bg-green-100",iconColor:"text-green-600"},{title:"Employees",value:((c=e==null?void 0:e.totalEmployees)==null?void 0:c.toLocaleString())||"0",subtitle:`${(e==null?void 0:e.activeEmployees)||0} active`,icon:di,color:"bg-blue-500",bgColor:"bg-blue-50",iconColor:"text-blue-500"},{title:"Health Index",value:"75%",icon:tR,color:"bg-green-500",bgColor:"bg-green-50",iconColor:"text-green-500",trend:"+2%"},{title:"Customers",value:((u=e==null?void 0:e.totalCustomers)==null?void 0:u.toLocaleString())||"0",icon:ule,color:"bg-purple-500",bgColor:"bg-purple-50",iconColor:"text-purple-500"}],o=[{name:"Invoice #1234",type:"Payment Due",date:"Today",status:"urgent"},{name:"Payroll Run",type:"Monthly",date:"Friday",status:"scheduled"},{name:"Tax Filing",type:"ZRA Compliance",date:"Next Week",status:"pending"},{name:"Budget Review",type:"Finance",date:"Monday",status:"scheduled"}];return s.jsxs("div",{className:"space-y-6 min-h-screen pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 md:gap-4 w-full md:w-auto justify-between md:justify-start",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-foreground",children:["Welcome ",r,","]}),s.jsx("p",{className:"text-xs md:text-base text-muted-foreground",children:"Here's your organization's financial overview."})]}),s.jsx("div",{className:"md:hidden",children:s.jsx(EP,{className:"h-8 w-8 border border-border",children:s.jsx(AP,{className:"bg-primary/10 text-primary font-medium text-xs",children:r.charAt(0).toUpperCase()})})})]}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto justify-end",children:[s.jsxs("div",{className:"relative hidden md:block",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search...",className:"pl-10 w-64 rounded-full bg-muted/50 focus:bg-background transition-colors"})]}),s.jsxs(K,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",children:[s.jsx(Uoe,{className:"h-5 w-5"}),s.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ile,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(us,{}),s.jsx("span",{className:"hidden md:inline text-sm text-muted-foreground",children:"Dark Mode"})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-3 pl-4 border-l",children:[s.jsx(EP,{className:"h-9 w-9 border border-border",children:s.jsx(AP,{className:"bg-primary/10 text-primary font-medium",children:r.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:r}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:a.map((h,f)=>s.jsx(Z,{className:"border border-border/50 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs(se,{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:`p-2 md:p-3 rounded-xl ${h.bgColor}`,children:s.jsx(h.icon,{className:`h-4 w-4 md:h-5 md:w-5 ${h.iconColor}`})}),h.trend&&s.jsxs(De,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-green-200 gap-1 text-xs px-1.5 py-0.5",children:[s.jsx(va,{className:"h-3 w-3"}),h.trend]})]}),s.jsxs("div",{className:"mt-3 md:mt-4",children:[s.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground",children:h.title}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold mt-1 tracking-tight text-foreground",children:h.value}),h.subtitle&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.subtitle})]})]})},f))}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs(Z,{className:"border border-border/50 shadow-sm",children:[s.jsx(ne,{children:s.jsx(re,{className:"text-lg",children:"Department Distribution"})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative w-40 h-40",children:[s.jsx(xA,{width:"100%",height:"100%",children:s.jsx(OXe,{children:s.jsx(uc,{data:(d=e==null?void 0:e.departmentData)!=null&&d.length?e.departmentData:[{name:"No Data",value:1}],innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:((e==null?void 0:e.departmentData)||[{name:"No Data",value:1}]).map((h,f)=>s.jsx(qS,{fill:F0[f%F0.length]},`cell-${f}`))})})}),s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:(e==null?void 0:e.totalEmployees)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[((e==null?void 0:e.departmentData)||[]).slice(0,5).map((h,f)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:F0[f%F0.length]}}),s.jsx("span",{className:"truncate max-w-[100px] text-muted-foreground",children:h.name})]}),s.jsx("span",{className:"font-medium",children:h.value})]},h.name)),(!(e!=null&&e.departmentData)||e.departmentData.length===0)&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No employee data"})]})]})})]}),s.jsxs(Z,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[s.jsx(re,{className:"text-lg",children:"Revenue Overview"}),s.jsxs("div",{className:"flex gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),s.jsx("span",{className:"text-muted-foreground",children:"Revenue"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]}),s.jsx(se,{children:s.jsx(xA,{width:"100%",height:250,children:s.jsxs(DXe,{data:(e==null?void 0:e.monthlyRevenue)||[],children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#0f172a",stopOpacity:.1}),s.jsx("stop",{offset:"95%",stopColor:"#0f172a",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),s.jsx(bne,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),s.jsx(Pp,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),s.jsx(kp,{axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"},tickFormatter:h=>`K${h/1e3}k`}),s.jsx(Va,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),s.jsx(nc,{type:"monotone",dataKey:"revenue",stroke:"#0f172a",fill:"url(#colorRevenue)",strokeWidth:2}),s.jsx(nc,{type:"monotone",dataKey:"expenses",stroke:"#3b82f6",fill:"url(#colorExpenses)",strokeWidth:2})]})})})]})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs(Z,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[s.jsx(ne,{children:s.jsxs(re,{className:"text-lg flex items-center gap-2",children:[s.jsx(rle,{className:"h-5 w-5 text-primary"}),"Regional Performance"]})}),s.jsx(se,{children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:[{region:"Lusaka",value:42e3,color:"bg-primary"},{region:"Copperbelt",value:28e3,color:"bg-blue-500"},{region:"Southern",value:18e3,color:"bg-indigo-500"},{region:"Eastern",value:12e3,color:"bg-violet-500"}].map(h=>s.jsxs("div",{className:"flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${h.color}`}),s.jsx("span",{className:"font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:h.region})]}),s.jsx("span",{className:"font-bold tabular-nums",children:de(h.value)})]},h.region))}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(xA,{width:"100%",height:200,children:s.jsxs(RXe,{data:[{name:"Lusaka",value:42},{name:"Copperbelt",value:28},{name:"Southern",value:18},{name:"Eastern",value:12}],children:[s.jsx(Pp,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),s.jsx(kp,{hide:!0}),s.jsx(Va,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),s.jsx(af,{dataKey:"value",fill:"#0f172a",radius:[4,4,0,0],barSize:40})]})})})]})})]}),s.jsxs(Z,{className:"border border-border/50 shadow-sm",children:[s.jsx(ne,{children:s.jsxs(re,{className:"text-lg flex items-center gap-2",children:[s.jsx(Um,{className:"h-5 w-5 text-primary"}),"Upcoming Tasks"]})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-4",children:o.map((h,f)=>s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[s.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${h.status==="urgent"?"bg-red-50 text-red-600":h.status==="scheduled"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-600"}`,children:s.jsx($oe,{className:"h-4.5 w-4.5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-foreground",children:h.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:h.type})]}),s.jsx(De,{variant:h.status==="urgent"?"destructive":"secondary",className:"text-xs font-normal",children:h.date})]},f))})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Projects"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.activeProjects)||0})]}),s.jsx("div",{className:"h-10 w-10 rounded-xl bg-green-50 flex items-center justify-center",children:s.jsx(dr,{className:"h-5 w-5 text-green-600"})})]})})}),s.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Pending Invoices"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.pendingInvoices)||0})]}),s.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center",children:s.jsx(Zn,{className:"h-5 w-5 text-amber-600"})})]})})}),s.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Payroll"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:de((e==null?void 0:e.totalPayroll)||0)})]}),s.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:s.jsx(di,{className:"h-5 w-5 text-blue-600"})})]})})}),s.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Expenses"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:de((e==null?void 0:e.totalExpenses)||0)})]}),s.jsx("div",{className:"h-10 w-10 rounded-xl bg-red-50 flex items-center justify-center",children:s.jsx(va,{className:"h-5 w-5 text-red-600"})})]})})})]})]})}function $Xe(){var i;const{user:t}=dt(),{data:e}=Ee({queryKey:["accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,outstandingReceivables:0,totalExpenses:0,outstandingPayables:0,cashBalance:0,pendingInvoices:0,bankAccounts:[]};const a=await _r.getCompanyIdForUser(t.id),[o,{invoices:l,bankAccounts:c}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:a}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},bankAccounts:{collectionName:ee.BANK_ACCOUNTS}})]);return{totalRevenue:o.monthlyIncome,outstandingReceivables:o.outstandingAccountsReceivable,totalExpenses:o.monthlyExpenses,outstandingPayables:o.outstandingAccountsPayable,cashBalance:o.bankDefaultBalance,pendingInvoices:l.filter(u=>{const d=Ze(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,bankAccounts:c}}}),n=[{title:"Total Revenue",value:de((e==null?void 0:e.totalRevenue)||0),icon:Zn,trend:"up"},{title:"Outstanding Receivables",value:de((e==null?void 0:e.outstandingReceivables)||0),icon:dr,trend:"neutral"},{title:"Total Expenses",value:de((e==null?void 0:e.totalExpenses)||0),icon:co,trend:"down"},{title:"Cash Balance",value:de((e==null?void 0:e.cashBalance)||0),icon:xh,trend:"up"}],r=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Accountant Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Financial overview and key metrics"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:a.title}),s.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:a.value}),a.trend==="up"&&s.jsx(va,{className:"h-3 w-3 text-green-500 inline ml-1"}),a.trend==="down"&&s.jsx(co,{className:"h-3 w-3 text-red-500 inline ml-1"})]})]},a.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Profit & Loss Summary"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),s.jsx("span",{className:"font-medium text-green-600",children:de((e==null?void 0:e.totalRevenue)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Expenses"}),s.jsxs("span",{className:"font-medium text-red-600",children:["(",de((e==null?void 0:e.totalExpenses)||0),")"]})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Income"}),s.jsx("span",{className:`font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:de(r)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Outstanding Payables"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.outstandingPayables)||0)})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(qoe,{className:"h-5 w-5"}),"Bank Accounts"]})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-3",children:[(i=e==null?void 0:e.bankAccounts)==null?void 0:i.map(a=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:Ze(a,["accountName","account_name"],"Bank Account")}),s.jsx("span",{className:"font-medium",children:de(tn(a,["currentBalance","current_balance"]))})]},Ze(a,["accountName","account_name","id"],"bank-account"))),(!(e!=null&&e.bankAccounts)||e.bankAccounts.length===0)&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"No bank accounts configured"})]})})]})]})]})}function FXe(){const{user:t}=dt(),{data:e}=Ee({queryKey:["bookkeeper-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalInvoices:0,paidInvoices:0,unpaidInvoicesAmount:0,totalExpenses:0,unpaidBillsAmount:0,overdueBillsCount:0,overdueBillsAmount:0,vendorCount:0,customerCount:0,recentExpenses:[]};const r=await _r.getCompanyIdForUser(t.id),[i,{invoices:a,expenses:o,bills:l,vendors:c,customers:u}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:r}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},expenses:{collectionName:ee.EXPENSES},bills:{collectionName:ee.BILLS},vendors:{collectionName:ee.VENDORS},customers:{collectionName:ee.CUSTOMERS}})]),d=new Date().toISOString().split("T")[0],h=l.filter(f=>{const m=Ze(f,["dueDate","due_date"]);return Ze(f,["status"]).toLowerCase()!=="paid"&&!!m&&m<d});return{totalInvoices:a.length,paidInvoices:a.filter(f=>Ze(f,["status"]).toLowerCase()==="paid").length,unpaidInvoicesAmount:i.outstandingAccountsReceivable,totalExpenses:i.monthlyExpenses,unpaidBillsAmount:i.outstandingAccountsPayable,overdueBillsCount:h.length,overdueBillsAmount:h.reduce((f,m)=>f+tn(m,["total","amount"]),0),vendorCount:c.length,customerCount:u.length,recentExpenses:o.slice(0,5)}}}),n=[{title:"Invoices Created",value:(e==null?void 0:e.totalInvoices)||0,subtitle:`${(e==null?void 0:e.paidInvoices)||0} paid`,icon:dr,color:"text-primary"},{title:"Unpaid Invoices",value:de((e==null?void 0:e.unpaidInvoicesAmount)||0),icon:zx,color:"text-warning"},{title:"Total Expenses",value:de((e==null?void 0:e.totalExpenses)||0),icon:co,color:"text-destructive"},{title:"Unpaid Bills",value:de((e==null?void 0:e.unpaidBillsAmount)||0),icon:xh,color:"text-amber-600"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bookkeeper Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Daily transaction overview and data entry tasks"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:r.title}),s.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.value}),"subtitle"in r&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-5 w-5 text-primary"}),"Quick Stats"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Customers"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.customerCount)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Vendors"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.vendorCount)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Overdue Bills"}),s.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueBillsCount)||0})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2 text-destructive",children:[s.jsx(Zn,{className:"h-5 w-5"}),"Overdue Payments"]})}),s.jsx(se,{children:(e==null?void 0:e.overdueBillsCount)>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Bills Overdue"}),s.jsx("span",{className:"font-bold text-destructive",children:e.overdueBillsCount})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),s.jsx("span",{className:"font-bold text-destructive",children:de(e.overdueBillsAmount||0)})]})]}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No overdue payments"})})]})]})]})}function ts(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function rc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Fne(t,e){const n=ts(t);if(isNaN(e))return rc(t,NaN);if(!e)return n;const r=n.getDate(),i=rc(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const Vne=6048e5,VXe=864e5;let BXe={};function p1(){return BXe}function Cx(t,e){var l,c,u,d;const n=p1(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ts(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Q_(t){return Cx(t,{weekStartsOn:1})}function Bne(t){const e=ts(t),n=e.getFullYear(),r=rc(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Q_(r),a=rc(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Q_(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function B6(t){const e=ts(t);return e.setHours(0,0,0,0),e}function U6(t){const e=ts(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Une(t,e){const n=B6(t),r=B6(e),i=+n-U6(n),a=+r-U6(r);return Math.round((i-a)/VXe)}function UXe(t){const e=Bne(t),n=rc(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Q_(n)}function zXe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qXe(t){if(!zXe(t)&&typeof t!="number")return!1;const e=ts(t);return!isNaN(Number(e))}function Ns(t,e){const n=ts(t),r=ts(e),i=z6(n,r),a=Math.abs(Une(n,r));n.setDate(n.getDate()-i*a);const o=+(z6(n,r)===-i),l=i*(a-o);return l===0?0:l}function z6(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function zne(t){const e=ts(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function qne(t){const e=ts(t);return e.setDate(1),e.setHours(0,0,0,0),e}function WXe(t){const e=ts(t),n=rc(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const HXe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KXe=(t,e,n)=>{let r;const i=HXe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function LA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const GXe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YXe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},QXe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XXe={date:LA({formats:GXe,defaultWidth:"full"}),time:LA({formats:YXe,defaultWidth:"full"}),dateTime:LA({formats:QXe,defaultWidth:"full"})},ZXe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JXe=(t,e,n,r)=>ZXe[t];function sy(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const eZe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tZe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nZe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rZe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aZe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oZe={ordinalNumber:aZe,era:sy({values:eZe,defaultWidth:"wide"}),quarter:sy({values:tZe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sy({values:nZe,defaultWidth:"wide"}),day:sy({values:rZe,defaultWidth:"wide"}),dayPeriod:sy({values:sZe,defaultWidth:"wide",formattingValues:iZe,defaultFormattingWidth:"wide"})};function iy(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?cZe(l,h=>h.test(o)):lZe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function lZe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function cZe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function uZe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const dZe=/^(\d+)(th|st|nd|rd)?/i,hZe=/\d+/i,fZe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mZe={any:[/^b/i,/^(a|c)/i]},pZe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gZe={any:[/1/i,/2/i,/3/i,/4/i]},yZe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vZe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xZe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bZe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wZe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jZe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_Ze={ordinalNumber:uZe({matchPattern:dZe,parsePattern:hZe,valueCallback:t=>parseInt(t,10)}),era:iy({matchPatterns:fZe,defaultMatchWidth:"wide",parsePatterns:mZe,defaultParseWidth:"any"}),quarter:iy({matchPatterns:pZe,defaultMatchWidth:"wide",parsePatterns:gZe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:iy({matchPatterns:yZe,defaultMatchWidth:"wide",parsePatterns:vZe,defaultParseWidth:"any"}),day:iy({matchPatterns:xZe,defaultMatchWidth:"wide",parsePatterns:bZe,defaultParseWidth:"any"}),dayPeriod:iy({matchPatterns:wZe,defaultMatchWidth:"any",parsePatterns:jZe,defaultParseWidth:"any"})},NZe={code:"en-US",formatDistance:KXe,formatLong:XXe,formatRelative:JXe,localize:oZe,match:_Ze,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SZe(t){const e=ts(t);return Une(e,WXe(e))+1}function EZe(t){const e=ts(t),n=+Q_(e)-+UXe(e);return Math.round(n/Vne)+1}function Wne(t,e){var d,h,f,m;const n=ts(t),r=n.getFullYear(),i=p1(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=rc(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Cx(o,e),c=rc(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=Cx(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function AZe(t,e){var l,c,u,d;const n=p1(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Wne(t,e),a=rc(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Cx(a,e)}function TZe(t,e){const n=ts(t),r=+Cx(n,e)-+AZe(n,e);return Math.round(r/Vne)+1}function wn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Sc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return wn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):wn(n+1,2)},d(t,e){return wn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return wn(t.getHours()%12||12,e.length)},H(t,e){return wn(t.getHours(),e.length)},m(t,e){return wn(t.getMinutes(),e.length)},s(t,e){return wn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return wn(i,e.length)}},wf={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},q6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Sc.y(t,e)},Y:function(t,e,n,r){const i=Wne(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return wn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):wn(a,e.length)},R:function(t,e){const n=Bne(t);return wn(n,e.length)},u:function(t,e){const n=t.getFullYear();return wn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Sc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=TZe(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(t,e,n){const r=EZe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Sc.d(t,e)},D:function(t,e,n){const r=SZe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return wn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return wn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=wf.noon:r===0?i=wf.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=wf.evening:r>=12?i=wf.afternoon:r>=4?i=wf.morning:i=wf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Sc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Sc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Sc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Sc.s(t,e)},S:function(t,e){return Sc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return H6(r);case"XXXX":case"XX":return Od(r);case"XXXXX":case"XXX":default:return Od(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return H6(r);case"xxxx":case"xx":return Od(r);case"xxxxx":case"xxx":default:return Od(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+W6(r,":");case"OOOO":default:return"GMT"+Od(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+W6(r,":");case"zzzz":default:return"GMT"+Od(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return wn(r,e.length)},T:function(t,e,n){const r=t.getTime();return wn(r,e.length)}};function W6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+wn(a,2)}function H6(t,e){return t%60===0?(t>0?"-":"+")+wn(Math.abs(t)/60,2):Od(t,e)}function Od(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=wn(Math.trunc(r/60),2),a=wn(r%60,2);return n+i+e+a}const K6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Hne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},CZe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return K6(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",K6(r,e)).replace("{{time}}",Hne(i,e))},PZe={p:Hne,P:CZe},IZe=/^D+$/,kZe=/^Y+$/,RZe=["D","DD","YY","YYYY"];function OZe(t){return IZe.test(t)}function DZe(t){return kZe.test(t)}function MZe(t,e,n){const r=LZe(t,e,n);if(console.warn(r),RZe.includes(t))throw new RangeError(r)}function LZe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $Ze=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FZe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VZe=/^'([^]*?)'?$/,BZe=/''/g,UZe=/[a-zA-Z]/;function vt(t,e,n){var d,h,f,m;const r=p1(),i=r.locale??NZe,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=ts(t);if(!qXe(l))throw new RangeError("Invalid time value");let c=e.match(FZe).map(v=>{const p=v[0];if(p==="p"||p==="P"){const y=PZe[p];return y(v,i.formatLong)}return v}).join("").match($Ze).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const p=v[0];if(p==="'")return{isToken:!1,value:zZe(v)};if(q6[p])return{isToken:!0,value:v};if(p.match(UZe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const p=v.value;(DZe(p)||OZe(p))&&MZe(p,e,String(t));const y=q6[p[0]];return y(l,p,i.localize,u)}).join("")}function zZe(t){const e=t.match(VZe);return e?e[1].replace(BZe,"'"):t}function jf(t){return ts(t).getFullYear()}function Kne(t){return+ts(t)<Date.now()}function G6(t,e){return Fne(t,-e)}function qZe(){const{user:t}=dt(),{data:e}=Ee({queryKey:["hr-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalEmployees:0,activeEmployees:0,permanentEmployees:0,contractEmployees:0,departments:0,monthlyPayroll:0,pendingPayroll:0,activeAdvances:0,totalAdvanceBalance:0,hoursLogged:0,pendingTimeEntries:0};const r=vt(new Date,"yyyy-MM"),i=`${r}-01`,a=new Date(parseInt(r.split("-")[0]),parseInt(r.split("-")[1]),0).toISOString().split("T")[0],{employees:o,payrollRuns:l,advances:c,timeEntries:u}=await _r.runQueries(t.id,{employees:{collectionName:ee.EMPLOYEES},payrollRuns:{collectionName:ee.PAYROLL_RUNS,filters:[{field:"runDate",op:">=",value:i},{field:"runDate",op:"<=",value:a}]},advances:{collectionName:ee.ADVANCES},timeEntries:{collectionName:ee.TIME_ENTRIES,filters:[{field:"workDate",op:">=",value:i}]}}),d=new Set(o.map(h=>Ze(h,["department"])).filter(h=>!!h));return{totalEmployees:o.length,activeEmployees:o.filter(h=>Ze(h,["employmentStatus","employment_status"])==="active").length,permanentEmployees:o.filter(h=>Ze(h,["contractType","contract_type"])==="permanent").length,contractEmployees:o.filter(h=>Ze(h,["contractType","contract_type"])==="contract").length,departments:d.size,monthlyPayroll:l.filter(h=>{const f=Ze(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","payment_reversed","approved","final"].includes(f)}).reduce((h,f)=>h+tn(f,["totalNet","total_net"]),0),pendingPayroll:l.filter(h=>{const f=Ze(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["draft","pending"].includes(f)}).length,activeAdvances:c.filter(h=>Ze(h,["status"])==="active").length,totalAdvanceBalance:c.filter(h=>Ze(h,["status"])==="active").reduce((h,f)=>h+tn(f,["remainingBalance","remaining_balance"]),0),hoursLogged:u.reduce((h,f)=>h+tn(f,["hoursWorked","hours_worked"]),0),pendingTimeEntries:u.filter(h=>Ze(h,["status"])==="pending").length}}}),n=[{title:"Active Employees",value:(e==null?void 0:e.activeEmployees)||0,icon:di,color:"text-blue-500"},{title:"Monthly Payroll",value:de((e==null?void 0:e.monthlyPayroll)||0),icon:Zn,color:"text-green-500"},{title:"Active Advances",value:(e==null?void 0:e.activeAdvances)||0,icon:Um,color:"text-amber-500"},{title:"Hours Logged",value:`${(e==null?void 0:e.hoursLogged)||0}h`,icon:Vi,color:"text-purple-500"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR & Payroll Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Employee and payroll management overview"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:r.title}),s.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Workforce Breakdown"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Employees"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalEmployees)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Permanent Staff"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.permanentEmployees)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Contract Staff"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.contractEmployees)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Departments"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.departments)||0})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(ks,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),s.jsxs(se,{className:"space-y-3",children:[(e==null?void 0:e.pendingPayroll)>0&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ks,{className:"h-5 w-5 text-warning mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[e.pendingPayroll," Pending Payroll Run(s)"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting approval"})]})]}),(e==null?void 0:e.pendingTimeEntries)>0&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Vi,{className:"h-5 w-5 text-accent mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[e.pendingTimeEntries," Pending Time Entries"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Need review"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Zn,{className:"h-5 w-5 text-amber-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Outstanding Advances"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[de((e==null?void 0:e.totalAdvanceBalance)||0)," remaining"]})]})]})]})]})]})]})}function WZe(){var r;const{user:t}=dt(),{data:e}=Ee({queryKey:["inventory-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalItems:0,lowStockCount:0,lowStockItems:[],totalValue:0,categories:0,recentMovements:0,inMovements:0,outMovements:0};const{items:i,movements:a}=await _r.runQueries(t.id,{items:{collectionName:ee.INVENTORY_ITEMS},movements:{collectionName:ee.STOCK_MOVEMENTS,orderByField:"createdAt",orderDirection:"desc",limitCount:100}}),o=i.filter(u=>{const d=tn(u,["quantityOnHand","quantity_on_hand"]),h=tn(u,["reorderPoint","reorder_point"]);return d<=h}),l=i.reduce((u,d)=>{const h=tn(d,["quantityOnHand","quantity_on_hand"]),f=tn(d,["unitCost","unit_cost"]);return u+h*f},0),c=new Set(i.map(u=>Ze(u,["category"])).filter(u=>!!u)).size;return{totalItems:i.length,lowStockCount:o.length,lowStockItems:o.slice(0,5),totalValue:l,categories:c,recentMovements:a.length,inMovements:a.filter(u=>Ze(u,["movementType","movement_type"])==="in").reduce((u,d)=>u+tn(d,["quantity"]),0),outMovements:a.filter(u=>Ze(u,["movementType","movement_type"])==="out").reduce((u,d)=>u+tn(d,["quantity"]),0)}}}),n=[{title:"Total Items",value:(e==null?void 0:e.totalItems)||0,icon:la,color:"text-blue-500"},{title:"Low Stock Alerts",value:(e==null?void 0:e.lowStockCount)||0,icon:Mi,color:"text-red-500"},{title:"Total Value",value:de((e==null?void 0:e.totalValue)||0),icon:Zn,color:"text-green-500"},{title:"Categories",value:(e==null?void 0:e.categories)||0,icon:va,color:"text-purple-500"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Stock levels and inventory management overview"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(i=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:i.title}),s.jsx(i.icon,{className:`h-4 w-4 ${i.color}`})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:i.value})})]},i.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-destructive"}),"Low Stock Items"]})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-3",children:[(r=e==null?void 0:e.lowStockItems)==null?void 0:r.map(i=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:Ze(i,["name"],"Unnamed Item")}),s.jsxs("span",{className:"font-medium text-destructive",children:[tn(i,["quantityOnHand","quantity_on_hand"])," / ",tn(i,["reorderPoint","reorder_point"])]})]},Ze(i,["id","name"],"inventory-item"))),(!(e!=null&&e.lowStockItems)||e.lowStockItems.length===0)&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"No low stock alerts"})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Recent Activity"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Items Received"}),s.jsxs("span",{className:"font-medium text-green-600",children:["+",(e==null?void 0:e.inMovements)||0]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Items Issued"}),s.jsxs("span",{className:"font-medium text-red-600",children:["-",(e==null?void 0:e.outMovements)||0]})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Recent Movements"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.recentMovements)||0})]})]})]})]})]})}var ZD="Progress",JD=100,[HZe,Xtt]=ps(ZD),[KZe,GZe]=HZe(ZD),Gne=j.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=YZe,...o}=t;(i||i===0)&&!Y6(i)&&console.error(QZe(`${i}`,"Progress"));const l=Y6(i)?i:JD;r!==null&&!Q6(r,l)&&console.error(XZe(`${r}`,"Progress"));const c=Q6(r,l)?r:null,u=X_(c)?a(c,l):void 0;return s.jsx(KZe,{scope:n,value:c,max:l,children:s.jsx(st.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":X_(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Xne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});Gne.displayName=ZD;var Yne="ProgressIndicator",Qne=j.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=GZe(Yne,n);return s.jsx(st.div,{"data-state":Xne(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});Qne.displayName=Yne;function YZe(t,e){return`${Math.round(t/e*100)}%`}function Xne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function X_(t){return typeof t=="number"}function Y6(t){return X_(t)&&!isNaN(t)&&t>0}function Q6(t,e){return X_(t)&&!isNaN(t)&&t<=e&&t>=0}function QZe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${JD}\`.`}function XZe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${JD} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Zne=Gne,ZZe=Qne;const Tu=j.forwardRef(({className:t,value:e,...n},r)=>s.jsx(Zne,{ref:r,className:_e("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:s.jsx(ZZe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Tu.displayName=Zne.displayName;function JZe(){var r;const{user:t}=dt(),{data:e}=Ee({queryKey:["project-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,totalSpent:0,budgetUtilization:0,projectsNearBudget:[],pendingTimeEntries:0,totalHoursLogged:0,topProjects:[]};const{projects:i,timeEntries:a}=await _r.runQueries(t.id,{projects:{collectionName:ee.PROJECTS},projectExpenses:{collectionName:ee.PROJECT_EXPENSES},timeEntries:{collectionName:ee.TIME_ENTRIES}}),o=i.filter(m=>Ze(m,["status"])==="active"),l=i.filter(m=>Ze(m,["status"])==="completed"),c=o.reduce((m,v)=>m+tn(v,["budget"]),0),u=o.reduce((m,v)=>m+tn(v,["spent"]),0),d=o.filter(m=>{const v=tn(m,["budget"]),p=tn(m,["spent"]);return v>0&&p/v>=.8}),h=a.filter(m=>Ze(m,["status"])==="pending"),f=a.reduce((m,v)=>m+tn(v,["hoursWorked","hours_worked"]),0);return{totalProjects:i.length,activeProjects:o.length,completedProjects:l.length,totalBudget:c,totalSpent:u,budgetUtilization:c>0?u/c*100:0,projectsNearBudget:d,pendingTimeEntries:h.length,totalHoursLogged:f,topProjects:o.slice(0,5)}}}),n=[{title:"Active Projects",value:(e==null?void 0:e.activeProjects)||0,icon:Kw,color:"text-primary"},{title:"Total Budget",value:de((e==null?void 0:e.totalBudget)||0),icon:Zn,color:"text-green-500"},{title:"Total Spent",value:de((e==null?void 0:e.totalSpent)||0),icon:va,color:"text-blue-500"},{title:"Hours Logged",value:((r=e==null?void 0:e.totalHoursLogged)==null?void 0:r.toFixed(1))||"0",icon:Vi,color:"text-blue-500"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Manager Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Project portfolio and resource overview"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(i=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:i.title}),s.jsx(i.icon,{className:`h-4 w-4 ${i.color}`})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:i.value})})]},i.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-5 w-5 text-primary"}),"Budget Utilization"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Overall Utilization"}),s.jsxs("span",{className:"font-medium",children:[((e==null?void 0:e.budgetUtilization)||0).toFixed(1),"%"]})]}),s.jsx(Tu,{value:(e==null?void 0:e.budgetUtilization)||0,className:"h-2"})]}),s.jsxs("div",{className:"pt-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.totalBudget)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Spent to Date"}),s.jsx("span",{className:"font-medium text-blue-500",children:de((e==null?void 0:e.totalSpent)||0)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-3",children:[s.jsx("span",{className:"font-semibold",children:"Remaining"}),s.jsx("span",{className:"font-bold text-green-600",children:de(((e==null?void 0:e.totalBudget)||0)-((e==null?void 0:e.totalSpent)||0))})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2 text-warning",children:[s.jsx(ks,{className:"h-5 w-5"}),"Projects Near Budget Limit"]})}),s.jsx(se,{children:e!=null&&e.projectsNearBudget&&e.projectsNearBudget.length>0?s.jsx("div",{className:"space-y-4",children:e.projectsNearBudget.map(i=>{const a=tn(i,["budget"]),o=tn(i,["spent"]),l=a>0?o/a*100:0;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium truncate max-w-[200px]",children:Ze(i,["name"],"Unnamed Project")}),s.jsxs("span",{className:l>=100?"text-destructive":"text-warning",children:[l.toFixed(0),"%"]})]}),s.jsx(Tu,{value:Math.min(l,100),className:`h-2 ${l>=100?"[&>div]:bg-destructive":"[&>div]:bg-warning"}`}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:[de(o)," spent"]}),s.jsxs("span",{children:[de(a)," budget"]})]})]},Ze(i,["id"],"project"))})}):s.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No projects approaching budget limit"})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Kw,{className:"h-5 w-5 text-primary"}),"Active Projects Overview"]})}),s.jsx(se,{children:e!=null&&e.topProjects&&e.topProjects.length>0?s.jsx("div",{className:"space-y-4",children:e.topProjects.map(i=>{const a=tn(i,["budget"]),o=tn(i,["spent"]),l=a>0?o/a*100:0;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:Ze(i,["name"],"Unnamed Project")}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ze(i,["donorName","donor_name"],"No donor")," - ",Ze(i,["grantReference","grant_reference"],"No reference")]})]}),s.jsxs("div",{className:"text-right space-y-1",children:[s.jsx("p",{className:"font-medium",children:de(o)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",de(a)]})]}),s.jsx("div",{className:"w-20",children:s.jsx(Tu,{value:Math.min(l,100),className:"h-2"})})]},Ze(i,["id"],"project"))})}):s.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No active projects"})})]})]})}const Rt=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:_e("w-full caption-bottom text-sm",t),...e})}));Rt.displayName="Table";const Ot=j.forwardRef(({className:t,...e},n)=>s.jsx("thead",{ref:n,className:_e("[&_tr]:border-b",t),...e}));Ot.displayName="TableHeader";const Dt=j.forwardRef(({className:t,...e},n)=>s.jsx("tbody",{ref:n,className:_e("[&_tr:last-child]:border-0",t),...e}));Dt.displayName="TableBody";const eJe=j.forwardRef(({className:t,...e},n)=>s.jsx("tfoot",{ref:n,className:_e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));eJe.displayName="TableFooter";const je=j.forwardRef(({className:t,...e},n)=>s.jsx("tr",{ref:n,className:_e("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));je.displayName="TableRow";const H=j.forwardRef(({className:t,...e},n)=>s.jsx("th",{ref:n,className:_e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));H.displayName="TableHead";const F=j.forwardRef(({className:t,...e},n)=>s.jsx("td",{ref:n,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));F.displayName="TableCell";const tJe=j.forwardRef(({className:t,...e},n)=>s.jsx("caption",{ref:n,className:_e("mt-4 text-sm text-muted-foreground",t),...e}));tJe.displayName="TableCaption";const nJe=(t,e)=>{const n=Ze(t,e),r=n?new Date(n):null;return r&&!Number.isNaN(r.getTime())?r:null};function rJe(){const{user:t}=dt(),{data:e}=Ee({queryKey:["auditor-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{auditLogs:[],payrollRuns:[],expenseRows:[],projects:[]};const p=await _r.getCompanyIdForUser(t.id),y=new Date,b=new Date(y.getFullYear(),y.getMonth(),1).toISOString().slice(0,10),x=y.toISOString().slice(0,10),[w,C]=await Promise.all([jn.getExpenseReport({companyId:p,startDate:b,endDate:x}),_r.runQueries(t.id,{auditLogs:{collectionName:ee.AUDIT_LOGS,orderByField:"createdAt",orderDirection:"desc",limitCount:20},payrollRuns:{collectionName:ee.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc",limitCount:10},projects:{collectionName:ee.PROJECTS,orderByField:"createdAt",orderDirection:"desc"}})]);return{...C,expenseRows:w.rows}}}),n=(e==null?void 0:e.auditLogs)??[],r=(e==null?void 0:e.payrollRuns)??[],i=(e==null?void 0:e.expenseRows)??[],a=(e==null?void 0:e.projects)??[],o=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),l=r.filter(p=>{const y=Ze(p,["status","payrollStatus","payroll_status"]).toLowerCase();return y==="pending"||y==="draft"}).length,c=r.filter(p=>{const y=Ze(p,["status","payrollStatus","payroll_status"]).toLowerCase();return["approved","final","processed","paid","payment_reversed"].includes(y)}).length,u=i.reduce((p,y)=>p+Number(y.amount||0),0),d=a.filter(p=>tn(p,["spent"])>tn(p,["budget"])).length,h=n.length,f=i.filter(p=>Number(p.amount||0)>5e3).slice(0,5),m=n.reduce((p,y)=>{const b=Ze(y,["action"]).toUpperCase()||"UNKNOWN";return p[b]=(p[b]||0)+1,p},{}),v=a.filter(p=>{const y=tn(p,["budget"]),b=tn(p,["spent"]);return(y>0?b/y*100:0)>80});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Auditor Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Compliance monitoring and audit trail overview"})]}),s.jsxs(De,{variant:"outline",className:"flex items-center gap-1",children:[s.jsx(wh,{className:"h-3 w-3"}),"Audit Mode"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Pending Approvals"}),s.jsx(Mi,{className:"h-4 w-4 text-warning"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll runs awaiting approval"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Approved Payrolls"}),s.jsx(u8,{className:"h-4 w-4 text-success"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:c}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Projects Over Budget"}),s.jsx(va,{className:"h-4 w-4 text-destructive"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Recent Changes"}),s.jsx(ku,{className:"h-4 w-4 text-primary"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:h}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit log entries (last 20)"})]})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(ku,{className:"h-5 w-5"}),"Recent Activity Log"]})}),s.jsx(se,{children:s.jsx(lh,{className:"h-[300px]",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Action"}),s.jsx(H,{children:"Entity"}),s.jsx(H,{children:"Time"})]})}),s.jsx(Dt,{children:n.length===0?s.jsx(je,{children:s.jsx(F,{colSpan:3,className:"text-center text-muted-foreground",children:"No audit logs found"})}):n.map(p=>{const y=Ze(p,["action"]).toUpperCase(),b=nJe(p,["createdAt","created_at"]);return s.jsxs(je,{children:[s.jsx(F,{children:s.jsx(De,{variant:y==="DELETE"?"destructive":y==="INSERT"?"default":"secondary",children:y||"UNKNOWN"})}),s.jsx(F,{className:"font-medium",children:Ze(p,["tableName","table_name","entity"],"Unknown")}),s.jsx(F,{className:"text-muted-foreground",children:b?vt(b,"MMM dd, HH:mm"):"-"})]},Ze(p,["id"],"audit-log"))})})]})})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-5 w-5"}),"High-Value Expense Postings (> ZMW 5,000)"]})}),s.jsx(se,{children:s.jsx(lh,{className:"h-[300px]",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Description"}),s.jsx(H,{children:"Expense Account"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsx(Dt,{children:f.length===0?s.jsx(je,{children:s.jsx(F,{colSpan:3,className:"text-center text-muted-foreground",children:"No high-value expenses found"})}):f.map((p,y)=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium max-w-[150px] truncate",children:p.description||"Expense"}),s.jsx(F,{children:s.jsx(De,{variant:"outline",children:p.expenseAccount||"Expense"})}),s.jsx(F,{className:"text-right font-mono",children:o(Number(p.amount||0))})]},`${p.expenseAccount}-${p.entryDate}-${y}`))})]})})})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(di,{className:"h-5 w-5"}),"Action Distribution"]})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([p,y])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(De,{variant:p==="DELETE"?"destructive":p==="INSERT"?"default":"secondary",children:p})}),s.jsx("span",{className:"font-bold",children:y})]},p)),Object.keys(m).length===0&&s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No actions recorded"})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Um,{className:"h-5 w-5"}),"Project Budget Alerts"]})}),s.jsx(se,{children:s.jsx(lh,{className:"h-[200px]",children:s.jsxs("div",{className:"space-y-3",children:[v.map(p=>{const y=tn(p,["budget"]),b=tn(p,["spent"]),x=y>0?b/y*100:0;return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:Ze(p,["name"],"Project")}),s.jsx("p",{className:"text-xs text-muted-foreground",children:Ze(p,["code"],"-")})]}),s.jsxs(De,{variant:x>100?"destructive":"secondary",children:[x.toFixed(0),"% used"]})]},Ze(p,["id"],"project"))}),v.length===0&&s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No budget alerts"})]})})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Total Expense Volume"})}),s.jsx(se,{children:s.jsx("p",{className:"text-2xl font-bold",children:o(u)})})]})]})}function sJe(){var i;const{user:t}=dt(),{data:e}=Ee({queryKey:["financial-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,cashBalance:0,unpaidBills:0,pendingApprovals:0,pendingApprovalsAmount:0,expensesPendingApproval:0,lastPayrollGross:0,lastPayrollNet:0,monthlyProfit:0,bankAccounts:[]};const a=await _r.getCompanyIdForUser(t.id),[o,{expenses:l,bankAccounts:c,payrollRuns:u,approvalRequests:d}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:a}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},expenses:{collectionName:ee.EXPENSES},bankAccounts:{collectionName:ee.BANK_ACCOUNTS},payrollRuns:{collectionName:ee.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc"},approvalRequests:{collectionName:ee.APPROVAL_REQUESTS}})]),h=d.filter(f=>Ze(f,["status"])==="pending");return{totalRevenue:o.monthlyIncome,totalExpenses:o.monthlyExpenses,cashBalance:o.bankDefaultBalance,unpaidBills:o.outstandingAccountsPayable,pendingApprovals:h.length,pendingApprovalsAmount:h.reduce((f,m)=>f+tn(m,["amount"]),0),expensesPendingApproval:l.filter(f=>Ze(f,["approvalStatus","approval_status"])==="pending").length,lastPayrollGross:u[0]?tn(u[0],["totalGross","total_gross"]):0,lastPayrollNet:u[0]?tn(u[0],["totalNet","total_net"]):0,monthlyProfit:o.monthlyProfit,bankAccounts:c}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0),r=[{title:"Total Revenue",value:de((e==null?void 0:e.totalRevenue)||0),icon:Zn,color:"text-green-500"},{title:"Total Expenses",value:de((e==null?void 0:e.totalExpenses)||0),icon:co,color:"text-destructive"},{title:"Cash Balance",value:de((e==null?void 0:e.cashBalance)||0),icon:xh,color:"text-primary"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:rR,color:"text-warning"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Manager Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Oversee all financial operations and approvals"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(a=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:a.title}),s.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-5 w-5 text-primary"}),"Profit & Loss"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),s.jsx("span",{className:"font-medium text-green-600",children:de((e==null?void 0:e.totalRevenue)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Expenses"}),s.jsxs("span",{className:"font-medium text-destructive",children:["(",de((e==null?void 0:e.totalExpenses)||0),")"]})]}),s.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Income"}),s.jsx("span",{className:`font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:de(n)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Monthly Profit (GL)"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.monthlyProfit)||0)})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Approval Requests"}),s.jsx(De,{variant:e!=null&&e.pendingApprovals?"destructive":"secondary",children:(e==null?void 0:e.pendingApprovals)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Approvals Value"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.pendingApprovalsAmount)||0)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending"}),s.jsx(De,{variant:e!=null&&e.expensesPendingApproval?"outline":"secondary",children:(e==null?void 0:e.expensesPendingApproval)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Unpaid Bills"}),s.jsx("span",{className:"font-medium text-destructive",children:de((e==null?void 0:e.unpaidBills)||0)})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Xo,{className:"h-5 w-5 text-green-500"}),"Payroll Summary"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Gross Payroll"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.lastPayrollGross)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Net Payroll"}),s.jsx("span",{className:"font-medium",children:de((e==null?void 0:e.lastPayrollNet)||0)})]}),s.jsxs("div",{className:"border-t pt-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank Accounts"}),(i=e==null?void 0:e.bankAccounts)==null?void 0:i.map(a=>s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:Ze(a,["accountName","account_name"],"Bank Account")}),s.jsx("span",{className:"text-sm font-medium",children:de(tn(a,["currentBalance","current_balance"]))})]},Ze(a,["accountName","account_name","id"],"bank-account")))]})]})]})]})]})}function iJe(){const{user:t}=dt(),{data:e}=Ee({queryKey:["assistant-accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{draftInvoices:0,pendingInvoices:0,recentExpenses:0,totalExpenses:0,unpaidBills:0,unpaidBillsAmount:0,unpostedJournals:0,totalCustomers:0,totalVendors:0};const r=await _r.getCompanyIdForUser(t.id),i=new Date,a=new Date(i.getFullYear(),i.getMonth(),1).toISOString().slice(0,10),o=i.toISOString().slice(0,10),[l,c,{invoices:u,bills:d,journalEntries:h,customers:f,vendors:m}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:r}),jn.getExpenseReport({companyId:r,startDate:a,endDate:o}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},bills:{collectionName:ee.BILLS},journalEntries:{collectionName:ee.JOURNAL_ENTRIES},customers:{collectionName:ee.CUSTOMERS},vendors:{collectionName:ee.VENDORS}})]),v=p=>{const y=p.toLowerCase();return["sent","unpaid","partially paid","overdue","pending"].includes(y)};return{draftInvoices:u.filter(p=>Ze(p,["status"]).toLowerCase()==="draft").length,pendingInvoices:u.filter(p=>v(Ze(p,["status"]))).length,recentExpenses:c.rows.length,totalExpenses:l.monthlyExpenses,unpaidBills:d.filter(p=>Ze(p,["status"]).toLowerCase()!=="paid").length,unpaidBillsAmount:l.outstandingAccountsPayable,unpostedJournals:h.filter(p=>!jy(p,["isPosted","is_posted"])).length,totalCustomers:f.length,totalVendors:m.length}}}),n=[{title:"Draft Invoices",value:(e==null?void 0:e.draftInvoices)||0,subtitle:`${(e==null?void 0:e.pendingInvoices)||0} pending`,icon:dr},{title:"Unpaid Bills",value:(e==null?void 0:e.unpaidBills)||0,subtitle:de((e==null?void 0:e.unpaidBillsAmount)||0),icon:zx},{title:"Total Expenses",value:de((e==null?void 0:e.totalExpenses)||0),subtitle:`${(e==null?void 0:e.recentExpenses)||0} records`,icon:co},{title:"Unposted Journals",value:(e==null?void 0:e.unpostedJournals)||0,subtitle:"Awaiting review",icon:vv}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Assistant Accountant Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Data entry tasks and bookkeeping overview"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:r.title}),s.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.value}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(ku,{className:"h-5 w-5 text-primary"}),"Daily Tasks"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Record new expenses"}),s.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.recentExpenses)||0," total"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Process draft invoices"}),s.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.draftInvoices)||0," drafts"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Review unposted journals"}),s.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpostedJournals)||0," unposted"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Process vendor bills"}),s.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpaidBills)||0," unpaid"]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(xh,{className:"h-5 w-5 text-primary"}),"Directory"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Customers"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalCustomers)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Vendors"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalVendors)||0})]})]})]})]})]})}function aJe(){const{user:t}=dt(),{data:e}=Ee({queryKey:["finance-officer-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{paidInvoices:0,pendingInvoices:0,overdueInvoices:0,totalExpenses:0,pendingExpenses:0,unpaidBills:0,overdueBills:0,cashBalance:0};const r=await _r.getCompanyIdForUser(t.id),[i,{invoices:a,expenses:o,bills:l}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:r}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES},expenses:{collectionName:ee.EXPENSES},bills:{collectionName:ee.BILLS}})]),c=new Date().toISOString().split("T")[0];return{paidInvoices:i.monthlyIncome,pendingInvoices:a.filter(u=>{const d=Ze(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,overdueInvoices:a.filter(u=>{const d=Ze(u,["dueDate","due_date"]);return Ze(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,totalExpenses:i.monthlyExpenses,pendingExpenses:o.filter(u=>Ze(u,["approvalStatus","approval_status"])==="pending").length,unpaidBills:i.outstandingAccountsPayable,overdueBills:l.filter(u=>{const d=Ze(u,["dueDate","due_date"]);return Ze(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,cashBalance:i.bankDefaultBalance}}}),n=[{title:"Monthly Revenue",value:de((e==null?void 0:e.paidInvoices)||0),icon:Zn},{title:"Total Expenses",value:de((e==null?void 0:e.totalExpenses)||0),icon:co},{title:"Unpaid Bills",value:de((e==null?void 0:e.unpaidBills)||0),icon:zx},{title:"Cash Balance",value:de((e==null?void 0:e.cashBalance)||0),icon:xh}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Officer Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, bills, and expenses"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:r.title}),s.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(dr,{className:"h-5 w-5 text-primary"}),"Invoice Status"]})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pending Invoices"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingInvoices)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Overdue Invoices"}),s.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueInvoices)||0})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending Approval"}),s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingExpenses)||0})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-warning"}),"Alerts"]})}),s.jsxs(se,{className:"space-y-3",children:[((e==null?void 0:e.overdueInvoices)||0)>0&&s.jsxs("div",{className:"p-2 bg-destructive/10 rounded text-sm text-destructive",children:[e==null?void 0:e.overdueInvoices," overdue invoice(s) require follow-up"]}),((e==null?void 0:e.overdueBills)||0)>0&&s.jsxs("div",{className:"p-2 bg-warning/10 rounded text-sm text-warning",children:[e==null?void 0:e.overdueBills," overdue bill(s) need payment"]}),((e==null?void 0:e.overdueInvoices)||0)===0&&((e==null?void 0:e.overdueBills)||0)===0&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"No urgent alerts"})]})]})]})]})}function oJe(){var r,i;const{user:t}=dt(),{data:e}=Ee({queryKey:["cashier-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{cashBalance:0,totalBalance:0,cashAccounts:[],recentReconciliations:[],recentReceipts:[],recentPayments:[],todayReceipts:0,todayPayments:0};const a=await _r.getCompanyIdForUser(t.id),o=new Date,l=o.toISOString().slice(0,10),c=new Date(o.getFullYear(),o.getMonth(),1).toISOString().slice(0,10),[u,d,h,{cashReconciliations:f}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:a}),jn.getBalanceSheetReport({companyId:a,asOfDate:l}),jn.getCashFlowReport({companyId:a,startDate:c,endDate:l}),_r.runQueries(t.id,{cashReconciliations:{collectionName:ee.CASH_RECONCILIATIONS,orderByField:"reconciliationDate",orderDirection:"desc",limitCount:5}})]),m=d.assets.filter(b=>{const x=b.accountName.toLowerCase();return x.includes("cash")||x.includes("bank")||x.includes("money")}),v=m.map(b=>({accountName:b.accountName,currentBalance:b.balance})),p=h.rows.filter(b=>b.moneyIn>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Receipt",amount:b.moneyIn})),y=h.rows.filter(b=>b.moneyOut>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Payment",amount:b.moneyOut}));return{cashBalance:u.bankDefaultBalance,totalBalance:m.reduce((b,x)=>b+Number(x.balance||0),0),cashAccounts:v,recentReconciliations:f,recentReceipts:p,recentPayments:y,todayReceipts:h.rows.reduce((b,x)=>b+Number(x.moneyIn||0),0),todayPayments:h.rows.reduce((b,x)=>b+Number(x.moneyOut||0),0)}}}),n=[{title:"Cash on Hand",value:de((e==null?void 0:e.cashBalance)||0),icon:za,color:"text-green-500"},{title:"Total Balance",value:de((e==null?void 0:e.totalBalance)||0),icon:a8,color:"text-primary"},{title:"Recent Receipts",value:de((e==null?void 0:e.todayReceipts)||0),icon:a4,color:"text-green-500"},{title:"Recent Payments",value:de((e==null?void 0:e.todayPayments)||0),icon:Koe,color:"text-destructive"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashier Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Cash transactions and petty cash management"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:a.title}),s.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(a4,{className:"h-5 w-5 text-green-500"}),"Recent Receipts"]})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-2",children:(r=e==null?void 0:e.recentReceipts)!=null&&r.length?e.recentReceipts.map((a,o)=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground truncate max-w-[60%]",children:Ze(a,["description"],"Deposit")}),s.jsx("span",{className:"font-medium text-green-600",children:de(tn(a,["amount"]))})]},o)):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent receipts"})})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(Yoe,{className:"h-5 w-5 text-primary"}),"Recent Reconciliations"]})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-2",children:(i=e==null?void 0:e.recentReconciliations)!=null&&i.length?e.recentReconciliations.map(a=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:Ze(a,["reconciliationDate","reconciliation_date"],"-")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:de(tn(a,["closingBalance","closing_balance"]))}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ze(a,["status"])==="approved"?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:Ze(a,["status"],"pending")})]})]},Ze(a,["id"],"reconciliation"))):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No reconciliations yet"})})})]})]})]})}function lJe(){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staff Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Your personal workspace"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Time Tracking"}),s.jsx(Vi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:""}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Log your hours"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"My Payslips"}),s.jsx(dr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:""}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View payslip history"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Leave Balance"}),s.jsx(Woe,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:""}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days remaining"})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"My Profile"}),s.jsx(g8,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:""}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View personal info"})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Welcome"})}),s.jsx(se,{children:s.jsx("p",{className:"text-muted-foreground",children:"Use the sidebar to access time tracking and view your information. Contact your HR manager for any employment-related queries."})})]})]})}function X6(){const{user:t}=dt(),{data:e}=Ee({queryKey:["readonly-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,invoiceCount:0};const r=await _r.getCompanyIdForUser(t.id),[i,{invoices:a}]=await Promise.all([jn.getDashboardLiveMetrics({companyId:r}),_r.runQueries(t.id,{invoices:{collectionName:ee.INVOICES}})]);return{totalRevenue:i.monthlyIncome,totalExpenses:i.monthlyExpenses,invoiceCount:a.length}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),s.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[s.jsx(Qoe,{className:"h-4 w-4"})," View-only access"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:de((e==null?void 0:e.totalRevenue)||0)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Expenses"}),s.jsx(co,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:de((e==null?void 0:e.totalExpenses)||0)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Net Income"}),s.jsx(va,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:`text-2xl font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:de(n)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Invoices"}),s.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.invoiceCount)||0})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Read-Only Access"})}),s.jsx(se,{children:s.jsx("p",{className:"text-muted-foreground",children:"You have view-only access to this system. Contact your administrator to request additional permissions."})})]})]})}function cJe(){const{data:t,isLoading:e}=$s();if(e)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});switch(t){case"super_admin":case"admin":return s.jsx(LXe,{});case"financial_manager":return s.jsx(sJe,{});case"accountant":return s.jsx($Xe,{});case"assistant_accountant":return s.jsx(iJe,{});case"finance_officer":return s.jsx(aJe,{});case"bookkeeper":return s.jsx(FXe,{});case"cashier":return s.jsx(oJe,{});case"hr_manager":return s.jsx(qZe,{});case"inventory_manager":return s.jsx(WZe,{});case"project_manager":return s.jsx(JZe,{});case"auditor":return s.jsx(rJe,{});case"staff":return s.jsx(lJe,{});case"read_only":return s.jsx(X6,{});default:return s.jsx(X6,{})}}const uJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},Z6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function dJe(){const[t,e]=j.useState(""),{user:n}=dt(),{data:r}=$s(),i=Jt(),a=oS(),o=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(r||""),{data:l,isLoading:c}=Ee({queryKey:["invoices",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await ze.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=Se(ae,ee.INVOICES),p=(await Pe(Ce(m,ge("companyId","==",f.companyId)))).docs.map(x=>{const w=x.data();return{id:x.id,invoiceNumber:String(w.invoiceNumber??w.invoice_number??""),invoiceDate:Z6(w.invoiceDate??w.invoice_date),dueDate:Z6(w.dueDate??w.due_date)||null,customerId:w.customerId??w.customer_id??null,customerName:"-",total:Number(w.totalAmount??w.total_amount??w.total??0),amountPaid:Number(w.amountPaid??w.amount_paid??0),status:String(w.status??"draft"),journal_entry_id:w.journalEntryId??w.journal_entry_id??null}}),y=Array.from(new Set(p.map(x=>x.customerId).filter(Boolean))),b=new Map;if(y.length>0){const x=Se(ae,ee.CUSTOMERS),w=uJe(y,30);(await Promise.all(w.map(S=>Pe(Ce(x,ge(so(),"in",S)))))).forEach(S=>{S.docs.forEach(P=>{const _=P.data();b.set(P.id,String(_.name??"-"))})})}return p.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,w)=>String(w.invoiceDate).localeCompare(String(x.invoiceDate)))},enabled:!!n}),u=qe({mutationFn:async f=>{if(!n)throw new Error("Not authenticated");if(!f.journal_entry_id)throw new Error("Invoice has no posted journal entry to reverse.");if(Number(f.amountPaid||0)>.001)throw new Error("Reverse invoice payment entries first before reversing this invoice.");const m=await ze.getPrimaryMembershipByUser(n.id);if(!(m!=null&&m.companyId))throw new Error("Company context not found");const v=prompt(`Reason for reversing invoice ${f.invoiceNumber} (optional):`)||void 0;return jn.reverseJournalEntry({companyId:m.companyId,journalEntryId:f.journal_entry_id,reason:v})},onSuccess:()=>{i.invalidateQueries({queryKey:["invoices",n==null?void 0:n.id]}),i.invalidateQueries({queryKey:["accounts-receivable"]}),i.invalidateQueries({queryKey:["customers"]}),i.invalidateQueries({queryKey:["bank-accounts"]}),i.invalidateQueries({queryKey:["journal-entries"]}),i.invalidateQueries({queryKey:["financial-reports"]}),i.invalidateQueries({queryKey:["dashboard"]}),G.success("Invoice journal entry reversed")},onError:f=>{G.error(`Failed to reverse invoice: ${f.message}`)}}),d=f=>{switch(f){case"paid":return"default";case"sent":return"secondary";case"overdue":return"destructive";case"draft":return"outline";default:return"secondary"}},h=l==null?void 0:l.filter(f=>f.invoiceNumber.toLowerCase().includes(t.toLowerCase())||f.customerName.toLowerCase().includes(t.toLowerCase()));return c?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage customer invoices and payments"})]}),s.jsx(Ri,{to:"/invoices/new",children:s.jsxs(K,{className:"gap-2",children:[s.jsx(Nn,{className:"h-4 w-4"}),"New Invoice"]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(re,{children:"All Invoices"}),!a&&s.jsxs("div",{className:"relative w-64",children:[s.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8"})]})]}),a&&s.jsxs("div",{className:"relative mt-4",children:[s.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8 w-full"})]})]}),s.jsx(se,{children:a?s.jsxs("div",{className:"space-y-4",children:[h==null?void 0:h.map(f=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-card shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-foreground",children:f.invoiceNumber}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.customerName||"-"})]}),s.jsx(De,{variant:d(f.status||"draft"),children:f.status})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Date"}),s.jsx("p",{children:f.invoiceDate?vt(new Date(f.invoiceDate),"dd MMM yyyy"):"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Due Date"}),s.jsx("p",{children:f.dueDate?vt(new Date(f.dueDate),"dd MMM yyyy"):"-"})]})]}),s.jsxs("div",{className:"pt-2 border-t flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),s.jsxs("span",{className:"text-lg font-bold text-primary",children:["ZMW ",f.total.toFixed(2)]})]}),f.journal_entry_id&&o&&s.jsx("div",{className:"pt-2",children:s.jsxs(K,{variant:"outline",size:"sm",className:"w-full",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){G.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},children:[s.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Reverse Posting"]})})]},f.id)),(h==null?void 0:h.length)===0&&s.jsx("div",{className:"text-center p-4 text-muted-foreground",children:"No invoices found"})]}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Invoice #"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Customer"}),s.jsx(H,{children:"Due Date"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[h==null?void 0:h.map(f=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:f.invoiceNumber}),s.jsx(F,{children:f.invoiceDate?vt(new Date(f.invoiceDate),"dd MMM yyyy"):"-"}),s.jsx(F,{children:f.customerName||"-"}),s.jsx(F,{children:f.dueDate?vt(new Date(f.dueDate),"dd MMM yyyy"):"-"}),s.jsxs(F,{className:"text-right font-medium",children:["ZMW ",f.total.toFixed(2)]}),s.jsx(F,{children:s.jsx(De,{variant:d(f.status||"draft"),children:f.status})}),s.jsx(F,{className:"text-right",children:f.journal_entry_id&&o&&s.jsx(K,{variant:"ghost",size:"icon",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){G.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},title:Number(f.amountPaid||0)>.001?"Reverse payments first":"Reverse invoice posting",children:s.jsx(Pl,{className:"h-4 w-4"})})})]},f.id)),(h==null?void 0:h.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground",children:"No invoices found"})})]})]})})]})]})}const Pn=j.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:_e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Pn.displayName="Textarea";function fd(){const{user:t,isAuthenticated:e}=dt();return Ee({queryKey:["company-settings",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Wo)return null;const n=await ze.getPrimaryMembershipByUser(t.id);return n?ze.getCompanySettings(n.companyId):null},enabled:e&&!!t})}function hJe(t){const e=Jt(),{data:n,isLoading:r}=Ee({queryKey:["zra-status",t],queryFn:async()=>null,enabled:!!t}),i=qe({mutationFn:async o=>bt("zraSmartInvoice",{action:"submit_invoice",invoiceId:o}),onSuccess:o=>{o.success?(G.success(`Invoice submitted to ZRA: ${o.zra_invoice_number??"Submitted"}`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})):G.warning(o.message||"Invoice queued for ZRA submission")},onError:o=>{G.error(o.message||"Failed to submit to ZRA")}}),a=qe({mutationFn:async()=>bt("zraSmartInvoice",{action:"retry_pending"}),onSuccess:o=>{G.success(`Processed ${o.processed??0} pending invoices`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})},onError:o=>{G.error(o.message||"Failed to retry pending invoices")}});return{zraStatus:n,isLoadingStatus:r,submitToZRA:i,retryPending:a,isSubmitting:i.isPending,isRetrying:a.isPending}}function fJe(){const{user:t}=dt(),e=Fn(),n=Jt(),[r]=TR(),i=r.get("customer"),{data:a}=fd(),{submitToZRA:o,isSubmitting:l}=hJe(),[c,u]=j.useState(i||""),[d,h]=j.useState(`INV-${Date.now()}`),[f,m]=j.useState(new Date().toISOString().split("T")[0]),[v,p]=j.useState(""),[y,b]=j.useState(""),[x,w]=j.useState(""),[C,S]=j.useState(!0);j.useState(!1),j.useState(""),j.useState("A");const[P,_]=j.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]);Ee({queryKey:["customers",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const R=await ze.getPrimaryMembershipByUser(t.id);return R!=null&&R.companyId?(await Pe(Ce(Se(ae,ee.CUSTOMERS),ge("companyId","==",R.companyId)))).docs.map(J=>{const oe=J.data();return{id:J.id,name:String(oe.name??"")}}).sort((J,oe)=>J.name.localeCompare(oe.name)):[]},enabled:!!t});const{data:g}=Ee({queryKey:["new-invoice-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const R=await ze.getPrimaryMembershipByUser(t.id);return(R==null?void 0:R.companyId)??null},enabled:!!t}),T=(a==null?void 0:a.isVatRegistered)||!1,E=(a==null?void 0:a.vatRate)||16,A=()=>{_([...P,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},I=R=>{P.length>1&&_(P.filter(W=>W.id!==R))},k=(R,W,J)=>{_(P.map(oe=>{if(oe.id===R){const Ae={...oe,[W]:J};return(W==="quantity"||W==="rate")&&(Ae.amount=Ae.quantity*Ae.rate),Ae}return oe}))},L=P.reduce((R,W)=>R+W.amount,0),B=T?L*(E/100):0,U=L+B,V=qe({mutationFn:async R=>{if(!g||!t)throw new Error("No company context found");const W=P.filter(J=>J.description.trim().length>0).map(J=>({description:J.description.trim(),quantity:J.quantity,unitPrice:J.rate}));if(W.length===0)throw new Error("At least one invoice line item is required.");return jn.createInvoice({companyId:g,customerId:c||void 0,invoiceNumber:d,invoiceDate:f,dueDate:v||f,status:R==="sent"?"Unpaid":"Draft",notes:[y,x].filter(Boolean).join(`

`)||void 0,taxAmount:B,totalAmount:U,lineItems:W})},onSuccess:async(R,W)=>{if(T&&C&&W==="sent")try{await o.mutateAsync(R.invoiceId)}catch{console.log("ZRA submission queued for retry")}n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success(W==="sent"?"Invoice sent successfully":"Invoice saved as draft"),e("/invoices")},onError:R=>{G.error("Failed to save invoice: "+R.message)}}),D=(R=!1)=>{V.mutate(R?"sent":"draft")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Invoice"}),s.jsxs("p",{className:"text-muted-foreground",children:["Create a new invoice for a customer",T&&s.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",E,"%"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(K,{variant:"outline",onClick:()=>e("/invoices"),children:"Cancel"}),s.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>D(!1),disabled:V.isPending,children:[s.jsx(bh,{className:"h-4 w-4"}),"Save Draft"]}),s.jsxs(K,{className:"gap-2",onClick:()=>D(!0),disabled:V.isPending,children:[s.jsx(nR,{className:"h-4 w-4"}),"Save & Send"]})]})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Invoice Details"})}),s.jsx(se,{className:"space-y-4",children:s.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),s.jsx(Y,{type:"date",value:v,onChange:R=>p(R.target.value)})]})})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Line Items"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[s.jsx("div",{className:"md:col-span-5",children:"Description"}),s.jsx("div",{className:"md:col-span-2",children:"Qty"}),s.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),s.jsx("div",{className:"md:col-span-2",children:"Amount"}),s.jsx("div",{className:"md:col-span-1"})]}),P.map(R=>s.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[s.jsx("div",{className:"md:col-span-5",children:s.jsx(Pn,{placeholder:"Description",value:R.description,onChange:W=>k(R.id,"description",W.target.value),rows:2})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{type:"number",placeholder:"Qty",value:R.quantity,onChange:W=>k(R.id,"quantity",parseFloat(W.target.value)||0),min:"0",step:"0.01"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{type:"number",placeholder:"Rate",value:R.rate,onChange:W=>k(R.id,"rate",parseFloat(W.target.value)||0),min:"0",step:"0.01"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{value:`ZMW ${R.amount.toFixed(2)}`,disabled:!0,className:"bg-muted"})}),s.jsx("div",{className:"md:col-span-1",children:s.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(R.id),disabled:P.length===1,children:s.jsx(Ms,{className:"h-4 w-4"})})})]},R.id)),s.jsxs(K,{type:"button",variant:"outline",className:"gap-2",onClick:A,children:[s.jsx(Nn,{className:"h-4 w-4"}),"Add Line"]})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Notes & Terms"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes (visible to customer)"}),s.jsx(Pn,{id:"notes",placeholder:"Add any notes or special instructions",rows:3,value:y,onChange:R=>b(R.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"terms",children:"Terms & Conditions"}),s.jsx(Pn,{id:"terms",placeholder:"Payment terms and conditions",rows:3,value:x,onChange:R=>w(R.target.value)})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Summary"})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),s.jsxs("span",{className:"font-medium",children:["ZMW ",L.toFixed(2)]})]}),T&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["VAT (",E,"%)"]}),s.jsxs("span",{className:"font-medium",children:["ZMW ",B.toFixed(2)]})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsxs("span",{className:"text-xl font-bold text-primary",children:["ZMW ",U.toFixed(2)]})]})]})]}),T&&s.jsx(Z,{className:"border-primary/20 bg-primary/5",children:s.jsxs(se,{className:"pt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u8,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"font-medium text-sm",children:"ZRA Smart Invoice"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Submit to ZRA on send"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice will be submitted for ZRA approval"})]}),s.jsx(us,{checked:C,onCheckedChange:S})]}),l&&s.jsxs(De,{variant:"outline",className:"animate-pulse",children:[s.jsx(ks,{className:"h-3 w-3 mr-1"}),"Submitting to ZRA..."]})]})}),!T&&s.jsx(Z,{className:"bg-muted/50",children:s.jsx(se,{className:"pt-4",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",s.jsx(K,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}function mJe(){const t=Fn(),{user:e}=dt(),{data:n}=$s(),r=n==="super_admin"||n==="admin",{data:i,isLoading:a,refetch:o}=Ee({queryKey:["employees",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const c=await ze.getPrimaryMembershipByUser(e.id);if(!(c!=null&&c.companyId))return[];const u=Se(ae,ee.EMPLOYEES),h=(await Pe(Ce(u,ge("companyId","==",c.companyId)))).docs.map(f=>{const m=f.data();return{id:f.id,employeeNumber:String(m.employeeNumber??m.employee_number??""),fullName:String(m.fullName??m.full_name??""),position:m.position??null,department:m.department??null,basicSalary:Number(m.basicSalary??m.basic_salary??0),employmentStatus:String(m.employmentStatus??m.employment_status??"active")}});return h.sort((f,m)=>f.fullName.localeCompare(m.fullName)),h},enabled:!!e}),l=async c=>{if(!r){G.error("Only Admin users can delete employee records.");return}if(confirm("Are you sure you want to delete this employee?"))try{await Yl(et(ae,ee.EMPLOYEES,c)),G.success("Employee deleted successfully"),o()}catch{G.error("Failed to delete employee")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Employees"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your employee records"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>t("/employees/bulk-upload"),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]}),s.jsxs(K,{onClick:()=>t("/employees/new"),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Employee"]})]})]}),a?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee #"}),s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Position"}),s.jsx(H,{children:"Department"}),s.jsx(H,{children:"Basic Salary"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[i==null?void 0:i.map(c=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:c.employeeNumber}),s.jsx(F,{children:c.fullName}),s.jsx(F,{children:c.position||"-"}),s.jsx(F,{children:c.department||"-"}),s.jsx(F,{children:de(c.basicSalary)}),s.jsx(F,{children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c.employmentStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:c.employmentStatus})}),s.jsxs(F,{className:"text-right",children:[s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>t(`/employees/${c.id}/edit`),children:s.jsx(Vp,{className:"h-4 w-4"})}),r&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>l(c.id),children:s.jsx(Ms,{className:"h-4 w-4"})})]})]},c.id)),(i==null?void 0:i.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No employees found. Add your first employee to get started."})})]})]})})]})}const g1=WTe,Jne=j.createContext({}),lt=({...t})=>s.jsx(Jne.Provider,{value:{name:t.name},children:s.jsx(YTe,{...t})}),y1=()=>{const t=j.useContext(Jne),e=j.useContext(ere),{getFieldState:n,formState:r}=yS(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},ere=j.createContext({}),at=j.forwardRef(({className:t,...e},n)=>{const r=j.useId();return s.jsx(ere.Provider,{value:{id:r},children:s.jsx("div",{ref:n,className:_e("space-y-2",t),...e})})});at.displayName="FormItem";const ct=j.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=y1();return s.jsx(X,{ref:n,className:_e(r&&"text-destructive",t),htmlFor:i,...e})});ct.displayName="FormLabel";const ot=j.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:a}=y1();return s.jsx(Kh,{ref:e,id:r,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...t})});ot.displayName="FormControl";const hh=j.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=y1();return s.jsx("p",{ref:n,id:r,className:_e("text-sm text-muted-foreground",t),...e})});hh.displayName="FormDescription";const ut=j.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:a}=y1(),o=i?String(i==null?void 0:i.message):e;return o?s.jsx("p",{ref:r,id:a,className:_e("text-sm font-medium text-destructive",t),...n,children:o}):null});ut.displayName="FormMessage";var v1="Tabs",[pJe,Ztt]=ps(v1,[JN]),tre=JN(),[gJe,eM]=pJe(v1),nre=j.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=lb(l),[h,f]=lo({prop:r,onChange:i,defaultProp:a??"",caller:v1});return s.jsx(gJe,{scope:n,baseId:ca(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:s.jsx(st.div,{dir:d,"data-orientation":o,...u,ref:e})})});nre.displayName=v1;var rre="TabsList",sre=j.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=eM(rre,n),o=tre(n);return s.jsx(I7,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(st.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});sre.displayName=rre;var ire="TabsTrigger",are=j.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=eM(ire,n),l=tre(n),c=cre(o.baseId,r),u=ure(o.baseId,r),d=r===o.value;return s.jsx(k7,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(st.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:$e(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:$e(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:$e(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(r)})})})});are.displayName=ire;var ore="TabsContent",lre=j.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,l=eM(ore,n),c=cre(l.baseId,r),u=ure(l.baseId,r),d=r===l.value,h=j.useRef(d);return j.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(gs,{present:i||d,children:({present:f})=>s.jsx(st.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});lre.displayName=ore;function cre(t,e){return`${t}-trigger-${e}`}function ure(t,e){return`${t}-content-${e}`}var yJe=nre,dre=sre,hre=are,fre=lre;const Tb=yJe,xg=j.forwardRef(({className:t,...e},n)=>s.jsx(dre,{ref:n,className:_e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));xg.displayName=dre.displayName;const wi=j.forwardRef(({className:t,...e},n)=>s.jsx(hre,{ref:n,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));wi.displayName=hre.displayName;const ji=j.forwardRef(({className:t,...e},n)=>s.jsx(fre,{ref:n,className:_e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ji.displayName=fre.displayName;function vJe({form:t}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:t.control,name:"employee_number",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employee No *"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"EMP001",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"nrc_number",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"NRC/ID Number"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"123456/78/1",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"tpin",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"TPIN"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"1234567890",maxLength:10,...e})}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"napsa_number",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"NAPSA No"}),s.jsx(ot,{children:s.jsx(Y,{...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"nhima_number",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"NHIMA No"}),s.jsx(ot,{children:s.jsx(Y,{...e})}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"full_name",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Full Name *"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"John Doe",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"date_of_birth",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Date of Birth"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"gender",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Gender"}),s.jsxs(gt,{onValueChange:e.onChange,value:e.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select gender"})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"male",children:"Male"}),s.jsx(ye,{value:"female",children:"Female"}),s.jsx(ye,{value:"other",children:"Other"})]})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"nationality",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Nationality"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Zambian",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"marital_status",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Marital Status"}),s.jsxs(gt,{onValueChange:e.onChange,value:e.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select status"})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"single",children:"Single"}),s.jsx(ye,{value:"married",children:"Married"}),s.jsx(ye,{value:"divorced",children:"Divorced"}),s.jsx(ye,{value:"widowed",children:"Widowed"})]})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"phone",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Phone"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"+260 9X XXX XXXX",...e})}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[s.jsx(lt,{control:t.control,name:"address",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Address"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"123 Main Street, Lusaka",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"email",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Email (for payslips)"}),s.jsx(ot,{children:s.jsx(Y,{type:"email",placeholder:"john.doe@example.com",...e})}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Organization"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(lt,{control:t.control,name:"department",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Department"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Finance",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"division",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Division"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Operations",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"position",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Job Title"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Accountant",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"job_grade",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Grade"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Grade 5",...e})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"cost_centre",render:({field:e})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Cost Centre"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"CC001",...e})}),s.jsx(ut,{})]})})]})]})]})}const xJe=Gh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Hu=j.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:_e(xJe({variant:e}),t),...n}));Hu.displayName="Alert";const mre=j.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:_e("mb-1 font-medium leading-none tracking-tight",t),...e}));mre.displayName="AlertTitle";const Ku=j.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:_e("text-sm [&_p]:leading-relaxed",t),...e}));Ku.displayName="AlertDescription";function bJe({form:t}){const e=t.watch("contract_type"),n=e==="consultant";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"contract_type",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employment Type *"}),s.jsxs(gt,{onValueChange:r.onChange,value:r.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select type"})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"permanent",children:"Permanent"}),s.jsx(ye,{value:"fixed-term",children:"Fixed-Term Contract"}),s.jsx(ye,{value:"temporary",children:"Temporary"}),s.jsx(ye,{value:"internship",children:"Internship"}),s.jsx(ye,{value:"consultant",children:"Consultant"})]})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"employment_status",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Status"}),s.jsxs(gt,{onValueChange:r.onChange,value:r.value||"active",children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"active",children:"Active"}),s.jsx(ye,{value:"inactive",children:"Inactive"}),s.jsx(ye,{value:"terminated",children:"Terminated"}),s.jsx(ye,{value:"on_leave",children:"On Leave"})]})]}),s.jsx(ut,{})]})})]}),n&&s.jsxs(Hu,{children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsxs(Ku,{children:[s.jsx("strong",{children:"Consultant:"})," PAYE, NAPSA, and NHIMA will be disabled. Withholding Tax (WHT) will apply based on consultant type."]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"employment_date",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Engagement Date *"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...r})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"contract_end_date",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Contract End Date"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...r})}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"currency",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Currency"}),s.jsxs(gt,{onValueChange:r.onChange,value:r.value||"ZMW",children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),s.jsx(ye,{value:"USD",children:"USD - US Dollar"}),s.jsx(ye,{value:"EUR",children:"EUR - Euro"}),s.jsx(ye,{value:"GBP",children:"GBP - British Pound"})]})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"pay_point",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Pay Point"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Head Office",...r})}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bank Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:t.control,name:"bank_name",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Bank Name"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Zanaco",...r})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"bank_branch",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Branch"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"Cairo Road",...r})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"bank_account_number",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Account Number"}),s.jsx(ot,{children:s.jsx(Y,{placeholder:"1234567890",...r})}),s.jsx(ut,{})]})})]})]}),(e==="fixed-term"||e==="consultant")&&s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contract Options"}),s.jsx(lt,{control:t.control,name:"has_gratuity",render:({field:r})=>s.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ct,{className:"text-base",children:"Attracts Gratuity"}),s.jsx(hh,{children:"Enable if this contract includes gratuity payment at end"})]}),s.jsx(ot,{children:s.jsx(us,{checked:r.value,onCheckedChange:r.onChange})})]})}),t.watch("has_gratuity")&&s.jsx("div",{className:"mt-4",children:s.jsx(lt,{control:t.control,name:"gratuity_rate",render:({field:r})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Gratuity Rate (%)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"25",...r})}),s.jsx(hh,{children:"Standard rate is 25% of total basic pay earned"}),s.jsx(ut,{})]})})})]})]})}function wJe({form:t}){const e=Number(t.watch("basic_salary"))||0,n=Number(t.watch("housing_allowance"))||0,r=Number(t.watch("transport_allowance"))||0,i=Number(t.watch("other_allowances"))||0,a=e+n+r+i;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:t.control,name:"rate_type",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Rate Type"}),s.jsxs(gt,{onValueChange:o.onChange,value:o.value||"monthly",children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"monthly",children:"Monthly"}),s.jsx(ye,{value:"daily",children:"Daily"}),s.jsx(ye,{value:"hourly",children:"Hourly"})]})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"basic_salary",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Basic Pay (ZMW) *"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"5000.00",...o})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"pay_rate",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Pay Rate"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"Rate per period",...o})}),s.jsx(hh,{children:"Optional alternative rate"}),s.jsx(ut,{})]})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Allowances"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:t.control,name:"housing_allowance",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Housing Allowance (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"1500.00",...o})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"transport_allowance",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Transport Allowance (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"500.00",...o})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:t.control,name:"other_allowances",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Other Allowances (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"0.00",...o})}),s.jsx(hh,{children:"Meal, medical, or other fixed allowances"}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Overtime Rates"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsx(lt,{control:t.control,name:"overtime_rate_multiplier",render:({field:o})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Overtime Multiplier"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.1",placeholder:"1.5",...o})}),s.jsx(hh,{children:"e.g., 1.5 = time and a half"}),s.jsx(ut,{})]})})})]}),s.jsxs(Z,{className:"bg-muted/50",children:[s.jsx(ne,{children:s.jsx(re,{className:"text-lg",children:"Pay Summary"})}),s.jsx(se,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic Salary"}),s.jsx("p",{className:"text-lg font-semibold",children:de(e)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Housing"}),s.jsx("p",{className:"text-lg font-semibold",children:de(n)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport"}),s.jsx("p",{className:"text-lg font-semibold",children:de(r)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Salary"}),s.jsx("p",{className:"text-xl font-bold text-primary",children:de(a)})]})]})})]})]})}const jJe=ad({employee_number:Ge().min(1,"Employee number is required"),nrc_number:Ge().optional(),tpin:Ge().optional(),napsa_number:Ge().optional(),nhima_number:Ge().optional(),full_name:Ge().min(1,"Full name is required"),date_of_birth:Ge().optional(),gender:Ge().optional(),nationality:Ge().optional(),marital_status:Ge().optional(),phone:Ge().optional(),address:Ge().optional(),email:Ge().email().optional().or(UX("")),department:Ge().optional(),division:Ge().optional(),position:Ge().optional(),job_grade:Ge().optional(),cost_centre:Ge().optional(),contract_type:Ge().optional(),employment_status:Ge().default("active"),employment_date:Ge().min(1,"Employment date is required"),contract_end_date:Ge().optional(),currency:Ge().default("ZMW"),pay_point:Ge().optional(),bank_name:Ge().optional(),bank_branch:Ge().optional(),bank_account_number:Ge().optional(),has_gratuity:$B().default(!1),gratuity_rate:Ge().optional(),rate_type:Ge().default("monthly"),basic_salary:Ge().min(1,"Basic salary is required"),pay_rate:Ge().optional(),housing_allowance:Ge().optional(),transport_allowance:Ge().optional(),other_allowances:Ge().optional(),overtime_rate_multiplier:Ge().optional(),send_invite:$B().default(!1)});function _Je(){const t=Fn(),{data:e}=fd(),{user:n}=dt(),[r,i]=j.useState("personal"),[a,o]=j.useState(!1),l=sd({resolver:id(jJe),defaultValues:{employment_status:"active",has_gratuity:!1,send_invite:!1,currency:"ZMW",rate_type:"monthly",nationality:"Zambian"}}),c=async h=>{o(!0);try{if(!n){G.error("You must be logged in");return}const f=await ze.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId)){G.error("No company profile found for your account");return}const m=await es(Se(ae,ee.EMPLOYEES),{employeeNumber:h.employee_number,nrcNumber:h.nrc_number||null,tpin:h.tpin||null,napsaNumber:h.napsa_number||null,nhimaNumber:h.nhima_number||null,fullName:h.full_name,dateOfBirth:h.date_of_birth||null,gender:h.gender||null,nationality:h.nationality||null,maritalStatus:h.marital_status||null,phone:h.phone||null,address:h.address||null,email:h.email||null,department:h.department||null,division:h.division||null,position:h.position||null,jobGrade:h.job_grade||null,costCentre:h.cost_centre||null,contractType:h.contract_type||null,employmentStatus:h.employment_status||"active",employmentDate:h.employment_date,contractEndDate:h.contract_end_date||null,hasGratuity:h.has_gratuity||!1,gratuityRate:h.gratuity_rate?Number(h.gratuity_rate):0,bankName:h.bank_name||null,bankBranch:h.bank_branch||null,bankAccountNumber:h.bank_account_number||null,basicSalary:Number(h.basic_salary),housingAllowance:h.housing_allowance?Number(h.housing_allowance):0,transportAllowance:h.transport_allowance?Number(h.transport_allowance):0,otherAllowances:h.other_allowances?Number(h.other_allowances):0,userId:n.id,companyId:f.companyId,createdAt:Ie(),updatedAt:Ie()}),v=h.contract_type==="consultant";if(await fr(et(ae,ee.EMPLOYEE_PAYROLL_PROFILES,`${f.companyId}_${m.id}`),{employeeId:m.id,companyId:f.companyId,rateType:h.rate_type,payRate:h.pay_rate?Number(h.pay_rate):null,overtimeRateMultiplier:h.overtime_rate_multiplier?Number(h.overtime_rate_multiplier):1.5,currency:h.currency,applyPaye:!v,applyNapsa:!v,applyNhima:!v,isConsultant:v,applyWht:v,consultantType:v?"local":null,createdAt:Ie(),updatedAt:Ie()}),h.send_invite&&h.email)try{await Ps.sendInvitation({inviteeName:h.full_name,email:h.email,role:"staff",loginUrl:`${window.location.origin}/auth`})}catch{const y=(e==null?void 0:e.companyName)||"ZedBooks";G.warning(`Employee created, but invite setup failed for ${y}`)}G.success("Employee created successfully"),t(`/employees/${m.id}/payroll-setup`)}catch{G.error("Failed to create employee")}finally{o(!1)}},u=()=>{r==="personal"?i("engagement"):r==="engagement"&&i("pay")},d=()=>{r==="pay"?i("engagement"):r==="engagement"&&i("personal")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Add New Employee"}),s.jsx("p",{className:"text-muted-foreground",children:"Complete the onboarding form in 3 steps"})]})]}),s.jsx(g1,{...l,children:s.jsx("form",{onSubmit:l.handleSubmit(c),children:s.jsxs(Tb,{value:r,onValueChange:i,className:"space-y-6",children:[s.jsxs(xg,{className:"grid w-full grid-cols-3",children:[s.jsxs(wi,{value:"personal",className:"flex items-center gap-2",children:[s.jsx("span",{className:"hidden sm:inline",children:"1."})," Personal Details"]}),s.jsxs(wi,{value:"engagement",className:"flex items-center gap-2",children:[s.jsx("span",{className:"hidden sm:inline",children:"2."})," Engagement"]}),s.jsxs(wi,{value:"pay",className:"flex items-center gap-2",children:[s.jsx("span",{className:"hidden sm:inline",children:"3."})," Pay"]})]}),s.jsx(Z,{children:s.jsxs(se,{className:"pt-6",children:[s.jsx(ji,{value:"personal",className:"mt-0",children:s.jsx(vJe,{form:l})}),s.jsx(ji,{value:"engagement",className:"mt-0",children:s.jsx(bJe,{form:l})}),s.jsx(ji,{value:"pay",className:"mt-0",children:s.jsx(wJe,{form:l})})]})}),r==="pay"&&s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Employee Invite"}),s.jsx(wt,{children:"Send login credentials to the employee"})]}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xu,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx(X,{children:"Send Invite Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send login credentials to employee's email"})]})]}),s.jsx(us,{checked:l.watch("send_invite"),onCheckedChange:h=>l.setValue("send_invite",h),disabled:!l.watch("email")})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(K,{type:"button",variant:"outline",onClick:d,disabled:r==="personal",children:"Previous"}),s.jsx("div",{className:"flex gap-2",children:r!=="pay"?s.jsxs(K,{type:"button",onClick:u,children:["Next",s.jsx(l8,{className:"h-4 w-4 ml-1"})]}):s.jsxs(K,{type:"submit",disabled:a,children:[s.jsx(bh,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save & Setup Payroll"]})})]})]})})})]})}const NJe=ad({full_name:Ge().min(2,"Name must be at least 2 characters"),employee_number:Ge().min(1,"Employee number is required"),position:Ge().optional(),department:Ge().optional(),email:Ge().email().optional().or(UX("")),phone:Ge().optional(),basic_salary:Ge().min(1,"Basic salary is required"),housing_allowance:Ge().optional(),transport_allowance:Ge().optional(),other_allowances:Ge().optional(),employment_date:Ge().min(1,"Employment date is required"),employment_status:zX(["active","inactive","terminated"]),tpin:Ge().optional(),napsa_number:Ge().optional(),nhima_number:Ge().optional(),bank_name:Ge().optional(),bank_branch:Ge().optional(),bank_account_number:Ge().optional()}),SJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function EJe(){const t=Fn(),{id:e}=Yh(),{user:n}=dt(),{data:r,isLoading:i}=Ee({queryKey:["employee",e,n==null?void 0:n.id],queryFn:async()=>{if(!e||!n)return null;const l=await ze.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return null;const c=et(ae,ee.EMPLOYEES,e),u=await bi(c);if(!u.exists())return null;const d=u.data(),h=d.companyId??d.company_id;return h&&h!==l.companyId?null:{id:u.id,...d}},enabled:!!(e&&n)}),a=sd({resolver:id(NJe)});j.useEffect(()=>{r&&a.reset({full_name:String(r.fullName??r.full_name??""),employee_number:String(r.employeeNumber??r.employee_number??""),position:String(r.position??""),department:String(r.department??""),email:String(r.email??""),phone:String(r.phone??""),basic_salary:String(r.basicSalary??r.basic_salary??""),housing_allowance:String(r.housingAllowance??r.housing_allowance??0),transport_allowance:String(r.transportAllowance??r.transport_allowance??0),other_allowances:String(r.otherAllowances??r.other_allowances??0),employment_date:SJe(r.employmentDate??r.employment_date),employment_status:String(r.employmentStatus??r.employment_status??"active"),tpin:String(r.tpin??""),napsa_number:String(r.napsaNumber??r.napsa_number??""),nhima_number:String(r.nhimaNumber??r.nhima_number??""),bank_name:String(r.bankName??r.bank_name??""),bank_branch:String(r.bankBranch??r.bank_branch??""),bank_account_number:String(r.bankAccountNumber??r.bank_account_number??"")})},[r,a]);const o=async l=>{try{if(!e||!n){G.error("You must be logged in");return}const c=await ze.getPrimaryMembershipByUser(n.id);if(!(c!=null&&c.companyId)){G.error("No company profile found for your account");return}await fr(et(ae,ee.EMPLOYEES,e),{companyId:c.companyId,employeeNumber:l.employee_number,fullName:l.full_name,position:l.position||null,department:l.department||null,email:l.email||null,phone:l.phone||null,basicSalary:Number(l.basic_salary),housingAllowance:l.housing_allowance?Number(l.housing_allowance):0,transportAllowance:l.transport_allowance?Number(l.transport_allowance):0,otherAllowances:l.other_allowances?Number(l.other_allowances):0,employmentDate:l.employment_date,employmentStatus:l.employment_status,tpin:l.tpin||null,napsaNumber:l.napsa_number||null,nhimaNumber:l.nhima_number||null,bankName:l.bank_name||null,bankBranch:l.bank_branch||null,bankAccountNumber:l.bank_account_number||null,updatedAt:Ie()},{merge:!0}),G.success("Employee updated successfully"),t("/employees")}catch{G.error("Failed to update employee")}};return i?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Edit Employee"}),s.jsx("p",{className:"text-muted-foreground",children:"Update employee information"})]})]}),s.jsx(g1,{...a,children:s.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-6",children:[s.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:a.control,name:"full_name",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Full Name *"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"employee_number",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employee Number *"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"position",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Position"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"department",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Department"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"email",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Email"}),s.jsx(ot,{children:s.jsx(Y,{type:"email",...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"phone",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Phone"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"employment_date",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employment Date *"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"employment_status",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employment Status *"}),s.jsxs(gt,{onValueChange:l.onChange,defaultValue:l.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{})})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"active",children:"Active"}),s.jsx(ye,{value:"inactive",children:"Inactive"}),s.jsx(ye,{value:"terminated",children:"Terminated"})]})]}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Salary Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lt,{control:a.control,name:"basic_salary",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Basic Salary (ZMW) *"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"housing_allowance",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Housing Allowance (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"transport_allowance",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Transport Allowance (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"other_allowances",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Other Allowances (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",...l})}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Statutory Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:a.control,name:"tpin",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"TPIN"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"napsa_number",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"NAPSA Number"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"nhima_number",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"NHIMA Number"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Bank Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:a.control,name:"bank_name",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Bank Name"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"bank_branch",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Branch"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:a.control,name:"bank_account_number",render:({field:l})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Account Number"}),s.jsx(ot,{children:s.jsx(Y,{...l})}),s.jsx(ut,{})]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),s.jsx(K,{type:"submit",children:"Update Employee"})]})]})})]})}const AJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function TJe(){const t=Fn(),{user:e}=dt(),[n,r]=j.useState(null),[i,a]=j.useState(!1),o=()=>{const d=["full_name","employee_number","position","department","email","phone","basic_salary","housing_allowance","transport_allowance","other_allowances","employment_date","employment_status","tpin","napsa_number","nhima_number","bank_name","bank_branch","bank_account_number"],h=["John Doe","EMP001","Software Engineer","IT","john@example.com","+260971234567","15000","3000","1000","500","2024-01-01","active","1234567890","NAPSA123","NHIMA123","Zanaco","Cairo Road","1234567890"],f=[d.join(","),h.join(",")].join(`
`),m=new Blob([f],{type:"text/csv"}),v=window.URL.createObjectURL(m),p=document.createElement("a");p.href=v,p.download="employee_template.csv",p.click(),window.URL.revokeObjectURL(v),G.success("Template downloaded")},l=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=d=>{const h=d.split(`
`).filter(m=>m.trim()),f=h[0].split(",").map(m=>m.trim());return h.slice(1).map(m=>{const v=m.split(",").map(y=>y.trim()),p={};return f.forEach((y,b)=>{p[y]=v[b]||null}),p})},u=async()=>{if(!n){G.error("Please select a file");return}a(!0);try{if(!e)throw new Error("Not authenticated");const d=await ze.getPrimaryMembershipByUser(e.id);if(!(d!=null&&d.companyId))throw new Error("No company profile found for your account");const h=await n.text(),m=c(h).map(y=>({userId:e.id,companyId:d.companyId,fullName:y.full_name||"",employeeNumber:y.employee_number||"",position:y.position||null,department:y.department||null,email:y.email||null,phone:y.phone||null,basicSalary:y.basic_salary?Number(y.basic_salary):0,housingAllowance:y.housing_allowance?Number(y.housing_allowance):0,transportAllowance:y.transport_allowance?Number(y.transport_allowance):0,otherAllowances:y.other_allowances?Number(y.other_allowances):0,employmentDate:y.employment_date||null,employmentStatus:y.employment_status||"active",tpin:y.tpin||null,napsaNumber:y.napsa_number||null,nhimaNumber:y.nhima_number||null,bankName:y.bank_name||null,bankBranch:y.bank_branch||null,bankAccountNumber:y.bank_account_number||null,createdAt:Ie(),updatedAt:Ie()})),v=Se(ae,ee.EMPLOYEES),p=AJe(m,400);for(const y of p){const b=Ql(ae);y.forEach(x=>{b.set(et(v),x)}),await b.commit()}G.success(`Successfully uploaded ${m.length} employees`),t("/employees")}catch{G.error("Failed to upload employees. Please check your CSV format.")}finally{a(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload Employees"}),s.jsx("p",{className:"text-muted-foreground",children:"Upload multiple employees using a CSV file"})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Download the CSV template below"}),s.jsx("li",{children:"Fill in your employee data following the template format"}),s.jsx("li",{children:"Make sure all required fields are filled (full_name, employee_number, basic_salary, employment_date)"}),s.jsx("li",{children:"Save your file as CSV format"}),s.jsx("li",{children:"Upload your completed CSV file"})]})]}),s.jsx("div",{className:"flex gap-4",children:s.jsxs(K,{variant:"outline",onClick:o,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload CSV File"}),s.jsx(Y,{type:"file",accept:".csv",onChange:l,disabled:i})]}),n&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",n.name]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(K,{variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),s.jsxs(K,{onClick:u,disabled:i||!n,children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),i?"Uploading...":"Upload Employees"]})]})]})]})}const CJe=t=>{const e=String(t||"").toLowerCase().trim();return e==="final"||e==="approved"?"processed":e==="completed"?"paid":e==="pending_approval"?"pending_approval":["draft","trial","processed","paid","payment_reversed","reversed"].includes(e)?e:"draft"},PJe=t=>t==="pending_approval"?"Pending Approval":t==="trial"?"Trial":t==="processed"?"Posted":t==="paid"?"Paid":t==="payment_reversed"?"Payment Reversed":t==="reversed"?"Reversed":"Draft",IJe=t=>t==="paid"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t==="payment_reversed"?"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200":t==="processed"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t==="reversed"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t==="pending_approval"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":t==="trial"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";function kJe(){const t=Fn(),{user:e}=dt(),[n,r]=j.useState("all"),{data:i,isLoading:a}=Ee({queryKey:["payrollRuns",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const l=await ze.getPrimaryMembershipByUser(e.id);if(!(l!=null&&l.companyId))return[];const c=Se(ae,ee.PAYROLL_RUNS);return(await Pe(Ce(c,ge("companyId","==",l.companyId),QN("runDate","desc")))).docs.map(d=>{const h=d.data();return{id:d.id,runDate:String(h.runDate??h.run_date??""),periodStart:String(h.periodStart??h.period_start??""),periodEnd:String(h.periodEnd??h.period_end??""),totalGross:Number(h.totalGross??h.total_gross??0),totalDeductions:Number(h.totalDeductions??h.total_deductions??0),totalNet:Number(h.totalNet??h.total_net??0),status:CJe(h.payrollStatus??h.payroll_status??h.status),payrollNumber:h.payrollNumber??h.payroll_number??null,journalEntryId:h.journalEntryId??h.journal_entry_id??h.glJournalId??h.gl_journal_id??null,paymentJournalEntryId:h.paymentJournalEntryId??h.payment_journal_entry_id??null,reversalReferenceId:h.reversalReferenceId??h.reversal_reference_id??h.reversalJournalEntryId??h.reversal_journal_entry_id??null}}).sort((d,h)=>String(h.runDate).localeCompare(String(d.runDate)))},enabled:!!e}),o=j.useMemo(()=>i?n==="all"?i:i.filter(l=>l.status===n):[],[i,n]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage payroll runs, posting, payments, and reversals"})]}),s.jsxs(K,{onClick:()=>t("/payroll/new"),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Payroll Run"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),s.jsxs(gt,{value:n,onValueChange:l=>r(l),children:[s.jsx(mt,{className:"w-[220px]",children:s.jsx(yt,{placeholder:"Filter status"})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"all",children:"All"}),s.jsx(ye,{value:"draft",children:"Draft"}),s.jsx(ye,{value:"processed",children:"Posted"}),s.jsx(ye,{value:"paid",children:"Paid"}),s.jsx(ye,{value:"payment_reversed",children:"Payment Reversed"}),s.jsx(ye,{value:"reversed",children:"Reversed"})]})]})]}),a?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Run Date"}),s.jsx(H,{children:"Period"}),s.jsx(H,{children:"Total Gross"}),s.jsx(H,{children:"Total Deductions"}),s.jsx(H,{children:"Total Net"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Reversal Reference"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[o.map(l=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:l.runDate?vt(new Date(l.runDate),"dd MMM yyyy"):"-"}),s.jsxs(F,{children:[l.periodStart?vt(new Date(l.periodStart),"dd MMM"):"-"," -"," ",l.periodEnd?vt(new Date(l.periodEnd),"dd MMM yyyy"):"-"]}),s.jsx(F,{children:de(l.totalGross)}),s.jsx(F,{children:de(l.totalDeductions)}),s.jsx(F,{children:de(l.totalNet)}),s.jsx(F,{children:s.jsx(De,{className:IJe(l.status),children:PJe(l.status)})}),s.jsx(F,{className:"font-mono text-xs",children:l.reversalReferenceId||"-"}),s.jsx(F,{className:"text-right",children:l.status==="pending_approval"?s.jsx(K,{variant:"default",size:"sm",onClick:()=>t(`/payroll/${l.id}/approve`),children:"Review & Approve"}):s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>t(`/payroll/${l.id}`),children:"View"})})]},l.id)),o.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No payroll runs found for the selected status."})})]})]})})]})}const Jn=XO,ns=vY,RJe=ZO,pre=j.forwardRef(({className:t,...e},n)=>s.jsx(hb,{ref:n,className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));pre.displayName=hb.displayName;const Kn=j.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(RJe,{children:[s.jsx(pre,{}),s.jsxs(fb,{ref:r,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(cS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(qm,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kn.displayName=fb.displayName;const Gn=({className:t,...e})=>s.jsx("div",{className:_e("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Gn.displayName="DialogHeader";const x1=({className:t,...e})=>s.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});x1.displayName="DialogFooter";const Yn=j.forwardRef(({className:t,...e},n)=>s.jsx(mb,{ref:n,className:_e("text-lg font-semibold leading-none tracking-tight",t),...e}));Yn.displayName=mb.displayName;const md=j.forwardRef(({className:t,...e},n)=>s.jsx(pb,{ref:n,className:_e("text-sm text-muted-foreground",t),...e}));md.displayName=pb.displayName;function OJe({employees:t,additions:e,onAddition:n,onRemove:r}){const[i,a]=j.useState(!1),[o,l]=j.useState("earning"),[c,u]=j.useState(""),[d,h]=j.useState(""),[f,m]=j.useState(""),[v,p]=j.useState(""),[y,b]=j.useState(""),[x,w]=j.useState(""),C=()=>{u(""),h(""),m(""),p(""),b(""),w("")},S=()=>{if(!c)return;let _;if(o==="overtime"){const g=Number(y)*Number(x);_={employee_id:c,type:o,name:d||"Overtime",amount:g}}else if(o==="advance"){const g=Number(f),T=Number(v)||1,E=Math.ceil(g/T);_={employee_id:c,type:o,name:d||"Advance",amount:E,total_amount:g,months_to_pay:T,monthly_deduction:E}}else _={employee_id:c,type:o,name:d||(o==="bonus"?"Bonus":"Additional Earning"),amount:Number(f)};n(_),C(),a(!1)},P=_=>{switch(_){case"earning":return s.jsx(Zn,{className:"h-4 w-4"});case"bonus":return s.jsx(o4,{className:"h-4 w-4"});case"overtime":return s.jsx(Vi,{className:"h-4 w-4"});case"advance":return s.jsx(xh,{className:"h-4 w-4"});default:return null}};return s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Earnings/Deductions"]})}),s.jsxs(Kn,{className:"max-w-md",children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Add Payroll Items"}),s.jsx(md,{children:"Assign earnings, bonuses, overtime, or advances to employees"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Type"}),s.jsxs(gt,{value:o,onValueChange:_=>l(_),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"earning",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Custom Earning"]})}),s.jsx(ye,{value:"bonus",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o4,{className:"h-4 w-4"}),"Bonus"]})}),s.jsx(ye,{value:"overtime",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vi,{className:"h-4 w-4"}),"Overtime"]})}),s.jsx(ye,{value:"advance",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xh,{className:"h-4 w-4"}),"Advance (Deduction)"]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Employee"}),s.jsxs(gt,{value:c,onValueChange:u,children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select employee"})}),s.jsx(pt,{children:t.map(_=>s.jsxs(ye,{value:_.id,children:[_.full_name," (",_.employee_number,")"]},_.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Y,{value:d,onChange:_=>h(_.target.value),placeholder:o==="earning"?"e.g., Commission":o==="bonus"?"e.g., Performance Bonus":o==="overtime"?"e.g., Weekend Overtime":"e.g., Salary Advance"})]}),o==="overtime"?s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Hourly Rate (K)"}),s.jsx(Y,{type:"number",value:y,onChange:_=>b(_.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Hours Worked"}),s.jsx(Y,{type:"number",value:x,onChange:_=>w(_.target.value),placeholder:"0"})]}),y&&x&&s.jsxs("div",{className:"col-span-2 p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Overtime Pay"}),s.jsxs("p",{className:"text-lg font-semibold",children:["K",(Number(y)*Number(x)).toFixed(2)]})]})]}):o==="advance"?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Advance Amount (K)"}),s.jsx(Y,{type:"number",value:f,onChange:_=>m(_.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Months to Repay"}),s.jsx(Y,{type:"number",min:"1",value:v,onChange:_=>p(_.target.value),placeholder:"e.g., 3"})]}),f&&v&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Deduction"}),s.jsxs("p",{className:"text-lg font-semibold",children:["K",Math.ceil(Number(f)/Number(v)).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["To be deducted from net pay over ",v," month(s)"]})]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Amount (K)"}),s.jsx(Y,{type:"number",value:f,onChange:_=>m(_.target.value),placeholder:"0.00"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(K,{onClick:S,disabled:!c,children:"Add to Payroll"})]})]})]}),e.length>0&&s.jsxs("div",{className:"mt-4 border rounded-lg",children:[s.jsx("div",{className:"p-3 border-b bg-muted/50",children:s.jsxs("h4",{className:"font-medium text-sm",children:["Pending Additions (",e.length,")"]})}),s.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:e.map(_=>{const g=t.find(T=>T.id===_.employee_id);return s.jsxs("div",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[P(_.type),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:_.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[g==null?void 0:g.full_name,"  K",_.amount.toFixed(2),_.type==="advance"&&` per month for ${_.months_to_pay} months`]})]})]}),s.jsx(K,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>r(_.id),children:"Remove"})]},_.id)})})]})]})}const DJe=ad({period_start:Ge().min(1,"Start date is required"),period_end:Ge().min(1,"End date is required"),run_date:Ge().min(1,"Run date is required"),notes:Ge().optional()});function MJe(){const{user:t}=dt(),e=Fn(),[n,r]=j.useState(!1),[i,a]=j.useState([]),o=m=>{a([...i,{...m,id:crypto.randomUUID()}])},l=m=>{a(i.filter(v=>v.id!==m))},c=sd({resolver:id(DJe),defaultValues:{run_date:new Date().toISOString().split("T")[0]}}),{data:u}=Ee({queryKey:["new-payroll-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const m=await ze.getPrimaryMembershipByUser(t.id);return(m==null?void 0:m.companyId)??null},enabled:!!t}),{data:d}=Ee({queryKey:["employees",u],queryFn:async()=>{if(!u)return[];const m=Se(ae,ee.EMPLOYEES),v=await Pe(Ce(m,ge("companyId","==",u),ge("employmentStatus","==","active")));return v.empty?(await Pe(Ce(m,ge("companyId","==",u),ge("employment_status","==","active")))).docs.map(y=>{const b=y.data();return{id:y.id,full_name:String(b.fullName??b.full_name??""),employee_number:String(b.employeeNumber??b.employee_number??""),basic_salary:Number(b.basicSalary??b.basic_salary??0),housing_allowance:Number(b.housingAllowance??b.housing_allowance??0),transport_allowance:Number(b.transportAllowance??b.transport_allowance??0),other_allowances:Number(b.otherAllowances??b.other_allowances??0)}}):v.docs.map(p=>{const y=p.data();return{id:p.id,full_name:String(y.fullName??y.full_name??""),employee_number:String(y.employeeNumber??y.employee_number??""),basic_salary:Number(y.basicSalary??y.basic_salary??0),housing_allowance:Number(y.housingAllowance??y.housing_allowance??0),transport_allowance:Number(y.transportAllowance??y.transport_allowance??0),other_allowances:Number(y.otherAllowances??y.other_allowances??0)}})},enabled:!!u}),{data:h}=Ee({queryKey:["open-payroll-period",u],queryFn:async()=>{if(!u)return null;const m=Se(ae,ee.FINANCIAL_PERIODS),v=await Pe(Ce(m,ge("companyId","==",u),ge("status","==","open")));if(v.empty)return null;const p=v.docs.map(y=>{const b=y.data();return{id:y.id,startDate:String(b.startDate??b.start_date??""),endDate:String(b.endDate??b.end_date??""),periodName:String(b.periodName??b.period_name??"")}});return p.sort((y,b)=>b.startDate.localeCompare(y.startDate)),p[0]},enabled:!!u}),f=async m=>{if(!d||d.length===0){G.error("No active employees found");return}r(!0);try{if(!t)throw new Error("Not authenticated");if(!u)throw new Error("Company not found");const p=(await Pe(Ce(Se(ae,ee.ADVANCES),ge("companyId","==",u),ge("status","in",["pending","partial"])))).docs.map(w=>{const C=w.data();return{id:w.id,employee_id:String(C.employeeId??C.employee_id??""),status:String(C.status??""),date_to_deduct:C.dateToDeduct??C.date_to_deduct??null,monthly_deduction:Number(C.monthlyDeduction??C.monthly_deduction??0)||null,remaining_balance:Number(C.remainingBalance??C.remaining_balance??0)||null,amount:Number(C.amount??0)}}).filter(w=>!w.employee_id||!d.some(C=>C.id===w.employee_id)?!1:w.date_to_deduct?w.date_to_deduct<=m.period_end:!0),y=d.map(w=>{const C=p.filter(_=>_.employee_id===w.id);let S=0;C.forEach(_=>{const g=_.monthly_deduction?Math.min(Number(_.monthly_deduction),Number(_.remaining_balance||_.amount)):Number(_.remaining_balance||_.amount);S+=g});const P=sIe(Number(w.basic_salary),Number(w.housing_allowance||0),Number(w.transport_allowance||0),Number(w.other_allowances||0),S);return{employeeId:w.id,employeeName:w.full_name,grossSalary:P.grossSalary,payeDeduction:P.paye,napsaDeduction:P.napsaEmployee,nhimaDeduction:P.nhimaEmployee,otherDeductions:S,netSalary:P.netSalary,basicSalary:P.basicSalary,housingAllowance:P.housingAllowance,transportAllowance:P.transportAllowance,otherAllowances:P.otherAllowances,advancesDeducted:S}}),b=i.map(w=>({employeeId:w.employee_id,type:w.type,name:w.name,amount:w.amount,totalAmount:w.total_amount,monthsToPay:w.months_to_pay,monthlyDeduction:w.monthly_deduction})),x=await To.createPayrollDraft({companyId:u,periodStart:m.period_start,periodEnd:m.period_end,runDate:m.run_date,notes:m.notes||void 0,employees:y.map(w=>({employeeId:w.employeeId,employeeName:w.employeeName,grossSalary:w.grossSalary,payeDeduction:w.payeDeduction,napsaDeduction:w.napsaDeduction,nhimaDeduction:w.nhimaDeduction,otherDeductions:w.otherDeductions,netSalary:w.netSalary,basicSalary:w.basicSalary,housingAllowance:w.housingAllowance,transportAllowance:w.transportAllowance,otherAllowances:w.otherAllowances,advancesDeducted:w.advancesDeducted})),additions:b});G.success("Payroll draft created successfully"),e(`/payroll/${x.payrollRunId}`)}catch{G.error("Failed to create payroll run")}finally{r(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"New Payroll Run"}),s.jsxs("p",{className:"text-muted-foreground",children:["Create a new payroll run for ",(d==null?void 0:d.length)||0," active employees"]})]}),s.jsx(De,{variant:"outline",className:"text-lg px-3 py-1",children:"DRAFT"})]}),s.jsxs(Hu,{children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsx(mre,{children:"Payroll Workflow"}),s.jsxs(Ku,{children:["Payroll follows a strict workflow: ",s.jsx("strong",{children:"Draft -> Processed -> Paid"}),". Draft payrolls can be edited and saved without posting journals. Processing creates the payroll journal entry, and payment creates the settlement journal."]})]}),h&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Open financial period: ",h.periodName||`${h.startDate} to ${h.endDate}`]}),s.jsx(g1,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Payroll Period"}),s.jsx(wt,{children:"Define the period for this payroll run"})]}),s.jsx(se,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lt,{control:c.control,name:"period_start",render:({field:m})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Period Start *"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...m})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:c.control,name:"period_end",render:({field:m})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Period End *"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...m})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:c.control,name:"run_date",render:({field:m})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Run Date *"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...m})}),s.jsx(ut,{})]})})]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Payroll Additions"}),s.jsx(wt,{children:"Add earnings, bonuses, overtime, or advances for this payroll run"})]}),s.jsx(se,{children:s.jsx(OJe,{employees:(d==null?void 0:d.map(m=>({id:m.id,full_name:m.full_name,employee_number:m.employee_number})))||[],additions:i,onAddition:o,onRemove:l})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Notes"})}),s.jsx(se,{children:s.jsx(lt,{control:c.control,name:"notes",render:({field:m})=>s.jsxs(at,{children:[s.jsx(ot,{children:s.jsx(Pn,{...m,rows:3,placeholder:"Add any notes for this payroll run..."})}),s.jsx(ut,{})]})})})]}),d&&d.length>0&&s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Employees to Process"}),s.jsxs(wt,{children:[d.length," active employees will be included"]})]}),s.jsx(se,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Basic Salary"}),s.jsx("p",{className:"text-xl font-bold",children:de(d.reduce((m,v)=>m+Number(v.basic_salary||0),0))})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Housing"}),s.jsx("p",{className:"text-xl font-bold",children:de(d.reduce((m,v)=>m+Number(v.housing_allowance||0),0))})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transport"}),s.jsx("p",{className:"text-xl font-bold",children:de(d.reduce((m,v)=>m+Number(v.transport_allowance||0),0))})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Other Allowances"}),s.jsx("p",{className:"text-xl font-bold",children:de(d.reduce((m,v)=>m+Number(v.other_allowances||0),0))})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>e("/payroll"),children:"Cancel"}),s.jsxs(K,{type:"submit",disabled:n,children:[s.jsx(bh,{className:"h-4 w-4 mr-2"}),n?"Creating...":"Save as Draft"]})]})]})})]})}var gre="AlertDialog",[LJe,Jtt]=ps(gre,[nY]),dc=nY(),yre=t=>{const{__scopeAlertDialog:e,...n}=t,r=dc(e);return s.jsx(XO,{...r,...n,modal:!0})};yre.displayName=gre;var $Je="AlertDialogTrigger",vre=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=dc(n);return s.jsx(vY,{...i,...r,ref:e})});vre.displayName=$Je;var FJe="AlertDialogPortal",xre=t=>{const{__scopeAlertDialog:e,...n}=t,r=dc(e);return s.jsx(ZO,{...r,...n})};xre.displayName=FJe;var VJe="AlertDialogOverlay",bre=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=dc(n);return s.jsx(hb,{...i,...r,ref:e})});bre.displayName=VJe;var jm="AlertDialogContent",[BJe,UJe]=LJe(jm),zJe=R9("AlertDialogContent"),wre=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,a=dc(n),o=j.useRef(null),l=Ft(e,o),c=j.useRef(null);return s.jsx(Y_e,{contentName:jm,titleName:jre,docsSlug:"alert-dialog",children:s.jsx(BJe,{scope:n,cancelRef:c,children:s.jsxs(fb,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:$e(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(zJe,{children:r}),s.jsx(WJe,{contentRef:o})]})})})});wre.displayName=jm;var jre="AlertDialogTitle",_re=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=dc(n);return s.jsx(mb,{...i,...r,ref:e})});_re.displayName=jre;var Nre="AlertDialogDescription",Sre=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=dc(n);return s.jsx(pb,{...i,...r,ref:e})});Sre.displayName=Nre;var qJe="AlertDialogAction",Ere=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=dc(n);return s.jsx(cS,{...i,...r,ref:e})});Ere.displayName=qJe;var Are="AlertDialogCancel",Tre=j.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=UJe(Are,n),a=dc(n),o=Ft(e,i);return s.jsx(cS,{...a,...r,ref:o})});Tre.displayName=Are;var WJe=({contentRef:t})=>{const e=`\`${jm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${jm}\` by passing a \`${Nre}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${jm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},HJe=yre,KJe=vre,GJe=xre,Cre=bre,Pre=wre,Ire=Ere,kre=Tre,Rre=_re,Ore=Sre;const Mo=HJe,du=KJe,YJe=GJe,Dre=j.forwardRef(({className:t,...e},n)=>s.jsx(Cre,{className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Dre.displayName=Cre.displayName;const Ya=j.forwardRef(({className:t,...e},n)=>s.jsxs(YJe,{children:[s.jsx(Dre,{}),s.jsx(Pre,{ref:n,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ya.displayName=Pre.displayName;const Qa=({className:t,...e})=>s.jsx("div",{className:_e("flex flex-col space-y-2 text-center sm:text-left",t),...e});Qa.displayName="AlertDialogHeader";const Xa=({className:t,...e})=>s.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xa.displayName="AlertDialogFooter";const Za=j.forwardRef(({className:t,...e},n)=>s.jsx(Rre,{ref:n,className:_e("text-lg font-semibold",t),...e}));Za.displayName=Rre.displayName;const Ja=j.forwardRef(({className:t,...e},n)=>s.jsx(Ore,{ref:n,className:_e("text-sm text-muted-foreground",t),...e}));Ja.displayName=Ore.displayName;const eo=j.forwardRef(({className:t,...e},n)=>s.jsx(Ire,{ref:n,className:_e(IO(),t),...e}));eo.displayName=Ire.displayName;const to=j.forwardRef(({className:t,...e},n)=>s.jsx(kre,{ref:n,className:_e(IO({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));to.displayName=kre.displayName;const QJe=t=>{const e=String(t||"").toLowerCase().trim();return e==="approved"?"processed":e==="completed"?"paid":["draft","trial","processed","paid","payment_reversed","reversed","final"].includes(e)?e:"draft"};function XJe(){const{user:t}=dt(),{data:e}=$s(),n=Fn(),{id:r}=Yh(),i=Jt(),[a,o]=j.useState(""),[l,c]=j.useState(new Date().toISOString().split("T")[0]),[u,d]=j.useState(""),[h,f]=j.useState(""),{data:m,isLoading:v}=Ee({queryKey:["payrollRun",r],queryFn:async()=>{if(!r)return null;const z=await bi(et(ae,ee.PAYROLL_RUNS,r));if(!z.exists())return null;const ie=z.data();return{id:z.id,company_id:ie.companyId??ie.organizationId??null,run_date:String(ie.runDate??ie.run_date??""),period_start:String(ie.periodStart??ie.period_start??""),period_end:String(ie.periodEnd??ie.period_end??""),payroll_status:QJe(ie.payrollStatus??ie.payroll_status??ie.status??"draft"),status:ie.status??null,payroll_number:ie.payrollNumber??ie.payroll_number??null,total_gross:Number(ie.totalGross??ie.total_gross??0),total_deductions:Number(ie.totalDeductions??ie.total_deductions??0),total_net:Number(ie.totalNet??ie.total_net??0),journal_entry_id:ie.journalEntryId??ie.journal_entry_id??null,payment_journal_entry_id:ie.paymentJournalEntryId??ie.payment_journal_entry_id??null,reversal_journal_entry_id:ie.reversalJournalEntryId??ie.reversal_journal_entry_id??null,payment_reversal_journal_entry_id:ie.paymentReversalJournalEntryId??ie.payment_reversal_journal_entry_id??null,payment_reversal_reason:ie.paymentReversalReason??ie.payment_reversal_reason??null,payment_reversed_by:ie.paymentReversedBy??ie.payment_reversed_by??null,payment_reversed_at:ie.paymentReversedAt??ie.payment_reversed_at??null,reversal_reference_id:ie.reversalReferenceId??ie.reversal_reference_id??null,reversal_reason:ie.reversalReason??ie.reversal_reason??null,reversed_by:ie.reversedBy??ie.reversed_by??null,reversed_at:ie.reversedAt??ie.reversed_at??null,gl_journal_id:ie.glJournalId??ie.gl_journal_id??null}},enabled:!!(t&&r)}),{data:p}=Ee({queryKey:["payrollItems",r],queryFn:async()=>{if(!r)return[];const z=Se(ae,ee.PAYROLL_ITEMS);let ie=await Pe(Ce(z,ge("payrollRunId","==",r)));ie.empty&&(ie=await Pe(Ce(z,ge("payroll_run_id","==",r))));const ve=ie.docs.map(fe=>({id:fe.id,row:fe.data()})),xe=Array.from(new Set(ve.map(({row:fe})=>String(fe.employeeId??fe.employee_id??"")).filter(Boolean))),Be=await Promise.all(xe.map(async fe=>{const me=await bi(et(ae,ee.EMPLOYEES,fe));return{employeeDocId:fe,snap:me}})),he=new Map;return Be.forEach(({employeeDocId:fe,snap:me})=>{if(!me.exists())return;const ce=me.data();he.set(fe,{full_name:String(ce.fullName??ce.full_name??""),employee_number:String(ce.employeeNumber??ce.employee_number??""),email:ce.email??null,position:ce.position??null,department:ce.department??null,tpin:ce.tpin??null,napsa_number:ce.napsaNumber??ce.napsa_number??null,nhima_number:ce.nhimaNumber??ce.nhima_number??null,bank_name:ce.bankName??ce.bank_name??null,bank_account_number:ce.bankAccountNumber??ce.bank_account_number??null})}),ve.map(({id:fe,row:me})=>{const ce=String(me.employeeId??me.employee_id??"");return{id:fe,employee_id:ce,basic_salary:Number(me.basicSalary??me.basic_salary??0),housing_allowance:Number(me.housingAllowance??me.housing_allowance??0),transport_allowance:Number(me.transportAllowance??me.transport_allowance??0),other_allowances:Number(me.otherAllowances??me.other_allowances??0),gross_salary:Number(me.grossSalary??me.gross_salary??0),advances_deducted:Number(me.advancesDeducted??me.advances_deducted??0),net_salary:Number(me.netSalary??me.net_salary??0),paye:Number(me.paye??0),napsa_employee:Number(me.napsaEmployee??me.napsa_employee??0),napsa_employer:Number(me.napsaEmployer??me.napsa_employer??0),nhima_employee:Number(me.nhimaEmployee??me.nhima_employee??0),nhima_employer:Number(me.nhimaEmployer??me.nhima_employer??0),total_deductions:Number(me.totalDeductions??me.total_deductions??0),employees:he.get(ce)??null}})},enabled:!!(t&&r)}),{data:y=[]}=Ee({queryKey:["payroll-payment-accounts",m==null?void 0:m.id],queryFn:async()=>m!=null&&m.company_id?(await Pe(Ce(Se(ae,ee.CHART_OF_ACCOUNTS),ge("companyId","==",m.company_id),ge("accountType","==","Asset"),ge("status","==","active")))).docs.map(ie=>{const ve=ie.data();return{id:ie.id,accountName:String(ve.accountName??"")}}).filter(ie=>ie.accountName).sort((ie,ve)=>ie.accountName.localeCompare(ve.accountName)):[],enabled:!!(m!=null&&m.company_id)}),b=j.useMemo(()=>{if(!y.length)return"";const z=y.find(ie=>{const ve=ie.accountName.toLowerCase();return ve.includes("bank")||ve.includes("cash")});return(z==null?void 0:z.id)||y[0].id},[y]);j.useEffect(()=>{!a&&b&&o(b)},[a,b]);const{data:x}=Ee({queryKey:["payroll-journals",r],queryFn:async()=>{if(!r)return[];const z=Se(ae,ee.PAYROLL_JOURNALS);let ie=await Pe(Ce(z,ge("payrollRunId","==",r)));ie.empty&&(ie=await Pe(Ce(z,ge("payroll_run_id","==",r))));const ve=ie.docs.map(Ke=>({id:Ke.id,row:Ke.data()})),xe=new Set(ve.map(({row:Ke})=>String(Ke.journalEntryId??Ke.journal_entry_id??"")).filter(Boolean));[m==null?void 0:m.journal_entry_id,m==null?void 0:m.payment_journal_entry_id,m==null?void 0:m.reversal_journal_entry_id,m==null?void 0:m.payment_reversal_journal_entry_id].map(Ke=>String(Ke||"").trim()).filter(Boolean).forEach(Ke=>xe.add(Ke));const Be=await Promise.all(Array.from(xe).map(async Ke=>{const rt=await bi(et(ae,ee.JOURNAL_ENTRIES,Ke));return{entryId:Ke,snap:rt}})),he=new Map;Be.forEach(({entryId:Ke,snap:rt})=>{if(!rt.exists()){he.set(Ke,null);return}const zt=rt.data();he.set(Ke,{id:rt.id,reference_number:zt.referenceNumber??zt.reference_number??null,entry_date:String(zt.entryDate??zt.entry_date??""),description:zt.description??null,is_posted:!!(zt.isPosted??zt.is_posted)})});const fe=ve.map(({id:Ke,row:rt})=>{const zt=String(rt.journalEntryId??rt.journal_entry_id??"");return{id:Ke,description:rt.description??null,journal_entries:he.get(zt)??null}}),me=new Set(fe.map(Ke=>{var rt;return((rt=Ke.journal_entries)==null?void 0:rt.id)||null}).filter(Boolean)),ce=Array.from(xe).filter(Ke=>!me.has(Ke)).map(Ke=>({id:`fallback_${Ke}`,description:"Linked payroll journal",journal_entries:he.get(Ke)??null}));return[...fe,...ce]},enabled:!!(m&&["processed","paid","payment_reversed","reversed","final"].includes(String(m.payroll_status||"").toLowerCase()))}),w=()=>{i.invalidateQueries({queryKey:["payrollRun",r]}),i.invalidateQueries({queryKey:["payrollRuns",t==null?void 0:t.id]}),i.invalidateQueries({queryKey:["payrollItems",r]}),i.invalidateQueries({queryKey:["payroll-journals",r]}),i.invalidateQueries({queryKey:["journal-entries"]}),i.invalidateQueries({queryKey:["financial-reports"]}),i.invalidateQueries({queryKey:["dashboard"]})},C=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await To.runPayrollTrial({payrollRunId:r})},onSuccess:()=>{w(),G.success("Trial payroll run completed. Review the calculations before finalizing.")},onError:z=>{G.error(z.message||"Failed to run trial payroll")}}),S=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await Gl(et(ae,ee.PAYROLL_RUNS,r),{payrollStatus:"draft",trialRunAt:null,trialRunBy:null,updatedAt:Ie()})},onSuccess:()=>{w(),G.success("Payroll reverted to draft. You can make changes and re-run trial.")},onError:z=>{G.error(z.message||"Failed to revert payroll")}}),P=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await To.finalizePayroll({payrollRunId:r})},onSuccess:()=>{w(),G.success("Payroll posted to the General Ledger.")},onError:z=>{G.error(z.message||"Failed to finalize payroll")}}),_=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");if(!a)throw new Error("Select a payment account before paying salaries.");await To.payPayroll({payrollRunId:r,paymentAccountId:a,paymentDate:l})},onSuccess:()=>{w(),G.success("Payroll payment posted successfully.")},onError:z=>{G.error(z.message||"Failed to pay payroll")}}),g=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");const z=u.trim();if(!z)throw new Error("Payment reversal reason is required.");await To.reversePayrollPayment({payrollRunId:r,reason:z})},onSuccess:()=>{w(),d(""),G.success("Payroll payment reversed. You can now reverse the payroll accrual.")},onError:z=>{G.error(z.message||"Failed to reverse payroll payment")}}),T=qe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");const z=h.trim();if(!z)throw new Error("Reversal reason is required.");await To.reversePayroll({payrollRunId:r,reason:z})},onSuccess:()=>{w(),f(""),G.success("Payroll reversed. Original and reversal entries are kept for audit.")},onError:z=>{G.error(z.message||"Failed to reverse payroll")}}),E=()=>{if(!p||!m)return;const z=["Employee Number","Name","Basic Salary","Housing","Transport","Other Allowances","Gross Salary","Advances Deducted","Net Salary","PAYE (Employer)","NAPSA Employee (Employer)","NAPSA Employer","NHIMA Employee (Employer)","NHIMA Employer"],ie=p.map(fe=>{var me,ce;return[((me=fe.employees)==null?void 0:me.employee_number)??"",((ce=fe.employees)==null?void 0:ce.full_name)??"",fe.basic_salary,fe.housing_allowance,fe.transport_allowance,fe.other_allowances,fe.gross_salary,fe.advances_deducted??0,fe.net_salary,fe.paye,fe.napsa_employee,fe.napsa_employer,fe.nhima_employee,fe.nhima_employer]}),ve=[z.join(","),...ie.map(fe=>fe.join(","))].join(`
`),xe=new Blob([ve],{type:"text/csv"}),Be=window.URL.createObjectURL(xe),he=document.createElement("a");he.href=Be,he.download=`payroll_${vt(new Date(m.run_date),"yyyy-MM-dd")}.csv`,he.click(),G.success("Payroll exported successfully")},A=z=>{n(`/payroll/${r}/payslip/${z}`)},I=async()=>{!p||!m||!window.confirm(`Queue payslip emails for ${p.length} employees?`)||G.promise(async()=>{for(const ie of p){const ve=ie.employees;ve!=null&&ve.email&&r&&await To.sendPayslipEmail({payrollRunId:r,employeeId:ie.employee_id})}},{loading:"Queueing payslip emails...",success:"Payslip emails queued successfully!",error:"Failed to queue some emails."})},k=()=>{if(!p||!m)return;let z=`PAYSLIPS - ${new Date(m.period_start).toLocaleDateString()} to ${new Date(m.period_end).toLocaleDateString()}
`;z+="=".repeat(100)+`

`,p.forEach((he,fe)=>{const me=he.employees??{full_name:"Unknown",employee_number:"-",position:null,department:null,tpin:null,napsa_number:null,nhima_number:null,bank_name:null,bank_account_number:null,email:null};z+=`PAYSLIP ${fe+1}
`,z+="-".repeat(100)+`
`,z+=`Employee: ${me.full_name} (${me.employee_number})
`,z+=`Position: ${me.position||"N/A"}
`,z+=`Department: ${me.department||"N/A"}
`,z+=`TPIN: ${me.tpin||"N/A"}
`,z+=`NAPSA: ${me.napsa_number||"N/A"}
`,z+=`NHIMA: ${me.nhima_number||"N/A"}

`,z+=`EARNINGS:
`,z+=`  Basic Salary:        K${he.basic_salary.toFixed(2)}
`,z+=`  Housing Allowance:   K${he.housing_allowance.toFixed(2)}
`,z+=`  Transport Allowance: K${he.transport_allowance.toFixed(2)}
`,z+=`  Other Allowances:    K${he.other_allowances.toFixed(2)}
`,z+=`  Gross Salary:        K${he.gross_salary.toFixed(2)}

`,z+=`DEDUCTIONS:
`,z+=`  NAPSA (5%):          K${he.napsa_employee.toFixed(2)}
`,z+=`  NHIMA (1%):          K${he.nhima_employee.toFixed(2)}
`,z+=`  PAYE:                K${he.paye.toFixed(2)}
`,z+=`  Total Deductions:    K${he.total_deductions.toFixed(2)}

`,z+=`NET PAY:               K${he.net_salary.toFixed(2)}
`,z+=`
Bank: ${me.bank_name||"N/A"}
`,z+=`Account: ${me.bank_account_number||"N/A"}
`,z+=`
`+"=".repeat(100)+`

`});const ie=new Blob([z],{type:"text/plain"}),ve=window.URL.createObjectURL(ie),xe=document.createElement("a");xe.href=ve;const Be=new Date(m.period_start).toLocaleDateString("en-GB",{month:"short",year:"numeric"});xe.download=`Payslips_${Be.replace(" ","_")}.txt`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),window.URL.revokeObjectURL(ve),G.success("Batch payslips downloaded successfully!")},L=z=>{switch(z){case"draft":return s.jsx(De,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Draft"});case"trial":return s.jsx(De,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Trial Run"});case"processed":case"final":return s.jsx(De,{className:"bg-blue-600",children:"Posted"});case"paid":return s.jsx(De,{className:"bg-green-600",children:"Paid"});case"payment_reversed":return s.jsx(De,{variant:"outline",className:"border-rose-500 text-rose-600",children:"Payment Reversed"});case"reversed":return s.jsx(De,{variant:"outline",className:"border-orange-500 text-orange-600",children:"Reversed"});default:return s.jsx(De,{variant:"outline",children:"Unknown"})}},B=m==null?void 0:m.payroll_status,U=["super_admin","admin","hr_manager","financial_manager","accountant"].includes(e||""),V=B==="draft",D=B==="trial",R=B==="processed"||B==="final",W=B==="paid",J=B==="payment_reversed",oe=B==="reversed",Ae=(R||J)&&U;return v?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>n("/payroll"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Details"}),L(B),(m==null?void 0:m.payroll_number)&&s.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:m.payroll_number})]}),s.jsx("p",{className:"text-muted-foreground",children:m&&s.jsxs(s.Fragment,{children:[vt(new Date(m.period_start),"dd MMM")," -"," ",vt(new Date(m.period_end),"dd MMM yyyy")]})})]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[V&&s.jsxs(K,{onClick:()=>C.mutate(),disabled:C.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[C.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(m8,{className:"h-4 w-4 mr-2"}),"Run Trial Payroll"]}),D&&s.jsxs(s.Fragment,{children:[s.jsxs(K,{variant:"outline",onClick:()=>S.mutate(),disabled:S.isPending,children:[S.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Revert to Draft"]}),s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{className:"bg-green-600 hover:bg-green-700",children:[s.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Post Payroll"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsxs(Za,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-amber-500"}),"Post Payroll"]}),s.jsxs(Ja,{className:"space-y-2",children:[s.jsx("p",{children:"This action will:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsx("li",{children:"Post payroll accrual to the General Ledger"}),s.jsx("li",{children:"Create Salary Expense and Salary Payable entries"}),s.jsx("li",{children:"Lock this run for further draft edits"})]}),s.jsx("p",{className:"font-medium mt-4",children:"Are you sure you want to proceed?"})]})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:()=>P.mutate(),disabled:P.isPending,className:"bg-green-600 hover:bg-green-700",children:[P.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Post Payroll"]})]})]})]})]}),R&&s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{className:"bg-green-600 hover:bg-green-700",children:[s.jsx(a8,{className:"h-4 w-4 mr-2"}),"Pay Salaries"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsx(Za,{children:"Post Payroll Payment"}),s.jsx(Ja,{children:"This creates: Dr Salary Payable and Cr Bank/Cash."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Payment Account"}),s.jsxs(gt,{value:a,onValueChange:o,children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select payment account"})}),s.jsx(pt,{children:y.map(z=>s.jsx(ye,{value:z.id,children:z.accountName},z.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Payment Date"}),s.jsx(Y,{type:"date",value:l,onChange:z=>c(z.target.value)})]})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:()=>_.mutate(),disabled:_.isPending||!a,children:[_.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Payment"]})]})]})]}),W&&s.jsxs(s.Fragment,{children:[s.jsx(K,{onClick:I,variant:"outline",children:"Email Payslips"}),s.jsx(K,{onClick:k,variant:"outline",children:"Download All"}),U&&s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{variant:"outline",className:"border-rose-500 text-rose-600 hover:text-rose-600",children:[s.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Reverse Payment"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsxs(Za,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-rose-500"}),"Reverse Payroll Payment"]}),s.jsxs(Ja,{className:"space-y-2",children:[s.jsx("p",{children:"Are you sure you want to reverse salary payment? This action cannot be undone."}),s.jsx("p",{children:"The system will post the opposite payment journal and move payroll to payment_reversed."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Payment Reversal Reason"}),s.jsx(Pn,{value:u,onChange:z=>d(z.target.value),rows:3,placeholder:"Explain why payment reversal is required"})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:()=>g.mutate(),disabled:g.isPending||!u.trim(),className:"bg-rose-600 hover:bg-rose-700",children:[g.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Payment Reversal"]})]})]})]})]}),Ae&&s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{variant:"outline",className:"border-orange-500 text-orange-600 hover:text-orange-600",children:[s.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Reverse Payroll"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsxs(Za,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-orange-500"}),"Reverse Payroll"]}),s.jsxs(Ja,{className:"space-y-2",children:[s.jsx("p",{children:"Are you sure you want to reverse this payroll? This action cannot be undone."}),s.jsx("p",{children:"The system will create opposite journal entries and keep all original records for audit."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Reversal Reason"}),s.jsx(Pn,{value:h,onChange:z=>f(z.target.value),rows:3,placeholder:"Explain the financial correction reason"})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:()=>T.mutate(),disabled:T.isPending||!h.trim(),className:"bg-orange-600 hover:bg-orange-700",children:[T.isPending?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Reversal"]})]})]})]}),s.jsxs(K,{onClick:E,variant:"outline",children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),D&&s.jsx(Z,{className:"border-blue-200 bg-blue-50",children:s.jsx(se,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Mi,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900",children:"Trial Payroll Run"}),s.jsx("p",{className:"text-sm text-blue-700",children:'Review the calculations below. No GL entries have been posted yet. Use "Post Payroll" when ready.'})]})]})})}),(J||!!(m!=null&&m.payment_reversal_journal_entry_id))&&s.jsxs(Z,{className:"border-rose-200 bg-rose-50",children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-lg",children:"Payment Reversal Audit Trail"})}),s.jsxs(se,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment Journal ID:"})," ",s.jsx("span",{className:"font-mono",children:(m==null?void 0:m.payment_journal_entry_id)||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment Reversal Journal ID:"})," ",s.jsx("span",{className:"font-mono",children:(m==null?void 0:m.payment_reversal_journal_entry_id)||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reason:"})," ",(m==null?void 0:m.payment_reversal_reason)||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversed By:"})," ",(m==null?void 0:m.payment_reversed_by)||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversed At:"})," ",m!=null&&m.payment_reversed_at?vt(new Date(m.payment_reversed_at),"dd MMM yyyy HH:mm"):"-"]})]})]}),oe&&s.jsxs(Z,{className:"border-orange-200 bg-orange-50",children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-lg",children:"Reversal Audit Trail"})}),s.jsxs(se,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversal Reference:"})," ",s.jsx("span",{className:"font-mono",children:(m==null?void 0:m.reversal_reference_id)||(m==null?void 0:m.reversal_journal_entry_id)||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reason:"})," ",(m==null?void 0:m.reversal_reason)||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversed By:"})," ",(m==null?void 0:m.reversed_by)||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversed At:"})," ",m!=null&&m.reversed_at?vt(new Date(m.reversed_at),"dd MMM yyyy HH:mm"):"-"]})]})]}),m&&s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-lg",children:"Posting References"})}),s.jsxs(se,{className:"grid gap-2 text-sm md:grid-cols-2",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Journal Entry ID:"})," ",s.jsx("span",{className:"font-mono",children:m.journal_entry_id||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reversal Journal ID:"})," ",s.jsx("span",{className:"font-mono",children:m.reversal_journal_entry_id||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment Journal ID:"})," ",s.jsx("span",{className:"font-mono",children:m.payment_journal_entry_id||"-"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment Reversal Journal ID:"})," ",s.jsx("span",{className:"font-mono",children:m.payment_reversal_journal_entry_id||"-"})]})]})]}),(R||W||J||oe)&&x&&x.length>0&&s.jsxs(Z,{className:"border-green-200 bg-green-50",children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-lg flex items-center gap-2",children:[s.jsx(vv,{className:"h-5 w-5 text-green-600"}),"General Ledger Postings"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"space-y-2",children:x.map(z=>{var ie,ve,xe,Be;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:(ie=z.journal_entries)==null?void 0:ie.reference_number}),s.jsx("p",{className:"text-sm text-muted-foreground",children:z.description})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm",children:((ve=z.journal_entries)==null?void 0:ve.entry_date)&&vt(new Date(z.journal_entries.entry_date),"dd MMM yyyy")}),s.jsx(De,{variant:"outline",className:String(((xe=z.journal_entries)==null?void 0:xe.description)||"").toLowerCase().includes("reversal")?"text-orange-600 border-orange-600":"text-green-600 border-green-600",children:String(((Be=z.journal_entries)==null?void 0:Be.description)||"").toLowerCase().includes("reversal")?"Reversal":"Posted"})]})]},z.id)})}),s.jsx(K,{variant:"link",className:"mt-2 p-0 h-auto text-green-700",onClick:()=>n("/journal-entries"),children:"View all journal entries ->"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Gross"}),s.jsx(re,{className:"text-2xl",children:de(Number((m==null?void 0:m.total_gross)||0))})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Deductions"}),s.jsx(re,{className:"text-2xl text-destructive",children:de(Number((m==null?void 0:m.total_deductions)||0))})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Net"}),s.jsx(re,{className:"text-2xl text-primary",children:de(Number((m==null?void 0:m.total_net)||0))})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Employees"}),s.jsx(re,{className:"text-2xl",children:(p==null?void 0:p.length)||0})]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Payroll Items"}),s.jsx(wt,{children:"Individual employee payroll calculations"})]}),s.jsx(se,{children:s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{className:"text-right",children:"Basic"}),s.jsx(H,{className:"text-right",children:"Allowances"}),s.jsx(H,{className:"text-right",children:"Gross"}),s.jsx(H,{className:"text-right",children:"PAYE"}),s.jsx(H,{className:"text-right",children:"NAPSA"}),s.jsx(H,{className:"text-right",children:"NHIMA"}),s.jsx(H,{className:"text-right",children:"Total Ded."}),s.jsx(H,{className:"text-right",children:"Net Salary"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsx(Dt,{children:p==null?void 0:p.map(z=>{var ie,ve;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:((ie=z.employees)==null?void 0:ie.full_name)||"Unknown"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:((ve=z.employees)==null?void 0:ve.employee_number)||"-"})]})}),s.jsx(F,{className:"text-right",children:de(Number(z.basic_salary))}),s.jsx(F,{className:"text-right",children:de(Number(z.housing_allowance||0)+Number(z.transport_allowance||0)+Number(z.other_allowances||0))}),s.jsx(F,{className:"text-right font-medium",children:de(Number(z.gross_salary))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(z.paye))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(z.napsa_employee))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(z.nhima_employee))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(z.total_deductions))}),s.jsx(F,{className:"text-right font-medium text-primary",children:de(Number(z.net_salary))}),s.jsx(F,{className:"text-right",children:s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>A(z.employee_id),children:[s.jsx(dr,{className:"h-4 w-4 mr-2"}),"Payslip"]})})]},z.id)})})]})})})]})]})}function tM({onUploaded:t}){const[e,n]=j.useState(!1),[r,i]=j.useState(""),a=j.useRef(null),o=Jt(),{user:l}=dt(),{data:c}=Ee({queryKey:["company-settings",l==null?void 0:l.id],queryFn:async()=>{if(!l||!Wo)return null;const f=await ze.getPrimaryMembershipByUser(l.id);if(!f)return null;const[m,v]=await Promise.all([ze.getCompanyById(f.companyId),ze.getCompanySettings(f.companyId)]);return{companyId:f.companyId,companyName:(v==null?void 0:v.companyName)||(m==null?void 0:m.name)||"My Organization",logoUrl:(v==null?void 0:v.logoUrl)||(m==null?void 0:m.logoUrl)||null}},enabled:!!l}),u=qe({mutationFn:async({logoUrl:f,companyName:m})=>{if(!c)throw new Error("No company linked to current user.");await ze.updateCompanyBasics({companyId:c.companyId,logoUrl:f,name:m})},onSuccess:()=>{o.invalidateQueries({queryKey:["company-settings"]}),o.invalidateQueries({queryKey:["company"]}),G.success("Settings updated successfully")},onError:f=>{const m=f instanceof Error?f.message:"Failed to update settings";G.error(m)}});j.useEffect(()=>{t&&t((c==null?void 0:c.logoUrl)||null)},[t,c==null?void 0:c.logoUrl]),j.useEffect(()=>{i((c==null?void 0:c.companyName)||"")},[c==null?void 0:c.companyName]);const d=async f=>{var v;const m=(v=f.target.files)==null?void 0:v[0];if(m){if(!c){G.error("No company linked to this user.");return}if(!m.type.startsWith("image/")){G.error("Please upload an image file");return}if(m.size>5*1024*1024){G.error("File size must be less than 5MB");return}n(!0);try{const p=await CTe.uploadCompanyLogo(c.companyId,m);await u.mutateAsync({logoUrl:p}),t==null||t(p)}catch(p){const y=p instanceof Error?p.message:"Failed to upload logo";G.error(y)}finally{n(!1)}}},h=()=>{const f=r.trim();!f||!c||f===c.companyName||u.mutate({companyName:f})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-20 w-20 rounded-lg border-2 border-dashed border-border flex items-center justify-center overflow-hidden bg-muted",children:c!=null&&c.logoUrl?s.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):s.jsx(Fp,{className:"h-8 w-8 text-muted-foreground"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Company Logo"}),s.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:d,className:"hidden"}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=a.current)==null?void 0:f.click()},disabled:e||!c,children:e?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(rl,{className:"h-4 w-4 mr-2"}),"Upload Logo"]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Company Name"}),s.jsx(Y,{value:r,placeholder:"Enter company name",onChange:f=>i(f.target.value),onBlur:h,disabled:!c})]})]})}const ri=t=>Number(t??0),Ec=t=>String(t??"");function ZJe(){const{user:t}=dt(),e=Fn(),{runId:n,employeeId:r}=Yh(),[i,a]=j.useState(!1),[o,l]=j.useState(!1),{data:c}=fd(),{data:u}=Ee({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const _=await bi(et(ae,ee.PAYROLL_RUNS,n));if(!_.exists())return null;const g=_.data();return{id:_.id,period_start:Ec(g.periodStart??g.period_start),period_end:Ec(g.periodEnd??g.period_end),run_date:Ec(g.runDate??g.run_date)}},enabled:!!(t&&n)}),{data:d,isLoading:h}=Ee({queryKey:["payrollItem",n,r],queryFn:async()=>{if(!n||!r)return null;const _=Se(ae,ee.PAYROLL_ITEMS),g=async(k,L)=>{const B=await Pe(Ce(_,ge(k,"==",n),ge(L,"==",r),Ts(1)));return B.empty?null:B.docs[0]},T=await g("payrollRunId","employeeId")??await g("payroll_run_id","employee_id");if(!T)return null;const E=T.data(),A=Ec(E.employeeId??E.employee_id??r);let I=null;if(A){const k=await bi(et(ae,ee.EMPLOYEES,A));if(k.exists()){const L=k.data();I={full_name:Ec(L.fullName??L.full_name),employee_number:Ec(L.employeeNumber??L.employee_number),position:L.position??null,department:L.department??null,tpin:L.tpin??null,napsa_number:L.napsaNumber??L.napsa_number??null,nhima_number:L.nhimaNumber??L.nhima_number??null,bank_name:L.bankName??L.bank_name??null,bank_account_number:L.bankAccountNumber??L.bank_account_number??null,email:L.email??null}}}return{id:T.id,employee_id:A,basic_salary:ri(E.basicSalary??E.basic_salary),housing_allowance:ri(E.housingAllowance??E.housing_allowance),transport_allowance:ri(E.transportAllowance??E.transport_allowance),other_allowances:ri(E.otherAllowances??E.other_allowances),gross_salary:ri(E.grossSalary??E.gross_salary),napsa_employee:ri(E.napsaEmployee??E.napsa_employee),napsa_employer:ri(E.napsaEmployer??E.napsa_employer),nhima_employee:ri(E.nhimaEmployee??E.nhima_employee),nhima_employer:ri(E.nhimaEmployer??E.nhima_employer),paye:ri(E.paye),advances_deducted:ri(E.advancesDeducted??E.advances_deducted),total_deductions:ri(E.totalDeductions??E.total_deductions),net_salary:ri(E.netSalary??E.net_salary),employees:I}},enabled:!!(t&&n&&r)}),{data:f}=Ee({queryKey:["payroll-additions",n,r],queryFn:async()=>{if(!n||!r)return[];const _=Se(ae,ee.PAYROLL_ADDITIONS);let g=await Pe(Ce(_,ge("payrollRunId","==",n),ge("employeeId","==",r)));return g.empty&&(g=await Pe(Ce(_,ge("payroll_run_id","==",n),ge("employee_id","==",r)))),g.docs.map(T=>{const E=T.data();return{id:T.id,type:Ec(E.type),name:Ec(E.name),amount:ri(E.amount)}})},enabled:!!(t&&n&&r)}),m=()=>{window.print(),G.success("Print dialog opened")},v=async()=>{if(!(p!=null&&p.email)){G.error("Employee email not found");return}a(!0);try{if(!n||!r)throw new Error("Invalid payroll context");await To.sendPayslipEmail({payrollRunId:n,employeeId:r}),G.success(`Payslip queued for ${p.email}`)}catch{G.error("Failed to send payslip email")}finally{a(!1)}};if(h)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const p=d==null?void 0:d.employees,y=(f==null?void 0:f.filter(_=>_.type!=="advance"))||[],b=(f==null?void 0:f.filter(_=>_.type==="advance"))||[],x=y.reduce((_,g)=>_+Number(g.amount),0),w=b.reduce((_,g)=>_+Number(g.amount),0),C=Number(d==null?void 0:d.gross_salary)+x,S=Number(d==null?void 0:d.total_deductions)+w,P=Number(d==null?void 0:d.net_salary)-w;return s.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e(`/payroll/${n}`),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back to Payroll Run"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Jn,{open:o,onOpenChange:l,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{variant:"outline",size:"sm",children:[s.jsx(Yw,{className:"h-4 w-4 mr-2"}),"Company Settings"]})}),s.jsxs(Kn,{children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Company Settings"}),s.jsx(md,{children:"Upload your company logo and set your company name"})]}),s.jsx(tM,{})]})]}),s.jsx(K,{variant:"outline",onClick:v,disabled:i||!(p!=null&&p.email),children:i?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xu,{className:"mr-2 h-4 w-4"}),"Email Payslip"]})}),s.jsxs(K,{onClick:m,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Print / Download"]})]})]}),s.jsxs("div",{id:"payslip-content",className:"bg-card border rounded-lg shadow-lg print:border-0 print:shadow-none",children:[s.jsx("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg print:rounded-none",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-primary-foreground/20 p-3 rounded-lg h-16 w-16 flex items-center justify-center overflow-hidden",children:c!=null&&c.logoUrl?s.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):s.jsx(Fp,{className:"h-10 w-10"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:(c==null?void 0:c.companyName)||"ZedBooks NGO"}),s.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Accounting Suite"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("h2",{className:"text-xl font-bold",children:"PAYSLIP"}),s.jsx("p",{className:"text-primary-foreground/80 text-sm",children:u&&vt(new Date(u.period_start),"MMMM yyyy")})]})]})}),s.jsx("div",{className:"bg-muted/50 px-6 py-3 border-b text-sm",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pay Period:"}),s.jsxs("span",{className:"font-medium",children:[u&&vt(new Date(u.period_start),"dd MMM yyyy")," - ",u&&vt(new Date(u.period_end),"dd MMM yyyy")]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Employee Details"}),s.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Name:"}),s.jsx("span",{className:"font-semibold",children:p==null?void 0:p.full_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Employee No:"}),s.jsx("span",{className:"font-semibold",children:p==null?void 0:p.employee_number})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Position:"}),s.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.position)||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Department:"}),s.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.department)||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"TPIN:"}),s.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.tpin)||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"NAPSA No:"}),s.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.napsa_number)||"N/A"})]})]})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Earnings"}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Basic Salary"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.basic_salary))})]}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Housing Allowance"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.housing_allowance))})]}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Transport Allowance"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.transport_allowance))})]}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Other Allowances"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.other_allowances))})]}),y.map(_=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:_.name}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(_.amount))})]},_.id)),s.jsxs("tr",{className:"bg-primary/5",children:[s.jsx("td",{className:"px-4 py-3 font-semibold",children:"Gross Pay"}),s.jsx("td",{className:"px-4 py-3 text-right font-bold text-primary",children:de(C)})]})]})})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Deductions"}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NAPSA (5%)"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.napsa_employee))})]}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NHIMA (1%)"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.nhima_employee))})]}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"PAYE"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.paye))})]}),Number(d==null?void 0:d.advances_deducted)>0&&s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Advances (Previous)"}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(d==null?void 0:d.advances_deducted))})]}),b.map(_=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:_.name}),s.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:de(Number(_.amount))})]},_.id)),s.jsxs("tr",{className:"bg-destructive/5",children:[s.jsx("td",{className:"px-4 py-3 font-semibold",children:"Total Deductions"}),s.jsx("td",{className:"px-4 py-3 text-right font-bold text-destructive",children:de(S)})]})]})})})]})]}),s.jsx("div",{className:"bg-primary rounded-lg p-5 text-primary-foreground",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Net Pay"}),s.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Amount payable to employee"})]}),s.jsx("p",{className:"text-3xl font-bold",children:de(P)})]})}),(p==null?void 0:p.bank_name)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Payment Details"}),s.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Bank:"}),s.jsx("span",{className:"font-semibold",children:p.bank_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Account Number:"}),s.jsx("span",{className:"font-semibold",children:p.bank_account_number})]})]})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Employer Contributions (for reference only):"}),s.jsxs("div",{className:"flex gap-6 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["NAPSA: ",de(Number(d==null?void 0:d.napsa_employer))]}),s.jsxs("span",{children:["NHIMA: ",de(Number(d==null?void 0:d.nhima_employer))]})]})]})]}),s.jsxs("div",{className:"bg-muted/30 px-6 py-4 rounded-b-lg border-t text-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a computer-generated payslip. Please keep it confidential."}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Generated on ",vt(new Date,"dd MMMM yyyy 'at' HH:mm")]})]})]})]})}function JJe(){const{user:t}=dt(),e=Fn(),{id:n}=Yh(),r=Jt(),[i,a]=j.useState(!1),{data:o,isLoading:l}=Ee({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const y=await bi(et(ae,ee.PAYROLL_RUNS,n));if(!y.exists())return null;const b=y.data();return{id:y.id,status:b.status??b.payrollStatus??"draft",period_start:String(b.periodStart??b.period_start??""),period_end:String(b.periodEnd??b.period_end??""),approved_at:b.approvedAt??b.approved_at??null,total_gross:Number(b.totalGross??b.total_gross??0),total_deductions:Number(b.totalDeductions??b.total_deductions??0),total_net:Number(b.totalNet??b.total_net??0),notes:b.notes??null}},enabled:!!(t&&n)}),{data:c}=Ee({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const y=Se(ae,ee.PAYROLL_ITEMS);let b=await Pe(Ce(y,ge("payrollRunId","==",n)));b.empty&&(b=await Pe(Ce(y,ge("payroll_run_id","==",n))));const x=b.docs.map(P=>({id:P.id,row:P.data()})),w=Array.from(new Set(x.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),C=await Promise.all(w.map(async P=>{const _=await bi(et(ae,ee.EMPLOYEES,P));return{employeeDocId:P,snap:_}})),S=new Map;return C.forEach(({employeeDocId:P,snap:_})=>{if(!_.exists())return;const g=_.data();S.set(P,{id:_.id,full_name:String(g.fullName??g.full_name??""),employee_number:String(g.employeeNumber??g.employee_number??""),position:g.position??null,department:g.department??null,email:g.email??null,bank_account_number:g.bankAccountNumber??g.bank_account_number??null})}),x.map(({id:P,row:_})=>{const g=String(_.employeeId??_.employee_id??"");return{id:P,employee_id:g,basic_salary:Number(_.basicSalary??_.basic_salary??0),housing_allowance:Number(_.housingAllowance??_.housing_allowance??0),transport_allowance:Number(_.transportAllowance??_.transport_allowance??0),other_allowances:Number(_.otherAllowances??_.other_allowances??0),gross_salary:Number(_.grossSalary??_.gross_salary??0),napsa_employee:Number(_.napsaEmployee??_.napsa_employee??0),nhima_employee:Number(_.nhimaEmployee??_.nhima_employee??0),paye:Number(_.paye??0),advances_deducted:Number(_.advancesDeducted??_.advances_deducted??0),total_deductions:Number(_.totalDeductions??_.total_deductions??0),net_salary:Number(_.netSalary??_.net_salary??0),employees:S.get(g)??null}})},enabled:!!(t&&n)}),{data:u}=Ee({queryKey:["payrollAdditions",n],queryFn:async()=>{if(!n)return[];const y=Se(ae,ee.PAYROLL_ADDITIONS);let b=await Pe(Ce(y,ge("payrollRunId","==",n)));b.empty&&(b=await Pe(Ce(y,ge("payroll_run_id","==",n))));const x=b.docs.map(P=>({id:P.id,row:P.data()})),w=Array.from(new Set(x.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),C=await Promise.all(w.map(async P=>{const _=await bi(et(ae,ee.EMPLOYEES,P));return{employeeDocId:P,snap:_}})),S=new Map;return C.forEach(({employeeDocId:P,snap:_})=>{if(!_.exists())return;const g=_.data();S.set(P,{full_name:String(g.fullName??g.full_name??""),employee_number:String(g.employeeNumber??g.employee_number??"")})}),x.map(({id:P,row:_})=>{const g=String(_.employeeId??_.employee_id??"");return{id:P,type:String(_.type??""),name:String(_.name??""),amount:Number(_.amount??0),employees:S.get(g)??null}})},enabled:!!(t&&n)}),d=qe({mutationFn:async()=>{if(!n||!t)throw new Error("Not authenticated");await Gl(et(ae,ee.PAYROLL_RUNS,n),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:t.id,updatedAt:Ie()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),G.success("Payroll approved successfully!")},onError:()=>{G.error("Failed to approve payroll")}}),h=qe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Gl(et(ae,ee.PAYROLL_RUNS,n),{status:"draft",updatedAt:Ie()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),G.success("Payroll rejected and returned to draft"),e("/payroll")},onError:()=>{G.error("Failed to reject payroll")}}),f=async()=>{if(!c||c.length===0){G.error("No payroll items to email");return}const y=c.filter(w=>{var C;return!!((C=w.employees)!=null&&C.email)});if(y.length===0){G.error("No employees have email addresses configured");return}a(!0);let b=0,x=0;for(const w of y)try{if(!n)continue;await To.sendPayslipEmail({payrollRunId:n,employeeId:w.employee_id}),b++}catch{x++}a(!1),b>0&&G.success(`Successfully sent ${b} payslip email(s)`),x>0&&G.error(`Failed to send ${x} email(s)`)};if(l)return s.jsx("div",{children:"Loading..."});if(!o)return s.jsx("div",{children:"Payroll run not found"});const m=o.status==="approved"||o.status==="completed",v=(u==null?void 0:u.reduce((y,b)=>y+(b.type!=="advance"?Number(b.amount):0),0))||0,p=(u==null?void 0:u.reduce((y,b)=>y+(b.type==="advance"?Number(b.amount):0),0))||0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Approval"}),s.jsxs("p",{className:"text-muted-foreground",children:["Review and approve payroll for"," ",vt(new Date(o.period_start),"dd MMM")," -"," ",vt(new Date(o.period_end),"dd MMM yyyy")]})]}),m&&s.jsxs(K,{onClick:f,disabled:i,children:[i?s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Xu,{className:"h-4 w-4 mr-2"}),i?"Sending...":"Email All Payslips"]})]}),m&&s.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(Xo,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"This payroll has been approved"}),o.approved_at&&s.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Approved on ",vt(new Date(o.approved_at),"dd MMM yyyy 'at' HH:mm")]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Employees"}),s.jsx(re,{className:"text-2xl",children:(c==null?void 0:c.length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Gross Pay"}),s.jsx(re,{className:"text-2xl text-primary",children:de(Number(o.total_gross||0))})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Deductions"}),s.jsx(re,{className:"text-2xl text-destructive",children:de(Number(o.total_deductions||0))})]})}),s.jsx(Z,{className:"bg-primary/5 border-primary/20",children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Net Pay"}),s.jsx(re,{className:"text-2xl text-primary",children:de(Number(o.total_net||0))})]})})]}),u&&u.length>0&&s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Payroll Additions & Advances"}),s.jsx(wt,{children:"Custom earnings, bonuses, overtime, and advance deductions for this payroll run"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additional Earnings"}),s.jsx("p",{className:"text-xl font-bold text-primary",children:de(v)})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Advance Deductions"}),s.jsx("p",{className:"text-xl font-bold text-destructive",children:de(p)})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additions"}),s.jsx("p",{className:"text-xl font-bold",children:u.length})]})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"Type"}),s.jsx(H,{children:"Name"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsx(Dt,{children:u.map(y=>{var b,x;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:(b=y.employees)==null?void 0:b.full_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(x=y.employees)==null?void 0:x.employee_number})]})}),s.jsx(F,{children:s.jsx(De,{variant:y.type==="advance"?"destructive":"default",children:y.type})}),s.jsx(F,{children:y.name}),s.jsxs(F,{className:`text-right font-medium ${y.type==="advance"?"text-destructive":"text-primary"}`,children:[y.type==="advance"?"-":"",de(Number(y.amount))]})]},y.id)})})]})})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Employee Breakdown"}),s.jsx(wt,{children:"Review individual payroll calculations"})]}),s.jsx(se,{children:s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"Department"}),s.jsx(H,{className:"text-right",children:"Gross"}),s.jsx(H,{className:"text-right",children:"PAYE"}),s.jsx(H,{className:"text-right",children:"NAPSA"}),s.jsx(H,{className:"text-right",children:"NHIMA"}),s.jsx(H,{className:"text-right",children:"Advances"}),s.jsx(H,{className:"text-right",children:"Total Deductions"}),s.jsx(H,{className:"text-right",children:"Net Pay"})]})}),s.jsx(Dt,{children:c==null?void 0:c.map(y=>{var b,x,w;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:((b=y.employees)==null?void 0:b.full_name)||"Unknown"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:((x=y.employees)==null?void 0:x.employee_number)||"-"})]})}),s.jsx(F,{children:((w=y.employees)==null?void 0:w.department)||"-"}),s.jsx(F,{className:"text-right",children:de(Number(y.gross_salary))}),s.jsx(F,{className:"text-right",children:de(Number(y.paye))}),s.jsx(F,{className:"text-right",children:de(Number(y.napsa_employee))}),s.jsx(F,{className:"text-right",children:de(Number(y.nhima_employee))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(y.advances_deducted||0))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(y.total_deductions))}),s.jsx(F,{className:"text-right font-medium",children:de(Number(y.net_salary))})]},y.id)})})]})})})]}),o.notes&&s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Notes"})}),s.jsx(se,{children:s.jsx("p",{className:"text-muted-foreground",children:o.notes})})]}),!m&&s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{variant:"outline",className:"text-destructive border-destructive",children:[s.jsx(c8,{className:"h-4 w-4 mr-2"}),"Reject"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsx(Za,{children:"Reject Payroll?"}),s.jsx(Ja,{children:"This will return the payroll to draft status for corrections. The payroll will need to be resubmitted for approval."})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsx(eo,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground",children:"Reject Payroll"})]})]})]}),s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Approve Payroll"]})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsx(Za,{children:"Approve Payroll?"}),s.jsxs(Ja,{children:["By approving this payroll, you confirm that all calculations are correct and payments can proceed.",s.jsx("br",{}),s.jsx("br",{}),s.jsxs("strong",{children:["Total Net Pay: ",de(Number(o.total_net||0))]})]})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsx(eo,{onClick:()=>d.mutate(),children:"Approve Payroll"})]})]})]})]})]})}const eet=ad({employee_id:Ge().min(1,"Employee is required"),amount:Ge().min(1,"Amount is required"),date_given:Ge().min(1,"Date given is required"),months_to_repay:Ge().min(1,"Months to repay is required"),reason:Ge().optional()});function tet(){const{user:t}=dt(),[e,n]=j.useState(!1),r=Jt(),i=sd({resolver:id(eet),defaultValues:{employee_id:"",amount:"",date_given:vt(new Date,"yyyy-MM-dd"),months_to_repay:"1",reason:""}}),a=i.watch("amount"),o=i.watch("months_to_repay"),l=a&&o?(parseFloat(a)/parseInt(o)).toFixed(2):"0.00",{data:c}=Ee({queryKey:["advances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await ze.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),{data:u}=Ee({queryKey:["employees-active"],queryFn:async()=>{if(!c)return[];const S=Se(ae,ee.EMPLOYEES);return(await Pe(Ce(S,ge("companyId","==",c)))).docs.map(_=>{const g=_.data();return{id:_.id,full_name:String(g.fullName??g.full_name??""),employee_number:g.employeeNumber??g.employee_number??null,department:g.department??null,employment_status:String(g.employmentStatus??g.employment_status??"active")}}).filter(_=>_.employment_status==="active").sort((_,g)=>_.full_name.localeCompare(g.full_name))},enabled:!!c}),{data:d,isLoading:h}=Ee({queryKey:["advances",c],queryFn:async()=>{if(!c)return[];const S=Se(ae,ee.ADVANCES),_=(await Pe(Ce(S,ge("companyId","==",c)))).docs.map(E=>{var L;const A=E.data(),I=A.dateGiven??A.date_given,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??"";return{id:E.id,employee_id:String(A.employeeId??A.employee_id??""),amount:Number(A.amount??0),date_given:k,reason:A.reason??null,status:String(A.status??"pending"),months_to_repay:Number(A.monthsToRepay??A.months_to_repay??1),monthly_deduction:Number(A.monthlyDeduction??A.monthly_deduction??0),remaining_balance:Number(A.remainingBalance??A.remaining_balance??A.amount??0),months_deducted:Number(A.monthsDeducted??A.months_deducted??0),created_at:String(A.createdAt??A.created_at??"")}}),g=Array.from(new Set(_.map(E=>E.employee_id).filter(Boolean))),T=new Map;if(g.length>0){const E=Se(ae,ee.EMPLOYEES);(await Pe(Ce(E,ge(so(),"in",g.slice(0,30))))).docs.forEach(I=>{const k=I.data();T.set(I.id,{full_name:String(k.fullName??k.full_name??""),employee_number:k.employeeNumber??k.employee_number??null,department:k.department??null})})}return _.map(E=>({...E,employees:T.get(E.employee_id)??null})).sort((E,A)=>String(A.created_at).localeCompare(String(E.created_at)))},enabled:!!c}),f=qe({mutationFn:async S=>{if(!t||!c)throw new Error("Not authenticated");const P=parseFloat(S.amount),_=parseInt(S.months_to_repay),g=P/_;await es(Se(ae,ee.ADVANCES),{companyId:c,employeeId:S.employee_id,amount:P,dateGiven:S.date_given,reason:S.reason||null,status:"pending",monthsToRepay:_,monthlyDeduction:g,remainingBalance:P,monthsDeducted:0,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),G.success("Advance recorded successfully"),n(!1),i.reset()},onError:S=>{G.error("Failed to record advance: "+S.message)}}),m=qe({mutationFn:async({id:S,status:P})=>{await fr(et(ae,ee.ADVANCES,S),{status:P,updatedAt:Ie()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),G.success("Advance status updated")},onError:()=>{G.error("Failed to update status")}}),v=qe({mutationFn:async S=>{const P=(S.months_deducted||0)+1,_=Number(S.remaining_balance)-Number(S.monthly_deduction),g=P>=S.months_to_repay;await fr(et(ae,ee.ADVANCES,S.id),{monthsDeducted:P,remainingBalance:Math.max(0,_),status:g?"deducted":"pending",updatedAt:Ie()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),G.success("Deduction recorded")},onError:()=>{G.error("Failed to record deduction")}}),p=S=>{f.mutate(S)},y=S=>{switch(S){case"pending":return s.jsxs(De,{variant:"outline",className:"gap-1",children:[s.jsx(Vi,{className:"h-3 w-3"})," Pending"]});case"deducted":return s.jsxs(De,{variant:"default",className:"gap-1 bg-green-600",children:[s.jsx(Xo,{className:"h-3 w-3"})," Fully Repaid"]});case"cancelled":return s.jsxs(De,{variant:"destructive",className:"gap-1",children:[s.jsx(c8,{className:"h-3 w-3"})," Cancelled"]});default:return s.jsx(De,{variant:"secondary",children:S})}},b=(d==null?void 0:d.reduce((S,P)=>S+Number(P.amount),0))||0,x=(d==null?void 0:d.filter(S=>S.status==="pending"))||[],w=x.reduce((S,P)=>S+Number(P.remaining_balance||P.amount),0),C=(d==null?void 0:d.filter(S=>S.status==="deducted").reduce((S,P)=>S+Number(P.amount),0))||0;return h?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Employee Advances"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage salary advances and repayment schedules"})]}),s.jsxs(K,{onClick:()=>n(!0),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Record Advance"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Advances"}),s.jsx(re,{className:"text-2xl",children:(d==null?void 0:d.length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Amount Issued"}),s.jsx(re,{className:"text-2xl text-primary",children:de(b)})]})}),s.jsxs(Z,{className:"border-amber-200 dark:border-amber-800",children:[s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Outstanding Balance"}),s.jsx(re,{className:"text-2xl text-amber-600",children:de(w)})]}),s.jsx(se,{children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length," active advance(s)"]})})]}),s.jsx(Z,{className:"border-green-200 dark:border-green-800",children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Fully Repaid"}),s.jsx(re,{className:"text-2xl text-green-600",children:de(C)})]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(za,{className:"h-5 w-5"}),"All Advances"]}),s.jsx(wt,{children:"View and manage employee salary advances with repayment tracking"})]}),s.jsx(se,{children:s.jsx("div",{className:"rounded-lg border",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{className:"text-right",children:"Total Amount"}),s.jsx(H,{children:"Repayment Schedule"}),s.jsx(H,{children:"Progress"}),s.jsx(H,{className:"text-right",children:"Remaining"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Actions"})]})}),s.jsxs(Dt,{children:[d==null?void 0:d.map(S=>{const P=S.employees,_=S.months_deducted||0,g=S.months_to_repay||1,T=S.remaining_balance??S.amount,E=_/g*100;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:P==null?void 0:P.full_name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:P==null?void 0:P.employee_number}),s.jsx("div",{className:"text-xs text-muted-foreground",children:vt(new Date(S.date_given),"dd MMM yyyy")})]})}),s.jsx(F,{className:"text-right font-medium",children:de(Number(S.amount))}),s.jsx(F,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Um,{className:"h-3 w-3 text-muted-foreground"}),g," month",g>1?"s":""]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(co,{className:"h-3 w-3"}),de(Number(S.monthly_deduction||S.amount)),"/month"]})]})}),s.jsx(F,{children:s.jsxs("div",{className:"space-y-1 min-w-[120px]",children:[s.jsx(Tu,{value:E,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[_," of ",g," payments"]})]})}),s.jsx(F,{className:"text-right font-medium text-amber-600",children:de(Number(T))}),s.jsx(F,{children:y(S.status)}),s.jsx(F,{children:S.status==="pending"&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsx(K,{size:"sm",variant:"outline",children:"Record Deduction"})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsx(Za,{children:"Record Monthly Deduction?"}),s.jsxs(Ja,{children:["This will record a deduction of ",de(Number(S.monthly_deduction||S.amount))," for ",P==null?void 0:P.full_name,".",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Current Progress:"})," ",_," of ",g," payments",s.jsx("br",{}),s.jsx("strong",{children:"Remaining after this:"})," ",de(Math.max(0,Number(T)-Number(S.monthly_deduction||S.amount)))]})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsx(eo,{onClick:()=>v.mutate(S),children:"Record Deduction"})]})]})]}),s.jsxs(Mo,{children:[s.jsx(du,{asChild:!0,children:s.jsx(K,{size:"sm",variant:"ghost",className:"text-destructive",children:"Cancel"})}),s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsx(Za,{children:"Cancel Advance?"}),s.jsx(Ja,{children:"This will cancel the advance. This action cannot be undone."})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Keep"}),s.jsx(eo,{className:"bg-destructive text-destructive-foreground",onClick:()=>m.mutate({id:S.id,status:"cancelled"}),children:"Cancel Advance"})]})]})]})]})})]},S.id)}),(d==null?void 0:d.length)===0&&s.jsx(je,{children:s.jsxs(F,{colSpan:7,className:"text-center py-12",children:[s.jsx(za,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-medium",children:"No advances recorded"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by recording an employee advance"}),s.jsxs(K,{onClick:()=>n(!0),children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Record Advance"]})]})})]})]})})})]}),s.jsx(Jn,{open:e,onOpenChange:n,children:s.jsxs(Kn,{className:"max-w-md",children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Record Employee Advance"}),s.jsx(md,{children:"Enter the advance details and repayment schedule"})]}),s.jsx(g1,{...i,children:s.jsxs("form",{onSubmit:i.handleSubmit(p),className:"space-y-4",children:[s.jsx(lt,{control:i.control,name:"employee_id",render:({field:S})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Employee"}),s.jsxs(gt,{onValueChange:S.onChange,value:S.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select employee"})})}),s.jsx(pt,{children:u==null?void 0:u.map(P=>s.jsxs(ye,{value:P.id,children:[P.full_name," (",P.employee_number,")"]},P.id))})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:i.control,name:"amount",render:({field:S})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Total Amount (ZMW)"}),s.jsx(ot,{children:s.jsx(Y,{type:"number",step:"0.01",placeholder:"0.00",...S})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:i.control,name:"date_given",render:({field:S})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Date Given"}),s.jsx(ot,{children:s.jsx(Y,{type:"date",...S})}),s.jsx(ut,{})]})}),s.jsx(lt,{control:i.control,name:"months_to_repay",render:({field:S})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Months to Repay"}),s.jsxs(gt,{onValueChange:S.onChange,value:S.value,children:[s.jsx(ot,{children:s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select months"})})}),s.jsx(pt,{children:[1,2,3,4,5,6,9,12].map(P=>s.jsxs(ye,{value:P.toString(),children:[P," month",P>1?"s":""]},P))})]}),s.jsxs(hh,{children:["Monthly deduction: ",s.jsx("strong",{children:de(parseFloat(l))})]}),s.jsx(ut,{})]})}),s.jsx(lt,{control:i.control,name:"reason",render:({field:S})=>s.jsxs(at,{children:[s.jsx(ct,{children:"Reason (Optional)"}),s.jsx(ot,{children:s.jsx(Pn,{placeholder:"Enter reason for advance",...S})}),s.jsx(ut,{})]})}),s.jsxs(x1,{children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(K,{type:"submit",disabled:f.isPending,children:f.isPending?"Recording...":"Record Advance"})]})]})})]})})]})}const J6=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},net=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""},ret=t=>{const e=String(t||"").toLowerCase().trim();return e==="approved"?"processed":e==="completed"?"paid":["draft","trial","processed","paid","payment_reversed","reversed","final"].includes(e)?e:"draft"},_f=t=>{const e=Number(t);return Number.isFinite(e)?e:0},set=t=>t==null?"":String(t).replace(/"/g,'""'),$A=(t,e,n)=>{const r=[t,...e].map(l=>l.map(c=>`"${set(c)}"`).join(",")).join(`
`),i=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download=n,o.click(),window.URL.revokeObjectURL(a)};function iet(){var S,P;const{user:t}=dt(),[e,n]=j.useState(vt(new Date,"yyyy-MM")),[r,i]=j.useState(!1),a=Ee({queryKey:["zra-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const _=await ze.getPrimaryMembershipByUser(t.id);return(_==null?void 0:_.companyId)??null},enabled:!!t}),o=a.data??null,l=`${e}-01`,c=`${e}-31`,u=Ee({queryKey:["payroll-runs-zra",o,e],queryFn:async()=>{if(!o)return[];const _=Se(ae,ee.PAYROLL_RUNS);return(await Pe(Ce(_,ge("companyId","==",o)))).docs.map(T=>{const E=T.data();return{id:T.id,runDate:net(E.runDate??E.run_date),status:ret(E.payrollStatus??E.payroll_status??E.status)}}).filter(T=>T.runDate>=l&&T.runDate<=c).sort((T,E)=>E.runDate.localeCompare(T.runDate))},enabled:!!o}),d=Ee({queryKey:["payroll-items-zra",o,e,r?"with-reversed":"without-reversed",(S=u.data)==null?void 0:S.map(_=>_.id).join(",")],queryFn:async()=>{if(!o||!u.data||u.data.length===0)return[];const _=u.data.filter(L=>r||L.status!=="reversed").map(L=>L.id);if(_.length===0)return[];const g=Se(ae,ee.PAYROLL_ITEMS),T=J6(_,30),A=(await Promise.all(T.map(L=>Pe(Ce(g,ge("payrollRunId","in",L)))))).flatMap(L=>L.docs.map(B=>{const U=B.data();return{id:B.id,employeeId:String(U.employeeId??U.employee_id??""),payrollRunId:String(U.payrollRunId??U.payroll_run_id??""),grossSalary:_f(U.grossSalary??U.gross_salary),paye:_f(U.paye),napsaEmployee:_f(U.napsaEmployee??U.napsa_employee),napsaEmployer:_f(U.napsaEmployer??U.napsa_employer),nhimaEmployee:_f(U.nhimaEmployee??U.nhima_employee),nhimaEmployer:_f(U.nhimaEmployer??U.nhima_employer)}})),I=Array.from(new Set(A.map(L=>L.employeeId).filter(Boolean))),k=new Map;if(I.length>0){const L=Se(ae,ee.EMPLOYEES),B=J6(I,30);(await Promise.all(B.map(V=>Pe(Ce(L,ge(so(),"in",V)))))).forEach(V=>{V.docs.forEach(D=>{const R=D.data();k.set(D.id,{id:D.id,fullName:String(R.fullName??R.full_name??""),employeeNumber:R.employeeNumber??R.employee_number??null,tpin:R.tpin??null,napsaNumber:R.napsaNumber??R.napsa_number??null,nhimaNumber:R.nhimaNumber??R.nhima_number??null})})})}return A.map(L=>({...L,employee:k.get(L.employeeId)??null}))},enabled:!!o&&!!u.data&&(((P=u.data)==null?void 0:P.length)??0)>0}),h=j.useMemo(()=>d.data??[],[d.data]),f=a.isLoading||u.isLoading||d.isLoading,m=j.useMemo(()=>h.reduce((_,g)=>_+g.paye,0),[h]),v=j.useMemo(()=>h.reduce((_,g)=>_+g.napsaEmployee,0),[h]),p=j.useMemo(()=>h.reduce((_,g)=>_+g.napsaEmployer,0),[h]),y=j.useMemo(()=>h.reduce((_,g)=>_+g.nhimaEmployee,0),[h]),b=j.useMemo(()=>h.reduce((_,g)=>_+g.nhimaEmployer,0),[h]),x=()=>{h.length!==0&&$A(["TPIN","Employee Number","Employee Name","Gross Salary","PAYE"],h.map(_=>{var g,T,E;return[((g=_.employee)==null?void 0:g.tpin)||"N/A",((T=_.employee)==null?void 0:T.employeeNumber)||"",((E=_.employee)==null?void 0:E.fullName)||"",_.grossSalary,_.paye]}),`PAYE-Report-${e}.csv`)},w=()=>{h.length!==0&&$A(["NAPSA Number","Employee Number","Employee Name","Gross Salary","NAPSA Employee (5%)","NAPSA Employer (5%)","Total NAPSA"],h.map(_=>{var g,T,E;return[((g=_.employee)==null?void 0:g.napsaNumber)||"N/A",((T=_.employee)==null?void 0:T.employeeNumber)||"",((E=_.employee)==null?void 0:E.fullName)||"",_.grossSalary,_.napsaEmployee,_.napsaEmployer,_.napsaEmployee+_.napsaEmployer]}),`NAPSA-Report-${e}.csv`)},C=()=>{h.length!==0&&$A(["NHIMA Number","Employee Number","Employee Name","Gross Salary","NHIMA Employee (1%)","NHIMA Employer (1%)","Total NHIMA"],h.map(_=>{var g,T,E;return[((g=_.employee)==null?void 0:g.nhimaNumber)||"N/A",((T=_.employee)==null?void 0:T.employeeNumber)||"",((E=_.employee)==null?void 0:E.fullName)||"",_.grossSalary,_.nhimaEmployee,_.nhimaEmployer,_.nhimaEmployee+_.nhimaEmployer]}),`NHIMA-Report-${e}.csv`)};return f?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"ZRA Compliance Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Generate statutory compliance reports for ZRA, NAPSA, and NHIMA"})]}),s.jsxs("div",{className:"max-w-xs",children:[s.jsx(X,{children:"Select Month"}),s.jsx(Y,{type:"month",value:e,onChange:_=>n(_.target.value)}),s.jsxs("label",{className:"mt-3 flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:r,onChange:_=>i(_.target.checked)}),"Include reversed payroll runs"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-sm font-medium",children:"Total PAYE"})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:de(m)}),s.jsxs(K,{className:"mt-4 w-full",variant:"outline",onClick:x,disabled:h.length===0,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export PAYE Report"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-sm font-medium",children:"Total NAPSA"})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:de(v+p)}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",de(v)," | Employer: ",de(p)]}),s.jsxs(K,{className:"mt-4 w-full",variant:"outline",onClick:w,disabled:h.length===0,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NAPSA Report"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-sm font-medium",children:"Total NHIMA"})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:de(y+b)}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",de(y)," | Employer: ",de(b)]}),s.jsxs(K,{className:"mt-4 w-full",variant:"outline",onClick:C,disabled:h.length===0,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NHIMA Report"]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Employee Details"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"TPIN"}),s.jsx(H,{children:"NAPSA No."}),s.jsx(H,{children:"NHIMA No."}),s.jsx(H,{children:"Gross"}),s.jsx(H,{children:"PAYE"}),s.jsx(H,{children:"NAPSA"}),s.jsx(H,{children:"NHIMA"})]})}),s.jsxs(Dt,{children:[h.map(_=>{var g,T,E,A,I;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:((g=_.employee)==null?void 0:g.fullName)||"Unknown Employee"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:((T=_.employee)==null?void 0:T.employeeNumber)||"-"})]})}),s.jsx(F,{className:"text-sm",children:((E=_.employee)==null?void 0:E.tpin)||"N/A"}),s.jsx(F,{className:"text-sm",children:((A=_.employee)==null?void 0:A.napsaNumber)||"N/A"}),s.jsx(F,{className:"text-sm",children:((I=_.employee)==null?void 0:I.nhimaNumber)||"N/A"}),s.jsx(F,{children:de(_.grossSalary)}),s.jsx(F,{children:de(_.paye)}),s.jsx(F,{children:de(_.napsaEmployee)}),s.jsx(F,{children:de(_.nhimaEmployee)})]},_.id)}),h.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:8,className:"text-center text-muted-foreground",children:"No payroll data found for the selected month"})})]})]})})]})]})}function aet(){const t=Fn(),[e,n]=j.useState(""),[r,i]=j.useState(""),[a,o]=j.useState(null),l=()=>{const u=Number(r)||0;if(u<=0)return;const d=KZ(u),h=GZ(u),f=YZ(u),m=d+h.employee+f.employee,v=u-m,p=u+h.employer+f.employer;o({paye:d,napsaEmployee:h.employee,napsaEmployer:h.employer,nhimaEmployee:f.employee,nhimaEmployer:f.employer,totalDeductions:m,netSalary:v,employerCost:p})},c=[{gross:5e3,description:"Below first threshold"},{gross:6e3,description:"In second band"},{gross:8e3,description:"In third band"},{gross:12e3,description:"In fourth band"},{gross:45e3,description:"High income example"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Tax Calculator"}),s.jsx("p",{className:"text-muted-foreground",children:"Calculate PAYE, NAPSA, NHIMA, and net salary"})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(xv,{className:"h-5 w-5"}),"Calculate Taxes"]}),s.jsx(wt,{children:"Enter salary details to see tax breakdown"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"basicSalary",children:"Basic Salary (ZMW)"}),s.jsx(Y,{id:"basicSalary",type:"number",step:"0.01",placeholder:"Enter basic salary",value:e,onChange:u=>n(u.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"grossSalary",children:"Gross Salary (ZMW)"}),s.jsx(Y,{id:"grossSalary",type:"number",step:"0.01",placeholder:"Enter gross salary",value:r,onChange:u=>i(u.target.value)})]}),s.jsx(K,{onClick:l,className:"w-full",children:"Calculate"}),a&&s.jsxs("div",{className:"mt-6 space-y-4 pt-4 border-t",children:[s.jsx("h3",{className:"font-semibold",children:"Results"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"PAYE Tax:"}),s.jsx("span",{className:"font-medium",children:de(a.paye)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employee):"}),s.jsx("span",{className:"font-medium",children:de(a.napsaEmployee)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employee):"}),s.jsx("span",{className:"font-medium",children:de(a.nhimaEmployee)})]}),s.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[s.jsx("span",{children:"Total Deductions:"}),s.jsx("span",{children:de(a.totalDeductions)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[s.jsx("span",{children:"Net Salary:"}),s.jsx("span",{className:"text-primary",children:de(a.netSalary)})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Employer Contributions"}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employer):"}),s.jsx("span",{className:"font-medium",children:de(a.napsaEmployer)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employer):"}),s.jsx("span",{className:"font-medium",children:de(a.nhimaEmployer)})]}),s.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[s.jsx("span",{children:"Total Employer Cost:"}),s.jsx("span",{children:de(a.employerCost)})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Tax Band Reference"}),s.jsx(wt,{children:"Zambian PAYE tax bands (2025/26)"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"K0 - K5,100"}),s.jsx("span",{className:"text-sm font-bold",children:"0%"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"First K5,100 is tax-free"})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"K5,100.01 - K7,100"}),s.jsx("span",{className:"text-sm font-bold",children:"20%"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,000 taxed at 20%"})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"K7,100.01 - K9,200"}),s.jsx("span",{className:"text-sm font-bold",children:"30%"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,100 taxed at 30%"})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Above K9,200"}),s.jsx("span",{className:"text-sm font-bold",children:"37%"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance taxed at 37%"})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Quick Examples"}),s.jsx("div",{className:"space-y-2",children:c.map(u=>s.jsxs(K,{variant:"outline",size:"sm",className:"w-full justify-between",onClick:()=>{n(u.gross.toString()),i(u.gross.toString())},children:[s.jsx("span",{className:"text-xs",children:u.description}),s.jsx("span",{className:"font-semibold",children:de(u.gross)})]},u.gross))})]}),s.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg text-xs space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"NAPSA:"})," 5% of gross salary, capped at K1,342.00 (employee & employer)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"NHIMA:"})," 1% of gross salary, capped at K250.00 (employee & employer)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PAYE:"})," Progressive tax on gross salary"]})]})]})]})]})]})}function oet(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(n+='"',i++):r=!r:a===","&&!r?(e.push(n.trim()),n=""):n+=a}return e.push(n.trim()),e}function cet(t){return t.replace(/^\uFEFF/,"").split(/\r?\n/).filter(r=>r.trim()).map(oet)}function uet(t,e){const n={success:!1,data:[],errors:[],totalRows:0,successfulRows:0};if(t.length<2)return n.errors.push("File must contain at least a header row and one data row"),n;const r=t[0].map(l=>l.toLowerCase().trim()),i=t.slice(1);n.totalRows=i.length;const a={};e.forEach(l=>{const c=r.findIndex(u=>u===l.header.toLowerCase()||u===l.key.toLowerCase());c!==-1&&(a[l.key]=c)});const o=e.filter(l=>l.required&&a[l.key]===void 0).map(l=>l.header);return o.length>0?(n.errors.push(`Missing required columns: ${o.join(", ")}`),n):(i.forEach((l,c)=>{try{const u={};let d=!1;e.forEach(h=>{var m;const f=a[h.key];if(f!==void 0&&f<l.length){const v=((m=l[f])==null?void 0:m.trim())||"";if(h.required&&!v){n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0;return}u[h.key]=h.transform?h.transform(v):v}else h.required&&(n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0)}),d||(n.data.push(u),n.successfulRows++)}catch(u){n.errors.push(`Row ${c+2}: ${u instanceof Error?u.message:"Unknown error"}`)}}),n.success=n.successfulRows>0,n)}function det(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=i=>{var a;return e((a=i.target)==null?void 0:a.result)},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(t)})}async function het(t,e){try{const n=await det(t),r=cet(n);return uet(r,e)}catch(n){return{success:!1,data:[],errors:[n instanceof Error?n.message:"Failed to parse file"],totalRows:0,successfulRows:0}}}const Ss={toNumber:t=>{const e=parseFloat(t.replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},toDate:t=>{if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return t}},toBoolean:t=>["true","yes","1","y"].includes(t.toLowerCase()),trim:t=>t.trim()};function fet(t){const e=t.map(c=>c.header),n=t.map(c=>c.key.includes("date")?"2025-01-01":c.key.includes("amount")||c.key.includes("price")||c.key.includes("salary")?"1000.00":c.key.includes("email")?"example@email.com":c.key.includes("phone")?"+260971234567":`Example ${c.header}`),r=[e.join(","),n.join(",")].join(`
`),i="\uFEFF",a=new Blob([i+r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="import-template.csv",l.click(),window.URL.revokeObjectURL(o),G.success("Template downloaded")}function bg({open:t,onOpenChange:e,title:n,description:r,columns:i,onImport:a,templateName:o="import-template"}){const[l,c]=j.useState("upload"),[u,d]=j.useState(null),[h,f]=j.useState(!1),[m,v]=j.useState(!1),[p,y]=j.useState(null),b=j.useRef(null),x=async P=>{var T;const _=(T=P.target.files)==null?void 0:T[0];if(!_)return;const g=await het(_,i);d(g),c("preview")},w=async()=>{if(!(!u||u.data.length===0)){f(!0),y(null),c("importing");try{await a(u.data),v(!0),c("complete")}catch(P){y(P instanceof Error?P.message:"Import failed"),c("preview")}finally{f(!1)}}},C=()=>{c("upload"),d(null),v(!1),y(null),b.current&&(b.current.value=""),e(!1)},S=()=>{fet(i)};return s.jsx(Jn,{open:t,onOpenChange:C,children:s.jsxs(Kn,{className:"max-w-2xl",children:[s.jsxs(Gn,{children:[s.jsxs(Yn,{className:"flex items-center gap-2",children:[s.jsx(Xoe,{className:"h-5 w-5"}),n]}),r&&s.jsx(md,{children:r})]}),l==="upload"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var P;return(P=b.current)==null?void 0:P.click()},children:[s.jsx(rl,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Drop your CSV file here"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"}),s.jsx("input",{ref:b,type:"file",accept:".csv",onChange:x,className:"hidden"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Need a template?"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Download our CSV template with the correct headers"})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:S,children:[s.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Template"]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium mb-2",children:"Expected columns:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:i.map(P=>s.jsxs(De,{variant:P.required?"default":"outline",children:[P.header,P.required&&" *"]},P.key))})]})]}),l==="preview"&&u&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Import Preview"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.successfulRows," of ",u.totalRows," rows ready to import"]})]}),u.success?s.jsxs(De,{variant:"default",className:"bg-success",children:[s.jsx(Gw,{className:"h-3 w-3 mr-1"}),"Valid"]}):s.jsxs(De,{variant:"destructive",children:[s.jsx(ks,{className:"h-3 w-3 mr-1"}),"Has Errors"]})]}),u.errors.length>0&&s.jsxs(Hu,{variant:"destructive",children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsxs(Ku,{children:[s.jsxs("p",{className:"font-medium mb-2",children:["Found ",u.errors.length," error(s):"]}),s.jsx(lh,{className:"h-24",children:s.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[u.errors.slice(0,10).map((P,_)=>s.jsx("li",{children:P},_)),u.errors.length>10&&s.jsxs("li",{children:["...and ",u.errors.length-10," more"]})]})})]})]}),p&&s.jsxs(Hu,{variant:"destructive",children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsx(Ku,{children:p})]}),u.data.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview (first 5 rows):"}),s.jsx(lh,{className:"h-40 border rounded",children:s.jsx("div",{className:"p-2 text-xs font-mono",children:u.data.slice(0,5).map((P,_)=>s.jsxs("div",{className:"py-1 border-b last:border-0",children:[JSON.stringify(P,null,0).slice(0,100),"..."]},_))})})]})]}),l==="importing"&&s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Importing data..."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we process your data"})]}),l==="complete"&&s.jsxs("div",{className:"py-8 text-center",children:[s.jsx(Gw,{className:"h-12 w-12 text-success mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Import Complete!"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully imported ",(u==null?void 0:u.successfulRows)||0," records"]})]}),s.jsxs(x1,{children:[l==="upload"&&s.jsx(K,{variant:"outline",onClick:C,children:"Cancel"}),l==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(K,{variant:"outline",onClick:()=>c("upload"),children:"Back"}),s.jsxs(K,{onClick:w,disabled:!(u!=null&&u.success)||u.data.length===0,children:["Import ",(u==null?void 0:u.successfulRows)||0," Records"]})]}),l==="complete"&&s.jsx(K,{onClick:C,children:"Done"})]})]})})}function of(t,e,n){if(t.length===0){console.warn("No data to export");return}const r=e.map(d=>d.header),i=t.map(d=>e.map(h=>{const f=d[h.key],v=(h.formatter?h.formatter(f):String(f??"")).replace(/"/g,'""');return v.includes(",")||v.includes('"')||v.includes(`
`)?`"${v}"`:v})),a=[r.join(","),...i.map(d=>d.join(","))].join(`
`),o="\uFEFF",l=new Blob([o+a],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${n}.csv`,u.click(),window.URL.revokeObjectURL(c)}function met(t){return(typeof t=="number"?t:parseFloat(String(t))||0).toFixed(2)}function pet(t){if(!t)return"";try{return new Date(String(t)).toISOString().split("T")[0]}catch{return String(t)}}const get=[{header:"Name",key:"name",required:!0,transform:Ss.trim},{header:"Email",key:"email",transform:Ss.trim},{header:"Phone",key:"phone",transform:Ss.trim},{header:"Address",key:"address",transform:Ss.trim},{header:"TPIN",key:"tpin",transform:Ss.trim},{header:"Contact Person",key:"contact_person",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim},{header:"Grant Reference",key:"grant_reference",transform:Ss.trim}],yet=[{header:"Name",key:"name"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"TPIN",key:"tpin"},{header:"Contact Person",key:"contact_person"},{header:"Address",key:"address"},{header:"Grant Reference",key:"grant_reference"},{header:"Notes",key:"notes"}],vet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function xet(){const t=Fn(),e=Jt(),{user:n}=dt(),{data:r}=$s(),i=r==="super_admin"||r==="admin",[a,o]=j.useState(""),[l,c]=j.useState(!1),[u,d]=j.useState(!1),[h,f]=j.useState(null),[m,v]=j.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),{data:p,isLoading:y}=Ee({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const E=await ze.getPrimaryMembershipByUser(n.id);if(!(E!=null&&E.companyId))return[];const A=Se(ae,ee.CUSTOMERS);return(await Pe(Ce(A,ge("companyId","==",E.companyId)))).docs.map(k=>{const L=k.data();return{id:k.id,name:String(L.name??""),email:L.email??null,phone:L.phone??null,address:L.address??null,tpin:L.tpin??null,contact_person:L.contactPerson??L.contact_person??null,notes:L.notes??null,project_id:L.projectId??L.project_id??null,grant_reference:L.grantReference??L.grant_reference??null}}).sort((k,L)=>k.name.localeCompare(L.name))},enabled:!!n}),b=qe({mutationFn:async E=>{if(!n)throw new Error("You must be logged in");const A=await ze.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");await es(Se(ae,ee.CUSTOMERS),{companyId:A.companyId,userId:n.id,name:E.name,email:E.email||null,phone:E.phone||null,address:E.address||null,tpin:E.tpin||null,contactPerson:E.contact_person||null,notes:E.notes||null,projectId:E.project_id||null,grantReference:E.grant_reference||null,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),G.success("Customer created successfully"),C()},onError:E=>{G.error("Failed to create customer: "+(E instanceof Error?E.message:"Unknown error"))}}),x=qe({mutationFn:async({id:E,data:A})=>{await fr(et(ae,ee.CUSTOMERS,E),{name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,projectId:A.project_id||null,grantReference:A.grant_reference||null,updatedAt:Ie()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),G.success("Customer updated successfully"),C()},onError:E=>{G.error("Failed to update customer: "+(E instanceof Error?E.message:"Unknown error"))}}),w=qe({mutationFn:async E=>{if(!i)throw new Error("Only Admin users can delete customers.");await Yl(et(ae,ee.CUSTOMERS,E))},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),G.success("Customer deleted successfully")},onError:E=>{G.error("Failed to delete customer: "+(E instanceof Error?E.message:"Unknown error"))}}),C=()=>{v({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),f(null),c(!1)},S=E=>{f(E),v({name:E.name,email:E.email||"",phone:E.phone||"",address:E.address||"",tpin:E.tpin||"",contact_person:E.contact_person||"",notes:E.notes||"",project_id:E.project_id||"",grant_reference:E.grant_reference||""}),c(!0)},P=E=>{E.preventDefault(),h?x.mutate({id:h.id,data:m}):b.mutate(m)},_=p==null?void 0:p.filter(E=>{var A,I;return E.name.toLowerCase().includes(a.toLowerCase())||((A=E.email)==null?void 0:A.toLowerCase().includes(a.toLowerCase()))||((I=E.phone)==null?void 0:I.includes(a))}),g=async E=>{if(!n)throw new Error("You must be logged in");const A=await ze.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=E.map(B=>({companyId:A.companyId,userId:n.id,name:String(B.name||""),email:B.email||null,phone:B.phone||null,address:B.address||null,tpin:B.tpin||null,contactPerson:B.contact_person||null,notes:B.notes||null,projectId:null,grantReference:B.grant_reference||null,createdAt:Ie(),updatedAt:Ie()})),k=Se(ae,ee.CUSTOMERS),L=vet(I,400);for(const B of L){const U=Ql(ae);B.forEach(V=>{U.set(et(k),V)}),await U.commit()}e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),G.success(`Imported ${E.length} customers`)},T=()=>{if(!p||p.length===0){G.error("No customers to export");return}of(p,yet,"customers-export"),G.success("Customers exported")};return y?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your customers and their information"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:T,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),s.jsxs(Jn,{open:l,onOpenChange:E=>{c(E),E||C()},children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),s.jsxs(Kn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:h?"Edit Customer":"Add New Customer"})}),s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"name",children:"Customer Name *"}),s.jsx(Y,{id:"name",value:m.name,onChange:E=>v({...m,name:E.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"contact_person",children:"Contact Person"}),s.jsx(Y,{id:"contact_person",value:m.contact_person,onChange:E=>v({...m,contact_person:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:m.email,onChange:E=>v({...m,email:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"phone",children:"Phone"}),s.jsx(Y,{id:"phone",value:m.phone,onChange:E=>v({...m,phone:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"tpin",children:"TPIN"}),s.jsx(Y,{id:"tpin",value:m.tpin,onChange:E=>v({...m,tpin:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"project_id",children:"Project Reference"}),s.jsx(Y,{id:"project_id",value:m.project_id,onChange:E=>v({...m,project_id:E.target.value}),placeholder:"For NGO project tracking"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"grant_reference",children:"Grant Reference"}),s.jsx(Y,{id:"grant_reference",value:m.grant_reference,onChange:E=>v({...m,grant_reference:E.target.value}),placeholder:"For donor/grant tracking"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"address",children:"Address"}),s.jsx(Pn,{id:"address",value:m.address,onChange:E=>v({...m,address:E.target.value}),rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes"}),s.jsx(Pn,{id:"notes",value:m.notes,onChange:E=>v({...m,notes:E.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:C,children:"Cancel"}),s.jsxs(K,{type:"submit",children:[h?"Update":"Create"," Customer"]})]})]})]})]})]})]}),s.jsx(bg,{open:u,onOpenChange:d,title:"Import Customers",description:"Upload a CSV file to import customers in bulk",columns:get,onImport:g}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search customers...",value:a,onChange:E=>o(E.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Contact Person"}),s.jsx(H,{children:"Email"}),s.jsx(H,{children:"Phone"}),s.jsx(H,{children:"TPIN"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[_==null?void 0:_.map(E=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:E.name}),s.jsx(F,{children:E.contact_person||"-"}),s.jsx(F,{children:E.email||"-"}),s.jsx(F,{children:E.phone||"-"}),s.jsx(F,{children:E.tpin||"-"}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(`/quotations/new?customer=${E.id}`),title:"Create Quotation",children:s.jsx(ku,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${E.id}`),title:"Create Invoice",children:s.jsx(dr,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>S(E),children:s.jsx(Vp,{className:"h-4 w-4"})}),i&&s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>w.mutate(E.id),children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},E.id)),(_==null?void 0:_.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:6,className:"text-center text-muted-foreground",children:"No customers found"})})]})]})})]})]})}const bet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},wet=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function jet(){const t=Fn(),e=Jt(),{user:n}=dt(),[r,i]=j.useState(""),[a,o]=j.useState(!1),{data:l}=fd(),[c,u]=j.useState({customer_id:"",order_type:"sale",notes:""}),{data:d,isLoading:h}=Ee({queryKey:["sales-orders",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await ze.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=Se(ae,ee.SALES_ORDERS),C=(await Pe(Ce(x,ge("companyId","==",b.companyId)))).docs.map(_=>{const g=_.data();return{id:_.id,orderNumber:String(g.orderNumber??g.order_number??""),orderDate:wet(g.orderDate??g.order_date),customerId:g.customerId??g.customer_id??null,customerName:"-",orderType:String(g.orderType??g.order_type??"sale"),subtotal:Number(g.subtotal??0),vatAmount:Number(g.vatAmount??g.vat_amount??0),total:Number(g.total??0),status:String(g.status??"pending")}}),S=Array.from(new Set(C.map(_=>_.customerId).filter(Boolean))),P=new Map;if(S.length>0){const _=Se(ae,ee.CUSTOMERS),g=bet(S,30);(await Promise.all(g.map(E=>Pe(Ce(_,ge(so(),"in",E)))))).forEach(E=>{E.docs.forEach(A=>{const I=A.data();P.set(A.id,String(I.name??"-"))})})}return C.map(_=>({..._,customerName:_.customerId&&P.get(_.customerId)||"-"})).sort((_,g)=>String(g.orderDate).localeCompare(String(_.orderDate)))},enabled:!!n}),{data:f}=Ee({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await ze.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=Se(ae,ee.CUSTOMERS);return(await Pe(Ce(x,ge("companyId","==",b.companyId)))).docs.map(C=>{const S=C.data();return{id:C.id,name:String(S.name??"")}}).sort((C,S)=>C.name.localeCompare(S.name))},enabled:!!n}),m=qe({mutationFn:async b=>{if(!n)throw new Error("You must be logged in");const x=await ze.getPrimaryMembershipByUser(n.id);if(!(x!=null&&x.companyId))throw new Error("No company profile found for your account");const w=`SO-${Date.now()}`;await es(Se(ae,ee.SALES_ORDERS),{companyId:x.companyId,userId:n.id,customerId:b.customer_id||null,orderType:b.order_type,notes:b.notes||null,orderNumber:w,orderDate:new Date().toISOString().slice(0,10),subtotal:0,vatAmount:0,total:0,status:"pending",createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["sales-orders",n==null?void 0:n.id]}),G.success("Sales order created successfully"),o(!1),u({customer_id:"",order_type:"sale",notes:""})},onError:b=>{G.error("Failed to create order: "+(b instanceof Error?b.message:"Unknown error"))}}),v=b=>{switch(b){case"completed":case"accepted":return"default";case"pending":case"draft":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"outline"}},p=b=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(b),y=d==null?void 0:d.filter(b=>b.orderNumber.toLowerCase().includes(r.toLowerCase())||b.customerName.toLowerCase().includes(r.toLowerCase()));return h?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Orders"}),s.jsxs("p",{className:"text-muted-foreground",children:["Manage sales transactions and orders",(l==null?void 0:l.isVatRegistered)&&s.jsx("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"VAT Registered (16%)"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>t("/quotations/new"),children:[s.jsx(ku,{className:"mr-2 h-4 w-4"}),"New Quotation"]}),s.jsxs(Jn,{open:a,onOpenChange:o,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Order"]})}),s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Create Sales Order"})}),s.jsxs("form",{onSubmit:b=>{b.preventDefault(),m.mutate(c)},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"customer",children:"Customer"}),s.jsxs(gt,{value:c.customer_id,onValueChange:b=>u({...c,customer_id:b}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select customer"})}),s.jsx(pt,{children:f==null?void 0:f.map(b=>s.jsx(ye,{value:b.id,children:b.name},b.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"type",children:"Order Type"}),s.jsxs(gt,{value:c.order_type,onValueChange:b=>u({...c,order_type:b}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"sale",children:"Sale"}),s.jsx(ye,{value:"estimate",children:"Estimate"}),s.jsx(ye,{value:"quote",children:"Quote"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes"}),s.jsx(Pn,{id:"notes",value:c.notes,onChange:b=>u({...c,notes:b.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(K,{type:"submit",children:"Create Order"})]})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search orders...",value:r,onChange:b=>i(b.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Order #"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Customer"}),s.jsx(H,{children:"Type"}),s.jsx(H,{className:"text-right",children:"Subtotal"}),(l==null?void 0:l.isVatRegistered)&&s.jsx(H,{className:"text-right",children:"VAT"}),s.jsx(H,{className:"text-right",children:"Total"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[y==null?void 0:y.map(b=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:b.orderNumber}),s.jsx(F,{children:b.orderDate?vt(new Date(b.orderDate),"dd MMM yyyy"):"-"}),s.jsx(F,{children:b.customerName||"-"}),s.jsx(F,{className:"capitalize",children:b.orderType}),s.jsx(F,{className:"text-right",children:p(b.subtotal)}),(l==null?void 0:l.isVatRegistered)&&s.jsx(F,{className:"text-right",children:p(b.vatAmount)}),s.jsx(F,{className:"text-right",children:p(b.total)}),s.jsx(F,{children:s.jsx(De,{variant:v(b.status||"pending"),children:b.status})}),s.jsx(F,{className:"text-right",children:s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?order=${b.id}`),title:"Convert to Invoice",children:s.jsx(dr,{className:"h-4 w-4"})})})]},b.id)),(y==null?void 0:y.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:l!=null&&l.isVatRegistered?9:8,className:"text-center text-muted-foreground",children:"No orders found"})})]})]})})]})]})}function _et(){const t=Fn(),[e]=TR(),n=e.get("customer"),{user:r}=dt(),{data:i}=fd(),[a,o]=j.useState(n||""),[l,c]=j.useState(`QT-${Date.now()}`),[u,d]=j.useState(new Date().toISOString().split("T")[0]),[h,f]=j.useState(""),[m,v]=j.useState(""),[p,y]=j.useState("This quotation is valid for 30 days from the date of issue."),[b,x]=j.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:w}=Ee({queryKey:["customers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const V=await ze.getPrimaryMembershipByUser(r.id);if(!(V!=null&&V.companyId))return[];const D=Se(ae,ee.CUSTOMERS);return(await Pe(Ce(D,ge("companyId","==",V.companyId)))).docs.map(W=>{const J=W.data();return{id:W.id,name:String(J.name??""),email:J.email?String(J.email):void 0,address:J.address?String(J.address):void 0}}).sort((W,J)=>W.name.localeCompare(J.name))},enabled:!!r}),C=(i==null?void 0:i.isVatRegistered)||!1,S=(i==null?void 0:i.vatRate)||16,P=()=>{x([...b,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},_=V=>{b.length>1&&x(b.filter(D=>D.id!==V))},g=(V,D,R)=>{x(b.map(W=>{if(W.id===V){const J={...W,[D]:R};return(D==="quantity"||D==="rate")&&(J.amount=J.quantity*J.rate),J}return W}))},T=b.reduce((V,D)=>V+D.amount,0),E=C?T*(S/100):0,A=T+E,I=w==null?void 0:w.find(V=>V.id===a),k=qe({mutationFn:async V=>{if(!r)throw new Error("You must be logged in");const D=await ze.getPrimaryMembershipByUser(r.id);if(!(D!=null&&D.companyId))throw new Error("No company profile found for your account");const R=b.filter(W=>W.description.trim().length>0).map(W=>({description:W.description.trim(),quantity:W.quantity,unitPrice:W.rate}));if(R.length===0)throw new Error("At least one quotation line item is required.");await jn.createQuotation({companyId:D.companyId,customerId:a||void 0,quotationNumber:l,quotationDate:u,validUntil:h||u,status:V==="sent"?"Sent":"Draft",notes:[m,p].filter(Boolean).join(`

`)||void 0,taxAmount:E,totalAmount:A,lineItems:R})},onSuccess:(V,D)=>{G.success(D==="sent"?"Quotation sent successfully":"Quotation saved as draft"),t("/sales-orders")},onError:V=>{G.error("Failed to save quotation: "+(V instanceof Error?V.message:"Unknown error"))}}),L=()=>{const V=encodeURIComponent(JSON.stringify(b));t(`/invoices/new?customer=${a}&lines=${V}`)},B=(V=!1)=>{if(!a){G.error("Please select a customer");return}k.mutate(V?"sent":"draft")},U=V=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(V);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Quotation"}),s.jsxs("p",{className:"text-muted-foreground",children:["Create a quotation for a customer",C&&s.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",S,"%"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(K,{variant:"outline",onClick:()=>t("/sales-orders"),children:"Cancel"}),s.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>B(!1),disabled:k.isPending,children:[s.jsx(bh,{className:"h-4 w-4"}),"Save Draft"]}),s.jsxs(K,{className:"gap-2",onClick:()=>B(!0),disabled:k.isPending,children:[s.jsx(nR,{className:"h-4 w-4"}),"Save & Send"]})]})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Quotation Details"})}),s.jsx(se,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"customer",children:"Customer *"}),s.jsxs(gt,{value:a,onValueChange:o,children:[s.jsx(mt,{id:"customer",children:s.jsx(yt,{placeholder:"Select customer"})}),s.jsx(pt,{children:w==null?void 0:w.map(V=>s.jsx(ye,{value:V.id,children:V.name},V.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"quoteNumber",children:"Quotation Number *"}),s.jsx(Y,{id:"quoteNumber",value:l,onChange:V=>c(V.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"quoteDate",children:"Quotation Date *"}),s.jsx(Y,{id:"quoteDate",type:"date",value:u,onChange:V=>d(V.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"validUntil",children:"Valid Until"}),s.jsx(Y,{id:"validUntil",type:"date",value:h,onChange:V=>f(V.target.value)})]})]})})]}),I&&s.jsx(Z,{className:"bg-muted/30",children:s.jsx(se,{className:"pt-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium",children:I.name}),I.email&&s.jsx("p",{className:"text-muted-foreground",children:I.email}),I.address&&s.jsx("p",{className:"text-muted-foreground",children:I.address})]})})}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Line Items"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[s.jsx("div",{className:"md:col-span-5",children:"Description"}),s.jsx("div",{className:"md:col-span-2",children:"Qty"}),s.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),s.jsx("div",{className:"md:col-span-2",children:"Amount"}),s.jsx("div",{className:"md:col-span-1"})]}),b.map(V=>s.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[s.jsx("div",{className:"md:col-span-5",children:s.jsx(Pn,{placeholder:"Item description",value:V.description,onChange:D=>g(V.id,"description",D.target.value),rows:2})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{type:"number",placeholder:"Qty",value:V.quantity,onChange:D=>g(V.id,"quantity",parseFloat(D.target.value)||0),min:"0",step:"0.01"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{type:"number",placeholder:"Rate",value:V.rate,onChange:D=>g(V.id,"rate",parseFloat(D.target.value)||0),min:"0",step:"0.01"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Y,{value:U(V.amount),disabled:!0,className:"bg-muted"})}),s.jsx("div",{className:"md:col-span-1",children:s.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>_(V.id),disabled:b.length===1,children:s.jsx(Ms,{className:"h-4 w-4"})})})]},V.id)),s.jsxs(K,{type:"button",variant:"outline",className:"gap-2",onClick:P,children:[s.jsx(Nn,{className:"h-4 w-4"}),"Add Line Item"]})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Notes & Terms"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes (visible to customer)"}),s.jsx(Pn,{id:"notes",placeholder:"Add any notes or special conditions",rows:3,value:m,onChange:V=>v(V.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"terms",children:"Terms & Conditions"}),s.jsx(Pn,{id:"terms",placeholder:"Quotation terms and conditions",rows:3,value:p,onChange:V=>y(V.target.value)})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Summary"})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:U(T)})]}),C&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["VAT (",S,"%)"]}),s.jsx("span",{className:"font-medium",children:U(E)})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"text-xl font-bold text-primary",children:U(A)})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Actions"})}),s.jsx(se,{className:"space-y-2",children:s.jsxs(K,{variant:"outline",className:"w-full gap-2",onClick:L,disabled:!a||b.every(V=>!V.description),children:[s.jsx(dr,{className:"h-4 w-4"}),"Convert to Invoice"]})})]}),!C&&s.jsx(Z,{className:"bg-muted/50",children:s.jsx(se,{className:"pt-4",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",s.jsx(K,{variant:"link",className:"p-0 h-auto",onClick:()=>t("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}const Net=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},Eet=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function Aet(){const t=Fn(),e=Jt(),{user:n}=dt(),[r,i]=j.useState(""),{data:a}=fd(),{data:o,isLoading:l}=Ee({queryKey:["estimates",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await ze.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=Se(ae,ee.SALES_ORDERS),p=(await Pe(Ce(m,ge("companyId","==",f.companyId)))).docs.map(x=>{const w=x.data();return{id:x.id,orderNumber:String(w.orderNumber??w.order_number??""),orderDate:Eet(w.orderDate??w.order_date),orderType:String(w.orderType??w.order_type??"sale"),subtotal:Number(w.subtotal??0),vatAmount:Number(w.vatAmount??w.vat_amount??0),total:Number(w.total??0),status:String(w.status??"draft"),customerId:w.customerId??w.customer_id??null,customerName:"-"}}).filter(x=>["quote","estimate"].includes(x.orderType)),y=Array.from(new Set(p.map(x=>x.customerId).filter(Boolean))),b=new Map;if(y.length>0){const x=Se(ae,ee.CUSTOMERS),w=Net(y,30);(await Promise.all(w.map(S=>Pe(Ce(x,ge(so(),"in",S)))))).forEach(S=>{S.docs.forEach(P=>{const _=P.data();b.set(P.id,String(_.name??"-"))})})}return p.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,w)=>String(w.orderDate).localeCompare(String(x.orderDate)))},enabled:!!n}),c=qe({mutationFn:async f=>{await Yl(et(ae,ee.SALES_ORDERS,f))},onSuccess:()=>{e.invalidateQueries({queryKey:["estimates",n==null?void 0:n.id]}),G.success("Estimate deleted successfully")},onError:f=>{G.error("Failed to delete estimate: "+(f instanceof Error?f.message:"Unknown error"))}}),u=f=>{switch(f){case"sent":case"accepted":return"default";case"draft":return"secondary";case"rejected":return"destructive";default:return"outline"}},d=f=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(f),h=o==null?void 0:o.filter(f=>f.orderNumber.toLowerCase().includes(r.toLowerCase())||f.customerName.toLowerCase().includes(r.toLowerCase()));return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Estimates & Quotations"}),s.jsx("p",{className:"text-muted-foreground",children:"Create and manage quotes for your customers"})]}),s.jsxs(K,{onClick:()=>t("/quotations/new"),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Quotation"]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search estimates...",value:r,onChange:f=>i(f.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Quote #"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Customer"}),s.jsx(H,{className:"text-right",children:"Subtotal"}),(a==null?void 0:a.isVatRegistered)&&s.jsx(H,{className:"text-right",children:"VAT"}),s.jsx(H,{className:"text-right",children:"Total"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[h==null?void 0:h.map(f=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:f.orderNumber}),s.jsx(F,{children:f.orderDate?vt(new Date(f.orderDate),"dd MMM yyyy"):"-"}),s.jsx(F,{children:f.customerName||"-"}),s.jsx(F,{className:"text-right",children:d(f.subtotal)}),(a==null?void 0:a.isVatRegistered)&&s.jsx(F,{className:"text-right",children:d(f.vatAmount)}),s.jsx(F,{className:"text-right",children:d(f.total)}),s.jsx(F,{children:s.jsx(De,{variant:u(f.status||"draft"),children:f.status})}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${f.customerId}`),title:"Convert to Invoice",children:s.jsx(dr,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),title:"Delete",children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},f.id)),(h==null?void 0:h.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:a!=null&&a.isVatRegistered?8:7,className:"text-center text-muted-foreground py-8",children:"No estimates found. Create your first quotation!"})})]})]})})]})]})}const Tet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function Cet(){const t=Fn(),e=Jt(),{user:n}=dt(),{data:r}=$s(),i=r==="super_admin"||r==="admin",[a,o]=j.useState(""),[l,c]=j.useState(!1),[u,d]=j.useState(!1),[h,f]=j.useState(null),[m,v]=j.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),{data:p,isLoading:y}=Ee({queryKey:["vendors",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const A=await ze.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))return[];const I=Se(ae,ee.VENDORS);return(await Pe(Ce(I,ge("companyId","==",A.companyId)))).docs.map(L=>{const B=L.data();return{id:L.id,name:String(B.name??""),email:B.email??null,phone:B.phone??null,address:B.address??null,tpin:B.tpin??null,contact_person:B.contactPerson??B.contact_person??null,notes:B.notes??null,bank_name:B.bankName??B.bank_name??null,bank_account_number:B.bankAccountNumber??B.bank_account_number??null,payment_terms:B.paymentTerms??B.payment_terms??null}}).sort((L,B)=>L.name.localeCompare(B.name))},enabled:!!n}),b=qe({mutationFn:async A=>{if(!n)throw new Error("You must be logged in");const I=await ze.getPrimaryMembershipByUser(n.id);if(!(I!=null&&I.companyId))throw new Error("No company profile found for your account");await es(Se(ae,ee.VENDORS),{companyId:I.companyId,userId:n.id,name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,bankName:A.bank_name||null,bankAccountNumber:A.bank_account_number||null,paymentTerms:A.payment_terms||null,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),G.success("Vendor created successfully"),C()},onError:A=>{G.error("Failed to create vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),x=qe({mutationFn:async({id:A,data:I})=>{await fr(et(ae,ee.VENDORS,A),{name:I.name,email:I.email||null,phone:I.phone||null,address:I.address||null,tpin:I.tpin||null,contactPerson:I.contact_person||null,notes:I.notes||null,bankName:I.bank_name||null,bankAccountNumber:I.bank_account_number||null,paymentTerms:I.payment_terms||null,updatedAt:Ie()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),G.success("Vendor updated successfully"),C()},onError:A=>{G.error("Failed to update vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),w=qe({mutationFn:async A=>{if(!i)throw new Error("Only Admin users can delete vendors.");await Yl(et(ae,ee.VENDORS,A))},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),G.success("Vendor deleted successfully")},onError:A=>{G.error("Failed to delete vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),C=()=>{v({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),f(null),c(!1)},S=A=>{f(A),v({name:A.name,email:A.email||"",phone:A.phone||"",address:A.address||"",tpin:A.tpin||"",contact_person:A.contact_person||"",notes:A.notes||"",bank_name:A.bank_name||"",bank_account_number:A.bank_account_number||"",payment_terms:A.payment_terms||""}),c(!0)},P=A=>{A.preventDefault(),h?x.mutate({id:h.id,data:m}):b.mutate(m)},_=p==null?void 0:p.filter(A=>{var I,k;return A.name.toLowerCase().includes(a.toLowerCase())||((I=A.email)==null?void 0:I.toLowerCase().includes(a.toLowerCase()))||((k=A.phone)==null?void 0:k.includes(a))}),g=[{key:"name",header:"Vendor Name",required:!0},{key:"email",header:"Email",required:!1},{key:"phone",header:"Phone",required:!1},{key:"address",header:"Address",required:!1},{key:"tpin",header:"TPIN",required:!1},{key:"contact_person",header:"Contact Person",required:!1},{key:"bank_name",header:"Bank Name",required:!1},{key:"bank_account_number",header:"Bank Account",required:!1},{key:"payment_terms",header:"Payment Terms",required:!1}],T=async A=>{if(!n)throw new Error("You must be logged in");const I=await ze.getPrimaryMembershipByUser(n.id);if(!(I!=null&&I.companyId))throw new Error("No company profile found for your account");const k=A.map(U=>({companyId:I.companyId,userId:n.id,name:String(U.name||""),email:U.email||null,phone:U.phone||null,address:U.address||null,tpin:U.tpin||null,contactPerson:U.contact_person||null,bankName:U.bank_name||null,bankAccountNumber:U.bank_account_number||null,paymentTerms:U.payment_terms||null,createdAt:Ie(),updatedAt:Ie()})),L=Se(ae,ee.VENDORS),B=Tet(k,400);for(const U of B){const V=Ql(ae);U.forEach(D=>{V.set(et(L),D)}),await V.commit()}e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]})},E=()=>{if(!(_!=null&&_.length))return;of(_,[{header:"Vendor Name",key:"name"},{header:"Contact Person",key:"contact_person"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"Address",key:"address"},{header:"TPIN",key:"tpin"},{header:"Bank Name",key:"bank_name"},{header:"Bank Account",key:"bank_account_number"},{header:"Payment Terms",key:"payment_terms"}],"vendors-export")};return y?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Vendors"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your suppliers and vendors"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:E,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),s.jsxs(Jn,{open:l,onOpenChange:A=>{c(A),A||C()},children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})}),s.jsxs(Kn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:h?"Edit Vendor":"Add New Vendor"})}),s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"name",children:"Vendor Name *"}),s.jsx(Y,{id:"name",value:m.name,onChange:A=>v({...m,name:A.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"contact_person",children:"Contact Person"}),s.jsx(Y,{id:"contact_person",value:m.contact_person,onChange:A=>v({...m,contact_person:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:m.email,onChange:A=>v({...m,email:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"phone",children:"Phone"}),s.jsx(Y,{id:"phone",value:m.phone,onChange:A=>v({...m,phone:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"tpin",children:"TPIN"}),s.jsx(Y,{id:"tpin",value:m.tpin,onChange:A=>v({...m,tpin:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"payment_terms",children:"Payment Terms"}),s.jsx(Y,{id:"payment_terms",value:m.payment_terms,onChange:A=>v({...m,payment_terms:A.target.value}),placeholder:"e.g., Net 30"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"bank_name",children:"Bank Name"}),s.jsx(Y,{id:"bank_name",value:m.bank_name,onChange:A=>v({...m,bank_name:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"bank_account_number",children:"Bank Account Number"}),s.jsx(Y,{id:"bank_account_number",value:m.bank_account_number,onChange:A=>v({...m,bank_account_number:A.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"address",children:"Address"}),s.jsx(Pn,{id:"address",value:m.address,onChange:A=>v({...m,address:A.target.value}),rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes"}),s.jsx(Pn,{id:"notes",value:m.notes,onChange:A=>v({...m,notes:A.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:C,children:"Cancel"}),s.jsxs(K,{type:"submit",children:[h?"Update":"Create"," Vendor"]})]})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search vendors...",value:a,onChange:A=>o(A.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Contact Person"}),s.jsx(H,{children:"Email"}),s.jsx(H,{children:"Phone"}),s.jsx(H,{children:"TPIN"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[_==null?void 0:_.map(A=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:A.name}),s.jsx(F,{children:A.contact_person||"-"}),s.jsx(F,{children:A.email||"-"}),s.jsx(F,{children:A.phone||"-"}),s.jsx(F,{children:A.tpin||"-"}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/purchase-orders"),title:"Create Purchase Order",children:s.jsx(ku,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/bills"),title:"Create Bill",children:s.jsx(dr,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>S(A),children:s.jsx(Vp,{className:"h-4 w-4"})}),i&&s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>w.mutate(A.id),children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},A.id)),(_==null?void 0:_.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No vendors found. Add your first vendor!"})})]})]})})]}),s.jsx(bg,{open:u,onOpenChange:d,onImport:T,columns:g,title:"Import Vendors"})]})}const Pet=["Utilities","Transport","Office Supplies","Rent","Salaries","Marketing","Repairs","Miscellaneous"];function Iet(){const{user:t}=dt(),{data:e}=$s(),n=Jt(),[r,i]=j.useState(""),[a,o]=j.useState(!1),{data:l}=fd(),c=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),[u,d]=j.useState({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""}),{data:h}=Ee({queryKey:["bills-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const k=await ze.getPrimaryMembershipByUser(t.id);return(k==null?void 0:k.companyId)??null},enabled:!!t}),{data:f,isLoading:m}=Ee({queryKey:["bills",h],queryFn:async()=>{if(!h)return[];const[k,L]=await Promise.all([Pe(Ce(Se(ae,ee.BILLS),ge("companyId","==",h))),Pe(Ce(Se(ae,ee.VENDORS),ge("companyId","==",h)))]),B=new Map;return L.docs.forEach(U=>{const V=U.data();B.set(U.id,String(V.name??""))}),k.docs.map(U=>{const V=U.data(),D=V.vendorId??V.vendor_id??null;return{id:U.id,bill_number:String(V.billNumber??V.bill_number??`BILL-${U.id.slice(0,8).toUpperCase()}`),bill_date:String(V.billDate??V.bill_date??""),due_date:V.dueDate??V.due_date??null,subtotal:Number(V.subtotal??0),vat_amount:Number(V.vatAmount??V.vat_amount??0),total:Number(V.total??0),status:V.status??"pending",description:V.description??null,vendor_id:D,amount_paid:Number(V.amountPaid??V.amount_paid??0),journal_entry_id:V.journalEntryId??V.journal_entry_id??null,vendors:D?{name:B.get(D)||"Unknown Vendor"}:null}}).sort((U,V)=>V.bill_date.localeCompare(U.bill_date))},enabled:!!h}),{data:v=[]}=Ee({queryKey:["bill-expense-category-mappings",h],queryFn:async()=>{if(!h)return[];let k=await Pe(Ce(Se(ae,ee.EXPENSE_CATEGORY_MAPPINGS),ge("companyId","==",h)));if(k.empty)try{await jn.seedDefaultExpenseCategories({companyId:h}),k=await Pe(Ce(Se(ae,ee.EXPENSE_CATEGORY_MAPPINGS),ge("companyId","==",h)))}catch{}const L=k.docs.map(B=>{const U=B.data();return{id:B.id,categoryName:String(U.categoryName??U.category_name??"")}}).filter(B=>B.categoryName).sort((B,U)=>B.categoryName.localeCompare(U.categoryName));return L.length>0?L:Pet.map(B=>({id:`fallback-${B.toLowerCase().replace(/[^a-z0-9]+/g,"-")}`,categoryName:B}))},enabled:!!h}),{data:p=[]}=Ee({queryKey:["bill-payment-accounts",h],queryFn:async()=>h?(await Pe(Ce(Se(ae,ee.CHART_OF_ACCOUNTS),ge("companyId","==",h),ge("accountType","==","Asset"),ge("status","==","active")))).docs.map(L=>{const B=L.data();return{id:L.id,accountName:String(B.accountName??"")}}).filter(L=>L.accountName).sort((L,B)=>L.accountName.localeCompare(B.accountName)):[],enabled:!!h}),y=()=>{if(!p.length)return"";const k=p.find(L=>L.accountName.toLowerCase().includes("bank"))||p.find(L=>L.accountName.toLowerCase().includes("cash"));return(k==null?void 0:k.id)||p[0].id},{data:b}=Ee({queryKey:["vendors",h],queryFn:async()=>h?(await Pe(Ce(Se(ae,ee.VENDORS),ge("companyId","==",h)))).docs.map(L=>{const B=L.data();return{id:L.id,name:String(B.name??"")}}).sort((L,B)=>L.name.localeCompare(B.name)):[],enabled:!!h}),x=(l==null?void 0:l.isVatRegistered)||!1,w=(l==null?void 0:l.vatRate)||16,C=parseFloat(u.amount)||0,S=x?C*(w/100):0,P=C+S,_=qe({mutationFn:async k=>{if(!h||!t)throw new Error("Not authenticated");await jn.createBill({companyId:h,vendorId:k.vendor_id||void 0,amount:P,categoryName:k.category||"Miscellaneous",billDate:k.bill_date,dueDate:k.due_date||k.bill_date,description:k.description||void 0})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Bill created successfully"),o(!1),d({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""})},onError:k=>{G.error("Failed to create bill: "+k.message)}}),g=qe({mutationFn:async k=>{if(!h)throw new Error("Company not found");const L=f==null?void 0:f.find(V=>V.id===k);if(!L)throw new Error("Bill not found");const B=Math.max(Number(L.total)-Number(L.amount_paid||0),0);if(B<=0)throw new Error("Bill is already fully paid");const U=y();if(!U)throw new Error("No active Asset payment account found.");await jn.payBill({companyId:h,billId:k,amount:B,paymentDate:new Date().toISOString().split("T")[0],paymentAccountId:U,notes:"Bill payment recorded from Bills page"})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Bill payment recorded")},onError:k=>{G.error("Failed to update bill: "+k.message)}}),T=qe({mutationFn:async k=>{if(!h)throw new Error("Company not found");if(!k.journal_entry_id)throw new Error("Bill has no posted journal entry to reverse.");if(Number(k.amount_paid||0)>.001)throw new Error("Reverse bill payment entries first before reversing this bill.");const L=prompt(`Reason for reversing bill ${k.bill_number} (optional):`)||void 0;return jn.reverseJournalEntry({companyId:h,journalEntryId:k.journal_entry_id,reason:L})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Bill journal entry reversed")},onError:k=>{G.error("Failed to reverse bill: "+k.message)}}),E=k=>{switch(String(k||"").toLowerCase()){case"paid":return"default";case"unpaid":return"secondary";case"partially paid":return"secondary";case"pending":return"secondary";case"overdue":return"destructive";default:return"outline"}},A=k=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(k),I=f==null?void 0:f.filter(k=>{var L,B;return k.bill_number.toLowerCase().includes(r.toLowerCase())||((B=(L=k.vendors)==null?void 0:L.name)==null?void 0:B.toLowerCase().includes(r.toLowerCase()))});return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Bills"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage bills and payments to vendors"})]}),s.jsxs(Jn,{open:a,onOpenChange:o,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Bill"]})}),s.jsxs(Kn,{className:"max-w-lg",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Create New Bill"})}),s.jsxs("form",{onSubmit:k=>{k.preventDefault(),_.mutate(u)},className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"vendor",children:"Vendor *"}),s.jsxs(gt,{value:u.vendor_id,onValueChange:k=>d({...u,vendor_id:k}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select vendor"})}),s.jsx(pt,{children:b==null?void 0:b.map(k=>s.jsx(ye,{value:k.id,children:k.name},k.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"bill_number",children:"Bill Number"}),s.jsx(Y,{id:"bill_number",value:u.bill_number,onChange:k=>d({...u,bill_number:k.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"bill_date",children:"Bill Date *"}),s.jsx(Y,{id:"bill_date",type:"date",value:u.bill_date,onChange:k=>d({...u,bill_date:k.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"due_date",children:"Due Date"}),s.jsx(Y,{id:"due_date",type:"date",value:u.due_date,onChange:k=>d({...u,due_date:k.target.value})})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(X,{htmlFor:"category",children:"Category *"}),s.jsxs(gt,{value:u.category,onValueChange:k=>d({...u,category:k}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select category"})}),s.jsx(pt,{children:v.map(k=>s.jsx(ye,{value:k.categoryName,children:k.categoryName},k.id))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),s.jsx(Y,{id:"amount",type:"number",step:"0.01",value:u.amount,onChange:k=>d({...u,amount:k.target.value}),required:!0})]}),x&&s.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:A(C)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["VAT (",w,"%):"]}),s.jsx("span",{children:A(S)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:A(P)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"description",children:"Description"}),s.jsx(Pn,{id:"description",value:u.description,onChange:k=>d({...u,description:k.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(K,{type:"submit",children:"Create Bill"})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search bills...",value:r,onChange:k=>i(k.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Bill #"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Vendor"}),s.jsx(H,{children:"Due Date"}),s.jsx(H,{className:"text-right",children:"Total"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[I==null?void 0:I.map(k=>{var L;return s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:k.bill_number}),s.jsx(F,{children:vt(new Date(k.bill_date),"dd MMM yyyy")}),s.jsx(F,{children:((L=k.vendors)==null?void 0:L.name)||"-"}),s.jsx(F,{children:k.due_date?vt(new Date(k.due_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"text-right",children:A(Number(k.total))}),s.jsx(F,{children:s.jsx(De,{variant:E(k.status||"pending"),children:k.status})}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[k.journal_entry_id&&c&&s.jsx(K,{variant:"ghost",size:"icon",disabled:T.isPending||Number(k.amount_paid||0)>.001,onClick:()=>{if(Number(k.amount_paid||0)>.001){G.error("Reverse bill payments first before reversing this bill.");return}confirm("Reverse this bill posting? This creates an opposite journal entry.")&&T.mutate(k)},title:Number(k.amount_paid||0)>.001?"Reverse payments first":"Reverse bill posting",children:s.jsx(Pl,{className:"h-4 w-4"})}),String(k.status||"").toLowerCase()!=="paid"&&s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>g.mutate(k.id),title:"Mark as Paid",children:s.jsx(Ux,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{G.error("Bill deletion is blocked. Use a reversal/credit-note workflow.")},disabled:!0,title:"Bill deletion is blocked",children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},k.id)}),(I==null?void 0:I.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No bills found. Create your first bill!"})})]})]})})]})]})}function ket(){const{user:t}=dt(),e=Fn(),n=Jt(),[r,i]=j.useState(""),[a,o]=j.useState(!1),{data:l}=fd(),[c,u]=j.useState({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""}),{data:d}=Ee({queryKey:["purchase-orders-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await ze.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ee({queryKey:["purchase-orders",d],queryFn:async()=>{if(!d)return[];const g=Se(ae,ee.PURCHASE_ORDERS),E=(await Pe(Ce(g,ge("companyId","==",d)))).docs.map(k=>{const L=k.data();return{id:k.id,order_number:String(L.orderNumber??L.order_number??""),order_date:String(L.orderDate??L.order_date??""),expected_date:L.expectedDate??L.expected_date??null,subtotal:Number(L.subtotal??0),vat_amount:Number(L.vatAmount??L.vat_amount??0),total:Number(L.total??0),status:L.status??"pending",description:L.description??null,vendor_id:L.vendorId??L.vendor_id??null,vendors:null}}),A=Array.from(new Set(E.map(k=>k.vendor_id).filter(Boolean))),I=new Map;if(A.length>0){const k=Se(ae,ee.VENDORS);(await Pe(Ce(k,ge("companyId","==",d)))).docs.forEach(B=>{const U=B.data();I.set(B.id,String(U.name??""))})}return E.map(k=>({...k,vendors:k.vendor_id?{name:I.get(k.vendor_id)||"Unknown Vendor"}:null})).sort((k,L)=>L.order_date.localeCompare(k.order_date))},enabled:!!d}),{data:m}=Ee({queryKey:["vendors",d],queryFn:async()=>{if(!d)return[];const g=Se(ae,ee.VENDORS);return(await Pe(Ce(g,ge("companyId","==",d)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??"")}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!d}),v=(l==null?void 0:l.isVatRegistered)||!1,p=(l==null?void 0:l.vatRate)||16,y=parseFloat(c.amount)||0,b=v?y*(p/100):0,x=y+b,w=qe({mutationFn:async g=>{if(!d||!t)throw new Error("No active company context");await es(Se(ae,ee.PURCHASE_ORDERS),{companyId:d,vendorId:g.vendor_id,orderNumber:g.order_number,orderDate:g.order_date,expectedDate:g.expected_date||null,subtotal:y,vatAmount:b,total:x,status:"pending",description:g.description||null,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),G.success("Purchase order created successfully"),o(!1),u({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""})},onError:g=>{G.error("Failed to create purchase order: "+g.message)}}),C=qe({mutationFn:async g=>{await Yl(et(ae,ee.PURCHASE_ORDERS,g))},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),G.success("Purchase order deleted successfully")},onError:g=>{G.error("Failed to delete purchase order: "+g.message)}}),S=g=>{switch(g){case"received":return"default";case"pending":return"secondary";case"cancelled":return"destructive";default:return"outline"}},P=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),_=h==null?void 0:h.filter(g=>{var T,E;return g.order_number.toLowerCase().includes(r.toLowerCase())||((E=(T=g.vendors)==null?void 0:T.name)==null?void 0:E.toLowerCase().includes(r.toLowerCase()))});return f?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Purchase Orders"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage purchase orders to vendors"})]}),s.jsxs(Jn,{open:a,onOpenChange:o,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Purchase Order"]})}),s.jsxs(Kn,{className:"max-w-lg",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Create Purchase Order"})}),s.jsxs("form",{onSubmit:g=>{g.preventDefault(),w.mutate(c)},className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"vendor",children:"Vendor *"}),s.jsxs(gt,{value:c.vendor_id,onValueChange:g=>u({...c,vendor_id:g}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select vendor"})}),s.jsx(pt,{children:m==null?void 0:m.map(g=>s.jsx(ye,{value:g.id,children:g.name},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"order_number",children:"PO Number"}),s.jsx(Y,{id:"order_number",value:c.order_number,onChange:g=>u({...c,order_number:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"order_date",children:"Order Date *"}),s.jsx(Y,{id:"order_date",type:"date",value:c.order_date,onChange:g=>u({...c,order_date:g.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"expected_date",children:"Expected Delivery"}),s.jsx(Y,{id:"expected_date",type:"date",value:c.expected_date,onChange:g=>u({...c,expected_date:g.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),s.jsx(Y,{id:"amount",type:"number",step:"0.01",value:c.amount,onChange:g=>u({...c,amount:g.target.value}),required:!0})]}),v&&s.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:P(y)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["VAT (",p,"%):"]}),s.jsx("span",{children:P(b)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:P(x)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"description",children:"Description"}),s.jsx(Pn,{id:"description",value:c.description,onChange:g=>u({...c,description:g.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(K,{type:"submit",children:"Create Order"})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search purchase orders...",value:r,onChange:g=>i(g.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"PO #"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Vendor"}),s.jsx(H,{children:"Expected Delivery"}),s.jsx(H,{className:"text-right",children:"Total"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[_==null?void 0:_.map(g=>{var T;return s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:g.order_number}),s.jsx(F,{children:vt(new Date(g.order_date),"dd MMM yyyy")}),s.jsx(F,{children:((T=g.vendors)==null?void 0:T.name)||"-"}),s.jsx(F,{children:g.expected_date?vt(new Date(g.expected_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"text-right",children:P(Number(g.total))}),s.jsx(F,{children:s.jsx(De,{variant:S(g.status||"pending"),children:g.status})}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/bills"),title:"Convert to Bill",children:s.jsx(dr,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>C.mutate(g.id),title:"Delete",children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},g.id)}),(_==null?void 0:_.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first PO!"})})]})]})})]})]})}const Ac=t=>String(t||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),Ret=["Fuel","Travel","Vehicle Maintenance","Motor Vehicle Ins","Parking","Electricity","Water","Internet","Telephone","Airtime","Stationery","Printing","Office Cleaning","Office Maintenance","Building Maintenance","Security","Staff Welfare","Staff Training","Staff Transport","Staff Meals","Overtime","Advertising","Promotion","Branding & Design","Legal Fees","Accounting Fees","Consultancy","Audit Fees","Software","Website Hosting","Domain Renewal","IT Support","Bank Charges","Loan Interest","Transaction Fees","Mobile Money Charges","Inventory","Packaging","Delivery","Courier","Licenses & Permits","Regulatory Fees","Fines & Penalties","Utilities","Transport","Office Supplies","Rent","Salaries","Marketing","Repairs","Miscellaneous"],Oet=[{header:"Description",key:"description",required:!0,transform:Ss.trim},{header:"Category",key:"category",transform:Ss.trim},{header:"Amount",key:"amount",required:!0,transform:Ss.toNumber},{header:"Date",key:"expense_date",required:!0,transform:Ss.toDate},{header:"Vendor",key:"vendor_name",transform:Ss.trim},{header:"Payment Method",key:"payment_method",transform:Ss.trim},{header:"Reference",key:"reference_number",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim}],Det=[{header:"Date",key:"expense_date",formatter:pet},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Vendor",key:"vendor_name"},{header:"Amount",key:"amount",formatter:met},{header:"Payment Method",key:"payment_method"},{header:"Reference",key:"reference_number"},{header:"Notes",key:"notes"}];function Met(){const{user:t}=dt(),{data:e}=$s(),n=Jt(),[r,i]=j.useState(""),[a,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),h=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),f=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier"].includes(e||""),[m,v]=j.useState({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),{data:p}=Ee({queryKey:["expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const z=await ze.getPrimaryMembershipByUser(t.id);return(z==null?void 0:z.companyId)??null},enabled:!!t}),y=async z=>{if(!p)return[];const ie=Se(ae,z),[ve,xe,Be]=await Promise.all([Pe(Ce(ie,ge("companyId","==",p))),Pe(Ce(ie,ge("organizationId","==",p))),Pe(Ce(ie,ge("organization_id","==",p)))]),he=new Map;return[ve,xe,Be].forEach(fe=>{fe.docs.forEach(me=>{he.set(me.id,me)})}),[...he.values()]},{data:b,isLoading:x}=Ee({queryKey:["expenses",p],queryFn:async()=>p?(await y(ee.EXPENSES)).map(ie=>{const ve=ie.data();return{id:ie.id,description:String(ve.description??""),category:ve.category??null,amount:Number(ve.amount??0),expense_date:String(ve.expenseDate??ve.expense_date??new Date().toISOString().slice(0,10)),vendor_name:ve.vendorName??ve.vendor_name??null,payment_method:ve.paymentMethod??ve.payment_method??null,reference_number:ve.referenceNumber??ve.reference_number??null,notes:ve.notes??null,journal_entry_id:ve.journalEntryId??ve.journal_entry_id??null,status:ve.status??null,is_reversed:!!(ve.isReversed??ve.is_reversed??!1),is_voided:!!(ve.isVoided??ve.is_voided??!1),reversal_entry_id:ve.reversalEntryId??ve.reversal_entry_id??null}}).sort((ie,ve)=>ve.expense_date.localeCompare(ie.expense_date)):[],enabled:!!p}),{data:w=[]}=Ee({queryKey:["expense-category-mappings",p],queryFn:async()=>{if(!p)return[];let z=await y(ee.EXPENSE_CATEGORY_MAPPINGS);if(z.length===0)try{await jn.seedDefaultExpenseCategories({companyId:p}),z=await y(ee.EXPENSE_CATEGORY_MAPPINGS)}catch{}const ie=z.map(fe=>{const me=fe.data(),ce=String(me.status??"active").toLowerCase(),Ke=me.isActive!==!1&&me.is_active!==!1&&ce!=="inactive";return{id:fe.id,categoryName:String(me.categoryName??me.category_name??""),isActive:Ke}}).filter(fe=>fe.categoryName&&fe.isActive),xe=[...new Map(ie.map(fe=>[Ac(fe.categoryName),fe])).values()].sort((fe,me)=>fe.categoryName.localeCompare(me.categoryName)),Be=new Set(xe.map(fe=>Ac(fe.categoryName))),he=Ret.filter(fe=>!Be.has(Ac(fe))).map(fe=>({id:`fallback-${Ac(fe)}`,categoryName:fe}));return[...xe,...he].sort((fe,me)=>fe.categoryName.localeCompare(me.categoryName))},enabled:!!p}),{data:C=[]}=Ee({queryKey:["expense-payment-accounts",p],queryFn:async()=>p?(await y(ee.CHART_OF_ACCOUNTS)).map(ie=>{const ve=ie.data(),xe=String(ve.accountType??ve.account_type??"").toLowerCase(),Be=String(ve.status??"active").toLowerCase(),he=ve.isActive!==!1&&ve.is_active!==!1&&Be!=="inactive";return xe!=="asset"||!he?null:{id:ie.id,accountName:String(ve.accountName??ve.account_name??"")}}).filter(ie=>!!(ie!=null&&ie.accountName)).sort((ie,ve)=>ie.accountName.localeCompare(ve.accountName)):[],enabled:!!p}),S=z=>{const ie=z.toLowerCase();return ie==="mobile_money"?"Mobile Money":ie==="cash"?"Cash":ie==="credit"?"Credit":"Bank"},P=z=>{if(!C.length)return"";const ie=z.toLowerCase(),ve=xe=>{var Be;return((Be=C.find(he=>xe.some(fe=>he.accountName.toLowerCase().includes(fe))))==null?void 0:Be.id)||""};return ie==="cash"?ve(["cash"])||C[0].id:ie==="mobile_money"?ve(["mobile","airtel","mtn"])||C[0].id:ve(["bank"])||C[0].id},_=qe({mutationFn:async z=>{if(!p||!t)throw new Error("Not authenticated");const ie=P(z.payment_method);if(!ie)throw new Error("No active Asset payment account found in Chart of Accounts.");if(!z.category)throw new Error("Expense category is required.");const ve=w.find(Be=>Ac(Be.categoryName)===Ac(z.category)),xe=ve&&!ve.id.startsWith("fallback-")?ve.id:void 0;await jn.recordExpense({companyId:p,amount:Number(z.amount),categoryId:xe,categoryName:z.category,paymentMethod:S(z.payment_method),paymentAccountId:ie,expenseDate:z.expense_date,description:z.description})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",p]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),G.success("Expense recorded successfully"),A()},onError:z=>{G.error("Failed to create expense: "+z.message)}}),g=qe({mutationFn:async({id:z,data:ie})=>(await fr(et(ae,ee.EXPENSES,z),{description:ie.description,category:ie.category||null,amount:Number(ie.amount),expenseDate:ie.expense_date,vendorName:ie.vendor_name||null,paymentMethod:ie.payment_method||null,referenceNumber:ie.reference_number||null,notes:ie.notes||null,updatedAt:Ie()},{merge:!0}),z),onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",p]}),G.success("Expense updated successfully"),A()},onError:z=>{G.error("Failed to update expense: "+z.message)}}),T=qe({mutationFn:async({expense:z,reason:ie})=>{if(!p)throw new Error("Company not found");if(!z.journal_entry_id)throw new Error("Expense has no posted journal entry to reverse.");return jn.reverseJournalEntry({companyId:p,journalEntryId:z.journal_entry_id,reason:ie})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",p]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Expense journal entry reversed")},onError:z=>{G.error("Failed to reverse expense: "+z.message)}}),E=qe({mutationFn:async z=>{if(!p||!(t!=null&&t.id))throw new Error("Not authenticated");if(!f)throw new Error("You do not have permission to void expenses.");if(z.journal_entry_id&&!z.is_reversed)throw new Error("Posted expenses cannot be deleted. Reverse the posting first.");await fr(et(ae,ee.EXPENSES,z.id),{status:"voided",isVoided:!0,is_voided:!0,voidedAt:Ie(),voided_at:Ie(),voidedBy:t.id,voided_by:t.id,updatedAt:Ie(),updatedBy:t.id,updated_by:t.id},{merge:!0})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",p]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Expense removed from active list")},onError:z=>{G.error("Failed to remove expense: "+z.message)}}),A=()=>{v({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),d(null),o(!1)},I=z=>{var ie;if(z.is_voided){G.error("Voided expenses cannot be edited.");return}if(z.is_reversed){G.error("Reversed expenses cannot be edited.");return}if(z.journal_entry_id){G.error("Posted expenses cannot be edited directly.");return}d(z),v({description:z.description||"",category:z.category||"",amount:((ie=z.amount)==null?void 0:ie.toString())||"",expense_date:z.expense_date||new Date().toISOString().split("T")[0],vendor_name:z.vendor_name||"",payment_method:z.payment_method||"cash",reference_number:z.reference_number||"",notes:z.notes||""}),o(!0)},k=z=>{if(z.preventDefault(),u){if(u.journal_entry_id){G.error("Posted expenses cannot be edited directly.");return}g.mutate({id:u.id,data:m})}else _.mutate(m)},L=z=>z.is_voided||String(z.status||"").toLowerCase()==="voided"?"voided":z.is_reversed||String(z.status||"").toLowerCase()==="reversed"?"reversed":z.journal_entry_id?"posted":"draft",B=z=>{const ie=L(z);return ie==="posted"?s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Posted"}):ie==="reversed"?s.jsx(De,{variant:"outline",className:"border-orange-500 text-orange-600",children:"Reversed"}):ie==="voided"?s.jsx(De,{variant:"outline",className:"border-slate-500 text-slate-600",children:"Voided"}):s.jsx(De,{variant:"secondary",children:"Draft"})},U=z=>{const ie=L(z);if(ie==="voided"){G.error("Expense is already voided.");return}if(z.journal_entry_id&&ie!=="reversed"){if(!h){G.error("You do not have permission to reverse posted expenses.");return}if(!confirm("This expense is posted. Continue to reverse it as the accounting-safe delete action?"))return;const ve=prompt(`Reason for reversing expense "${z.description}" (optional):`)||void 0;T.mutate({expense:z,reason:ve});return}if(!f){G.error("You do not have permission to void expenses.");return}confirm("Mark this expense as voided? This keeps an audit trail and removes it from active list.")&&E.mutate(z)},V=z=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(z),D=z=>({"Office Supplies":"default",Travel:"secondary","Meals & Entertainment":"outline",Utilities:"default",Rent:"secondary"})[z]||"outline",R=(b==null?void 0:b.filter(z=>!z.is_voided))||[],W=R.filter(z=>{var ie,ve,xe;return((ie=z.description)==null?void 0:ie.toLowerCase().includes(r.toLowerCase()))||((ve=z.category)==null?void 0:ve.toLowerCase().includes(r.toLowerCase()))||((xe=z.vendor_name)==null?void 0:xe.toLowerCase().includes(r.toLowerCase()))}),J=R.reduce((z,ie)=>z+Number(ie.amount||0),0),oe=async z=>{if(!(t!=null&&t.id)||!p)throw new Error("Not authenticated");const ie=new Map(w.map(ve=>[Ac(ve.categoryName),ve]));for(const ve of z){const xe=ve,Be=String(xe.payment_method??"cash"),he=P(Be);if(!he)throw new Error("No active Asset payment account found in Chart of Accounts.");const fe=xe.category?String(xe.category).trim():"Miscellaneous",me=Ac(fe),ce=ie.get(me),Ke=ce&&!ce.id.startsWith("fallback-")?ce.id:void 0;await jn.recordExpense({companyId:p,description:String(xe.description??"").trim(),categoryId:Ke,categoryName:fe,amount:Number(xe.amount??0),expenseDate:String(xe.expense_date??new Date().toISOString().split("T")[0]),paymentMethod:S(Be),paymentAccountId:he})}n.invalidateQueries({queryKey:["expenses",p]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),G.success(`Imported ${z.length} expenses`)},Ae=()=>{if(!R||R.length===0){G.error("No expenses to export");return}of(R,Det,"expenses-export"),G.success("Expenses exported")};return x?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Expenses"}),s.jsx("p",{className:"text-muted-foreground",children:"Track and manage business expenses"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>c(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:Ae,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),s.jsxs(Jn,{open:a,onOpenChange:z=>{o(z),z||A()},children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),s.jsxs(Kn,{className:"max-w-lg",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:u?"Edit Expense":"Record New Expense"})}),s.jsxs("form",{onSubmit:k,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(X,{htmlFor:"description",children:"Description *"}),s.jsx(Y,{id:"description",value:m.description,onChange:z=>v({...m,description:z.target.value}),placeholder:"What was this expense for?",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"category",children:"Category *"}),s.jsxs(gt,{value:m.category,onValueChange:z=>v({...m,category:z}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select category"})}),s.jsx(pt,{children:w.map(z=>s.jsx(ye,{value:z.categoryName,children:z.categoryName},z.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),s.jsx(Y,{id:"amount",type:"number",step:"0.01",value:m.amount,onChange:z=>v({...m,amount:z.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"expense_date",children:"Date *"}),s.jsx(Y,{id:"expense_date",type:"date",value:m.expense_date,onChange:z=>v({...m,expense_date:z.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"vendor_name",children:"Vendor/Payee"}),s.jsx(Y,{id:"vendor_name",value:m.vendor_name,onChange:z=>v({...m,vendor_name:z.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"payment_method",children:"Payment Method"}),s.jsxs(gt,{value:m.payment_method,onValueChange:z=>v({...m,payment_method:z}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"cash",children:"Cash"}),s.jsx(ye,{value:"bank_transfer",children:"Bank Transfer"}),s.jsx(ye,{value:"mobile_money",children:"Mobile Money"}),s.jsx(ye,{value:"cheque",children:"Cheque"}),s.jsx(ye,{value:"card",children:"Card"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"reference_number",children:"Reference #"}),s.jsx(Y,{id:"reference_number",value:m.reference_number,onChange:z=>v({...m,reference_number:z.target.value}),placeholder:"Receipt/Invoice number"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"notes",children:"Notes"}),s.jsx(Pn,{id:"notes",value:m.notes,onChange:z=>v({...m,notes:z.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:A,children:"Cancel"}),s.jsxs(K,{type:"submit",children:[u?"Update":"Record"," Expense"]})]})]})]})]})]})]}),s.jsx(bg,{open:l,onOpenChange:c,title:"Import Expenses",description:"Upload a CSV file to import expenses in bulk",columns:Oet,onImport:oe}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:V(J)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:V((R==null?void 0:R.filter(z=>{const ie=new Date(z.expense_date),ve=new Date;return ie.getMonth()===ve.getMonth()&&ie.getFullYear()===ve.getFullYear()}).reduce((z,ie)=>z+Number(ie.amount||0),0))||0)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:R.length||0})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search expenses...",value:r,onChange:z=>i(z.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Description"}),s.jsx(H,{children:"Category"}),s.jsx(H,{children:"Vendor"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[W==null?void 0:W.map(z=>{const ie=!!z.journal_entry_id&&!z.is_reversed&&h,ve=!z.journal_entry_id||z.is_reversed,xe=ie||ve&&f;return s.jsxs(je,{children:[s.jsx(F,{children:vt(new Date(z.expense_date),"dd MMM yyyy")}),s.jsx(F,{className:"font-medium",children:z.description}),s.jsx(F,{children:s.jsx(De,{variant:D(z.category||""),children:z.category})}),s.jsx(F,{children:z.vendor_name||"-"}),s.jsx(F,{className:"text-right font-medium",children:V(Number(z.amount))}),s.jsx(F,{children:B(z)}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[ie&&s.jsx(K,{variant:"ghost",size:"icon",disabled:T.isPending,onClick:()=>{if(!confirm("Reverse this expense posting? This creates an opposite journal entry."))return;const Be=prompt(`Reason for reversing expense "${z.description}" (optional):`)||void 0;T.mutate({expense:z,reason:Be})},title:"Reverse expense posting",children:s.jsx(Pl,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>I(z),disabled:!!z.journal_entry_id||z.is_reversed||z.is_voided,title:z.journal_entry_id?"Posted expenses cannot be edited":z.is_reversed?"Reversed expenses cannot be edited":z.is_voided?"Voided expenses cannot be edited":"Edit",children:s.jsx(Vp,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>U(z),disabled:T.isPending||E.isPending||!xe,title:xe?z.journal_entry_id&&!z.is_reversed?"Delete via reversal":"Void expense":"You do not have permission for this action",children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},z.id)}),(W==null?void 0:W.length)===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No expenses found. Record your first expense!"})})]})]})})]})]})}function ez(){const t=Jt(),{user:e}=dt(),[n,r]=j.useState(""),[i,a]=j.useState(!1),[o,l]=j.useState(16),{data:c}=Ee({queryKey:["primary-membership",e==null?void 0:e.id],queryFn:async()=>e?ze.getPrimaryMembershipByUser(e.id):null,enabled:!!e}),u=c==null?void 0:c.companyId,{data:d,isLoading:h}=Ee({queryKey:["company-settings",u],queryFn:async()=>u?ze.getCompanySettings(u):null,enabled:!!u});j.useEffect(()=>{d&&(r(d.companyName||""),a(!!d.isVatRegistered),l(Number(d.vatRate??16)))},[d]);const f=qe({mutationFn:async()=>{if(!u)throw new Error("No company linked to your account.");await ze.updateCompanyBasics({companyId:u,name:n}),await fr(et(ae,ee.COMPANY_SETTINGS,u),{companyId:u,companyName:n,isVatRegistered:i,vatRate:i?o:null,updatedAt:Ie()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["company-settings",u]}),t.invalidateQueries({queryKey:["company-settings",e==null?void 0:e.id]}),G.success("Settings saved successfully")},onError:m=>{G.error("Failed to save settings: "+(m instanceof Error?m.message:"Unknown error"))}});return h?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Company Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your company information and tax settings"})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Company Information"}),s.jsx(wt,{children:"Basic company details and branding"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"company-name",children:"Company Name"}),s.jsx(Y,{id:"company-name",value:n,onChange:m=>r(m.target.value),placeholder:"Enter company name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Company Logo"}),s.jsx(tM,{})]})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"VAT / Tax Settings"}),s.jsx(wt,{children:"Configure VAT registration for ZRA compliance"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(X,{children:"VAT Registered"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you registered for VAT with ZRA?"})]}),s.jsx(us,{checked:i,onCheckedChange:a})]}),i&&s.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.jsx(X,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),s.jsx(Y,{id:"vat-rate",type:"number",value:o,onChange:m=>l(Number(m.target.value)),min:0,max:100}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard Zambian VAT rate is 16%"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{onClick:()=>f.mutate(),disabled:f.isPending,children:f.isPending?"Saving...":"Save Settings"})})]})}const Let=()=>{const t=il();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},$et=()=>{const{user:t}=dt(),e=Jt(),[n,r]=j.useState(""),[i,a]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(null),[d,h]=j.useState({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0}),[f,m]=j.useState({movement_type:"in",quantity:0,reference_number:"",notes:""}),{data:v}=Ee({queryKey:["inventory-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await ze.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:p=[],isLoading:y}=Ee({queryKey:["inventory-items",v],queryFn:async()=>{if(!v)return[];const g=Se(ae,ee.INVENTORY_ITEMS);return(await Pe(Ce(g,ge("companyId","==",v)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??""),sku:A.sku??null,category:A.category??null,description:A.description??null,unit_of_measure:A.unitOfMeasure??A.unit_of_measure??"units",quantity_on_hand:Number(A.quantityOnHand??A.quantity_on_hand??0),reorder_point:Number(A.reorderPoint??A.reorder_point??0),unit_cost:Number(A.unitCost??A.unit_cost??0),selling_price:Number(A.sellingPrice??A.selling_price??0)}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!v}),b=qe({mutationFn:async g=>{if(!v||!t)throw new Error("No active company context");await es(Se(ae,ee.INVENTORY_ITEMS),{companyId:v,name:g.name,sku:g.sku||null,category:g.category||null,description:g.description||null,unitOfMeasure:g.unit_of_measure||"units",quantityOnHand:g.quantity_on_hand,reorderPoint:g.reorder_point,unitCost:g.unit_cost,sellingPrice:g.selling_price,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),G.success("Item added successfully"),a(!1),h({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0})},onError:g=>{G.error(g.message)}}),x=qe({mutationFn:async({itemId:g,movementData:T})=>{if(!v||!t)throw new Error("No active company context");const E=p.find(B=>B.id===g);if(!E)throw new Error("Item not found");let A=E.quantity_on_hand;T.movement_type==="in"?A+=T.quantity:T.movement_type==="out"?A-=T.quantity:A=T.quantity;const I=Ql(ae),k=et(Se(ae,ee.STOCK_MOVEMENTS)),L=et(ae,ee.INVENTORY_ITEMS,g);I.set(k,{companyId:v,inventoryItemId:g,movementType:T.movement_type,quantity:T.quantity,referenceNumber:T.reference_number||null,notes:T.notes||null,createdBy:t.id,createdAt:Ie()}),I.update(L,{quantityOnHand:A,updatedAt:Ie()}),await I.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),G.success("Stock movement recorded"),l(!1),u(null),m({movement_type:"in",quantity:0,reference_number:"",notes:""})},onError:g=>{G.error(g.message)}}),w=p.filter(g=>{var T,E;return g.name.toLowerCase().includes(n.toLowerCase())||((T=g.sku)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))||((E=g.category)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))}),C=p.filter(g=>g.quantity_on_hand<=g.reorder_point),S=p.reduce((g,T)=>g+T.quantity_on_hand*T.unit_cost,0),P=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),_=["Raw Materials","Finished Goods","Supplies","Equipment","Other"];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your stock and inventory items"})]}),s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),s.jsxs(Kn,{className:"max-w-2xl",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Add Inventory Item"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Item Name *"}),s.jsx(Y,{value:d.name,onChange:g=>h({...d,name:g.target.value}),placeholder:"Enter item name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"SKU"}),s.jsx(Y,{value:d.sku,onChange:g=>h({...d,sku:g.target.value}),placeholder:"Stock Keeping Unit"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Category"}),s.jsxs(gt,{value:d.category,onValueChange:g=>h({...d,category:g}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select category"})}),s.jsx(pt,{children:_.map(g=>s.jsx(ye,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Unit of Measure"}),s.jsxs(gt,{value:d.unit_of_measure,onValueChange:g=>h({...d,unit_of_measure:g}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"units",children:"Units"}),s.jsx(ye,{value:"kg",children:"Kilograms"}),s.jsx(ye,{value:"liters",children:"Liters"}),s.jsx(ye,{value:"meters",children:"Meters"}),s.jsx(ye,{value:"pieces",children:"Pieces"}),s.jsx(ye,{value:"boxes",children:"Boxes"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Initial Quantity"}),s.jsx(Y,{type:"number",value:d.quantity_on_hand,onChange:g=>h({...d,quantity_on_hand:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Reorder Point"}),s.jsx(Y,{type:"number",value:d.reorder_point,onChange:g=>h({...d,reorder_point:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Unit Cost (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:d.unit_cost,onChange:g=>h({...d,unit_cost:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Selling Price (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:d.selling_price,onChange:g=>h({...d,selling_price:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"col-span-2 space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Y,{value:d.description,onChange:g=>h({...d,description:g.target.value}),placeholder:"Item description"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>b.mutate(d),disabled:!d.name,children:"Add Item"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Items"}),s.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Value"}),s.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:P(S)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Low Stock Items"}),s.jsx(Mi,{className:"h-4 w-4 text-destructive"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold text-destructive",children:C.length})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Categories"}),s.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:new Set(p.map(g=>g.category).filter(Boolean)).size})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(re,{children:"Inventory Items"}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search items...",value:n,onChange:g=>r(g.target.value),className:"pl-8"})]})]})}),s.jsx(se,{children:y?s.jsx("p",{children:"Loading inventory..."}):w.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No inventory items found. Add your first item to get started."}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Item Name"}),s.jsx(H,{children:"SKU"}),s.jsx(H,{children:"Category"}),s.jsx(H,{className:"text-right",children:"Qty on Hand"}),s.jsx(H,{className:"text-right",children:"Reorder Point"}),s.jsx(H,{className:"text-right",children:"Unit Cost"}),s.jsx(H,{className:"text-right",children:"Total Value"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Actions"})]})}),s.jsx(Dt,{children:w.map(g=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:g.name}),s.jsx(F,{children:g.sku||"-"}),s.jsx(F,{children:g.category||"-"}),s.jsxs(F,{className:"text-right",children:[g.quantity_on_hand," ",g.unit_of_measure]}),s.jsx(F,{className:"text-right",children:g.reorder_point}),s.jsx(F,{className:"text-right",children:P(g.unit_cost)}),s.jsx(F,{className:"text-right",children:P(g.quantity_on_hand*g.unit_cost)}),s.jsx(F,{children:g.quantity_on_hand<=g.reorder_point?s.jsx(De,{variant:"destructive",children:"Low Stock"}):s.jsx(De,{variant:"secondary",children:"In Stock"})}),s.jsx(F,{children:s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{u(g),l(!0)},children:[s.jsx(Boe,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},g.id))})]})})]}),s.jsx(Jn,{open:o,onOpenChange:l,children:s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsxs(Yn,{children:["Stock Movement - ",c==null?void 0:c.name]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Movement Type"}),s.jsxs(gt,{value:f.movement_type,onValueChange:g=>m({...f,movement_type:g}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"in",children:"Stock In (Add)"}),s.jsx(ye,{value:"out",children:"Stock Out (Remove)"}),s.jsx(ye,{value:"adjustment",children:"Adjustment (Set)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Quantity"}),s.jsx(Y,{type:"number",value:f.quantity,onChange:g=>m({...f,quantity:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Reference Number"}),s.jsx(Y,{value:f.reference_number,onChange:g=>m({...f,reference_number:g.target.value}),placeholder:"PO#, Invoice#, etc."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Notes"}),s.jsx(Y,{value:f.notes,onChange:g=>m({...f,notes:g.target.value}),placeholder:"Reason for adjustment"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>c&&x.mutate({itemId:c.id,movementData:f}),disabled:f.quantity<=0,children:"Record Movement"})]})]})})]})},Fet=()=>{const{user:t}=dt(),e=Jt(),[n,r]=j.useState(!1),[i,a]=j.useState(!1),[o,l]=j.useState(null),[c,u]=j.useState({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0}),[d,h]=j.useState({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]}),{data:f}=Ee({queryKey:["bank-accounts-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await ze.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=Ee({queryKey:["bank-accounts",f],queryFn:async()=>{if(!f)return[];const C=Se(ae,ee.BANK_ACCOUNTS);return(await Pe(Ce(C,ge("companyId","==",f)))).docs.map(P=>{const _=P.data();return{id:P.id,account_name:String(_.accountName??_.account_name??""),account_number:_.accountNumber??_.account_number??null,bank_name:String(_.bankName??_.bank_name??""),branch:_.branch??null,account_type:_.accountType??_.account_type??null,currency:_.currency??"ZMW",opening_balance:Number(_.openingBalance??_.opening_balance??0),current_balance:Number(_.currentBalance??_.current_balance??0),is_active:!!(_.isActive??_.is_active??!0)}}).sort((P,_)=>P.account_name.localeCompare(_.account_name))},enabled:!!f}),{data:p=[]}=Ee({queryKey:["bank-transactions",f,o==null?void 0:o.id],queryFn:async()=>{if(!o||!f)return[];const C=Se(ae,ee.BANK_TRANSACTIONS);return(await Pe(Ce(C,ge("companyId","==",f),ge("bankAccountId","==",o.id)))).docs.map(P=>{var E;const _=P.data(),g=_.transactionDate??_.transaction_date,T=typeof g=="string"?g:((E=g==null?void 0:g.toDate)==null?void 0:E.call(g).toISOString().slice(0,10))??"";return{id:P.id,bank_account_id:String(_.bankAccountId??_.bank_account_id??""),transaction_type:String(_.transactionType??_.transaction_type??""),amount:Number(_.amount??0),description:_.description??null,reference_number:_.referenceNumber??_.reference_number??null,transaction_date:T,is_reconciled:!!(_.isReconciled??_.is_reconciled??!1)}}).sort((P,_)=>_.transaction_date.localeCompare(P.transaction_date))},enabled:!!(o&&f)}),y=qe({mutationFn:async C=>{if(!f||!t)throw new Error("No active company context");await es(Se(ae,ee.BANK_ACCOUNTS),{companyId:f,accountName:C.account_name,accountNumber:C.account_number||null,bankName:C.bank_name,branch:C.branch||null,accountType:C.account_type||"checking",currency:C.currency||"ZMW",openingBalance:C.opening_balance,currentBalance:C.opening_balance,isActive:!0,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),G.success("Bank account added successfully"),r(!1),u({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0})},onError:C=>{G.error(C.message)}}),b=qe({mutationFn:async C=>{if(!o||!f||!t)throw new Error("No account selected");const S=C.transaction_type==="deposit"?o.current_balance+C.amount:o.current_balance-C.amount,P=Ql(ae),_=et(Se(ae,ee.BANK_TRANSACTIONS)),g=et(ae,ee.BANK_ACCOUNTS,o.id);P.set(_,{companyId:f,bankAccountId:o.id,transactionType:C.transaction_type,amount:C.amount,description:C.description||null,referenceNumber:C.reference_number||null,transactionDate:C.transaction_date,isReconciled:!1,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()}),P.update(g,{currentBalance:S,updatedAt:Ie()}),await P.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),e.invalidateQueries({queryKey:["bank-transactions",f,o==null?void 0:o.id]}),G.success("Transaction recorded"),a(!1),h({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]})},onError:C=>{G.error(C.message)}}),x=(C,S="ZMW")=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:S}).format(C),w=m.reduce((C,S)=>C+S.current_balance,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Accounts"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your bank accounts and transactions"})]}),s.jsxs(Jn,{open:n,onOpenChange:r,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Account"]})}),s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Add Bank Account"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Account Name *"}),s.jsx(Y,{value:c.account_name,onChange:C=>u({...c,account_name:C.target.value}),placeholder:"e.g., Main Operating Account"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Bank Name *"}),s.jsx(Y,{value:c.bank_name,onChange:C=>u({...c,bank_name:C.target.value}),placeholder:"e.g., Zanaco, Stanbic, FNB"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Account Number"}),s.jsx(Y,{value:c.account_number,onChange:C=>u({...c,account_number:C.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Branch"}),s.jsx(Y,{value:c.branch,onChange:C=>u({...c,branch:C.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Account Type"}),s.jsxs(gt,{value:c.account_type,onValueChange:C=>u({...c,account_type:C}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"checking",children:"Checking"}),s.jsx(ye,{value:"savings",children:"Savings"}),s.jsx(ye,{value:"money_market",children:"Money Market"}),s.jsx(ye,{value:"fixed_deposit",children:"Fixed Deposit"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Currency"}),s.jsxs(gt,{value:c.currency,onValueChange:C=>u({...c,currency:C}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),s.jsx(ye,{value:"USD",children:"USD - US Dollar"}),s.jsx(ye,{value:"EUR",children:"EUR - Euro"}),s.jsx(ye,{value:"GBP",children:"GBP - British Pound"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Opening Balance"}),s.jsx(Y,{type:"number",step:"0.01",value:c.opening_balance,onChange:C=>u({...c,opening_balance:parseFloat(C.target.value)||0})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>y.mutate(c),disabled:!c.account_name||!c.bank_name,children:"Add Account"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Accounts"}),s.jsx(za,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Balance"}),s.jsx(za,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:x(w)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Active Accounts"}),s.jsx(za,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.filter(C=>C.is_active).length})})]})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Bank Accounts"})}),s.jsx(se,{children:v?s.jsx("p",{children:"Loading accounts..."}):m.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bank accounts found. Add your first account to get started."}):s.jsx("div",{className:"space-y-4",children:m.map(C=>s.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(o==null?void 0:o.id)===C.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>l(C),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:C.account_name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[C.bank_name," ",C.account_number?`- ${C.account_number}`:""]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-bold",children:x(C.current_balance,C.currency||"ZMW")}),s.jsx(De,{variant:C.is_active?"secondary":"outline",children:C.account_type})]})]})},C.id))})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[s.jsx(re,{children:o?`Transactions - ${o.account_name}`:"Select an Account"}),o&&s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{size:"sm",children:[s.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})}),s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Record Transaction"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Transaction Type"}),s.jsxs(gt,{value:d.transaction_type,onValueChange:C=>h({...d,transaction_type:C}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"deposit",children:"Deposit"}),s.jsx(ye,{value:"withdrawal",children:"Withdrawal"}),s.jsx(ye,{value:"transfer",children:"Transfer"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Amount"}),s.jsx(Y,{type:"number",step:"0.01",value:d.amount,onChange:C=>h({...d,amount:parseFloat(C.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Date"}),s.jsx(Y,{type:"date",value:d.transaction_date,onChange:C=>h({...d,transaction_date:C.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Y,{value:d.description,onChange:C=>h({...d,description:C.target.value}),placeholder:"Transaction description"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Reference Number"}),s.jsx(Y,{value:d.reference_number,onChange:C=>h({...d,reference_number:C.target.value}),placeholder:"Check#, Transfer#, etc."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>b.mutate(d),disabled:d.amount<=0,children:"Record Transaction"})]})]})]})]}),s.jsx(se,{children:o?p.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions recorded for this account"}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Description"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsx(Dt,{children:p.slice(0,10).map(C=>s.jsxs(je,{children:[s.jsx(F,{children:new Date(C.transaction_date).toLocaleDateString()}),s.jsx(F,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[C.transaction_type==="deposit"?s.jsx(Voe,{className:"h-4 w-4 text-green-500"}):s.jsx(i8,{className:"h-4 w-4 text-red-500"}),C.description||C.transaction_type]})}),s.jsxs(F,{className:`text-right font-medium ${C.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[C.transaction_type==="deposit"?"+":"-",x(C.amount)]})]},C.id))})]}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select an account to view transactions"})})]})]})]})};var b1="Checkbox",[Vet,ent]=ps(b1),[Bet,nM]=Vet(b1);function Uet(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=lo({prop:n,defaultProp:i??!1,onChange:c,caller:b1}),[v,p]=j.useState(null),[y,b]=j.useState(null),x=j.useRef(!1),w=v?!!o||!!v.closest("form"):!0,C={checked:f,disabled:a,setChecked:m,control:v,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:Cu(i)?!1:i,isFormControl:w,bubbleInput:y,setBubbleInput:b};return s.jsx(Bet,{scope:e,...C,children:zet(h)?h(C):r})}var Mre="CheckboxTrigger",Lre=j.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=nM(Mre,t),p=Ft(i,d),y=j.useRef(c);return j.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const x=()=>h(y.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[a,h]),s.jsx(st.button,{type:"button",role:"checkbox","aria-checked":Cu(c)?"mixed":c,"aria-required":u,"data-state":Ure(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:$e(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:$e(n,b=>{h(x=>Cu(x)?!0:!x),v&&m&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});Lre.displayName=Mre;var rM=j.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return s.jsx(Uet,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>s.jsxs(s.Fragment,{children:[s.jsx(Lre,{...h,ref:e,__scopeCheckbox:n}),f&&s.jsx(Bre,{__scopeCheckbox:n})]})})});rM.displayName=b1;var $re="CheckboxIndicator",Fre=j.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=nM($re,n);return s.jsx(gs,{present:r||Cu(a.checked)||a.checked===!0,children:s.jsx(st.span,{"data-state":Ure(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});Fre.displayName=$re;var Vre="CheckboxBubbleInput",Bre=j.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=nM(Vre,t),v=Ft(n,m),p=U2(a),y=hR(r);j.useEffect(()=>{const x=f;if(!x)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,P=!i.current;if(p!==a&&S){const _=new Event("click",{bubbles:P});x.indeterminate=Cu(a),S.call(x,Cu(a)?!1:a),x.dispatchEvent(_)}},[f,p,a,i]);const b=j.useRef(Cu(a)?!1:a);return s.jsx(st.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Bre.displayName=Vre;function zet(t){return typeof t=="function"}function Cu(t){return t==="indeterminate"}function Ure(t){return Cu(t)?"indeterminate":t?"checked":"unchecked"}const zre=j.forwardRef(({className:t,...e},n)=>s.jsx(rM,{ref:n,className:_e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(Fre,{className:_e("flex items-center justify-center text-current"),children:s.jsx(Ux,{className:"h-4 w-4"})})}));zre.displayName=rM.displayName;const qet=()=>{const{user:t}=dt(),e=Jt(),[n,r]=j.useState(""),[i,a]=j.useState(0),[o,l]=j.useState(new Date().toISOString().split("T")[0]),[c,u]=j.useState(new Set),{data:d}=Ee({queryKey:["reconciliation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await ze.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:h=[]}=Ee({queryKey:["bank-accounts",d],queryFn:async()=>{if(!d)return[];const C=Se(ae,ee.BANK_ACCOUNTS);return(await Pe(Ce(C,ge("companyId","==",d),ge("isActive","==",!0)))).docs.map(P=>{const _=P.data();return{id:P.id,account_name:String(_.accountName??_.account_name??""),bank_name:String(_.bankName??_.bank_name??""),current_balance:Number(_.currentBalance??_.current_balance??0)}}).sort((P,_)=>P.account_name.localeCompare(_.account_name))},enabled:!!d}),{data:f=[]}=Ee({queryKey:["unreconciled-transactions",d,n],queryFn:async()=>{if(!n||!d)return[];const C=Se(ae,ee.BANK_TRANSACTIONS);return(await Pe(Ce(C,ge("companyId","==",d),ge("bankAccountId","==",n),ge("isReconciled","==",!1)))).docs.map(P=>{var E;const _=P.data(),g=_.transactionDate??_.transaction_date,T=typeof g=="string"?g:((E=g==null?void 0:g.toDate)==null?void 0:E.call(g).toISOString().slice(0,10))??"";return{id:P.id,transaction_type:String(_.transactionType??_.transaction_type??""),amount:Number(_.amount??0),description:_.description??null,reference_number:_.referenceNumber??_.reference_number??null,transaction_date:T,is_reconciled:!!(_.isReconciled??_.is_reconciled??!1)}}).sort((P,_)=>_.transaction_date.localeCompare(P.transaction_date))},enabled:!!(n&&d)}),m=qe({mutationFn:async()=>{if(!n||c.size===0||!d||!t)throw new Error("Please select transactions to reconcile");const C=Array.from(c),S=Ql(ae);C.forEach(g=>{const T=et(ae,ee.BANK_TRANSACTIONS,g);S.update(T,{isReconciled:!0,reconciledDate:o,updatedAt:Ie()})});const P=h.find(g=>g.id===n),_=et(Se(ae,ee.RECONCILIATIONS));S.set(_,{companyId:d,bankAccountId:n,reconciliationDate:o,statementBalance:i,bookBalance:(P==null?void 0:P.current_balance)||0,difference:i-((P==null?void 0:P.current_balance)||0),status:"completed",transactionIds:C,reconciledBy:t.id,createdAt:Ie(),updatedAt:Ie()}),await S.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["unreconciled-transactions",d,n]}),G.success("Transactions reconciled successfully"),u(new Set)},onError:C=>{G.error(C.message)}}),v=h.find(C=>C.id===n),p=f.filter(C=>c.has(C.id)).reduce((C,S)=>S.transaction_type==="deposit"?C+S.amount:C-S.amount,(v==null?void 0:v.current_balance)||0),y=i-p,b=C=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(C),x=C=>{const S=new Set(c);S.has(C)?S.delete(C):S.add(C),u(S)},w=()=>{c.size===f.length?u(new Set):u(new Set(f.map(C=>C.id)))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Reconciliation"}),s.jsx("p",{className:"text-muted-foreground",children:"Match your bank statement with recorded transactions"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs(Z,{className:"lg:col-span-1",children:[s.jsx(ne,{children:s.jsx(re,{children:"Reconciliation Setup"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Bank Account"}),s.jsxs(gt,{value:n,onValueChange:r,children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select account"})}),s.jsx(pt,{children:h.map(C=>s.jsxs(ye,{value:C.id,children:[C.account_name," (",C.bank_name,")"]},C.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Statement Date"}),s.jsx(Y,{type:"date",value:o,onChange:C=>l(C.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Statement Ending Balance"}),s.jsx(Y,{type:"number",step:"0.01",value:i,onChange:C=>a(parseFloat(C.target.value)||0),placeholder:"Enter balance from bank statement"})]}),v&&s.jsxs("div",{className:"pt-4 border-t space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Book Balance:"}),s.jsx("span",{className:"font-medium",children:b(v.current_balance)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Cleared Balance:"}),s.jsx("span",{className:"font-medium",children:b(p)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Statement Balance:"}),s.jsx("span",{className:"font-medium",children:b(i)})]}),s.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t",children:[s.jsx("span",{children:"Difference:"}),s.jsx("span",{className:y===0?"text-green-600":"text-red-600",children:b(y)})]}),y===0?s.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[s.jsx(Xo,{className:"h-4 w-4"}),s.jsx("span",{children:"Balanced! Ready to reconcile."})]}):s.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsx("span",{children:"Difference must be zero to reconcile."})]})]}),s.jsxs(K,{className:"w-full",onClick:()=>m.mutate(),disabled:y!==0||c.size===0,children:[s.jsx(lle,{className:"h-4 w-4 mr-2"}),"Complete Reconciliation"]})]})]}),s.jsxs(Z,{className:"lg:col-span-2",children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[s.jsx(re,{children:"Unreconciled Transactions"}),f.length>0&&s.jsx(K,{variant:"outline",size:"sm",onClick:w,children:c.size===f.length?"Deselect All":"Select All"})]}),s.jsx(se,{children:n?f.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No unreconciled transactions for this account"}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{className:"w-12",children:"Clear"}),s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Description"}),s.jsx(H,{children:"Reference"}),s.jsx(H,{children:"Type"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsx(Dt,{children:f.map(C=>s.jsxs(je,{className:c.has(C.id)?"bg-primary/5":"",children:[s.jsx(F,{children:s.jsx(zre,{checked:c.has(C.id),onCheckedChange:()=>x(C.id)})}),s.jsx(F,{children:new Date(C.transaction_date).toLocaleDateString()}),s.jsx(F,{children:C.description||"-"}),s.jsx(F,{children:C.reference_number||"-"}),s.jsx(F,{children:s.jsx(De,{variant:C.transaction_type==="deposit"?"secondary":"outline",children:C.transaction_type})}),s.jsxs(F,{className:`text-right font-medium ${C.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[C.transaction_type==="deposit"?"+":"-",b(C.amount)]})]},C.id))})]}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select a bank account to view transactions"})})]})]})]})},Wet=()=>{const{user:t}=dt(),e=Jt(),[n,r]=j.useState(""),[i,a]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""}),[d,h]=j.useState({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0}),{data:f}=Ee({queryKey:["time-tracking-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await ze.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=Ee({queryKey:["contractors",f],queryFn:async()=>{if(!f)return[];const g=Se(ae,ee.CONTRACTORS);return(await Pe(Ce(g,ge("companyId","==",f)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??""),email:A.email??null,phone:A.phone??null,specialty:A.specialty??null,hourly_rate:Number(A.hourlyRate??A.hourly_rate??0),daily_rate:Number(A.dailyRate??A.daily_rate??0),tpin:A.tpin??null,bank_name:A.bankName??A.bank_name??null,bank_account_number:A.bankAccountNumber??A.bank_account_number??null,is_active:!!(A.isActive??A.is_active??!0)}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!f}),{data:p=[],isLoading:y}=Ee({queryKey:["time-entries",f],queryFn:async()=>{if(!f)return[];const[g,T]=await Promise.all([Pe(Ce(Se(ae,ee.TIME_ENTRIES),ge("companyId","==",f))),Pe(Ce(Se(ae,ee.CONTRACTORS),ge("companyId","==",f)))]),E=new Map;return T.docs.forEach(A=>{const I=A.data();E.set(A.id,String(I.name??""))}),g.docs.map(A=>{var U;const I=A.data(),k=I.workDate??I.work_date,L=typeof k=="string"?k:((U=k==null?void 0:k.toDate)==null?void 0:U.call(k).toISOString().slice(0,10))??"",B=I.contractorId??I.contractor_id??null;return{id:A.id,contractor_id:B,employee_id:I.employeeId??I.employee_id??null,project_name:I.projectName??I.project_name??null,description:I.description??null,work_date:L,hours_worked:Number(I.hoursWorked??I.hours_worked??0),hourly_rate:Number(I.hourlyRate??I.hourly_rate??0),total_amount:Number(I.totalAmount??I.total_amount??0),status:I.status??"pending",contractor:B?{name:E.get(B)||"-"}:void 0}}).sort((A,I)=>I.work_date.localeCompare(A.work_date))},enabled:!!f}),b=qe({mutationFn:async g=>{if(!f||!t)throw new Error("No active company context");await es(Se(ae,ee.CONTRACTORS),{companyId:f,name:g.name,email:g.email||null,phone:g.phone||null,specialty:g.specialty||null,hourlyRate:g.hourly_rate,dailyRate:g.daily_rate,tpin:g.tpin||null,bankName:g.bank_name||null,bankAccountNumber:g.bank_account_number||null,isActive:!0,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["contractors",f]}),G.success("Contractor added successfully"),a(!1),u({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""})},onError:g=>{G.error(g.message)}}),x=qe({mutationFn:async g=>{if(!f||!t)throw new Error("No active company context");const T=g.hours_worked*g.hourly_rate;await es(Se(ae,ee.TIME_ENTRIES),{companyId:f,contractorId:g.contractor_id||null,projectName:g.project_name||null,description:g.description||null,workDate:g.work_date,hoursWorked:g.hours_worked,hourlyRate:g.hourly_rate,totalAmount:T,status:"pending",createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),G.success("Time entry recorded"),l(!1),h({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0})},onError:g=>{G.error(g.message)}}),w=qe({mutationFn:async({id:g,status:T})=>{await fr(et(ae,ee.TIME_ENTRIES,g),{status:T,updatedAt:Ie()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),G.success("Status updated")},onError:g=>{G.error(g.message)}}),C=m.filter(g=>{var T;return g.name.toLowerCase().includes(n.toLowerCase())||((T=g.specialty)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))}),S=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),P=p.filter(g=>g.status==="pending").reduce((g,T)=>g+T.total_amount,0),_=p.filter(g=>{const T=new Date(g.work_date),E=new Date;return T.getMonth()===E.getMonth()&&T.getFullYear()===E.getFullYear()}).reduce((g,T)=>g+T.hours_worked,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Time & Contractors"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and track time entries"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Active Contractors"}),s.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.filter(g=>g.is_active).length})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Hours This Month"}),s.jsx(Vi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:_.toFixed(1)})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Pending Entries"}),s.jsx(Vi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:p.filter(g=>g.status==="pending").length})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Pending Amount"}),s.jsx(Vi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:S(P)})})]})]}),s.jsxs(Tb,{defaultValue:"contractors",children:[s.jsxs(xg,{children:[s.jsx(wi,{value:"contractors",children:"Contractors"}),s.jsx(wi,{value:"time-entries",children:"Time Entries"})]}),s.jsxs(ji,{value:"contractors",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search contractors...",value:n,onChange:g=>r(g.target.value),className:"pl-8"})]}),s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})}),s.jsxs(Kn,{className:"max-w-2xl",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Add Contractor"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Name *"}),s.jsx(Y,{value:c.name,onChange:g=>u({...c,name:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Email"}),s.jsx(Y,{type:"email",value:c.email,onChange:g=>u({...c,email:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Phone"}),s.jsx(Y,{value:c.phone,onChange:g=>u({...c,phone:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Specialty"}),s.jsx(Y,{value:c.specialty,onChange:g=>u({...c,specialty:g.target.value}),placeholder:"e.g., IT Consultant, Trainer"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Hourly Rate (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:c.hourly_rate,onChange:g=>u({...c,hourly_rate:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Daily Rate (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:c.daily_rate,onChange:g=>u({...c,daily_rate:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"TPIN"}),s.jsx(Y,{value:c.tpin,onChange:g=>u({...c,tpin:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Bank Name"}),s.jsx(Y,{value:c.bank_name,onChange:g=>u({...c,bank_name:g.target.value})})]}),s.jsxs("div",{className:"col-span-2 space-y-2",children:[s.jsx(X,{children:"Bank Account Number"}),s.jsx(Y,{value:c.bank_account_number,onChange:g=>u({...c,bank_account_number:g.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>b.mutate(c),disabled:!c.name,children:"Add Contractor"})]})]})]})]}),s.jsx(Z,{children:s.jsx(se,{className:"pt-6",children:v?s.jsx("p",{children:"Loading contractors..."}):C.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No contractors found."}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Specialty"}),s.jsx(H,{children:"Contact"}),s.jsx(H,{className:"text-right",children:"Hourly Rate"}),s.jsx(H,{className:"text-right",children:"Daily Rate"}),s.jsx(H,{children:"Status"})]})}),s.jsx(Dt,{children:C.map(g=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:g.name}),s.jsx(F,{children:g.specialty||"-"}),s.jsx(F,{children:s.jsxs("div",{className:"text-sm",children:[g.email&&s.jsx("div",{children:g.email}),g.phone&&s.jsx("div",{children:g.phone})]})}),s.jsx(F,{className:"text-right",children:S(g.hourly_rate)}),s.jsx(F,{className:"text-right",children:S(g.daily_rate)}),s.jsx(F,{children:s.jsx(De,{variant:g.is_active?"secondary":"outline",children:g.is_active?"Active":"Inactive"})})]},g.id))})]})})})]}),s.jsxs(ji,{value:"time-entries",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs(Jn,{open:o,onOpenChange:l,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Record Time"]})}),s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsx(Yn,{children:"Record Time Entry"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Contractor"}),s.jsxs(gt,{value:d.contractor_id,onValueChange:g=>{const T=m.find(E=>E.id===g);h({...d,contractor_id:g,hourly_rate:(T==null?void 0:T.hourly_rate)||0})},children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select contractor"})}),s.jsx(pt,{children:m.filter(g=>g.is_active).map(g=>s.jsx(ye,{value:g.id,children:g.name},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Project Name"}),s.jsx(Y,{value:d.project_name,onChange:g=>h({...d,project_name:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Work Date"}),s.jsx(Y,{type:"date",value:d.work_date,onChange:g=>h({...d,work_date:g.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Hours Worked"}),s.jsx(Y,{type:"number",step:"0.5",value:d.hours_worked,onChange:g=>h({...d,hours_worked:parseFloat(g.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Hourly Rate (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:d.hourly_rate,onChange:g=>h({...d,hourly_rate:parseFloat(g.target.value)||0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Y,{value:d.description,onChange:g=>h({...d,description:g.target.value}),placeholder:"Work performed"})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{className:"font-bold",children:S(d.hours_worked*d.hourly_rate)})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>x.mutate(d),disabled:d.hours_worked<=0,children:"Record Entry"})]})]})]})}),s.jsx(Z,{children:s.jsx(se,{className:"pt-6",children:y?s.jsx("p",{children:"Loading time entries..."}):p.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No time entries found."}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Contractor"}),s.jsx(H,{children:"Project"}),s.jsx(H,{className:"text-right",children:"Hours"}),s.jsx(H,{className:"text-right",children:"Rate"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Actions"})]})}),s.jsx(Dt,{children:p.map(g=>{var T;return s.jsxs(je,{children:[s.jsx(F,{children:new Date(g.work_date).toLocaleDateString()}),s.jsx(F,{children:((T=g.contractor)==null?void 0:T.name)||"-"}),s.jsx(F,{children:g.project_name||"-"}),s.jsx(F,{className:"text-right",children:g.hours_worked}),s.jsx(F,{className:"text-right",children:S(g.hourly_rate)}),s.jsx(F,{className:"text-right font-medium",children:S(g.total_amount)}),s.jsx(F,{children:s.jsx(De,{variant:g.status==="paid"?"secondary":g.status==="approved"?"default":"outline",children:g.status})}),s.jsxs(F,{children:[g.status==="pending"&&s.jsx(K,{size:"sm",variant:"outline",onClick:()=>w.mutate({id:g.id,status:"approved"}),children:"Approve"}),g.status==="approved"&&s.jsx(K,{size:"sm",variant:"outline",onClick:()=>w.mutate({id:g.id,status:"paid"}),children:"Mark Paid"})]})]},g.id)})})]})})})]})]})]})},Nf={super_admin:{label:"Super Admin",description:"Full system access, can manage all users and settings",color:"bg-red-500"},admin:{label:"Admin",description:"Can manage most settings and users",color:"bg-orange-500"},financial_manager:{label:"Financial Manager",description:"Oversees all financial operations and approvals",color:"bg-rose-500"},accountant:{label:"Accountant",description:"Full access to financial records, reports, and transactions",color:"bg-blue-500"},assistant_accountant:{label:"Assistant Accountant",description:"Assists with bookkeeping and data entry under supervision",color:"bg-sky-500"},finance_officer:{label:"Finance Officer",description:"Can manage invoices, bills, and expenses",color:"bg-cyan-500"},bookkeeper:{label:"Bookkeeper",description:"Can record transactions and reconcile accounts",color:"bg-teal-500"},cashier:{label:"Cashier",description:"Handles cash transactions and petty cash management",color:"bg-emerald-500"},inventory_manager:{label:"Inventory Manager",description:"Can manage inventory and stock movements",color:"bg-green-500"},hr_manager:{label:"HR Manager",description:"Can manage employees and payroll",color:"bg-purple-500"},project_manager:{label:"Project Manager",description:"Can manage projects and grants",color:"bg-indigo-500"},auditor:{label:"Auditor",description:"Read-only access to all financial records for auditing",color:"bg-yellow-500"},staff:{label:"Staff",description:"Basic access for regular employees",color:"bg-slate-500"},read_only:{label:"Read Only",description:"Can only view data, no editing permissions",color:"bg-gray-500"}},FA=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier","inventory_manager","hr_manager","project_manager","auditor","staff","read_only"];function Het(){const{user:t}=dt(),{data:e}=$s(),[n,r]=j.useState(!1),[i,a]=j.useState(""),[o,l]=j.useState(""),[c,u]=j.useState("finance_officer"),[d,h]=j.useState(null),{data:f}=Ee({queryKey:["primary-membership",t==null?void 0:t.uid],queryFn:()=>t?ze.getPrimaryMembershipByUser(t.uid):null,enabled:!!t}),m=f==null?void 0:f.companyId,v=Jt(),{data:p,isLoading:y,error:b}=Ee({queryKey:["company-users",m],queryFn:async()=>m?ze.listCompanyUsers(m):[],enabled:!!m}),x=qe({mutationFn:async({userId:E,newRole:A})=>{if(!m)throw new Error("No company ID found");await ze.updateUserRole({companyId:m,userId:E,newRole:A})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),G.success("User role updated successfully"),h(null)},onError:E=>{G.error("Failed to update role: "+(E instanceof Error?E.message:"Unknown error"))}}),w=qe({mutationFn:async E=>{if(!m)throw new Error("No company ID found");await ze.removeCompanyUser({companyId:m,userId:E})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),G.success("User removed successfully")},onError:E=>{G.error("Failed to remove user: "+(E instanceof Error?E.message:"Unknown error"))}}),C=qe({mutationFn:async({userId:E,action:A})=>{if(!m)throw new Error("No company ID found");A==="suspend"?await ze.suspendUser({companyId:m,userId:E}):await ze.reactivateUser({companyId:m,userId:E})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),G.success("User status updated successfully")},onError:E=>{G.error("Failed to update status: "+(E instanceof Error?E.message:"Unknown error"))}}),S=qe({mutationFn:async E=>{if(!m)throw new Error("No company ID found");await ze.revokeInvitation({companyId:m,invitationId:E})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),G.success("Invitation revoked")},onError:E=>{G.error("Failed to revoke: "+(E instanceof Error?E.message:"Unknown error"))}}),P=qe({mutationFn:async()=>{if(!i)throw new Error("Email is required");if(!m)throw new Error("No company ID found");await Ps.sendInvitation({email:i,role:c,inviteeName:o,companyId:m,loginUrl:`${window.location.origin}/auth`})},onSuccess:()=>{G.success("Invitation sent successfully"),a(""),l(""),u("finance_officer"),r(!1)},onError:E=>{G.error("Failed to send invite: "+(E instanceof Error?E.message:"Unknown error"))}}),_=e==="super_admin"||e==="admin",g=E=>{const A=Nf[E];return s.jsx(De,{className:`${A.color} text-white hover:${A.color}`,children:A.label})},T=E=>E.fullName||E.email||E.userId||"Unknown User";return!t||!m&&!y?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(mn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage user access and permissions like QuickBooks"})]}),_&&s.jsxs(Jn,{open:n,onOpenChange:r,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(dle,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),s.jsxs(Kn,{children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Invite New User"}),s.jsx(md,{children:"Send an invitation to a new user with a specific role"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"name",children:"Full Name"}),s.jsx(Y,{id:"name",type:"text",placeholder:"Jane Doe",value:o,onChange:E=>l(E.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"email",children:"Email Address"}),s.jsx(Y,{id:"email",type:"email",placeholder:"user@example.com",value:i,onChange:E=>a(E.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"role",children:"Role"}),s.jsxs(gt,{value:c,onValueChange:E=>u(E),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsx(pt,{children:FA.map(E=>s.jsx(ye,{value:E,children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:Nf[E].label})})},E))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Nf[c].description})]})]}),s.jsxs(x1,{children:[s.jsx(K,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>P.mutate(),disabled:P.isPending,children:P.isPending?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.length)||0})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Admins"}),s.jsx(wh,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.filter(E=>E.role==="super_admin"||E.role==="admin").length)||0})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Accountants"}),s.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.filter(E=>["accountant","finance_officer","bookkeeper"].includes(E.role)).length)||0})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Your Role"}),s.jsx(wh,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:e&&g(e)})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"All Users"}),s.jsx(wt,{children:"Manage user roles and permissions across your organization"})]}),s.jsx(se,{children:y?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):b?s.jsx("div",{className:"p-4 text-red-500 text-center",children:"Failed to load users. Please try again."}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"User"}),s.jsx(H,{children:"Role"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Added"}),_&&s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[p==null?void 0:p.map(E=>s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:T(E)}),E.email&&s.jsx("span",{className:"text-sm text-muted-foreground",children:E.email}),E.status==="invited"&&s.jsx("span",{className:"text-xs text-amber-500 font-mono",children:"Invitation Pending"})]})}),s.jsx(F,{children:(d==null?void 0:d.id)===E.id&&E.status!=="invited"?s.jsxs(gt,{value:d.role,onValueChange:A=>h({...d,role:A}),children:[s.jsx(mt,{className:"w-48",children:s.jsx(yt,{})}),s.jsx(pt,{children:FA.map(A=>s.jsx(ye,{value:A,children:Nf[A].label},A))})]}):s.jsxs("div",{className:"space-y-1",children:[g(E.role),s.jsx("p",{className:"text-xs text-muted-foreground",children:Nf[E.role].description})]})}),s.jsx(F,{children:s.jsx(De,{variant:E.status==="active"?"default":E.status==="invited"?"outline":"destructive",children:E.status==="invited"?"Pending":E.status})}),s.jsx(F,{children:E.createdAt?new Date(E.createdAt).toLocaleDateString():"-"}),_&&s.jsx(F,{className:"text-right",children:(d==null?void 0:d.id)===E.id?s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{size:"sm",onClick:()=>x.mutate({userId:E.userId,newRole:d.role}),disabled:x.isPending,children:x.isPending?s.jsx(mn,{className:"h-4 w-4 animate-spin"}):"Save"}),s.jsx(K,{size:"sm",variant:"outline",onClick:()=>h(null),children:"Cancel"})]}):s.jsx("div",{className:"flex justify-end gap-2",children:E.status==="invited"?s.jsx(K,{size:"sm",variant:"destructive",onClick:()=>{confirm("Revoke this invitation? The link will no longer work.")&&S.mutate(E.id)},disabled:S.isPending,children:"Revoke"}):s.jsxs(s.Fragment,{children:[s.jsx(K,{size:"sm",variant:"outline",onClick:()=>h(E),children:s.jsx(ole,{className:"h-4 w-4"})}),E.status==="suspended"?s.jsx(K,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>C.mutate({userId:E.userId,action:"reactivate"}),disabled:C.isPending,children:"Activate"}):s.jsx(K,{size:"sm",variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{confirm("Suspend this user? They will lose access immediately.")&&C.mutate({userId:E.userId,action:"suspend"})},disabled:C.isPending||E.role==="super_admin",children:"Suspend"}),s.jsx(K,{size:"sm",variant:"destructive",onClick:()=>{confirm("Permanently remove this user? This cannot be undone.")&&w.mutate(E.userId)},disabled:E.role==="super_admin"||w.isPending,children:s.jsx(Ms,{className:"h-4 w-4"})})]})})})]},E.id)),(!p||p.length===0)&&s.jsx(je,{children:s.jsx(F,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})})]})]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Role Permissions Reference"}),s.jsx(wt,{children:"Understanding what each role can access"})]}),s.jsx(se,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:FA.map(E=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[g(E),s.jsx("div",{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:Nf[E].description})})]},E))})})]})]})}const tz={in_progress:{label:"In Progress",dotClass:"bg-warning",badgeClass:"border-warning/30 bg-warning/15 text-warning"},behind:{label:"Behind",dotClass:"bg-destructive",badgeClass:"border-destructive/30 bg-destructive/10 text-destructive"},on_track:{label:"On Track",dotClass:"bg-success",badgeClass:"border-success/30 bg-success/10 text-success"},completed:{label:"Completed",dotClass:"bg-sky-600",badgeClass:"border-sky-300 bg-sky-50 text-sky-700"}};function Ket(){const{user:t}=dt(),{data:e}=$s(),n=e==="super_admin"||e==="admin",r=Jt(),[i,a]=j.useState(!1),[o,l]=j.useState(null),[c,u]=j.useState({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),d=A=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(A),{data:h}=Ee({queryKey:["projects-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const A=await ze.getPrimaryMembershipByUser(t.id);return(A==null?void 0:A.companyId)??null},enabled:!!t}),{data:f=[],isLoading:m}=Ee({queryKey:["projects",h],queryFn:async()=>{if(!h)return[];const A=Se(ae,ee.PROJECTS);return(await Pe(Ce(A,ge("companyId","==",h)))).docs.map(k=>{var V;const L=k.data(),B=L.createdAt??L.created_at,U=typeof B=="string"?B:((V=B==null?void 0:B.toDate)==null?void 0:V.call(B).toISOString())??new Date().toISOString();return{id:k.id,name:String(L.name??""),code:L.code??null,description:L.description??null,status:L.status??"active",start_date:L.startDate??L.start_date??null,end_date:L.endDate??L.end_date??null,budget:Number(L.budget??0),spent:Number(L.spent??0),donor_name:L.donorName??L.donor_name??null,grant_reference:L.grantReference??L.grant_reference??null,current_phase:L.currentPhase??L.current_phase??null,created_by:L.createdBy??L.created_by??null,created_at:U}}).sort((k,L)=>L.created_at.localeCompare(k.created_at))},enabled:!!h,refetchInterval:2e4}),{data:v=[]}=Ee({queryKey:["project-activity-logs",h],queryFn:async()=>h?Sl.listByCompany(h,{limitCount:3e3}):[],enabled:!!h,refetchInterval:15e3}),p=j.useMemo(()=>BTe(f,v),[f,v]),y=qe({mutationFn:async A=>{if(!h||!t)throw new Error("No active company context");const I=await es(Se(ae,ee.PROJECTS),{companyId:h,name:A.name,code:A.code||null,description:A.description||null,status:A.status,currentPhase:A.current_phase||"Initiation",startDate:A.start_date||null,endDate:A.end_date||null,budget:A.budget?Number.parseFloat(A.budget):0,spent:0,donorName:A.donor_name||null,grantReference:A.grant_reference||null,createdBy:t.id,createdAt:Ie(),updatedAt:Ie()});await Sl.create({companyId:h,projectId:I.id,activity:"Project Created",description:`${A.name} workspace created`,source:"Projects Dashboard",sourceType:ee.PROJECTS,sourceId:I.id,phase:A.current_phase||"Initiation",status:"pending",approvalStatus:"pending",appliedToSection:"Project Setup",implemented:!1,createdBy:t.id})},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),G.success("Project created successfully"),w()},onError:A=>{G.error("Failed to create project: "+A.message)}}),b=qe({mutationFn:async({id:A,data:I})=>{if(!h||!t)throw new Error("No active company context");await fr(et(ae,ee.PROJECTS,A),{name:I.name,code:I.code||null,description:I.description||null,status:I.status,currentPhase:I.current_phase||"Initiation",startDate:I.start_date||null,endDate:I.end_date||null,budget:I.budget?Number.parseFloat(I.budget):0,donorName:I.donor_name||null,grantReference:I.grant_reference||null,updatedAt:Ie()},{merge:!0}),await Sl.create({companyId:h,projectId:A,activity:"Project Updated",description:`${I.name} details updated`,source:"Projects Dashboard",sourceType:ee.PROJECTS,sourceId:A,phase:I.current_phase||"Initiation",status:I.status==="completed"?"completed":"implemented",approvalStatus:I.status==="completed"?"approved":null,appliedToSection:"Project Plan",milestoneName:I.status==="completed"?"Project Completion":null,milestoneAchieved:I.status==="completed",implemented:!0,createdBy:t.id})},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),G.success("Project updated successfully"),w()},onError:A=>{G.error("Failed to update project: "+A.message)}}),x=qe({mutationFn:async A=>{if(!h||!t)throw new Error("No active company context");if(!n)throw new Error("Only Admin users can delete projects.");await Sl.create({companyId:h,projectId:A.id,activity:"Project Removed",description:`${A.name} was removed from active projects`,source:"Projects Dashboard",sourceType:ee.PROJECTS,sourceId:A.id,phase:A.current_phase,status:"implemented",appliedToSection:"Project Setup",implemented:!0,createdBy:t.id}),await Yl(et(ae,ee.PROJECTS,A.id))},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),G.success("Project deleted successfully")},onError:A=>{G.error("Failed to delete project: "+A.message)}}),w=()=>{u({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),l(null),a(!1)},C=A=>{var I;l(A),u({name:A.name,code:A.code||"",description:A.description||"",status:A.status||"active",start_date:A.start_date||"",end_date:A.end_date||"",budget:((I=A.budget)==null?void 0:I.toString())||"",donor_name:A.donor_name||"",grant_reference:A.grant_reference||"",current_phase:A.current_phase||"Initiation"}),a(!0)},S=A=>{if(A.preventDefault(),o){b.mutate({id:o.id,data:c});return}y.mutate(c)},P=()=>{if(f.length===0)return;const A=["Project Code","Name","Donor","Grant Reference","Status","Current Phase","Completion","Progress Status","Start Date","End Date","Budget","Spent","Remaining"],I=f.map(V=>{const D=p.get(V.id);return[V.code||"",V.name,V.donor_name||"",V.grant_reference||"",V.status||"",(D==null?void 0:D.currentPhase)||V.current_phase||"Initiation",`${(D==null?void 0:D.completion)??0}%`,D?tz[D.status].label:"In Progress",V.start_date||"",V.end_date||"",V.budget||0,V.spent||0,(V.budget||0)-(V.spent||0)]}),k=[A,...I].map(V=>V.map(D=>`"${String(D).replaceAll('"','""')}"`).join(",")).join(`
`),L=new Blob([k],{type:"text/csv"}),B=window.URL.createObjectURL(L),U=document.createElement("a");U.href=B,U.download="projects-grants.csv",U.click(),window.URL.revokeObjectURL(B)},_=f.reduce((A,I)=>A+(I.budget||0),0),g=f.reduce((A,I)=>A+(I.spent||0),0),T=f.filter(A=>A.status==="active").length,E=f.length?Math.round(f.reduce((A,I)=>{var k;return A+(((k=p.get(I.id))==null?void 0:k.completion)||0)},0)/f.length):0;return m?s.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):s.jsxs("div",{className:"w-full space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects & Grants"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage donor-funded projects and track real-time progression"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(K,{variant:"outline",onClick:P,disabled:f.length===0,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{onClick:()=>{w(),a(!0)},children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Project"]})}),s.jsxs(Kn,{className:"max-w-2xl",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:o?"Edit Project":"Add New Project"})}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Project Name *"}),s.jsx(Y,{value:c.name,onChange:A=>u({...c,name:A.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Project Code"}),s.jsx(Y,{value:c.code,onChange:A=>u({...c,code:A.target.value}),placeholder:"e.g., PRJ-001"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Pn,{value:c.description,onChange:A=>u({...c,description:A.target.value}),rows:3})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Donor Name"}),s.jsx(Y,{value:c.donor_name,onChange:A=>u({...c,donor_name:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Grant Reference"}),s.jsx(Y,{value:c.grant_reference,onChange:A=>u({...c,grant_reference:A.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Status"}),s.jsxs(gt,{value:c.status,onValueChange:A=>u({...c,status:A}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"active",children:"Active"}),s.jsx(ye,{value:"completed",children:"Completed"}),s.jsx(ye,{value:"on_hold",children:"On Hold"}),s.jsx(ye,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Current Phase"}),s.jsxs(gt,{value:c.current_phase,onValueChange:A=>u({...c,current_phase:A}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsx(pt,{children:DTe.map(A=>s.jsx(ye,{value:A,children:A},A))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Budget (ZMW)"}),s.jsx(Y,{type:"number",step:"0.01",value:c.budget,onChange:A=>u({...c,budget:A.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Start Date"}),s.jsx(Y,{type:"date",value:c.start_date,onChange:A=>u({...c,start_date:A.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"End Date"}),s.jsx(Y,{type:"date",value:c.end_date,onChange:A=>u({...c,end_date:A.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),s.jsxs(K,{type:"submit",children:[o?"Update":"Create"," Project"]})]})]})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(d8,{className:"h-4 w-4"}),"Total Projects"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[T," active"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Average Completion"]})}),s.jsxs(se,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[E,"%"]}),s.jsx(Tu,{value:E,className:"mt-2 h-2"})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Total Budget"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d(_)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Remaining"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d(_-g)})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"All Projects"})}),s.jsx(se,{children:s.jsx("div",{className:"w-full overflow-x-auto",children:s.jsxs(Rt,{className:"min-w-[1320px]",children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Code"}),s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Donor"}),s.jsx(H,{children:"Current Phase"}),s.jsx(H,{children:"Progress"}),s.jsx(H,{children:"Indicator"}),s.jsx(H,{children:"Period"}),s.jsx(H,{className:"text-right",children:"Budget"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsx(Dt,{children:f.length===0?s.jsx(je,{children:s.jsx(F,{colSpan:9,className:"py-10 text-center text-muted-foreground",children:"No projects found. Create your first project to get started."})}):f.map(A=>{const I=p.get(A.id)??{completion:0,currentPhase:A.current_phase||"Initiation",status:"in_progress",metrics:{completedActivities:0,totalActivities:0,approvedSections:0,totalSections:0,milestonesAchieved:0,totalMilestones:0,pendingCount:0,implementedCount:0}},k=tz[I.status];return s.jsxs(je,{children:[s.jsx(F,{className:"font-mono",children:A.code||"-"}),s.jsx(F,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:A.name}),s.jsx("p",{className:"max-w-[240px] truncate text-xs text-muted-foreground",children:A.description||"No description"})]})}),s.jsx(F,{children:A.donor_name||"-"}),s.jsx(F,{children:s.jsx(De,{variant:"outline",className:"font-medium",children:I.currentPhase})}),s.jsx(F,{children:s.jsxs("div",{className:"w-[240px] space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"font-medium",children:[I.completion,"%"]}),s.jsxs("span",{className:"text-muted-foreground",children:[I.metrics.completedActivities,"/",Math.max(I.metrics.totalActivities,I.metrics.completedActivities)," done"]})]}),s.jsx(Tu,{value:I.completion,className:"h-2"}),s.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[I.metrics.implementedCount," implemented  ",I.metrics.pendingCount," pending  ",I.metrics.milestonesAchieved,"/",Math.max(I.metrics.totalMilestones,I.metrics.milestonesAchieved)," milestones"]})]})}),s.jsx(F,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${k.dotClass}`}),s.jsx(De,{variant:"outline",className:k.badgeClass,children:k.label})]})}),s.jsx(F,{children:A.start_date&&A.end_date?`${vt(new Date(A.start_date),"MMM yyyy")} - ${vt(new Date(A.end_date),"MMM yyyy")}`:"-"}),s.jsx(F,{className:"text-right",children:d(A.budget||0)}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-1",children:[s.jsx(Ri,{to:`/projects/${A.id}/expenses`,children:s.jsx(K,{variant:"ghost",size:"icon",title:"View Expenses",children:s.jsx(zx,{className:"h-4 w-4"})})}),s.jsx(Ri,{to:`/projects/${A.id}/activity-log`,children:s.jsx(K,{variant:"ghost",size:"icon",title:"View Activity Log",children:s.jsx(ku,{className:"h-4 w-4"})})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>C(A),title:"Edit Project",children:s.jsx(Vp,{className:"h-4 w-4"})}),n&&s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>x.mutate(A),title:"Delete Project",children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},A.id)})})]})})})]})]})}const nz=t=>_e("h-9 gap-2 px-3 text-xs sm:text-sm",t?"bg-warning/15 text-warning hover:bg-warning/20":"text-muted-foreground hover:text-foreground");function qre({projectId:t,projectName:e,subtitle:n,activeTab:r,actions:i}){const a=t?`/projects/${t}/expenses`:"/projects",o=t?`/projects/${t}/activity-log`:"/projects";return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[s.jsx(Ri,{to:"/projects",children:s.jsx(K,{variant:"ghost",size:"icon",className:"h-9 w-9",children:s.jsx(ya,{className:"h-4 w-4"})})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"truncate text-2xl font-bold tracking-tight sm:text-3xl",children:e||"Project Workspace"}),n&&s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),i&&s.jsx("div",{className:"flex flex-wrap items-center gap-2",children:i})]}),s.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-xl border bg-card p-1",children:[s.jsx(Ri,{to:a,children:s.jsxs(K,{type:"button",variant:r==="expenses"?"secondary":"ghost",className:nz(r==="expenses"),children:[s.jsx(zx,{className:"h-4 w-4"}),"Expenses"]})}),s.jsx(Ri,{to:o,children:s.jsxs(K,{type:"button",variant:r==="activity-log"?"secondary":"ghost",className:nz(r==="activity-log"),title:"Project Activity Log",children:[s.jsx(ku,{className:"h-4 w-4"}),"Activity Log"]})})]})]})}const Get=["Personnel","Equipment","Travel","Supplies","Training","Consultancy","Utilities","Communications","Other"];function Yet(){const{user:t}=dt(),{projectId:e}=Yh(),n=Jt(),[r,i]=j.useState(!1),[a,o]=j.useState(null),[l,c]=j.useState({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),u=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),{data:d}=Ee({queryKey:["project-expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await ze.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:h}=Ee({queryKey:["project",d,e],queryFn:async()=>{if(!e||!d)return null;const g=await bi(et(ae,ee.PROJECTS,e));if(!g.exists())return null;const T=g.data();return String(T.companyId??"")!==d?null:{id:g.id,name:String(T.name??""),budget:Number(T.budget??0),spent:Number(T.spent??0),status:T.status??null,currentPhase:T.currentPhase??T.current_phase??null}},enabled:!!(e&&d)}),{data:f=[],isLoading:m}=Ee({queryKey:["project-expenses",d,e],queryFn:async()=>{if(!e||!d)return[];const g=Se(ae,ee.PROJECT_EXPENSES);return(await Pe(Ce(g,ge("companyId","==",d),ge("projectId","==",e)))).docs.map(E=>{var L;const A=E.data(),I=A.expenseDate??A.expense_date,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??new Date().toISOString().slice(0,10);return{id:E.id,description:String(A.description??""),amount:Number(A.amount??0),expense_date:k,category:A.category??null,notes:A.notes??null}}).sort((E,A)=>A.expense_date.localeCompare(E.expense_date))},enabled:!!(e&&d)}),v=async()=>{if(!e||!d)return;const g=Se(ae,ee.PROJECT_EXPENSES),E=(await Pe(Ce(g,ge("companyId","==",d),ge("projectId","==",e)))).docs.reduce((A,I)=>A+Number(I.data().amount??0),0);await fr(et(ae,ee.PROJECTS,e),{spent:E,updatedAt:Ie()},{merge:!0})},p=()=>{n.invalidateQueries({queryKey:["project-expenses",d,e]}),n.invalidateQueries({queryKey:["project",d,e]}),n.invalidateQueries({queryKey:["projects",d]}),n.invalidateQueries({queryKey:["project-activity-log",d,e]}),n.invalidateQueries({queryKey:["project-activity-logs",d]})},y=qe({mutationFn:async g=>{if(!e||!d||!t)throw new Error("No active company context");const T=Number.parseFloat(g.amount),E=await es(Se(ae,ee.PROJECT_EXPENSES),{companyId:d,projectId:e,userId:t.id,description:g.description,amount:T,expenseDate:g.expense_date,category:g.category||null,notes:g.notes||null,createdAt:Ie(),updatedAt:Ie()});await v(),await Sl.create({companyId:d,projectId:e,activity:"Expense Added",description:`${g.description} recorded (${u(T)})`,source:"Project Expenses",sourceType:ee.PROJECT_EXPENSES,sourceId:E.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{category:g.category||null,expenseDate:g.expense_date}})},onSuccess:()=>{p(),G.success("Expense added successfully"),w()},onError:g=>{G.error("Failed to add expense: "+g.message)}}),b=qe({mutationFn:async({expense:g,data:T})=>{if(!d||!e||!t)throw new Error("No active company context");const E=Number.parseFloat(T.amount);await fr(et(ae,ee.PROJECT_EXPENSES,g.id),{description:T.description,amount:E,expenseDate:T.expense_date,category:T.category||null,notes:T.notes||null,updatedAt:Ie()},{merge:!0}),await v(),await Sl.create({companyId:d,projectId:e,activity:"Expense Updated",description:`${T.description} updated (${u(E)})`,source:"Project Expenses",sourceType:ee.PROJECT_EXPENSES,sourceId:g.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{previousAmount:g.amount,previousDate:g.expense_date}})},onSuccess:()=>{p(),G.success("Expense updated successfully"),w()},onError:g=>{G.error("Failed to update expense: "+g.message)}}),x=qe({mutationFn:async g=>{if(!d||!e||!t)throw new Error("No active company context");await Yl(et(ae,ee.PROJECT_EXPENSES,g.id)),await v(),await Sl.create({companyId:d,projectId:e,activity:"Expense Removed",description:`${g.description} removed (${u(g.amount)})`,source:"Project Expenses",sourceType:ee.PROJECT_EXPENSES,sourceId:g.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id})},onSuccess:()=>{p(),G.success("Expense deleted successfully")},onError:g=>{G.error("Failed to delete expense: "+g.message)}}),w=()=>{c({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),o(null),i(!1)},C=g=>{o(g),c({description:g.description,amount:g.amount.toString(),expense_date:g.expense_date,category:g.category||"",notes:g.notes||""}),i(!0)},S=g=>{if(g.preventDefault(),a){b.mutate({expense:a,data:l});return}y.mutate(l)},P=()=>{of(f,[{header:"Date",key:"expense_date"},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Amount",key:"amount"},{header:"Notes",key:"notes"}],`${(h==null?void 0:h.name)||"project"}-expenses`)},_=f.reduce((g,T)=>g+Number(T.amount),0);return m?s.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):s.jsxs("div",{className:"w-full space-y-6",children:[s.jsx(qre,{projectId:e,projectName:h?`${h.name} - Expenses`:"Project Expenses",subtitle:[`Budget: ${u((h==null?void 0:h.budget)||0)}`,`Spent: ${u(_)}`,`Remaining: ${u(((h==null?void 0:h.budget)||0)-_)}`].join(" | "),activeTab:"expenses",actions:s.jsxs(s.Fragment,{children:[s.jsxs(K,{variant:"outline",onClick:P,disabled:f.length===0,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),s.jsxs(Jn,{open:r,onOpenChange:i,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{onClick:()=>{w(),i(!0)},children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsx(Yn,{children:a?"Edit Expense":"Add Expense"})}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description *"}),s.jsx(Y,{value:l.description,onChange:g=>c({...l,description:g.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Amount (ZMW) *"}),s.jsx(Y,{type:"number",step:"0.01",value:l.amount,onChange:g=>c({...l,amount:g.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Date *"}),s.jsx(Y,{type:"date",value:l.expense_date,onChange:g=>c({...l,expense_date:g.target.value}),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Category"}),s.jsxs(gt,{value:l.category,onValueChange:g=>c({...l,category:g}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select category"})}),s.jsx(pt,{children:Get.map(g=>s.jsx(ye,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Notes"}),s.jsx(Pn,{value:l.notes,onChange:g=>c({...l,notes:g.target.value}),rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),s.jsxs(K,{type:"submit",children:[a?"Update":"Add"," Expense"]})]})]})]})]})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Total Budget"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:u((h==null?void 0:h.budget)||0)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Total Spent"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:u(_)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Remaining"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:u(((h==null?void 0:h.budget)||0)-_)})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Expense Records"})}),s.jsx(se,{children:s.jsx("div",{className:"w-full overflow-x-auto",children:s.jsxs(Rt,{className:"min-w-[760px]",children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Description"}),s.jsx(H,{children:"Category"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsx(Dt,{children:f.length===0?s.jsx(je,{children:s.jsx(F,{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No expenses recorded yet"})}):f.map(g=>s.jsxs(je,{children:[s.jsx(F,{children:vt(new Date(g.expense_date),"dd MMM yyyy")}),s.jsx(F,{className:"max-w-[280px] truncate",children:g.description}),s.jsx(F,{children:g.category||"-"}),s.jsx(F,{className:"text-right",children:u(Number(g.amount))}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>C(g),children:s.jsx(Vp,{className:"h-4 w-4"})}),s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>x.mutate(g),children:s.jsx(Ms,{className:"h-4 w-4"})})]})})]},g.id))})]})})})]})]})}const ay=20,rz={roles:[],assignees:[],phases:[],disciplines:[],approvalStatuses:[],appliedSections:[],statuses:[],startDate:"",endDate:""};function Sd({label:t,options:e,selected:n,onChange:r}){const i=(a,o)=>{if(o){r(Array.from(new Set([...n,a])));return}r(n.filter(l=>l!==a))};return s.jsxs(OG,{children:[s.jsx(DG,{asChild:!0,children:s.jsxs(K,{variant:"outline",className:_e("h-9 justify-between gap-2",n.length>0&&"border-warning/40 bg-warning/10 text-warning"),children:[s.jsx("span",{className:"truncate text-left",children:t}),s.jsx("span",{className:"rounded-md bg-muted px-1.5 py-0.5 text-xs text-muted-foreground",children:n.length||"All"})]})}),s.jsxs(BO,{align:"start",className:"max-h-80 w-56 overflow-y-auto",children:[s.jsx(UO,{children:t}),n.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Tj,{onSelect:a=>{a.preventDefault(),r([])},children:"Clear selection"}),s.jsx(zO,{})]}),e.length===0?s.jsx(Tj,{disabled:!0,children:"No options"}):e.map(a=>s.jsx(MG,{checked:n.includes(a),onCheckedChange:o=>i(a,o),children:a},a))]})]})}const Ed=t=>Array.from(new Set(t.filter(e=>!!(e&&e.trim())))).sort((e,n)=>e.localeCompare(n)),Qet=t=>t.slice(0,10),sz=t=>{const e=(t||"").toLowerCase();return["approved","completed","implemented","done"].includes(e)?"border-success/30 bg-success/10 text-success":["pending","in_progress","in progress"].includes(e)?"border-warning/30 bg-warning/15 text-warning":["behind","rejected","blocked"].includes(e)?"border-destructive/30 bg-destructive/10 text-destructive":"border-border bg-muted/40 text-muted-foreground"};function Xet(){const{user:t}=dt(),{projectId:e}=Yh(),[n,r]=j.useState(rz),[i,a]=j.useState(""),[o,l]=j.useState(1),[c,u]=j.useState(null),d=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),{data:h}=Ee({queryKey:["project-activity-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await ze.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:f}=Ee({queryKey:["project-summary",h,e],queryFn:async()=>{if(!e||!h)return null;const g=await bi(et(ae,ee.PROJECTS,e));if(!g.exists())return null;const T=g.data();return String(T.companyId??"")!==h?null:{id:g.id,name:String(T.name??"Project"),budget:Number(T.budget??0),spent:Number(T.spent??0)}},enabled:!!(h&&e)}),{data:m=[],isLoading:v}=Ee({queryKey:["project-activity-log",h,e],queryFn:async()=>!h||!e?[]:Sl.listByProject(h,e,{limitCount:3e3}),enabled:!!(h&&e),refetchInterval:15e3}),p=j.useMemo(()=>({roles:Ed(m.map(g=>g.role)),assignees:Ed(m.map(g=>g.assignedTo)),phases:Ed(m.map(g=>g.phase)),disciplines:Ed(m.map(g=>g.discipline)),approvalStatuses:Ed(m.map(g=>g.approvalStatus)),appliedSections:Ed(m.map(g=>g.appliedToSection)),statuses:Ed(m.map(g=>g.status))}),[m]),y=j.useMemo(()=>{const g=i.trim().toLowerCase();return m.filter(T=>{const E=Qet(T.createdAt);return n.startDate&&E<n.startDate||n.endDate&&E>n.endDate||n.roles.length>0&&!n.roles.includes(T.role||"")||n.assignees.length>0&&!n.assignees.includes(T.assignedTo||"")||n.phases.length>0&&!n.phases.includes(T.phase||"")||n.disciplines.length>0&&!n.disciplines.includes(T.discipline||"")||n.approvalStatuses.length>0&&!n.approvalStatuses.includes(T.approvalStatus||"")||n.appliedSections.length>0&&!n.appliedSections.includes(T.appliedToSection||"")||n.statuses.length>0&&!n.statuses.includes(T.status||"")?!1:g?[T.activity,T.description,T.source,T.role,T.assignedTo,T.phase,T.discipline,T.approvalStatus,T.appliedToSection,T.status].filter(Boolean).map(I=>String(I).toLowerCase()).some(I=>I.includes(g)):!0})},[m,n,i]),b=Math.max(1,Math.ceil(y.length/ay));j.useEffect(()=>{l(g=>Math.min(g,b))},[b]);const x=j.useMemo(()=>{const g=(o-1)*ay;return y.slice(g,g+ay)},[y,o]),w=!!(i||n.roles.length||n.assignees.length||n.phases.length||n.disciplines.length||n.approvalStatuses.length||n.appliedSections.length||n.statuses.length||n.startDate||n.endDate),C=()=>{r(rz),a(""),l(1)},S=[...n.roles.map(g=>({key:`role-${g}`,label:`Role: ${g}`,clear:()=>r(T=>({...T,roles:T.roles.filter(E=>E!==g)}))})),...n.assignees.map(g=>({key:`assigned-${g}`,label:`Assigned: ${g}`,clear:()=>r(T=>({...T,assignees:T.assignees.filter(E=>E!==g)}))})),...n.phases.map(g=>({key:`phase-${g}`,label:`Phase: ${g}`,clear:()=>r(T=>({...T,phases:T.phases.filter(E=>E!==g)}))})),...n.disciplines.map(g=>({key:`discipline-${g}`,label:`Discipline: ${g}`,clear:()=>r(T=>({...T,disciplines:T.disciplines.filter(E=>E!==g)}))})),...n.approvalStatuses.map(g=>({key:`approval-${g}`,label:`Approval: ${g}`,clear:()=>r(T=>({...T,approvalStatuses:T.approvalStatuses.filter(E=>E!==g)}))})),...n.appliedSections.map(g=>({key:`section-${g}`,label:`Section: ${g}`,clear:()=>r(T=>({...T,appliedSections:T.appliedSections.filter(E=>E!==g)}))})),...n.statuses.map(g=>({key:`status-${g}`,label:`Status: ${g}`,clear:()=>r(T=>({...T,statuses:T.statuses.filter(E=>E!==g)}))})),...n.startDate?[{key:"start-date",label:`From: ${n.startDate}`,clear:()=>r(g=>({...g,startDate:""}))}]:[],...n.endDate?[{key:"end-date",label:`To: ${n.endDate}`,clear:()=>r(g=>({...g,endDate:""}))}]:[]],P=Sl.getProjectHealthStats(y),_=(g,T,E="max-w-[220px]")=>{const A=g&&g.trim()?g.trim():"-",I=A!=="-";return s.jsx("button",{type:"button",className:_e("truncate text-left text-sm",E,I?"cursor-pointer hover:text-warning":"cursor-default text-muted-foreground"),onClick:()=>{I&&u({label:T,value:A})},children:A})};return v?s.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):s.jsxs("div",{className:"w-full space-y-6",children:[s.jsx(qre,{projectId:e,projectName:f?`${f.name} - Activity Log`:"Project Activity Log",subtitle:f?`Budget: ${d(f.budget)} | Spent: ${d(f.spent)}`:"Track project activities, approvals, and implementation progress",activeTab:"activity-log",actions:s.jsxs(De,{variant:"outline",children:[y.length," records"]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Total Entries"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Implemented"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:P.implementedCount})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Pending"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:P.pendingCount})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Completion Signal"})}),s.jsx(se,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[P.completion,"%"]})})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[s.jsxs(re,{className:"flex items-center gap-2 text-base",children:[s.jsx(Joe,{className:"h-4 w-4"}),"Advanced Filters"]}),s.jsx(K,{variant:"outline",onClick:C,disabled:!w,children:"Clear All"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[s.jsx("div",{className:"sm:col-span-2 xl:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ds,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{value:i,onChange:g=>{a(g.target.value),l(1)},className:"pl-9",placeholder:"Search activity, description, role, source..."})]})}),s.jsx(Sd,{label:"Role",options:p.roles,selected:n.roles,onChange:g=>{r(T=>({...T,roles:g})),l(1)}}),s.jsx(Sd,{label:"Assigned To",options:p.assignees,selected:n.assignees,onChange:g=>{r(T=>({...T,assignees:g})),l(1)}}),s.jsx(Sd,{label:"Phase",options:p.phases,selected:n.phases,onChange:g=>{r(T=>({...T,phases:g})),l(1)}}),s.jsx(Sd,{label:"Discipline",options:p.disciplines,selected:n.disciplines,onChange:g=>{r(T=>({...T,disciplines:g})),l(1)}}),s.jsx(Sd,{label:"Approval Status",options:p.approvalStatuses,selected:n.approvalStatuses,onChange:g=>{r(T=>({...T,approvalStatuses:g})),l(1)}}),s.jsx(Sd,{label:"Applied To Section",options:p.appliedSections,selected:n.appliedSections,onChange:g=>{r(T=>({...T,appliedSections:g})),l(1)}}),s.jsx(Sd,{label:"Status",options:p.statuses,selected:n.statuses,onChange:g=>{r(T=>({...T,statuses:g})),l(1)}}),s.jsx(Y,{type:"date",value:n.startDate,onChange:g=>{r(T=>({...T,startDate:g.target.value})),l(1)},placeholder:"Start date"}),s.jsx(Y,{type:"date",value:n.endDate,onChange:g=>{r(T=>({...T,endDate:g.target.value})),l(1)},placeholder:"End date"})]}),S.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(g=>s.jsxs(De,{variant:"outline",className:"gap-1 border-warning/40 bg-warning/10 text-warning",children:[g.label,s.jsx("button",{type:"button",onClick:()=>{g.clear(),l(1)},className:"rounded-full p-0.5 hover:bg-warning/20","aria-label":`Clear ${g.label}`,children:s.jsx(qm,{className:"h-3 w-3"})})]},g.key))})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[s.jsx(re,{children:"Project Activity Log"}),s.jsxs(De,{variant:"outline",children:["Page ",o," of ",b]})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsx("div",{className:"w-full overflow-x-auto",children:s.jsxs(Rt,{className:"min-w-[1720px]",children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Activity"}),s.jsx(H,{children:"Description"}),s.jsx(H,{children:"Source"}),s.jsx(H,{children:"Role"}),s.jsx(H,{children:"Assigned To"}),s.jsx(H,{children:"Phase"}),s.jsx(H,{children:"Discipline"}),s.jsx(H,{children:"Approval Status"}),s.jsx(H,{children:"Applied To"}),s.jsx(H,{children:"Status"})]})}),s.jsx(Dt,{children:x.length===0?s.jsx(je,{children:s.jsx(F,{colSpan:11,className:"py-10 text-center text-muted-foreground",children:"No activity records matched the selected filters."})}):x.map(g=>s.jsxs(je,{children:[s.jsx(F,{className:"whitespace-nowrap",children:vt(new Date(g.createdAt),"yyyy-MM-dd HH:mm")}),s.jsx(F,{children:_(g.activity,"Activity")}),s.jsx(F,{children:_(g.description||"-","Description","max-w-[300px]")}),s.jsx(F,{children:_(`${g.source}${g.sourceType?` (${g.sourceType})`:""}`,"Source")}),s.jsx(F,{children:_(g.role||"-","Role","max-w-[160px]")}),s.jsx(F,{children:_(g.assignedTo||"-","Assigned To","max-w-[180px]")}),s.jsx(F,{children:_(g.phase||"-","Phase","max-w-[140px]")}),s.jsx(F,{children:_(g.discipline||"-","Discipline","max-w-[160px]")}),s.jsx(F,{children:s.jsx(De,{variant:"outline",className:sz(g.approvalStatus),children:g.approvalStatus||"-"})}),s.jsx(F,{children:_(g.appliedToSection||"-","Applied To Section","max-w-[220px]")}),s.jsx(F,{children:s.jsx(De,{variant:"outline",className:sz(g.status),children:g.status||"-"})})]},g.id))})]})}),s.jsxs("div",{className:"flex flex-col justify-between gap-3 border-t pt-4 sm:flex-row sm:items-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length===0?0:(o-1)*ay+1,"-",Math.min(o*ay,y.length)," of ",y.length]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"outline",onClick:()=>l(g=>Math.max(1,g-1)),disabled:o<=1,children:"Previous"}),s.jsx(K,{variant:"outline",onClick:()=>l(g=>Math.min(b,g+1)),disabled:o>=b,children:"Next"})]})]})]})]}),s.jsx(Jn,{open:!!c,onOpenChange:g=>!g&&u(null),children:s.jsxs(Kn,{className:"max-w-3xl",children:[s.jsx(Gn,{children:s.jsx(Yn,{children:(c==null?void 0:c.label)||"Details"})}),s.jsx("div",{className:"max-h-[70vh] overflow-y-auto rounded-md border bg-muted/30 p-4 text-sm leading-relaxed whitespace-pre-wrap",children:c==null?void 0:c.value})]})})]})}const Zet=["Agriculture","Construction","Education","Financial Services","Healthcare","Hospitality","Information Technology","Manufacturing","Mining","Non-Profit","Professional Services","Retail","Transportation","Wholesale","Other"],Jet=[{value:"vat_registered",label:"VAT Registered",description:"Turnover > K800k. 16% VAT."},{value:"turnover_tax",label:"Turnover Tax",description:"Turnover < K800k. 4% Tax."},{value:"non_vat",label:"Non-VAT Registered",description:"Not registered for VAT."}],ett=[{value:"charitable",label:"Registered Charitable Organization"},{value:"faith_based",label:"Faith-Based Organization"},{value:"educational",label:"Educational Non-profit"},{value:"grant_funded",label:"Grant-Funded NGO"}],ttt=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[s.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-indigo-500/10 backdrop-blur-md border border-indigo-500/20 p-8 rounded-full",children:s.jsx(Fp,{className:"h-16 w-16 text-indigo-400"})}),s.jsxs("div",{className:"text-center max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Organization Profile"}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Setting up your digital headquarters."})]})]}),ntt=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[s.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-pink-500/10 backdrop-blur-md border border-pink-500/20 p-8 rounded-full",children:s.jsx(tR,{className:"h-16 w-16 text-pink-400"})}),s.jsxs("div",{className:"text-center max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Brand Identity"}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Make your invoices and reports stand out."})]})]}),rtt=()=>s.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[s.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 p-8 rounded-full",children:s.jsx(wh,{className:"h-16 w-16 text-emerald-400"})}),s.jsxs("div",{className:"text-center max-w-xs",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Compliance & Tax"}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Ensuring ZRA compliance from day one."})]})]});function stt(){const t=Fn(),e=Jt(),{user:n}=dt(),[r,i]=j.useState(1),[a,o]=j.useState(null),[l,c]=j.useState({name:"",organizationType:"business",businessType:"sme",address:"",phone:"",email:"",tpin:"",registrationNumber:"",industryType:"",taxType:"non_vat",taxClassification:"",vatRate:"16",turnoverTaxNumber:""}),u=(y,b)=>{c(x=>({...x,[y]:b}))},d=qe({mutationFn:async()=>{if(!n)throw new Error("Not authenticated");const y=await ze.getPrimaryMembershipByUser(n.id);if(!(y!=null&&y.companyId))throw new Error("No company associated with user");const b=l.organizationType==="business"&&l.taxType==="vat_registered",x=l.organizationType==="business"?l.taxType:l.taxClassification;await ze.completeCompanySetup({companyId:y.companyId,name:l.name,organizationType:l.organizationType,businessType:l.businessType,taxType:l.organizationType==="business"?l.taxType:"tax_exempt",taxClassification:x,address:l.address||void 0,phone:l.phone||void 0,email:l.email||void 0,tpin:l.tpin||void 0,registrationNumber:l.registrationNumber||void 0,industryType:l.industryType||void 0,logoUrl:a,isVatRegistered:b,vatRate:b?parseFloat(l.vatRate):null})},onSuccess:()=>{e.invalidateQueries({queryKey:["company-settings"]}),e.invalidateQueries({queryKey:["company"]}),G.success("Setup complete!"),t("/dashboard")},onError:y=>G.error("Setup failed: "+y.message)}),h=()=>{if(r===1){if(!l.name)return!!G.error("Company Name is required");if(!l.phone)return!!G.error("Phone is required");if(!l.email)return!!G.error("Email is required");if(!l.tpin||!/^\d{10}$/.test(l.tpin))return!!G.error("Valid 10-digit TPIN required")}if(r===2&&!a)return!!G.error("Logo is required");if(r===3){if(l.organizationType==="business"&&l.taxType==="turnover_tax"&&!l.turnoverTaxNumber)return!!G.error("Turnover Tax Number required");if(l.organizationType==="non_profit"&&!l.taxClassification)return!!G.error("Classification required")}return!0},f=()=>{h()&&(r<3?i(r+1):d.mutate())},m=r===1?s.jsx(ttt,{}):r===2?s.jsx(ntt,{}):s.jsx(rtt,{}),v=r===1?"Organization Details":r===2?"Upload Identity":"Tax Configuration",p=`Step ${r} of 3`;return s.jsx(rg,{title:v,subtitle:p,visualContent:s.jsx(dX,{mode:"wait",children:s.jsx(Ur.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full h-full",children:m},r)}),children:s.jsxs("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[r===1&&s.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Company Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Acme Corp",className:"pl-10",value:l.name,onChange:y=>u("name",y.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Org Type"}),s.jsxs(gt,{value:l.organizationType,onValueChange:y=>u("organizationType",y),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"business",children:"Business"}),s.jsx(ye,{value:"non_profit",children:"Non-Profit"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Business Type"}),s.jsxs(gt,{value:l.businessType,onValueChange:y=>u("businessType",y),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"sme",children:"SME"}),s.jsx(ye,{value:"corporate",children:"Corporate"}),s.jsx(ye,{value:"ngo",children:"NGO"}),s.jsx(ye,{value:"school",children:"School"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"TPIN (10 Digits)"}),s.jsxs("div",{className:"relative",children:[s.jsx(h8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"1234567890",className:"pl-10",value:l.tpin,onChange:y=>u("tpin",y.target.value.replace(/\D/g,"").slice(0,10))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Phone"}),s.jsxs("div",{className:"relative",children:[s.jsx(f8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"+260...",className:"pl-10",value:l.phone,onChange:y=>u("phone",y.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"info@...",className:"pl-10",value:l.email,onChange:y=>u("email",y.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Industry"}),s.jsxs(gt,{value:l.industryType,onValueChange:y=>u("industryType",y),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select..."})}),s.jsx(pt,{children:Zet.map(y=>s.jsx(ye,{value:y.toLowerCase(),children:y},y))})]})]})]}),r===2&&s.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 text-center",children:[s.jsx("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-8 bg-slate-50/50",children:s.jsx(tM,{onUploaded:o})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your official organization logo. This will be displayed on all your financial documents."})]}),r===3&&s.jsx(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:l.organizationType==="business"?s.jsxs("div",{className:"space-y-4",children:[s.jsx(X,{children:"Select Tax Category"}),s.jsx("div",{className:"grid gap-3",children:Jet.map(y=>s.jsx("div",{onClick:()=>u("taxType",y.value),className:`p-4 rounded-lg border cursor-pointer transition-all ${l.taxType===y.value?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l.taxType===y.value?"border-primary":"border-slate-400"}`,children:l.taxType===y.value&&s.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:y.label}),s.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]})},y.value))}),l.taxType==="vat_registered"&&s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsx(X,{children:"VAT Rate (%)"}),s.jsx(Y,{type:"number",value:l.vatRate,onChange:y=>u("vatRate",y.target.value)})]}),l.taxType==="turnover_tax"&&s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsx(X,{children:"Turnover Tax ID"}),s.jsx(Y,{placeholder:"TOT-...",value:l.turnoverTaxNumber,onChange:y=>u("turnoverTaxNumber",y.target.value)})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(X,{children:"Non-Profit Classification"}),s.jsxs(gt,{value:l.taxClassification,onValueChange:y=>u("taxClassification",y),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select classification..."})}),s.jsx(pt,{children:ett.map(y=>s.jsx(ye,{value:y.value,children:y.label},y.value))})]})]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t mt-6",children:[r>1?s.jsx(K,{variant:"ghost",onClick:()=>i(r-1),children:"Back"}):s.jsx("div",{}),s.jsx(K,{onClick:f,disabled:d.isPending,className:"px-8",children:r<3?s.jsxs(s.Fragment,{children:["Next ",s.jsx(BT,{className:"ml-2 h-4 w-4"})]}):d.isPending?"Completing...":"Complete Setup"})]})]})})}const itt=[{icon:di,title:"Employee Management",description:"Complete database with role-based access control and history tracking.",className:"border-l-4 border-blue-500"},{icon:Kw,title:"Payroll Processing",description:"Automated calculations for PAYE, NAPSA, and NHIMA with one-click rendering.",className:"border-l-4 border-indigo-500"},{icon:wh,title:"Compliance & Audit",description:"Built-in ZRA compliance rules and detailed audit logs for every action.",className:"border-l-4 border-slate-500"},{icon:o8,title:"Real-time Analytics",description:"Live financial dashboards and customizable reports for better decision making.",className:"border-l-4 border-sky-500"}];function att(){const[t,e]=j.useState(null);j.useEffect(()=>{const r=i=>{const a=i;a.preventDefault(),e(a)};return window.addEventListener("beforeinstallprompt",r),()=>{window.removeEventListener("beforeinstallprompt",r)}},[]);const n=()=>{t&&(t.prompt(),t.userChoice.then(r=>{r.outcome==="accepted"&&console.log("User accepted the install prompt"),e(null)}))};return s.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900 overflow-x-hidden",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/60",children:s.jsxs("div",{className:"container mx-auto px-4 lg:px-6 flex items-center justify-between h-20",children:[s.jsx(Ri,{to:"/",className:"flex items-center gap-3",children:s.jsx(Fv,{variant:"full",size:"md"})}),s.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600",children:[s.jsx("a",{href:"#features",className:"hover:text-blue-700 transition-colors",children:"Features"}),s.jsx("a",{href:"#pricing",className:"hover:text-blue-700 transition-colors",children:"Pricing"}),s.jsx("a",{href:"#compliance",className:"hover:text-blue-700 transition-colors",children:"Compliance"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ri,{to:"/auth",children:s.jsx(K,{variant:"ghost",className:"hidden sm:inline-flex text-slate-600 hover:text-blue-700 hover:bg-blue-50",children:"Sign In"})}),s.jsx(Ri,{to:"/auth",children:s.jsx(K,{className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 px-6 transition-all hover:scale-105",children:"Get Started"})})]})]})}),s.jsxs("section",{className:"relative pt-20 pb-32 lg:pt-32 lg:pb-48 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-100/40 rounded-[100%] blur-[100px] -z-10 pointer-events-none opacity-60"}),s.jsx("div",{className:"absolute top-40 right-0 w-[500px] h-[500px] bg-indigo-100/40 rounded-full blur-[80px] -z-10 pointer-events-none opacity-50"}),s.jsxs("div",{className:"container mx-auto px-4 lg:px-6 relative z-10 text-center",children:[s.jsxs(De,{variant:"outline",className:"mb-8 px-4 py-1.5 rounded-full bg-blue-50/50 text-blue-700 border-blue-200 backdrop-blur-sm animate-fade-in-up",children:[s.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"New: Automated ZRA Tax Submission"]}),s.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-8 max-w-4xl mx-auto leading-[1.1]",children:["The Financial Operating System for ",s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600",children:"Zambian NGOs"})]}),s.jsx("p",{className:"text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Manage your finances, payroll, and compliance in one unified secure platform. Designed for purpose-driven organizations."}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[s.jsx(Ri,{to:"/auth",children:s.jsx(K,{size:"lg",className:"h-14 px-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl shadow-blue-600/20 text-lg transition-all hover:scale-105",children:"Start Free Trial"})}),t&&s.jsxs(K,{size:"lg",variant:"outline",onClick:n,className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-blue-700 hover:border-blue-200 text-lg shadow-sm transition-all",children:[s.jsx(Rs,{className:"mr-2 h-5 w-5"}),"Install App"]}),!t&&s.jsxs(K,{size:"lg",variant:"outline",className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-slate-900 text-lg shadow-sm transition-all opacity-50 cursor-not-allowed",children:[s.jsx(ele,{className:"mr-2 h-5 w-5"}),"Web Version"]})]}),s.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[s.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-slate-200/60 overflow-hidden backdrop-blur-sm",children:[s.jsxs("div",{className:"h-12 bg-slate-50 border-b border-slate-100 flex items-center px-4 gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/80"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400/80"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/80"})]}),s.jsx("div",{className:"mx-auto bg-slate-200/50 h-6 w-64 rounded-md text-[10px] flex items-center justify-center text-slate-400 font-mono",children:"app.zedbooks.com/dashboard"})]}),s.jsx("div",{className:"p-1 bg-slate-50/50",children:s.jsxs("div",{className:"grid grid-cols-12 gap-1 p-4 h-[400px] lg:h-[600px] bg-white rounded-xl overflow-hidden relative",children:[s.jsxs("div",{className:"col-span-2 hidden lg:flex flex-col gap-3 border-r border-slate-50 pr-4",children:[s.jsx("div",{className:"h-8 w-full bg-slate-100 rounded-lg"}),s.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-lg"}),s.jsx("div",{className:"h-8 w-full bg-slate-50 rounded-lg"}),s.jsx("div",{className:"h-8 w-5/6 bg-slate-50 rounded-lg"})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-10 flex flex-col gap-6 pl-0 lg:pl-6 pt-2",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),s.jsx("div",{className:"h-8 w-64 bg-slate-900 rounded-lg"})]}),s.jsx("div",{className:"h-10 w-32 bg-blue-600 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"h-32 bg-blue-50 rounded-2xl border border-blue-100 p-4 space-y-3",children:[s.jsx("div",{className:"h-8 w-8 bg-blue-200 rounded-lg"}),s.jsx("div",{className:"h-6 w-24 bg-blue-200/50 rounded"})]}),s.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[s.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),s.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]}),s.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[s.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),s.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]})]}),s.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-100 p-6 flex items-center justify-center",children:s.jsx("div",{className:"text-slate-300 font-medium",children:"Interactive Financial Ledger Mockup"})})]})]})})]}),s.jsxs("div",{className:"absolute -left-12 bottom-20 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:s.jsx(wh,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Compliance Status"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Last checked today"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(De,{variant:"secondary",className:"bg-green-50 text-green-700",children:"NAPSA Verified"}),s.jsx(De,{variant:"secondary",className:"bg-green-50 text-green-700",children:"ZRA Compliant"})]})]}),s.jsxs("div",{className:"absolute -right-8 top-20 bg-white p-5 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float-delayed",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Recent Transactions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold",children:"JD"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Payroll Run"}),s.jsx("p",{className:"text-xs text-slate-400",children:"Just now"})]}),s.jsx("span",{className:"text-sm font-medium text-slate-900 ml-4",children:"- K45,200"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-700",children:"IN"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Grant Deposit"}),s.jsx("p",{className:"text-xs text-slate-400",children:"2h ago"})]}),s.jsx("span",{className:"text-sm font-medium text-green-600 ml-4",children:"+ K150,000"})]})]})]})]})]})]}),s.jsx("section",{id:"features",className:"py-24 bg-white relative",children:s.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[s.jsxs("div",{className:"text-center mb-16 max-w-2xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to run your NGO"}),s.jsx("p",{className:"text-slate-600",children:"Robust features designed specifically for the unique compliance and reporting needs of Zambian non-profits."})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:itt.map((r,i)=>s.jsx(Z,{className:`shadow-sm hover:shadow-lg transition-all border-slate-200 bg-white ${r.className}`,children:s.jsxs(se,{className:"p-8",children:[s.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-50 flex items-center justify-center mb-6",children:s.jsx(r.icon,{className:"h-6 w-6 text-slate-700"})}),s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:r.title}),s.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:r.description})]})},i))})]})}),s.jsxs("section",{id:"compliance",className:"py-24 bg-slate-900 text-white overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2"}),s.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Fully Compliant with Zambian Regulation"}),s.jsx("p",{className:"text-slate-300 text-lg mb-8",children:"Stay ahead of regulatory requirements with automated updates for domestic tax laws and labor regulations."}),s.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:["ZRA Smart Invoice","NAPSA e-Returns","NHIMA Compliant","PACRA Returns"].map(r=>s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-sm font-medium text-slate-200",children:[s.jsx(Ux,{className:"h-4 w-4 text-green-400"}),r]},r))}),s.jsx(Ri,{to:"/auth",children:s.jsx(K,{className:"rounded-full bg-white text-slate-900 hover:bg-slate-100 px-8 h-12 shadow-md",children:"Get Compliant Today"})})]}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-8",children:[s.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-2xl flex items-center justify-center",children:s.jsx(wh,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"Compliance Monitor"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"Real-time status tracking"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[s.jsx("span",{className:"text-slate-200 font-medium",children:"TPIN Verification"}),s.jsx(De,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Verified"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[s.jsx("span",{className:"text-slate-200 font-medium",children:"Tax Clearance"}),s.jsx(De,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Valid"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[s.jsx("span",{className:"text-slate-200 font-medium",children:"Annual Returns"}),s.jsx(De,{className:"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/20 border-yellow-500/20",children:"Due in 5 days"})]})]})]})})]})})]}),s.jsx("footer",{className:"py-12 bg-white border-t border-slate-200",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx(Fv,{variant:"full",size:"md",className:"grayscale opacity-70 hover:grayscale-0 hover:opacity-100"})}),s.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," Byte & Berry. All rights reserved."]})]})}),s.jsx(n2,{})]})}function ott(){const{user:t}=dt(),e=Jt(),[n,r]=j.useState(""),[i,a]=j.useState(!1),{data:o}=Ee({queryKey:["donors-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await ze.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:l=[],isLoading:c}=Ee({queryKey:["donors-from-projects",o],queryFn:async()=>{if(!o)return[];const x=Se(ae,ee.PROJECTS),C=(await Pe(Ce(x,ge("companyId","==",o)))).docs.map(P=>{const _=P.data();return{donor_name:String(_.donorName??_.donor_name??""),grant_reference:_.grantReference??_.grant_reference??null,budget:Number(_.budget??0),spent:Number(_.spent??0),status:String(_.status??"active")}}),S=new Map;return C.forEach(P=>{if(P.donor_name){const _=S.get(P.donor_name)||{grants:0,totalBudget:0,activeGrants:0};S.set(P.donor_name,{grants:_.grants+1,totalBudget:_.totalBudget+(P.budget||0),activeGrants:_.activeGrants+(P.status==="active"?1:0)})}}),Array.from(S.entries()).map(([P,_])=>({name:P,totalGrants:_.grants,totalBudget:_.totalBudget,activeGrants:_.activeGrants}))},enabled:!!o}),{data:u=[]}=Ee({queryKey:["projects-for-donors",o],queryFn:async()=>{if(!o)return[];const x=Se(ae,ee.PROJECTS);return(await Pe(Ce(x,ge("companyId","==",o)))).docs.map(C=>{var I;const S=C.data(),P=S.createdAt??S.created_at,_=typeof P=="string"?P:((I=P==null?void 0:P.toDate)==null?void 0:I.call(P).toISOString())??"",g=S.donorName??S.donor_name,T=S.grantReference??S.grant_reference,E=S.startDate??S.start_date,A=S.endDate??S.end_date;return{id:C.id,donor_name:g==null?null:String(g),grant_reference:T==null?null:String(T),start_date:E==null?null:String(E),end_date:A==null?null:String(A),status:String(S.status??"active"),budget:Number(S.budget??0),spent:Number(S.spent??0),name:String(S.name??""),created_at:_}}).sort((C,S)=>String(S.created_at??"").localeCompare(String(C.created_at??"")))},enabled:!!o}),d=x=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(x),h=l.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())),f=l.reduce((x,w)=>x+w.totalBudget,0),m=l.reduce((x,w)=>x+w.activeGrants,0),v=l.reduce((x,w)=>x+w.totalGrants,0),p=()=>{of(h,[{header:"Donor Name",key:"name"},{header:"Total Grants",key:"totalGrants"},{header:"Active Grants",key:"activeGrants"},{header:"Total Budget (ZMW)",key:"totalBudget"}],"donors-report")},y=[{key:"name",header:"Project Name",required:!0},{key:"donor_name",header:"Donor Name",required:!0},{key:"grant_reference",header:"Grant Reference",required:!1},{key:"budget",header:"Budget (ZMW)",required:!1},{key:"start_date",header:"Start Date",required:!1},{key:"end_date",header:"End Date",required:!1}],b=async x=>{if(!o||!t)throw new Error("No active company context");for(const w of x){const C=typeof w.budget=="number"?w.budget:parseFloat(String(w.budget??0))||0;await es(Se(ae,ee.PROJECTS),{companyId:o,name:w.name??"",donorName:w.donor_name??"",grantReference:w.grant_reference||null,budget:C,spent:0,startDate:w.start_date||null,endDate:w.end_date||null,status:"active",createdBy:t.id,createdAt:Ie(),updatedAt:Ie()})}e.invalidateQueries({queryKey:["donors-from-projects",o]}),e.invalidateQueries({queryKey:["projects-for-donors",o]})};return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Donors & Grants"}),s.jsx("p",{className:"text-muted-foreground",children:"Track donors and their grant contributions"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>a(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:p,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(tR,{className:"h-4 w-4"}),"Total Donors"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(d8,{className:"h-4 w-4"}),"Total Grants"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:v}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Total Funding"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d(f)})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Avg. per Donor"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d(l.length>0?f/l.length:0)})})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search donors...",value:n,onChange:x=>r(x.target.value),className:"pl-10"})]})})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Donor Name"}),s.jsx(H,{className:"text-right",children:"Total Grants"}),s.jsx(H,{className:"text-right",children:"Active Grants"}),s.jsx(H,{className:"text-right",children:"Total Funding"})]})}),s.jsxs(Dt,{children:[h.map((x,w)=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:x.name}),s.jsx(F,{className:"text-right",children:x.totalGrants}),s.jsx(F,{className:"text-right",children:s.jsx(De,{variant:x.activeGrants>0?"default":"secondary",children:x.activeGrants})}),s.jsx(F,{className:"text-right",children:d(x.totalBudget)})]},w)),h.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No donors found. Add projects with donor information to see them here."})})]})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"All Grants"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Grant Reference"}),s.jsx(H,{children:"Project Name"}),s.jsx(H,{children:"Donor"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Budget"}),s.jsx(H,{className:"text-right",children:"Spent"})]})}),s.jsx(Dt,{children:u.filter(x=>x.donor_name).map(x=>s.jsxs(je,{children:[s.jsx(F,{className:"font-mono",children:x.grant_reference||"-"}),s.jsx(F,{className:"font-medium",children:x.name}),s.jsx(F,{children:x.donor_name}),s.jsx(F,{children:s.jsx(De,{variant:x.status==="active"?"default":"secondary",children:x.status})}),s.jsx(F,{className:"text-right",children:d(x.budget||0)}),s.jsx(F,{className:"text-right",children:d(x.spent||0)})]},x.id))})]})})]}),s.jsx(bg,{open:i,onOpenChange:a,onImport:b,columns:y,title:"Import Grants"})]})}const VA=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},BA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function ltt(){const{user:t}=dt(),{data:e}=$s(),n=Jt(),[r,i]=j.useState(()=>{const E=new Date;return E.setMonth(E.getMonth()-3),E.toISOString().split("T")[0]}),[a,o]=j.useState(new Date().toISOString().split("T")[0]),[l,c]=j.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=Ee({queryKey:["accounts-payable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await ze.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=Se(ae,ee.BILLS),k=(await Pe(Ce(A,ge("companyId","==",E.companyId)))).docs.map(U=>{const V=U.data();return{id:U.id,bill_number:String(V.billNumber??V.bill_number??`BILL-${U.id.slice(0,8).toUpperCase()}`),bill_date:BA(V.billDate??V.bill_date),due_date:BA(V.dueDate??V.due_date)||null,total:Number(V.total??0),status:String(V.status??"pending"),vendor_id:V.vendorId??V.vendor_id??null,vendors:null}}).filter(U=>U.bill_date>=r&&U.bill_date<=a),L=Array.from(new Set(k.map(U=>U.vendor_id).filter(Boolean))),B=new Map;if(L.length>0){const U=Se(ae,ee.VENDORS),V=VA(L,30);(await Promise.all(V.map(R=>Pe(Ce(U,ge(so(),"in",R)))))).forEach(R=>{R.docs.forEach(W=>{const J=W.data();B.set(W.id,String(J.name??"-"))})})}return k.map(U=>({...U,vendors:U.vendor_id?{name:B.get(U.vendor_id)||"-"}:null})).sort((U,V)=>String(U.due_date||"").localeCompare(String(V.due_date||"")))},enabled:!!t}),{data:m=[]}=Ee({queryKey:["accounts-payable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await ze.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=Se(ae,ee.BILL_PAYMENTS),k=(await Pe(Ce(A,ge("companyId","==",E.companyId)))).docs.map(D=>{const R=D.data();return{id:D.id,bill_id:R.billId??R.bill_id??null,amount:Number(R.amount??0),payment_date:BA(R.paymentDate??R.payment_date),notes:R.notes??null,journal_entry_id:R.journalEntryId??R.journal_entry_id??null,is_reversed:!!(R.isReversed??R.is_reversed??!1)}}).filter(D=>D.payment_date>=r&&D.payment_date<=a),L=Array.from(new Set(k.map(D=>D.bill_id).filter(Boolean))),B=new Map;if(L.length>0){const D=VA(L,30);(await Promise.all(D.map(W=>Pe(Ce(Se(ae,ee.BILLS),ge(so(),"in",W)))))).forEach(W=>{W.docs.forEach(J=>{const oe=J.data();B.set(J.id,{billNumber:String(oe.billNumber??oe.bill_number??`BILL-${J.id.slice(0,8).toUpperCase()}`),vendorId:oe.vendorId??oe.vendor_id??null})})})}const U=Array.from(new Set(Array.from(B.values()).map(D=>D.vendorId).filter(Boolean))),V=new Map;if(U.length>0){const D=VA(U,30);(await Promise.all(D.map(W=>Pe(Ce(Se(ae,ee.VENDORS),ge(so(),"in",W)))))).forEach(W=>{W.docs.forEach(J=>{const oe=J.data();V.set(J.id,String(oe.name??"-"))})})}return k.map(D=>{const R=D.bill_id?B.get(D.bill_id):null,W=(R==null?void 0:R.vendorId)&&V.get(R.vendorId)||"-";return{id:D.id,bill_id:D.bill_id,bill_number:(R==null?void 0:R.billNumber)||"-",vendor_name:W,amount:D.amount,payment_date:D.payment_date,notes:D.notes,journal_entry_id:D.journal_entry_id,is_reversed:D.is_reversed}}).sort((D,R)=>R.payment_date.localeCompare(D.payment_date))},enabled:!!t}),v=qe({mutationFn:async E=>{if(!t)throw new Error("Not authenticated");if(!E.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const A=await ze.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${E.bill_number} (optional):`)||void 0;return jn.reverseJournalEntry({companyId:A.companyId,journalEntryId:E.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["accounts-payable-payments"]}),n.invalidateQueries({queryKey:["bills"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Bill payment journal entry reversed")},onError:E=>{G.error(`Failed to reverse payment: ${E.message}`)}}),p=E=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(E),y=d.filter(E=>E.status.toLowerCase()!=="paid"),b=y.filter(E=>E.due_date&&Kne(new Date(E.due_date))),x=y.filter(E=>{if(!E.due_date)return!1;const A=Ns(new Date(E.due_date),new Date);return A>=0&&A<=7}),w=d.filter(E=>E.status.toLowerCase()==="paid"),C=y.reduce((E,A)=>E+(A.total||0),0),S=b.reduce((E,A)=>E+(A.total||0),0),P=w.reduce((E,A)=>E+(A.total||0),0),_=()=>{of(d,[{header:"Bill Number",key:"bill_number"},{header:"Bill Date",key:"bill_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-payable-${r}-to-${a}`)},g=[{key:"bill_number",header:"Bill Number",required:!0},{key:"vendor_name",header:"Vendor Name",required:!1},{key:"bill_date",header:"Bill Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"description",header:"Description",required:!1}],T=async E=>{if(!t)throw new Error("You must be logged in");const A=await ze.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");for(const I of E){const k=String(I.bill_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,B=Number(I.amount)||0;await jn.createBill({companyId:A.companyId,amount:B,billDate:k,dueDate:L,categoryName:"Miscellaneous",description:I.description||"Imported bill"})}f(),G.success("Bills imported successfully")};return h?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Payable"}),s.jsx("p",{className:"text-muted-foreground",children:"Track and manage vendor bills and payments"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>c(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:_,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Report Period"})}),s.jsx(se,{children:s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Start Date"}),s.jsx(Y,{type:"date",value:r,onChange:E=>i(E.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"End Date"}),s.jsx(Y,{type:"date",value:a,onChange:E=>o(E.target.value)})]})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(dr,{className:"h-4 w-4"}),"Total Bills"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Vi,{className:"h-4 w-4 text-warning"}),"Outstanding"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-warning",children:p(C)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," bills"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-destructive",children:p(S)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," bills"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Xo,{className:"h-4 w-4 text-success"}),"Paid"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-success",children:p(P)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.length," bills"]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Aging Summary"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Category"}),s.jsx(H,{className:"text-right",children:"Bills"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsxs(Dt,{children:[s.jsxs(je,{children:[s.jsx(F,{children:"Current (not due)"}),s.jsx(F,{className:"text-right",children:y.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).length}),s.jsx(F,{className:"text-right",children:p(y.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"Due within 7 days"}),s.jsx(F,{className:"text-right",children:x.length}),s.jsx(F,{className:"text-right text-warning",children:p(x.reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"1-30 days overdue"}),s.jsx(F,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).length}),s.jsx(F,{className:"text-right text-destructive",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"Over 30 days overdue"}),s.jsx(F,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).length}),s.jsx(F,{className:"text-right text-destructive font-bold",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).reduce((E,A)=>E+(A.total||0),0))})]})]})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"All Bills"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Bill #"}),s.jsx(H,{children:"Vendor"}),s.jsx(H,{children:"Bill Date"}),s.jsx(H,{children:"Due Date"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Days Overdue"})]})}),s.jsx(Dt,{children:d.map(E=>{var I;const A=E.due_date&&E.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(E.due_date))):0;return s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:E.bill_number}),s.jsx(F,{children:((I=E.vendors)==null?void 0:I.name)||"-"}),s.jsx(F,{children:vt(new Date(E.bill_date),"dd MMM yyyy")}),s.jsx(F,{children:E.due_date?vt(new Date(E.due_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"text-right",children:p(E.total)}),s.jsx(F,{children:s.jsx(De,{variant:E.status.toLowerCase()==="paid"?"default":A>0?"destructive":"secondary",children:E.status})}),s.jsx(F,{children:E.status.toLowerCase()==="paid"?"-":A>0?`${A} days`:"Current"})]},E.id)})})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Bill Payments"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Bill #"}),s.jsx(H,{children:"Vendor"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Notes"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[m.map(E=>s.jsxs(je,{children:[s.jsx(F,{children:E.payment_date?vt(new Date(E.payment_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"font-medium",children:E.bill_number}),s.jsx(F,{children:E.vendor_name}),s.jsx(F,{className:"text-right",children:p(E.amount)}),s.jsx(F,{children:E.notes||"-"}),s.jsx(F,{children:E.is_reversed?s.jsx(De,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):s.jsx(De,{variant:"secondary",children:"Posted"})}),s.jsx(F,{className:"text-right",children:E.journal_entry_id&&u&&!E.is_reversed&&s.jsx(K,{variant:"ghost",size:"icon",disabled:v.isPending,onClick:()=>{confirm("Reverse this bill payment entry?")&&v.mutate(E)},title:"Reverse payment entry",children:s.jsx(Pl,{className:"h-4 w-4"})})})]},E.id)),m.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),s.jsx(bg,{open:l,onOpenChange:c,onImport:T,columns:g,title:"Import Bills"})]})}const UA=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},zA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function ctt(){const{user:t}=dt(),{data:e}=$s(),n=Jt(),[r,i]=j.useState(()=>{const E=new Date;return E.setMonth(E.getMonth()-3),E.toISOString().split("T")[0]}),[a,o]=j.useState(new Date().toISOString().split("T")[0]),[l,c]=j.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=Ee({queryKey:["accounts-receivable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await ze.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=Se(ae,ee.INVOICES),k=(await Pe(Ce(A,ge("companyId","==",E.companyId)))).docs.map(U=>{const V=U.data();return{id:U.id,invoice_number:String(V.invoiceNumber??V.invoice_number??`INV-${U.id.slice(0,8).toUpperCase()}`),invoice_date:zA(V.invoiceDate??V.invoice_date),due_date:zA(V.dueDate??V.due_date)||null,total:Number(V.total??0),status:String(V.status??"draft"),customer_id:V.customerId??V.customer_id??null,customers:null}}).filter(U=>U.invoice_date>=r&&U.invoice_date<=a),L=Array.from(new Set(k.map(U=>U.customer_id).filter(Boolean))),B=new Map;if(L.length>0){const U=Se(ae,ee.CUSTOMERS),V=UA(L,30);(await Promise.all(V.map(R=>Pe(Ce(U,ge(so(),"in",R)))))).forEach(R=>{R.docs.forEach(W=>{const J=W.data();B.set(W.id,String(J.name??"-"))})})}return k.map(U=>({...U,customers:U.customer_id?{name:B.get(U.customer_id)||"-"}:null})).sort((U,V)=>String(U.due_date||"").localeCompare(String(V.due_date||"")))},enabled:!!t}),{data:m=[]}=Ee({queryKey:["accounts-receivable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await ze.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=Se(ae,ee.INVOICE_PAYMENTS),k=(await Pe(Ce(A,ge("companyId","==",E.companyId)))).docs.map(D=>{const R=D.data();return{id:D.id,invoice_id:R.invoiceId??R.invoice_id??null,amount:Number(R.amount??0),payment_date:zA(R.paymentDate??R.payment_date),notes:R.notes??null,journal_entry_id:R.journalEntryId??R.journal_entry_id??null,is_reversed:!!(R.isReversed??R.is_reversed??!1)}}).filter(D=>D.payment_date>=r&&D.payment_date<=a),L=Array.from(new Set(k.map(D=>D.invoice_id).filter(Boolean))),B=new Map;if(L.length>0){const D=UA(L,30);(await Promise.all(D.map(W=>Pe(Ce(Se(ae,ee.INVOICES),ge(so(),"in",W)))))).forEach(W=>{W.docs.forEach(J=>{const oe=J.data();B.set(J.id,{invoiceNumber:String(oe.invoiceNumber??oe.invoice_number??`INV-${J.id.slice(0,8).toUpperCase()}`),customerId:oe.customerId??oe.customer_id??null})})})}const U=Array.from(new Set(Array.from(B.values()).map(D=>D.customerId).filter(Boolean))),V=new Map;if(U.length>0){const D=UA(U,30);(await Promise.all(D.map(W=>Pe(Ce(Se(ae,ee.CUSTOMERS),ge(so(),"in",W)))))).forEach(W=>{W.docs.forEach(J=>{const oe=J.data();V.set(J.id,String(oe.name??"-"))})})}return k.map(D=>{const R=D.invoice_id?B.get(D.invoice_id):null,W=(R==null?void 0:R.customerId)&&V.get(R.customerId)||"-";return{id:D.id,invoice_id:D.invoice_id,invoice_number:(R==null?void 0:R.invoiceNumber)||"-",customer_name:W,amount:D.amount,payment_date:D.payment_date,notes:D.notes,journal_entry_id:D.journal_entry_id,is_reversed:D.is_reversed}}).sort((D,R)=>R.payment_date.localeCompare(D.payment_date))},enabled:!!t}),v=qe({mutationFn:async E=>{if(!t)throw new Error("Not authenticated");if(!E.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const A=await ze.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${E.invoice_number} (optional):`)||void 0;return jn.reverseJournalEntry({companyId:A.companyId,journalEntryId:E.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["accounts-receivable-payments"]}),n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),G.success("Invoice payment journal entry reversed")},onError:E=>{G.error(`Failed to reverse payment: ${E.message}`)}}),p=E=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(E),y=d.filter(E=>E.status.toLowerCase()!=="paid"),b=y.filter(E=>E.due_date&&Kne(new Date(E.due_date))),x=y.filter(E=>{if(!E.due_date)return!1;const A=Ns(new Date(E.due_date),new Date);return A>=0&&A<=7}),w=d.filter(E=>E.status.toLowerCase()==="paid"),C=y.reduce((E,A)=>E+(A.total||0),0),S=b.reduce((E,A)=>E+(A.total||0),0),P=w.reduce((E,A)=>E+(A.total||0),0),_=()=>{of(d,[{header:"Invoice Number",key:"invoice_number"},{header:"Invoice Date",key:"invoice_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-receivable-${r}-to-${a}`)},g=[{key:"invoice_number",header:"Invoice Number",required:!0},{key:"customer_name",header:"Customer Name",required:!1},{key:"invoice_date",header:"Invoice Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"notes",header:"Notes",required:!1}],T=async E=>{if(!t)throw new Error("You must be logged in");const A=await ze.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");for(const I of E){const k=String(I.invoice_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,B=Number(I.amount)||0;await jn.createInvoice({companyId:A.companyId,invoiceNumber:String(I.invoice_number||"").trim()||void 0,invoiceDate:k,dueDate:L,status:"Unpaid",notes:I.notes||void 0,totalAmount:B,lineItems:[{description:I.notes||"Imported invoice",quantity:1,unitPrice:B}]})}f(),G.success("Invoices imported successfully")};return h?s.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Receivable"}),s.jsx("p",{className:"text-muted-foreground",children:"Track customer invoices and collections"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",onClick:()=>c(!0),children:[s.jsx(rl,{className:"mr-2 h-4 w-4"}),"Import"]}),s.jsxs(K,{variant:"outline",onClick:_,children:[s.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Report Period"})}),s.jsx(se,{children:s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Start Date"}),s.jsx(Y,{type:"date",value:r,onChange:E=>i(E.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"End Date"}),s.jsx(Y,{type:"date",value:a,onChange:E=>o(E.target.value)})]})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(dr,{className:"h-4 w-4"}),"Total Invoices"]})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(va,{className:"h-4 w-4 text-primary"}),"Receivable"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:p(C)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," invoices"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-destructive",children:p(S)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," invoices"]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Xo,{className:"h-4 w-4 text-success"}),"Collected"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-success",children:p(P)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.length," invoices"]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Aging Summary"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Category"}),s.jsx(H,{className:"text-right",children:"Invoices"}),s.jsx(H,{className:"text-right",children:"Amount"})]})}),s.jsxs(Dt,{children:[s.jsxs(je,{children:[s.jsx(F,{children:"Current (not due)"}),s.jsx(F,{className:"text-right",children:y.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).length}),s.jsx(F,{className:"text-right",children:p(y.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"Due within 7 days"}),s.jsx(F,{className:"text-right",children:x.length}),s.jsx(F,{className:"text-right text-warning",children:p(x.reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"1-30 days overdue"}),s.jsx(F,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).length}),s.jsx(F,{className:"text-right text-destructive",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).reduce((E,A)=>E+(A.total||0),0))})]}),s.jsxs(je,{children:[s.jsx(F,{children:"Over 30 days overdue"}),s.jsx(F,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).length}),s.jsx(F,{className:"text-right text-destructive font-bold",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).reduce((E,A)=>E+(A.total||0),0))})]})]})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"All Invoices"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Invoice #"}),s.jsx(H,{children:"Customer"}),s.jsx(H,{children:"Invoice Date"}),s.jsx(H,{children:"Due Date"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Days Overdue"})]})}),s.jsx(Dt,{children:d.map(E=>{var I;const A=E.due_date&&E.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(E.due_date))):0;return s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:E.invoice_number}),s.jsx(F,{children:((I=E.customers)==null?void 0:I.name)||"-"}),s.jsx(F,{children:vt(new Date(E.invoice_date),"dd MMM yyyy")}),s.jsx(F,{children:E.due_date?vt(new Date(E.due_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"text-right",children:p(E.total)}),s.jsx(F,{children:s.jsx(De,{variant:E.status.toLowerCase()==="paid"?"default":A>0?"destructive":"secondary",children:E.status})}),s.jsx(F,{children:E.status.toLowerCase()==="paid"?"-":A>0?`${A} days`:"Current"})]},E.id)})})]})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Invoice Payments"})}),s.jsx(se,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Invoice #"}),s.jsx(H,{children:"Customer"}),s.jsx(H,{className:"text-right",children:"Amount"}),s.jsx(H,{children:"Notes"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[m.map(E=>s.jsxs(je,{children:[s.jsx(F,{children:E.payment_date?vt(new Date(E.payment_date),"dd MMM yyyy"):"-"}),s.jsx(F,{className:"font-medium",children:E.invoice_number}),s.jsx(F,{children:E.customer_name}),s.jsx(F,{className:"text-right",children:p(E.amount)}),s.jsx(F,{children:E.notes||"-"}),s.jsx(F,{children:E.is_reversed?s.jsx(De,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):s.jsx(De,{variant:"secondary",children:"Posted"})}),s.jsx(F,{className:"text-right",children:E.journal_entry_id&&u&&!E.is_reversed&&s.jsx(K,{variant:"ghost",size:"icon",disabled:v.isPending,onClick:()=>{confirm("Reverse this invoice payment entry?")&&v.mutate(E)},title:"Reverse payment entry",children:s.jsx(Pl,{className:"h-4 w-4"})})})]},E.id)),m.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),s.jsx(bg,{open:l,onOpenChange:c,onImport:T,columns:g,title:"Import Invoices"})]})}function utt(){const{user:t}=dt(),e=Jt(),[n,r]=j.useState(""),[i,a]=j.useState(!1),[o,l]=j.useState({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""}),{data:c}=Ee({queryKey:["fixed-assets-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await ze.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:u,isLoading:d}=Ee({queryKey:["fixed-assets",c],queryFn:async()=>{if(!c)return[];const x=Se(ae,ee.FIXED_ASSETS),w=Se(ae,ee.ASSET_CATEGORIES),[C,S]=await Promise.all([Pe(Ce(x,ge("companyId","==",c))),Pe(Ce(w,ge("companyId","==",c)))]),P=new Map;return S.docs.forEach(_=>{const g=_.data();P.set(_.id,{name:String(g.name??""),depreciation_method:g.depreciationMethod??g.depreciation_method??null,useful_life_years:Number(g.usefulLifeYears??g.useful_life_years??0)||null})}),C.docs.map(_=>{var I;const g=_.data(),T=g.createdAt??g.created_at,E=typeof T=="string"?T:((I=T==null?void 0:T.toDate)==null?void 0:I.call(T).toISOString())??"",A=g.categoryId??g.category_id??null;return{id:_.id,user_id:String(g.userId??g.user_id??""),company_id:String(g.companyId??g.company_id??""),asset_number:String(g.assetNumber??g.asset_number??""),name:String(g.name??""),description:g.description??null,category_id:A,purchase_date:String(g.purchaseDate??g.purchase_date??""),purchase_cost:Number(g.purchaseCost??g.purchase_cost??0),residual_value:Number(g.residualValue??g.residual_value??0),useful_life_months:Number(g.usefulLifeMonths??g.useful_life_months??0),depreciation_method:String(g.depreciationMethod??g.depreciation_method??"straight_line"),location:g.location??null,serial_number:g.serialNumber??g.serial_number??null,net_book_value:Number(g.netBookValue??g.net_book_value??g.purchaseCost??g.purchase_cost??0),accumulated_depreciation:Number(g.accumulatedDepreciation??g.accumulated_depreciation??0),status:String(g.status??"active"),is_deleted:!!(g.isDeleted??g.is_deleted??!1),created_at:E,asset_categories:A?P.get(A)??null:null}}).filter(_=>!_.is_deleted).sort((_,g)=>g.created_at.localeCompare(_.created_at))},enabled:!!c}),{data:h}=Ee({queryKey:["asset-categories",c],queryFn:async()=>{if(!c)return[];const x=Se(ae,ee.ASSET_CATEGORIES);return(await Pe(Ce(x,ge("companyId","==",c)))).docs.map(C=>{const S=C.data();return{id:C.id,name:String(S.name??"")}}).sort((C,S)=>C.name.localeCompare(S.name))},enabled:!!c}),f=qe({mutationFn:async()=>{if(!t||!c)throw new Error("Not authenticated");const x=parseFloat(o.purchase_cost),w=parseFloat(o.residual_value)||0,C=parseInt(o.useful_life_months,10),S=C>0?Math.max(0,(x-w)/C):0;await es(Se(ae,ee.FIXED_ASSETS),{userId:t.id,companyId:c,assetNumber:o.asset_number,name:o.name,description:o.description||null,categoryId:o.category_id||null,purchaseDate:o.purchase_date,purchaseCost:x,residualValue:w,usefulLifeMonths:C,depreciationMethod:o.depreciation_method,location:o.location||null,serialNumber:o.serial_number||null,monthlyDepreciation:S,netBookValue:x,accumulatedDepreciation:0,status:"active",isDeleted:!1,createdAt:Ie(),updatedAt:Ie()})},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",c]}),G.success("Asset created successfully"),a(!1),l({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""})},onError:x=>{G.error(x.message||"Failed to create asset")}}),m=u==null?void 0:u.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())||x.asset_number.toLowerCase().includes(n.toLowerCase())),v=(u==null?void 0:u.reduce((x,w)=>x+Number(w.purchase_cost||0),0))||0,p=(u==null?void 0:u.reduce((x,w)=>x+Number(w.accumulated_depreciation||0),0))||0,y=(u==null?void 0:u.reduce((x,w)=>x+Number(w.net_book_value||w.purchase_cost||0),0))||0,b=x=>{switch(x){case"active":return s.jsx(De,{className:"bg-green-600",children:"Active"});case"disposed":return s.jsx(De,{variant:"destructive",children:"Disposed"});case"fully_depreciated":return s.jsx(De,{variant:"secondary",children:"Fully Depreciated"});case"under_maintenance":return s.jsx(De,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Maintenance"});default:return s.jsx(De,{variant:"outline",children:x})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Fixed Assets"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's fixed assets and depreciation"})]}),s.jsxs(Jn,{open:i,onOpenChange:a,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Asset"]})}),s.jsxs(Kn,{className:"max-w-2xl",children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Add New Fixed Asset"}),s.jsx(md,{children:"Enter the details of the new asset"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Asset Number *"}),s.jsx(Y,{value:o.asset_number,onChange:x=>l({...o,asset_number:x.target.value}),placeholder:"FA-001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Asset Name *"}),s.jsx(Y,{value:o.name,onChange:x=>l({...o,name:x.target.value}),placeholder:"Office Computer"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Pn,{value:o.description,onChange:x=>l({...o,description:x.target.value}),placeholder:"Asset description..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Category"}),s.jsxs(gt,{value:o.category_id,onValueChange:x=>l({...o,category_id:x}),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select category"})}),s.jsx(pt,{children:h==null?void 0:h.map(x=>s.jsx(ye,{value:x.id,children:x.name},x.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Purchase Date *"}),s.jsx(Y,{type:"date",value:o.purchase_date,onChange:x=>l({...o,purchase_date:x.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Purchase Cost (ZMW) *"}),s.jsx(Y,{type:"number",value:o.purchase_cost,onChange:x=>l({...o,purchase_cost:x.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Residual Value (ZMW)"}),s.jsx(Y,{type:"number",value:o.residual_value,onChange:x=>l({...o,residual_value:x.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Useful Life (Months)"}),s.jsx(Y,{type:"number",value:o.useful_life_months,onChange:x=>l({...o,useful_life_months:x.target.value}),placeholder:"60"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Depreciation Method"}),s.jsxs(gt,{value:o.depreciation_method,onValueChange:x=>l({...o,depreciation_method:x}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"straight_line",children:"Straight Line"}),s.jsx(ye,{value:"reducing_balance",children:"Reducing Balance"}),s.jsx(ye,{value:"units_of_production",children:"Units of Production"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Location"}),s.jsx(Y,{value:o.location,onChange:x=>l({...o,location:x.target.value}),placeholder:"Head Office"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Serial Number"}),s.jsx(Y,{value:o.serial_number,onChange:x=>l({...o,serial_number:x.target.value}),placeholder:"SN-12345"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(K,{onClick:()=>f.mutate(),disabled:!o.asset_number||!o.name||!o.purchase_cost||f.isPending,children:[f.isPending?s.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Asset"]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(la,{className:"h-4 w-4"}),"Total Assets"]}),s.jsx(re,{className:"text-2xl",children:(u==null?void 0:u.length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Asset Value"}),s.jsx(re,{className:"text-2xl text-primary",children:de(v)})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(co,{className:"h-4 w-4"}),"Accumulated Depreciation"]}),s.jsx(re,{className:"text-2xl text-destructive",children:de(p)})]})}),s.jsx(Z,{className:"bg-primary/5 border-primary/20",children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(xv,{className:"h-4 w-4"}),"Net Book Value"]}),s.jsx(re,{className:"text-2xl text-primary",children:de(y)})]})})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search assets...",value:n,onChange:x=>r(x.target.value),className:"pl-9"})]})}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{children:"Asset Register"})}),s.jsx(se,{children:d?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(mn,{className:"h-8 w-8 animate-spin"})}):m&&m.length>0?s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Asset #"}),s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Category"}),s.jsx(H,{children:"Purchase Date"}),s.jsx(H,{className:"text-right",children:"Cost"}),s.jsx(H,{className:"text-right",children:"Accum. Dep."}),s.jsx(H,{className:"text-right",children:"NBV"}),s.jsx(H,{children:"Status"})]})}),s.jsx(Dt,{children:m.map(x=>{var w;return s.jsxs(je,{children:[s.jsx(F,{className:"font-mono",children:x.asset_number}),s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:x.name}),x.serial_number&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["SN: ",x.serial_number]})]})}),s.jsx(F,{children:((w=x.asset_categories)==null?void 0:w.name)||"-"}),s.jsx(F,{children:vt(new Date(x.purchase_date),"dd MMM yyyy")}),s.jsx(F,{className:"text-right",children:de(Number(x.purchase_cost))}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(x.accumulated_depreciation||0))}),s.jsx(F,{className:"text-right font-medium",children:de(Number(x.net_book_value||x.purchase_cost))}),s.jsx(F,{children:b(x.status||"active")})]},x.id)})})]})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(la,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No fixed assets found"}),s.jsx("p",{className:"text-sm",children:"Add your first asset to get started"})]})})]})]})}function dtt(){const t=Jt(),{user:e}=dt(),n=qe({mutationFn:async({periodMonth:r,postToGL:i=!0})=>{if(!e)throw new Error("Not authenticated");const a=await ze.getPrimaryMembershipByUser(e.id);if(!(a!=null&&a.companyId))throw new Error("No company found");const o=await To.runDepreciation({companyId:a.companyId,periodMonth:r,postToGL:i});return{success:o.success,period:r,assets_processed:o.assetsProcessed,total_depreciation:o.totalDepreciation,posted_to_gl:!!i,results:[]}},onSuccess:r=>{G.success(`Depreciation completed: ${r.assets_processed} assets, K${r.total_depreciation.toFixed(2)} total`),t.invalidateQueries({queryKey:["asset-depreciation"]}),t.invalidateQueries({queryKey:["fixed-assets"]}),t.invalidateQueries({queryKey:["depreciable-assets"]}),t.invalidateQueries({queryKey:["journal-entries"]})},onError:r=>{G.error(r.message||"Failed to run depreciation")}});return{runDepreciation:n,isRunning:n.isPending,lastResult:n.data}}function htt(){const{user:t}=dt(),[e,n]=j.useState(vt(G6(new Date,1),"yyyy-MM")),[r,i]=j.useState(!1),[a,o]=j.useState(!0),{runDepreciation:l,isRunning:c,lastResult:u}=dtt(),{data:d}=Ee({queryKey:["asset-depreciation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const b=await ze.getPrimaryMembershipByUser(t.id);return(b==null?void 0:b.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ee({queryKey:["asset-depreciation",d,e],queryFn:async()=>{if(!d)return[];const b=qne(new Date(e+"-01")),x=zne(b),w=vt(b,"yyyy-MM-dd"),C=vt(x,"yyyy-MM-dd"),[S,P]=await Promise.all([Pe(Ce(Se(ae,ee.DEPRECIATION_ENTRIES),ge("companyId","==",d))),Pe(Ce(Se(ae,ee.FIXED_ASSETS),ge("companyId","==",d)))]),_=new Map;return P.docs.forEach(g=>{const T=g.data();_.set(g.id,{asset_number:String(T.assetNumber??T.asset_number??""),name:String(T.name??""),purchase_cost:Number(T.purchaseCost??T.purchase_cost??0),depreciation_method:String(T.depreciationMethod??T.depreciation_method??"straight_line")})}),S.docs.map(g=>{const T=g.data(),E=String(T.periodStart??T.period_start??""),A=String(T.periodEnd??T.period_end??"");return{id:g.id,asset_id:String(T.assetId??T.asset_id??""),depreciation_amount:Number(T.depreciationAmount??T.depreciation_amount??0),accumulated_depreciation:Number(T.accumulatedDepreciation??T.accumulated_depreciation??0),net_book_value:Number(T.netBookValue??T.net_book_value??0),is_posted:!!(T.isPosted??T.is_posted??!1),period_start:E,period_end:A,created_at:String(T.createdAt??T.created_at??""),fixed_assets:_.get(String(T.assetId??T.asset_id??""))??null}}).filter(g=>g.period_start>=w&&g.period_end<=C).sort((g,T)=>String(T.created_at).localeCompare(String(g.created_at)))},enabled:!!d}),{data:m}=Ee({queryKey:["depreciable-assets",d],queryFn:async()=>d?(await Pe(Ce(Se(ae,ee.FIXED_ASSETS),ge("companyId","==",d),ge("status","==","active")))).docs.map(x=>{const w=x.data();return{id:x.id,status:String(w.status??"active"),is_deleted:!!(w.isDeleted??w.is_deleted??!1)}}).filter(x=>!x.is_deleted):[],enabled:!!d}),v=async()=>{try{await l.mutateAsync({periodMonth:e,postToGL:a}),i(!1)}catch{}},p=(h==null?void 0:h.reduce((b,x)=>b+Number(x.depreciation_amount||0),0))||0,y=Array.from({length:12},(b,x)=>{const w=G6(new Date,x);return{value:vt(w,"yyyy-MM"),label:vt(w,"MMMM yyyy")}});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Asset Depreciation"}),s.jsx("p",{className:"text-muted-foreground",children:"Run and view depreciation calculations"})]}),s.jsxs(K,{onClick:()=>i(!0),children:[s.jsx(m8,{className:"h-4 w-4 mr-2"}),"Run Depreciation"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(xv,{className:"h-4 w-4"}),"Active Assets"]}),s.jsx(re,{className:"text-2xl",children:(m==null?void 0:m.filter(b=>b.status==="active").length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Records This Period"}),s.jsx(re,{className:"text-2xl",children:(h==null?void 0:h.length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(co,{className:"h-4 w-4 text-destructive"}),"Total Depreciation"]}),s.jsx(re,{className:"text-2xl text-destructive",children:de(p)})]})}),s.jsx(Z,{className:"bg-muted/50",children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Posted to GL"}),s.jsx(re,{className:"text-2xl text-green-600",children:(h==null?void 0:h.filter(b=>b.is_posted).length)||0})]})})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(gt,{value:e,onValueChange:n,children:[s.jsx(mt,{className:"w-[200px]",children:s.jsx(yt,{placeholder:"Select month"})}),s.jsx(pt,{children:y.map(b=>s.jsx(ye,{value:b.value,children:b.label},b.value))})]})}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Depreciation Records"}),s.jsxs(wt,{children:["Monthly depreciation entries for ",vt(new Date(e+"-01"),"MMMM yyyy")]})]}),s.jsx(se,{children:f?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(mn,{className:"h-8 w-8 animate-spin"})}):h&&h.length>0?s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Asset"}),s.jsx(H,{children:"Method"}),s.jsx(H,{className:"text-right",children:"Depreciation"}),s.jsx(H,{className:"text-right",children:"Accum. Dep."}),s.jsx(H,{className:"text-right",children:"NBV"}),s.jsx(H,{children:"Status"})]})}),s.jsx(Dt,{children:h.map(b=>{var x,w,C,S;return s.jsxs(je,{children:[s.jsx(F,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:(x=b.fixed_assets)==null?void 0:x.name}),s.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:(w=b.fixed_assets)==null?void 0:w.asset_number})]})}),s.jsx(F,{className:"capitalize",children:(S=(C=b.fixed_assets)==null?void 0:C.depreciation_method)==null?void 0:S.replace("_"," ")}),s.jsx(F,{className:"text-right text-destructive",children:de(Number(b.depreciation_amount))}),s.jsx(F,{className:"text-right",children:de(Number(b.accumulated_depreciation))}),s.jsx(F,{className:"text-right font-medium",children:de(Number(b.net_book_value))}),s.jsx(F,{children:b.is_posted?s.jsxs(De,{className:"bg-green-600",children:[s.jsx(Xo,{className:"h-3 w-3 mr-1"}),"Posted"]}):s.jsx(De,{variant:"outline",children:"Pending"})})]},b.id)})})]})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(co,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No depreciation records for this period"}),s.jsx("p",{className:"text-sm",children:"Run depreciation to calculate monthly values"})]})})]}),s.jsx(Mo,{open:r,onOpenChange:i,children:s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsxs(Za,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-amber-500"}),"Run Monthly Depreciation"]}),s.jsxs(Ja,{className:"space-y-2",children:[s.jsx("p",{children:"This will calculate depreciation for all active fixed assets for:"}),s.jsx("p",{className:"font-medium text-foreground",children:vt(new Date(e+"-01"),"MMMM yyyy")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm mt-4",children:[s.jsx("li",{children:"Calculate depreciation based on each asset's method"}),s.jsx("li",{children:"Update accumulated depreciation and net book value"}),s.jsx("li",{children:"Create journal entries for the GL"}),s.jsx("li",{children:"Mark fully depreciated assets"})]})]})]}),s.jsx("div",{className:"py-4",children:s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vv,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Post to General Ledger"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Create journal entries automatically"})]})]}),s.jsx("input",{type:"checkbox",checked:a,onChange:b=>o(b.target.checked),className:"h-4 w-4"})]})}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:v,disabled:c,children:[c&&s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Run Depreciation"]})]})]})}),u&&s.jsx(Z,{className:"border-green-500/20 bg-green-500/5",children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(re,{className:"text-sm flex items-center gap-2",children:[s.jsx(Xo,{className:"h-4 w-4 text-green-600"}),"Last Run: ",u.period]}),s.jsxs(wt,{children:[u.assets_processed," assets processed, K",u.total_depreciation.toFixed(2)," total",u.posted_to_gl&&" (Posted to GL)"]})]})})]})}const Wre=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null},Z_=t=>{const e=Wre(t);return e?e.slice(0,10):""},ftt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),yearName:String(e.yearName??e.year_name??""),startDate:Z_(e.startDate??e.start_date),endDate:Z_(e.endDate??e.end_date),status:String(e.status??"open")}),mtt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),financialYearId:String(e.financialYearId??e.financial_year_id??""),periodNumber:Number(e.periodNumber??e.period_number??0),periodName:String(e.periodName??e.period_name??""),startDate:Z_(e.startDate??e.start_date),endDate:Z_(e.endDate??e.end_date),status:String(e.status??"open"),closedAt:Wre(e.closedAt??e.closed_at),closedBy:e.closedBy??e.closed_by??null});function ptt(){const t=Jt(),{user:e}=dt(),[n,r]=j.useState(!1),[i,a]=j.useState(null),[o,l]=j.useState(null),[c,u]=j.useState({year_name:`FY ${jf(new Date)}`,start_date:`${jf(new Date)}-01-01`,end_date:`${jf(new Date)}-12-31`}),d=Ee({queryKey:["financial-periods-company-id",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const T=await ze.getPrimaryMembershipByUser(e.id);return(T==null?void 0:T.companyId)??null},enabled:!!e}),h=d.data??null,{data:f,isLoading:m}=Ee({queryKey:["financial-years",h],queryFn:async()=>{if(!h)return[];const T=Se(ae,ee.FINANCIAL_YEARS);return(await Pe(Ce(T,ge("companyId","==",h)))).docs.map(A=>ftt(A.id,A.data())).sort((A,I)=>I.startDate.localeCompare(A.startDate))},enabled:!!h});j.useEffect(()=>{!o&&f&&f.length>0&&l(f[0].id)},[f,o]);const{data:v,isLoading:p}=Ee({queryKey:["financial-periods",h,o],queryFn:async()=>{if(!h||!o)return[];const T=Se(ae,ee.FINANCIAL_PERIODS);return(await Pe(Ce(T,ge("companyId","==",h),ge("financialYearId","==",o)))).docs.map(A=>mtt(A.id,A.data())).sort((A,I)=>A.periodNumber-I.periodNumber)},enabled:!!(h&&o)}),y=j.useMemo(()=>(v==null?void 0:v.find(T=>T.id===i))??null,[v,i]),b=qe({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");if(!h)throw new Error("No company profile found for your account");if(!c.year_name.trim())throw new Error("Year name is required");if(c.start_date>c.end_date)throw new Error("Start date must be before end date");const T=new Date(c.start_date),E=Ql(ae),A=et(Se(ae,ee.FINANCIAL_YEARS));E.set(A,{companyId:h,yearName:c.year_name.trim(),startDate:c.start_date,endDate:c.end_date,status:"open",createdAt:Ie(),updatedAt:Ie()});for(let I=0;I<12;I+=1){const k=Fne(qne(T),I),L=zne(k),B=et(Se(ae,ee.FINANCIAL_PERIODS));E.set(B,{companyId:h,financialYearId:A.id,periodNumber:I+1,periodName:vt(k,"MMMM yyyy"),startDate:vt(k,"yyyy-MM-dd"),endDate:vt(L,"yyyy-MM-dd"),status:"open",closedAt:null,closedBy:null,createdAt:Ie(),updatedAt:Ie()})}await E.commit()},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-years",h]}),t.invalidateQueries({queryKey:["financial-periods",h]}),G.success("Financial year created with 12 monthly periods"),r(!1),u({year_name:`FY ${jf(new Date)+1}`,start_date:`${jf(new Date)+1}-01-01`,end_date:`${jf(new Date)+1}-12-31`})},onError:T=>{G.error(T.message||"Failed to create financial year")}}),x=qe({mutationFn:async T=>{if(!e)throw new Error("Not authenticated");await Gl(et(ae,ee.FINANCIAL_PERIODS,T.id),{status:"closed",closedAt:Ie(),closedBy:e.id,updatedAt:Ie()}),await fr(et(ae,ee.PERIOD_LOCKS,`${T.companyId}_${T.id}`),{companyId:T.companyId,periodId:T.id,financialYearId:T.financialYearId,periodName:T.periodName,startDate:T.startDate,endDate:T.endDate,status:"closed",lockedBy:e.id,lockedAt:Ie(),updatedAt:Ie()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),G.success("Period closed successfully"),a(null)},onError:T=>{G.error(T.message||"Failed to close period")}}),w=qe({mutationFn:async T=>{if(!e)throw new Error("Not authenticated");await Gl(et(ae,ee.FINANCIAL_PERIODS,T.id),{status:"open",closedAt:null,closedBy:null,updatedAt:Ie()}),await fr(et(ae,ee.PERIOD_LOCKS,`${T.companyId}_${T.id}`),{companyId:T.companyId,periodId:T.id,status:"open",unlockedBy:e.id,unlockedAt:Ie(),updatedAt:Ie()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),G.success("Period reopened")},onError:T=>{G.error(T.message||"Failed to reopen period")}}),C=T=>{switch(T){case"open":return s.jsx(De,{className:"bg-green-600",children:"Open"});case"closed":return s.jsx(De,{variant:"secondary",children:"Closed"});default:return s.jsx(De,{variant:"outline",children:T})}},S=f==null?void 0:f.find(T=>T.status==="open"),P=(v==null?void 0:v.filter(T=>T.status==="open"))??[],_=(v==null?void 0:v.filter(T=>T.status==="closed"))??[],g=d.isLoading||m;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Financial Periods"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage financial years and accounting periods"})]}),s.jsxs(Jn,{open:n,onOpenChange:r,children:[s.jsx(ns,{asChild:!0,children:s.jsxs(K,{disabled:!h,children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"New Financial Year"]})}),s.jsxs(Kn,{children:[s.jsxs(Gn,{children:[s.jsx(Yn,{children:"Create Financial Year"}),s.jsx(md,{children:"This creates a new financial year with 12 monthly periods."})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Year Name"}),s.jsx(Y,{value:c.year_name,onChange:T=>u({...c,year_name:T.target.value}),placeholder:"FY 2026"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Start Date"}),s.jsx(Y,{type:"date",value:c.start_date,onChange:T=>u({...c,start_date:T.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"End Date"}),s.jsx(Y,{type:"date",value:c.end_date,onChange:T=>u({...c,end_date:T.target.value})})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(K,{onClick:()=>b.mutate(),disabled:!c.year_name||b.isPending,children:[b.isPending&&s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Year"]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(Um,{className:"h-4 w-4"}),"Current Year"]}),s.jsx(re,{className:"text-xl",children:(S==null?void 0:S.yearName)||"Not Set"})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Years"}),s.jsx(re,{className:"text-2xl",children:(f==null?void 0:f.length)||0})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(l4,{className:"h-4 w-4 text-green-600"}),"Open Periods"]}),s.jsx(re,{className:"text-2xl text-green-600",children:P.length})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsxs(wt,{className:"flex items-center gap-2",children:[s.jsx(zm,{className:"h-4 w-4"}),"Closed Periods"]}),s.jsx(re,{className:"text-2xl",children:_.length})]})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Financial Years"}),s.jsx(wt,{children:"Select a year to view its periods"})]}),s.jsx(se,{children:g?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(mn,{className:"h-8 w-8 animate-spin"})}):h?f&&f.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(T=>s.jsx(Z,{className:`cursor-pointer transition-colors ${o===T.id?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>l(T.id),children:s.jsx(se,{className:"pt-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:T.yearName}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.startDate?vt(new Date(T.startDate),"dd MMM yyyy"):"-"," ","-"," ",T.endDate?vt(new Date(T.endDate),"dd MMM yyyy"):"-"]})]}),C(T.status||"open")]})})},T.id))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Um,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No financial years found"}),s.jsx("p",{className:"text-sm",children:"Create your first financial year to get started"})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"No company profile found for your account"})})})]}),o&&s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Accounting Periods"}),s.jsx(wt,{children:"Manage period status. Closed periods prevent back-dated entries."})]}),s.jsx(se,{children:p?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(mn,{className:"h-8 w-8 animate-spin"})}):v&&v.length>0?s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Period"}),s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Start Date"}),s.jsx(H,{children:"End Date"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Closed At"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsx(Dt,{children:v.map(T=>s.jsxs(je,{children:[s.jsxs(F,{className:"font-mono",children:["P",T.periodNumber]}),s.jsx(F,{className:"font-medium",children:T.periodName}),s.jsx(F,{children:T.startDate?vt(new Date(T.startDate),"dd MMM yyyy"):"-"}),s.jsx(F,{children:T.endDate?vt(new Date(T.endDate),"dd MMM yyyy"):"-"}),s.jsx(F,{children:C(T.status||"open")}),s.jsx(F,{children:T.closedAt?vt(new Date(T.closedAt),"dd MMM yyyy HH:mm"):"-"}),s.jsx(F,{className:"text-right",children:T.status==="open"?s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>a(T.id),children:[s.jsx(zm,{className:"h-4 w-4 mr-2"}),"Close"]}):s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>w.mutate(T),disabled:w.isPending,children:[s.jsx(l4,{className:"h-4 w-4 mr-2"}),"Reopen"]})})]},T.id))})]})}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"No periods found for this year"})})})]}),s.jsx(Mo,{open:!!i,onOpenChange:()=>a(null),children:s.jsxs(Ya,{children:[s.jsxs(Qa,{children:[s.jsxs(Za,{className:"flex items-center gap-2",children:[s.jsx(Mi,{className:"h-5 w-5 text-amber-500"}),"Close Accounting Period"]}),s.jsxs(Ja,{className:"space-y-2",children:[s.jsx("p",{children:"Closing this period will:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsx("li",{children:"Prevent new entries dated within this period"}),s.jsx("li",{children:"Block modifications to existing entries in this period"}),s.jsx("li",{children:"Lock payroll postings for this period"})]}),s.jsx("p",{className:"mt-4 font-medium",children:"You can reopen the period later if needed."})]})]}),s.jsxs(Xa,{children:[s.jsx(to,{children:"Cancel"}),s.jsxs(eo,{onClick:()=>y&&x.mutate(y),disabled:x.isPending||!y,children:[x.isPending&&s.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Close Period"]})]})]})})]})}const iz=[{value:"housing",label:"Housing Allowance"},{value:"transport",label:"Transport Allowance"},{value:"meal",label:"Meal Allowance"},{value:"medical",label:"Medical Allowance"},{value:"phone",label:"Phone Allowance"},{value:"fuel",label:"Fuel Allowance"},{value:"education",label:"Education Allowance"},{value:"custom",label:"Custom Allowance"}];function gtt({employeeId:t,employeeName:e,contractType:n,basicSalary:r,onClose:i}){const a=Jt(),{user:o}=dt(),l=n==="consultant",[c,u]=j.useState({apply_paye:!l,apply_napsa:!l,apply_nhima:!l,pension_enabled:!1,pension_employee_rate:5,pension_employer_rate:5,is_consultant:l,consultant_type:"local",apply_wht:l,rate_type:"monthly",currency:"ZMW"}),[d,h]=j.useState([]),[f,m]=j.useState({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}),{data:v}=Ee({queryKey:["employee-payroll-profile",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return null;const S=await ze.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))return null;const P=Ce(Se(ae,ee.EMPLOYEE_PAYROLL_PROFILES),ge("companyId","==",S.companyId),ge("employeeId","==",t),Ts(1)),_=await Pe(P);if(_.empty)return null;const g=_.docs[0];return{id:g.id,...g.data()}}}),{data:p}=Ee({queryKey:["employee-allowances",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return[];const S=await ze.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))return[];const P=Ce(Se(ae,ee.EMPLOYEE_ALLOWANCES),ge("companyId","==",S.companyId),ge("employeeId","==",t),ge("isActive","==",!0));return(await Pe(P)).docs.map(g=>({id:g.id,...g.data()}))}});j.useEffect(()=>{v&&u({apply_paye:v.applyPaye??v.apply_paye??!l,apply_napsa:v.applyNapsa??v.apply_napsa??!l,apply_nhima:v.applyNhima??v.apply_nhima??!l,pension_enabled:v.pensionEnabled??v.pension_enabled??!1,pension_employee_rate:Number(v.pensionEmployeeRate??v.pension_employee_rate??5),pension_employer_rate:Number(v.pensionEmployerRate??v.pension_employer_rate??5),is_consultant:v.isConsultant??v.is_consultant??l,consultant_type:v.consultantType??v.consultant_type??"local",apply_wht:v.applyWht??v.apply_wht??l,rate_type:v.rateType??v.rate_type??"monthly",currency:v.currency??"ZMW"})},[v,l]),j.useEffect(()=>{p&&h(p.map(S=>({id:S.id,allowance_type:S.allowanceType??S.allowance_type??"custom",allowance_name:S.allowanceName??S.allowance_name??"Allowance",amount:Number(S.amount??0),is_taxable:S.isTaxable??S.is_taxable??!0})))},[p]);const y=qe({mutationFn:async()=>{if(!o)throw new Error("Not authenticated");const S=await ze.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))throw new Error("No company associated with user");const P=v&&typeof v.id=="string"?String(v.id):t,_={employeeId:t,companyId:S.companyId,applyPaye:c.apply_paye,applyNapsa:c.apply_napsa,applyNhima:c.apply_nhima,pensionEnabled:c.pension_enabled,pensionEmployeeRate:c.pension_employee_rate,pensionEmployerRate:c.pension_employer_rate,isConsultant:c.is_consultant,consultantType:c.consultant_type,applyWht:c.apply_wht,rateType:c.rate_type,currency:c.currency,updatedAt:Ie()};if(await fr(et(ae,ee.EMPLOYEE_PAYROLL_PROFILES,P),v?_:{..._,createdAt:Ie()},{merge:!0}),p){const g=p.map(A=>String(A.id)).filter(A=>!!A),T=d.filter(A=>A.id).map(A=>String(A.id)),E=g.filter(A=>!T.includes(A));await Promise.all(E.map(A=>Gl(et(ae,ee.EMPLOYEE_ALLOWANCES,A),{isActive:!1,updatedAt:Ie()})))}for(const g of d){const T={employeeId:t,companyId:S.companyId,allowanceType:g.allowance_type,allowanceName:g.allowance_name,amount:g.amount,isTaxable:g.is_taxable,isActive:!0,updatedAt:Ie()};g.id?await fr(et(ae,ee.EMPLOYEE_ALLOWANCES,String(g.id)),T,{merge:!0}):await es(Se(ae,ee.EMPLOYEE_ALLOWANCES),{...T,createdAt:Ie()})}},onSuccess:()=>{G.success("Payroll setup saved successfully"),a.invalidateQueries({queryKey:["employee-payroll-profile",t]}),a.invalidateQueries({queryKey:["employee-allowances",t]}),i==null||i()},onError:S=>{G.error(S instanceof Error?S.message:"Failed to save payroll setup")}}),b=()=>{f.amount>0&&(h([...d,{...f}]),m({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}))},x=S=>{h(d.filter((P,_)=>_!==S))},w=d.reduce((S,P)=>S+P.amount,0),C=r+w;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Setup"}),s.jsx("p",{className:"text-muted-foreground",children:e})]}),s.jsx(De,{variant:l?"secondary":"default",children:l?"Consultant":"Employee"})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Earnings Assignment"}),s.jsx(wt,{children:"Configure allowances for this employee"})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("span",{children:"Basic Pay"}),s.jsx("span",{className:"font-semibold",children:de(r)})]}),d.map((S,P)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:S.allowance_name}),!S.is_taxable&&s.jsx(De,{variant:"outline",className:"ml-2 text-xs",children:"Non-taxable"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:de(S.amount)}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>x(P),children:s.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})]},P)),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-3 border rounded-lg bg-muted/50",children:[s.jsxs(gt,{value:f.allowance_type,onValueChange:S=>{const P=iz.find(_=>_.value===S);m({...f,allowance_type:S,allowance_name:(P==null?void 0:P.label)||S})},children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsx(pt,{children:iz.map(S=>s.jsx(ye,{value:S.value,children:S.label},S.value))})]}),s.jsx(Y,{type:"number",step:"0.01",placeholder:"Amount",value:f.amount||"",onChange:S=>m({...f,amount:Number(S.target.value)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{checked:f.is_taxable,onCheckedChange:S=>m({...f,is_taxable:S})}),s.jsx(X,{className:"text-sm",children:"Taxable"})]}),s.jsxs(K,{onClick:b,disabled:f.amount<=0,children:[s.jsx(Nn,{className:"h-4 w-4 mr-1"})," Add"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg font-semibold",children:[s.jsx("span",{children:"Gross Salary"}),s.jsx("span",{className:"text-lg",children:de(C)})]})]})]}),s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Statutory Deductions"}),s.jsx(wt,{children:"Configure which deductions apply to this employee"})]}),s.jsxs(se,{className:"space-y-4",children:[l&&s.jsxs(Hu,{children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsx(Ku,{children:"Consultants are subject to Withholding Tax (WHT) instead of PAYE, NAPSA, and NHIMA."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(X,{className:"font-medium",children:"Apply PAYE"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay As You Earn tax"})]}),s.jsx(us,{checked:c.apply_paye,onCheckedChange:S=>u({...c,apply_paye:S}),disabled:l})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(X,{className:"font-medium",children:"Apply NAPSA"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"5% of gross (max K1,342)"})]}),s.jsx(us,{checked:c.apply_napsa,onCheckedChange:S=>u({...c,apply_napsa:S}),disabled:l})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(X,{className:"font-medium",children:"Apply NHIMA"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"1% of basic (max K250)"})]}),s.jsx(us,{checked:c.apply_nhima,onCheckedChange:S=>u({...c,apply_nhima:S}),disabled:l})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(X,{className:"font-medium",children:"Pension Enabled"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional pension contribution"})]}),s.jsx(us,{checked:c.pension_enabled,onCheckedChange:S=>u({...c,pension_enabled:S})})]}),c.pension_enabled&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(X,{children:"Employee Rate (%)"}),s.jsx(Y,{type:"number",step:"0.1",value:c.pension_employee_rate,onChange:S=>u({...c,pension_employee_rate:Number(S.target.value)})})]}),s.jsxs("div",{children:[s.jsx(X,{children:"Employer Rate (%)"}),s.jsx(Y,{type:"number",step:"0.1",value:c.pension_employer_rate,onChange:S=>u({...c,pension_employer_rate:Number(S.target.value)})})]})]})]}),l&&s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mb-4",children:[s.jsxs("div",{children:[s.jsx(X,{className:"font-medium",children:"Apply Withholding Tax (WHT)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax on consultancy payments"})]}),s.jsx(us,{checked:c.apply_wht,onCheckedChange:S=>u({...c,apply_wht:S})})]}),c.apply_wht&&s.jsxs("div",{children:[s.jsx(X,{children:"Consultant Type"}),s.jsxs(gt,{value:c.consultant_type,onValueChange:S=>u({...c,consultant_type:S}),children:[s.jsx(mt,{className:"mt-2",children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"local",children:"Local Consultant (15% WHT)"}),s.jsx(ye,{value:"non_resident",children:"Non-Resident (20% WHT - Final Tax)"})]})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{variant:"outline",onClick:i,children:"Cancel"}),s.jsxs(K,{onClick:()=>y.mutate(),disabled:y.isPending,children:[s.jsx(bh,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Payroll Setup"]})]})]})}function ytt(){const{id:t}=Yh(),e=Fn(),{user:n}=dt(),{data:r,isLoading:i}=Ee({queryKey:["employee",t,n==null?void 0:n.id],queryFn:async()=>{if(!t||!n)return null;const a=await ze.getPrimaryMembershipByUser(n.id);if(!(a!=null&&a.companyId))return null;const o=et(ae,ee.EMPLOYEES,t),l=await bi(o);if(!l.exists())return null;const c=l.data(),u=c.companyId??c.company_id;return u&&u!==a.companyId?null:{id:l.id,...c}},enabled:!!(t&&n)});return i?s.jsx(mm,{}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/employees"),children:[s.jsx(ya,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})}),s.jsx(gtt,{employeeId:String(r.id),employeeName:String(r.fullName??r.full_name??"Employee"),contractType:String(r.contractType??r.contract_type??"")||void 0,basicSalary:Number(r.basicSalary??r.basic_salary??0),onClose:()=>e("/employees")})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"Employee not found"}),s.jsx(K,{variant:"link",onClick:()=>e("/employees"),children:"Go back to employees"})]})}const vtt=[{band_order:1,min_amount:0,max_amount:5100,rate:0},{band_order:2,min_amount:5100,max_amount:7100,rate:.2},{band_order:3,min_amount:7100,max_amount:9200,rate:.3},{band_order:4,min_amount:9200,max_amount:null,rate:.37}],xtt=[{rate_type:"napsa",employee_rate:.05,employer_rate:.05,cap_amount:1342},{rate_type:"nhima",employee_rate:.01,employer_rate:.01,cap_amount:250},{rate_type:"pension",employee_rate:.05,employer_rate:.05,cap_amount:null},{rate_type:"wht_local",employee_rate:.15,employer_rate:0,cap_amount:null},{rate_type:"wht_nonresident",employee_rate:.2,employer_rate:0,cap_amount:null}],oy=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},az=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null};function btt(){const{user:t}=dt(),e=Jt(),[n,r]=j.useState([]),[i,a]=j.useState([]),[o,l]=j.useState(!1),c=Ee({queryKey:["payroll-settings-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const P=await ze.getPrimaryMembershipByUser(t.id);return(P==null?void 0:P.companyId)??null},enabled:!!t}),u=c.data??null,{data:d,isLoading:h}=Ee({queryKey:["paye-tax-bands",u],queryFn:async()=>{if(!u)return[];const P=Se(ae,ee.PAYE_TAX_BANDS);return(await Pe(Ce(P,ge("companyId","==",u)))).docs.map(g=>{const T=g.data();return{id:g.id,band_order:oy(T.bandOrder??T.band_order,0),min_amount:oy(T.minAmount??T.min_amount,0),max_amount:az(T.maxAmount??T.max_amount),rate:oy(T.rate,0),is_active:!!(T.isActive??T.is_active??!0)}}).filter(g=>g.is_active).sort((g,T)=>g.band_order-T.band_order).map(({is_active:g,...T})=>T)},enabled:!!u}),{data:f,isLoading:m}=Ee({queryKey:["statutory-rates",u],queryFn:async()=>{if(!u)return[];const P=Se(ae,ee.PAYROLL_STATUTORY_RATES);return(await Pe(Ce(P,ge("companyId","==",u)))).docs.map(g=>{const T=g.data();return{id:g.id,rate_type:String(T.rateType??T.rate_type??""),employee_rate:oy(T.employeeRate??T.employee_rate,0),employer_rate:oy(T.employerRate??T.employer_rate,0),cap_amount:az(T.capAmount??T.cap_amount),is_active:!!(T.isActive??T.is_active??!0)}}).filter(g=>g.is_active).map(({is_active:g,...T})=>T)},enabled:!!u});j.useEffect(()=>{o||h||m||(d&&d.length>0?r(d):r(vtt),f&&f.length>0?a(f):a(xtt),l(!0))},[o,h,m,d,f]);const v=qe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const P=Se(ae,ee.PAYE_TAX_BANDS),_=await Pe(Ce(P,ge("companyId","==",u))),g=Ql(ae);_.docs.forEach(T=>{g.set(T.ref,{isActive:!1,updatedAt:Ie()},{merge:!0})}),n.forEach((T,E)=>{const A=et(Se(ae,ee.PAYE_TAX_BANDS));g.set(A,{companyId:u,bandOrder:E+1,minAmount:Number(T.min_amount),maxAmount:T.max_amount===null?null:Number(T.max_amount),rate:Number(T.rate),isActive:!0,createdAt:Ie(),updatedAt:Ie()})}),await g.commit()},onSuccess:()=>{G.success("PAYE tax bands saved successfully"),e.invalidateQueries({queryKey:["paye-tax-bands",u]})},onError:P=>{G.error(P.message||"Failed to save tax bands")}}),p=qe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const P=Se(ae,ee.PAYROLL_STATUTORY_RATES),_=await Pe(Ce(P,ge("companyId","==",u))),g=Ql(ae);_.docs.forEach(T=>{g.set(T.ref,{isActive:!1,updatedAt:Ie()},{merge:!0})}),i.forEach(T=>{const E=et(Se(ae,ee.PAYROLL_STATUTORY_RATES));g.set(E,{companyId:u,rateType:T.rate_type,employeeRate:Number(T.employee_rate),employerRate:Number(T.employer_rate),capAmount:T.cap_amount===null?null:Number(T.cap_amount),isActive:!0,createdAt:Ie(),updatedAt:Ie()})}),await g.commit()},onSuccess:()=>{G.success("Statutory rates saved successfully"),e.invalidateQueries({queryKey:["statutory-rates",u]})},onError:P=>{G.error(P.message||"Failed to save statutory rates")}}),y=()=>{const P=n[n.length-1];r([...n,{band_order:n.length+1,min_amount:(P==null?void 0:P.max_amount)||0,max_amount:null,rate:0}])},b=P=>{r(n.filter((_,g)=>g!==P))},x=(P,_,g)=>{const T=[...n];T[P]={...T[P],[_]:g},r(T)},w=(P,_,g)=>{const T=[...i];T[P]={...T[P],[_]:g},a(T)},C=P=>{switch(P){case"napsa":return"NAPSA";case"nhima":return"NHIMA";case"pension":return"Pension";case"wht_local":return"WHT (Local Consultant)";case"wht_nonresident":return"WHT (Non-Resident)";default:return P}},S=c.isLoading||h||m;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure PAYE tax bands and statutory rates"})]}),s.jsx(Yw,{className:"h-8 w-8 text-muted-foreground"})]}),s.jsxs(Tb,{defaultValue:"paye",className:"space-y-4",children:[s.jsxs(xg,{children:[s.jsx(wi,{value:"paye",children:"PAYE Tax Bands"}),s.jsx(wi,{value:"statutory",children:"Statutory Rates"})]}),s.jsx(ji,{value:"paye",children:s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"PAYE Tax Bands (Monthly)"}),s.jsx(wt,{children:"Configure the progressive tax bands for Pay As You Earn calculations."})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Band"}),s.jsx(H,{children:"Min Amount (ZMW)"}),s.jsx(H,{children:"Max Amount (ZMW)"}),s.jsx(H,{children:"Rate (%)"}),s.jsx(H,{className:"w-16"})]})}),s.jsx(Dt,{children:n.map((P,_)=>s.jsxs(je,{children:[s.jsxs(F,{className:"font-medium",children:["Band ",_+1]}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.min_amount,onChange:g=>x(_,"min_amount",Number(g.target.value)),className:"w-32"})}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.max_amount??"",onChange:g=>x(_,"max_amount",g.target.value?Number(g.target.value):null),placeholder:"inf",className:"w-32"})}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.rate*100,onChange:g=>x(_,"rate",Number(g.target.value)/100),className:"w-24"})}),s.jsx(F,{children:s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>b(_),disabled:n.length<=1,children:s.jsx(Ms,{className:"h-4 w-4 text-destructive"})})})]},_))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(K,{variant:"outline",onClick:y,disabled:!u||S,children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Band"]}),s.jsxs(K,{onClick:()=>v.mutate(),disabled:v.isPending||!u||S,children:[s.jsx(bh,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Tax Bands"]})]})]})]})}),s.jsx(ji,{value:"statutory",children:s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Statutory Contribution Rates"}),s.jsx(wt,{children:"Configure NAPSA, NHIMA, Pension, and WHT rates."})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Contribution Type"}),s.jsx(H,{children:"Employee Rate (%)"}),s.jsx(H,{children:"Employer Rate (%)"}),s.jsx(H,{children:"Cap Amount (ZMW)"})]})}),s.jsx(Dt,{children:i.map((P,_)=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:C(P.rate_type)}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.employee_rate*100,onChange:g=>w(_,"employee_rate",Number(g.target.value)/100),className:"w-24"})}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.employer_rate*100,onChange:g=>w(_,"employer_rate",Number(g.target.value)/100),className:"w-24",disabled:P.rate_type.startsWith("wht")})}),s.jsx(F,{children:s.jsx(Y,{type:"number",step:"0.01",value:P.cap_amount??"",onChange:g=>w(_,"cap_amount",g.target.value?Number(g.target.value):null),placeholder:"No cap",className:"w-32"})})]},P.rate_type))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(K,{onClick:()=>p.mutate(),disabled:p.isPending||!u||S,children:[s.jsx(bh,{className:"h-4 w-4 mr-2"}),p.isPending?"Saving...":"Save Rates"]})})]})]})})]})]})}function oz({icon:t,title:e,description:n,actionLabel:r,onAction:i,className:a}){return s.jsxs("div",{className:_e("flex flex-col items-center justify-center py-12 px-4 text-center",a),children:[s.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:t||s.jsx(Zoe,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold",children:e}),n&&s.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),r&&i&&s.jsxs(K,{onClick:i,className:"mt-4",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),r]})]})}const wtt={name:"",sku:"",description:"",type:"product",category:"",unit_of_measure:"Unit",selling_price:0,cost_price:0,track_inventory:!1,quantity_on_hand:0,reorder_point:0,is_taxable:!0,tax_rate:16,is_active:!0},qA=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null};function jtt(){const{user:t}=dt(),{data:e}=$s(),n=e==="super_admin"||e==="admin",[r,i]=j.useState("catalog"),[a,o]=j.useState(""),[l,c]=j.useState("all"),[u,d]=j.useState(!1),[h,f]=j.useState(!1),[m,v]=j.useState(null),[p,y]=j.useState(null),b=Jt(),{data:x}=Ee({queryKey:["products-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const R=await ze.getPrimaryMembershipByUser(t.id);return(R==null?void 0:R.companyId)??null},enabled:!!t}),{data:w,isLoading:C}=Ee({queryKey:["products",x],queryFn:async()=>x?(await Pe(Ce(Se(ae,ee.PRODUCTS),ge("companyId","==",x)))).docs.map(W=>{const J=W.data();return{id:W.id,name:String(J.name??""),sku:J.sku??null,description:J.description??null,type:J.type??"product",category:J.category??null,unit_of_measure:J.unitOfMeasure??J.unit_of_measure??null,selling_price:Number(J.sellingPrice??J.selling_price??0),cost_price:Number(J.costPrice??J.cost_price??0),track_inventory:!!(J.trackInventory??J.track_inventory),quantity_on_hand:Number(J.quantityOnHand??J.quantity_on_hand??0),reorder_point:Number(J.reorderPoint??J.reorder_point??0),is_taxable:!!(J.isTaxable??J.is_taxable),tax_rate:Number(J.taxRate??J.tax_rate??16),is_active:J.isActive===void 0&&J.is_active===void 0?!0:!!(J.isActive??J.is_active),created_at:qA(J.createdAt??J.created_at)}}):[],enabled:!!x}),{data:S,isLoading:P}=Ee({queryKey:["priceLists",x],queryFn:async()=>x?(await Pe(Ce(Se(ae,ee.PRICE_LISTS),ge("companyId","==",x)))).docs.map(W=>{const J=W.data();return{id:W.id,name:String(J.name??""),description:J.description??null,currency:String(J.currency??"ZMW"),is_default:!!(J.isDefault??J.is_default),is_active:J.isActive===void 0&&J.is_active===void 0?!0:!!(J.isActive??J.is_active),valid_from:qA(J.validFrom??J.valid_from),valid_to:qA(J.validTo??J.valid_to)}}):[],enabled:!!x}),_=qe({mutationFn:async R=>{if(!x)throw new Error("No company found");const W={companyId:x,name:R.name||"",sku:R.sku||null,description:R.description||null,type:R.type||"product",category:R.category||null,unitOfMeasure:R.unit_of_measure||"Unit",sellingPrice:Number(R.selling_price||0),costPrice:Number(R.cost_price||0),trackInventory:!!R.track_inventory,quantityOnHand:Number(R.quantity_on_hand||0),reorderPoint:Number(R.reorder_point||0),isTaxable:!!R.is_taxable,taxRate:Number(R.tax_rate||16),isActive:R.is_active===void 0?!0:!!R.is_active,updatedAt:Ie()};R.id?await Gl(et(ae,ee.PRODUCTS,R.id),W):await es(Se(ae,ee.PRODUCTS),{...W,createdAt:Ie()})},onSuccess:()=>{b.invalidateQueries({queryKey:["products"]}),d(!1),v(null),G.success(m!=null&&m.id?"Product updated":"Product created")},onError:R=>{G.error("Failed to save product: "+R.message)}}),g=qe({mutationFn:async R=>{if(!n)throw new Error("Only Admin users can delete products.");await Yl(et(ae,ee.PRODUCTS,R))},onSuccess:()=>{b.invalidateQueries({queryKey:["products"]}),G.success("Product deleted")},onError:R=>{G.error("Failed to delete product: "+R.message)}}),T=qe({mutationFn:async R=>{if(!x)throw new Error("No company found");const W={companyId:x,name:R.name||"",description:R.description||null,currency:R.currency||"ZMW",isDefault:!!R.is_default,isActive:R.is_active===void 0?!0:!!R.is_active,validFrom:R.valid_from||null,validTo:R.valid_to||null,updatedAt:Ie()};R.id?await Gl(et(ae,ee.PRICE_LISTS,R.id),W):await es(Se(ae,ee.PRICE_LISTS),{...W,createdAt:Ie()})},onSuccess:()=>{b.invalidateQueries({queryKey:["priceLists"]}),f(!1),y(null),G.success(p!=null&&p.id?"Price list updated":"Price list created")},onError:R=>{G.error("Failed to save price list: "+R.message)}}),E=qe({mutationFn:async R=>{if(!n)throw new Error("Only Admin users can delete price lists.");await Yl(et(ae,ee.PRICE_LISTS,R))},onSuccess:()=>{b.invalidateQueries({queryKey:["priceLists"]}),G.success("Price list deleted")},onError:R=>{G.error("Failed to delete price list: "+R.message)}}),A=R=>{v(R),d(!0)},I=()=>{v({...wtt}),d(!0)},k=R=>{y(R),f(!0)},L=()=>{y({name:"",description:"",currency:"ZMW",is_default:!1,is_active:!0}),f(!0)},B=(w==null?void 0:w.filter(R=>R.type==="product").length)||0,U=(w==null?void 0:w.filter(R=>R.type==="service").length)||0,V=(w==null?void 0:w.filter(R=>R.track_inventory&&R.quantity_on_hand<=R.reorder_point).length)||0,D=(w||[]).filter(R=>{const W=`${R.name} ${R.sku||""}`.toLowerCase(),J=!a||W.includes(a.toLowerCase()),oe=l==="all"||R.type===l;return J&&oe});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products & Services"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog, inventory, and pricing"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Products"}),s.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:B})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Total Services"}),s.jsx(h4,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:U})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Low Stock Items"}),s.jsx(Foe,{className:"h-4 w-4 text-orange-500"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold text-orange-500",children:V})})]}),s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(re,{className:"text-sm font-medium",children:"Price Lists"}),s.jsx(d4,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:(S==null?void 0:S.length)||0})})]})]}),s.jsxs(Tb,{value:r,onValueChange:i,children:[s.jsxs(xg,{children:[s.jsx(wi,{value:"catalog",children:"Product Catalog"}),s.jsx(wi,{value:"pricing",children:"Price Lists"}),s.jsx(wi,{value:"inventory",children:"Inventory"})]}),s.jsxs(ji,{value:"catalog",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Y,{placeholder:"Search products...",value:a,onChange:R=>o(R.target.value),className:"pl-10"})]}),s.jsxs(gt,{value:l,onValueChange:c,children:[s.jsx(mt,{className:"w-[150px]",children:s.jsx(yt,{placeholder:"Filter by type"})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"all",children:"All Types"}),s.jsx(ye,{value:"product",children:"Products"}),s.jsx(ye,{value:"service",children:"Services"})]})]})]}),s.jsxs(K,{onClick:I,children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Product/Service"]})]}),C?s.jsx(mm,{message:"Loading products..."}):D.length?s.jsx(Z,{children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Name"}),s.jsx(H,{children:"SKU"}),s.jsx(H,{children:"Type"}),s.jsx(H,{children:"Category"}),s.jsx(H,{className:"text-right",children:"Selling Price"}),s.jsx(H,{className:"text-right",children:"Cost Price"}),s.jsx(H,{className:"text-right",children:"Stock"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsx(Dt,{children:D.map(R=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:R.name}),s.jsx(F,{children:R.sku||"-"}),s.jsx(F,{children:s.jsxs(De,{variant:R.type==="product"?"default":"secondary",children:[R.type==="product"?s.jsx(la,{className:"h-3 w-3 mr-1"}):s.jsx(h4,{className:"h-3 w-3 mr-1"}),R.type]})}),s.jsx(F,{children:R.category||"-"}),s.jsxs(F,{className:"text-right",children:["K",R.selling_price.toLocaleString()]}),s.jsxs(F,{className:"text-right",children:["K",R.cost_price.toLocaleString()]}),s.jsx(F,{className:"text-right",children:R.track_inventory?s.jsx("span",{className:R.quantity_on_hand<=R.reorder_point?"text-orange-500 font-medium":"",children:R.quantity_on_hand}):"-"}),s.jsx(F,{children:s.jsx(De,{variant:R.is_active?"default":"secondary",children:R.is_active?"Active":"Inactive"})}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>A(R),children:s.jsx(u4,{className:"h-4 w-4"})}),n&&s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>g.mutate(R.id),children:s.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})})]},R.id))})]})}):s.jsx(oz,{icon:s.jsx(la,{className:"h-8 w-8 text-muted-foreground"}),title:"No products or services",description:"Add your first product or service to get started",actionLabel:"Add Product/Service",onAction:I})]}),s.jsxs(ji,{value:"pricing",className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-end",children:s.jsxs(K,{onClick:L,children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Create Price List"]})}),P?s.jsx(mm,{message:"Loading price lists..."}):S!=null&&S.length?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(R=>s.jsxs(Z,{children:[s.jsxs(ne,{className:"flex flex-row items-start justify-between space-y-0",children:[s.jsxs("div",{children:[s.jsx(re,{className:"text-lg",children:R.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:R.description||"No description"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[R.is_default&&s.jsx(De,{variant:"secondary",children:"Default"}),s.jsx(De,{variant:R.is_active?"default":"secondary",children:R.is_active?"Active":"Inactive"})]})]}),s.jsxs(se,{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[s.jsxs("span",{children:["Currency: ",R.currency]}),R.valid_from&&s.jsxs("span",{children:["Valid: ",new Date(R.valid_from).toLocaleDateString(),R.valid_to&&` - ${new Date(R.valid_to).toLocaleDateString()}`]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>k(R),children:[s.jsx(u4,{className:"h-4 w-4 mr-2"}),"Edit"]}),n&&s.jsx(K,{variant:"outline",size:"sm",onClick:()=>E.mutate(R.id),children:s.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})]})]},R.id))}):s.jsx(oz,{icon:s.jsx(d4,{className:"h-8 w-8 text-muted-foreground"}),title:"No price lists",description:"Create price lists to offer different pricing tiers",actionLabel:"Create Price List",onAction:L})]}),s.jsx(ji,{value:"inventory",className:"space-y-4",children:s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsxs(re,{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-5 w-5"}),"Inventory Tracking"]})}),s.jsx(se,{children:C?s.jsx(mm,{message:"Loading inventory..."}):s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Product"}),s.jsx(H,{children:"SKU"}),s.jsx(H,{className:"text-right",children:"On Hand"}),s.jsx(H,{className:"text-right",children:"Reorder Point"}),s.jsx(H,{className:"text-right",children:"Unit Cost"}),s.jsx(H,{className:"text-right",children:"Total Value"}),s.jsx(H,{children:"Status"})]})}),s.jsxs(Dt,{children:[w==null?void 0:w.filter(R=>R.track_inventory).map(R=>{const W=R.quantity_on_hand<=R.reorder_point,J=R.quantity_on_hand*R.cost_price;return s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:R.name}),s.jsx(F,{children:R.sku||"-"}),s.jsx(F,{className:"text-right",children:s.jsx("span",{className:W?"text-orange-500 font-medium":"",children:R.quantity_on_hand})}),s.jsx(F,{className:"text-right",children:R.reorder_point}),s.jsxs(F,{className:"text-right",children:["K",R.cost_price.toLocaleString()]}),s.jsxs(F,{className:"text-right font-medium",children:["K",J.toLocaleString()]}),s.jsx(F,{children:s.jsx(De,{variant:W?"destructive":"default",className:W?"bg-orange-500":"",children:W?"Low Stock":"In Stock"})})]},R.id)}),!(w!=null&&w.filter(R=>R.track_inventory).length)&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No products with inventory tracking enabled"})})]})]})})]})})]}),s.jsx(Jn,{open:u,onOpenChange:d,children:s.jsxs(Kn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Gn,{children:s.jsxs(Yn,{children:[m!=null&&m.id?"Edit":"New"," Product/Service"]})}),m&&s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"name",children:"Name *"}),s.jsx(Y,{id:"name",value:m.name||"",onChange:R=>v({...m,name:R.target.value}),placeholder:"Product name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"sku",children:"SKU"}),s.jsx(Y,{id:"sku",value:m.sku||"",onChange:R=>v({...m,sku:R.target.value}),placeholder:"Stock keeping unit"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"type",children:"Type"}),s.jsxs(gt,{value:m.type,onValueChange:R=>v({...m,type:R}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"product",children:"Product"}),s.jsx(ye,{value:"service",children:"Service"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"category",children:"Category"}),s.jsx(Y,{id:"category",value:m.category||"",onChange:R=>v({...m,category:R.target.value}),placeholder:"Category"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"description",children:"Description"}),s.jsx(Pn,{id:"description",value:m.description||"",onChange:R=>v({...m,description:R.target.value}),placeholder:"Product description",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"selling_price",children:"Selling Price (K)"}),s.jsx(Y,{id:"selling_price",type:"number",value:m.selling_price||0,onChange:R=>v({...m,selling_price:parseFloat(R.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"cost_price",children:"Cost Price (K)"}),s.jsx(Y,{id:"cost_price",type:"number",value:m.cost_price||0,onChange:R=>v({...m,cost_price:parseFloat(R.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"unit_of_measure",children:"Unit of Measure"}),s.jsx(Y,{id:"unit_of_measure",value:m.unit_of_measure||"Unit",onChange:R=>v({...m,unit_of_measure:R.target.value})})]})]}),m.type==="product"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(us,{id:"track_inventory",checked:m.track_inventory||!1,onCheckedChange:R=>v({...m,track_inventory:R})}),s.jsx(X,{htmlFor:"track_inventory",children:"Track Inventory"})]}),m.track_inventory&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"quantity_on_hand",children:"Quantity on Hand"}),s.jsx(Y,{id:"quantity_on_hand",type:"number",value:m.quantity_on_hand||0,onChange:R=>v({...m,quantity_on_hand:parseFloat(R.target.value)||0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"reorder_point",children:"Reorder Point"}),s.jsx(Y,{id:"reorder_point",type:"number",value:m.reorder_point||0,onChange:R=>v({...m,reorder_point:parseFloat(R.target.value)||0})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(us,{id:"is_taxable",checked:m.is_taxable||!1,onCheckedChange:R=>v({...m,is_taxable:R})}),s.jsx(X,{htmlFor:"is_taxable",children:"Taxable (VAT)"})]}),m.is_taxable&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),s.jsx(Y,{id:"tax_rate",type:"number",value:m.tax_rate||16,onChange:R=>v({...m,tax_rate:parseFloat(R.target.value)||16})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(us,{id:"is_active",checked:m.is_active||!1,onCheckedChange:R=>v({...m,is_active:R})}),s.jsx(X,{htmlFor:"is_active",children:"Active"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>_.mutate(m),disabled:!m.name||_.isPending,children:_.isPending?"Saving...":"Save"})]})]})]})}),s.jsx(Jn,{open:h,onOpenChange:f,children:s.jsxs(Kn,{children:[s.jsx(Gn,{children:s.jsxs(Yn,{children:[p!=null&&p.id?"Edit":"New"," Price List"]})}),p&&s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"pl_name",children:"Name *"}),s.jsx(Y,{id:"pl_name",value:p.name||"",onChange:R=>y({...p,name:R.target.value}),placeholder:"Price list name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"pl_description",children:"Description"}),s.jsx(Pn,{id:"pl_description",value:p.description||"",onChange:R=>y({...p,description:R.target.value}),placeholder:"Description",rows:2})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"pl_currency",children:"Currency"}),s.jsxs(gt,{value:p.currency||"ZMW",onValueChange:R=>y({...p,currency:R}),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"ZMW",children:"ZMW"}),s.jsx(ye,{value:"USD",children:"USD"}),s.jsx(ye,{value:"EUR",children:"EUR"}),s.jsx(ye,{value:"GBP",children:"GBP"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[s.jsx(us,{id:"pl_is_default",checked:p.is_default||!1,onCheckedChange:R=>y({...p,is_default:R})}),s.jsx(X,{htmlFor:"pl_is_default",children:"Default Price List"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"pl_valid_from",children:"Valid From"}),s.jsx(Y,{id:"pl_valid_from",type:"date",value:p.valid_from||"",onChange:R=>y({...p,valid_from:R.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"pl_valid_to",children:"Valid To"}),s.jsx(Y,{id:"pl_valid_to",type:"date",value:p.valid_to||"",onChange:R=>y({...p,valid_to:R.target.value})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(us,{id:"pl_is_active",checked:p.is_active||!1,onCheckedChange:R=>y({...p,is_active:R})}),s.jsx(X,{htmlFor:"pl_is_active",children:"Active"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(K,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(K,{onClick:()=>T.mutate(p),disabled:!p.name||T.isPending,children:T.isPending?"Saving...":"Save"})]})]})]})})]})}function _tt(){const{user:t}=dt(),e=Fn(),n=Jt(),[r,i]=j.useState(1),[a,o]=j.useState(new Date().toISOString().split("T")[0]),[l,c]=j.useState([]),[u,d]=j.useState(""),[h,f]=j.useState(""),{data:m=[],isLoading:v}=Ee({queryKey:["chart-of-accounts-opening",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const I=await ze.getPrimaryMembershipByUser(t.id);if(!(I!=null&&I.companyId))return[];const k=Se(ae,ee.CHART_OF_ACCOUNTS);return(await Pe(Ce(k,ge("companyId","==",I.companyId),ge("status","==","active")))).docs.map(B=>{const U=B.data();return{id:B.id,accountCode:String(U.accountCode||""),accountName:String(U.accountName||""),accountType:String(U.accountType||"")}}).sort((B,U)=>B.accountCode.localeCompare(U.accountCode))},enabled:!!t}),{data:p}=Ee({queryKey:["opening-balances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const I=await ze.getPrimaryMembershipByUser(t.id);return(I==null?void 0:I.companyId)??null},enabled:!!t}),y=qe({mutationFn:async I=>jn.postJournalEntry(I),onSuccess:()=>{G.success("Opening balances posted successfully!"),n.invalidateQueries({queryKey:["journal-entries"]}),e("/chart-of-accounts")},onError:I=>{const k=I instanceof Error?I.message:"Failed to post opening balances";G.error(k)}}),b=()=>{if(!u||!h||parseFloat(h)===0)return;if(l.find(k=>k.accountId===u)){G.error("This account already has an opening balance");return}c([...l,{accountId:u,balance:parseFloat(h)}]),d(""),f("")},x=I=>{c(l.filter(k=>k.accountId!==I))},w=(I,k)=>{c(l.map(L=>L.accountId===I?{...L,balance:k}:L))},C=I=>{var k;return((k=m.find(L=>L.id===I))==null?void 0:k.accountType)||""},S=l.filter(I=>C(I.accountId)==="Asset").reduce((I,k)=>I+k.balance,0),P=l.filter(I=>C(I.accountId)==="Liability").reduce((I,k)=>I+k.balance,0),_=l.filter(I=>C(I.accountId)==="Equity").reduce((I,k)=>I+k.balance,0),g=S-(P+_),T=Math.abs(g)<.01,E=()=>{if(!p){G.error("No company context found.");return}if(!T&&!window.confirm(`The accounting equation is not balanced. A journal entry of ${de(Math.abs(g))} will be auto-posted to Retained Earnings to balance the books. Continue?`))return;const I=l.map(k=>{const L=C(k.accountId),B=m.find(U=>U.id===k.accountId);return L==="Asset"||L==="Expense"?{accountId:k.accountId,debit:Math.abs(k.balance),credit:0,description:`Opening balance for ${B==null?void 0:B.accountName}`}:{accountId:k.accountId,debit:0,credit:Math.abs(k.balance),description:`Opening balance for ${B==null?void 0:B.accountName}`}});if(!T){const k=m.find(L=>L.accountName.toLowerCase().includes("retained earnings")||L.accountCode==="3010");if(k)I.push({accountId:k.id,debit:g<0?Math.abs(g):0,credit:g>0?Math.abs(g):0,description:"Auto-balancing entry for opening balances"});else{G.error("Retained Earnings account is required to auto-balance opening entries.");return}}y.mutate({companyId:p,entryDate:a,description:"Opening balances",referenceType:"OpeningBalance",sourceType:"opening_balance",lines:I})},A=r/3*100;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Opening Balances"}),s.jsx("p",{className:"text-muted-foreground",children:"Enter your initial account balances when migrating from another system"})]})}),s.jsx(Tu,{value:A,className:"h-2"}),r===1&&s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Step 1: Entry Date"}),s.jsx(wt,{children:"Select the date for your opening balances. This is typically your go-live date or the start of your fiscal year."})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{htmlFor:"entry-date",children:"Opening Balance Date *"}),s.jsx(Y,{id:"entry-date",type:"date",value:a,onChange:I=>o(I.target.value)})]}),s.jsxs(Hu,{children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsx(Ku,{children:"All opening balances will be posted with this date. Make sure this date is before any other transactions in your system."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(K,{onClick:()=>i(2),className:"gap-2",children:["Next: Enter Balances",s.jsx(BT,{className:"h-4 w-4"})]})})]})]}),r===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Step 2: Enter Account Balances"}),s.jsx(wt,{children:"Add opening balances for each account. Enter positive values for all balance types."})]}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 space-y-2",children:[s.jsx(X,{children:"Account"}),s.jsxs(gt,{value:u,onValueChange:d,children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select account"})}),s.jsx(pt,{children:m.map(I=>s.jsxs(ye,{value:I.id,children:[I.accountCode," - ",I.accountName," (",I.accountType,")"]},I.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Balance"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{type:"number",step:"0.01",placeholder:"0.00",value:h,onChange:I=>f(I.target.value)}),s.jsx(K,{onClick:b,type:"button",children:"Add"})]})]})]}),l.length>0&&s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Account"}),s.jsx(H,{children:"Type"}),s.jsx(H,{className:"text-right",children:"Balance"}),s.jsx(H,{className:"w-[50px]"})]})}),s.jsx(Dt,{children:l.map(I=>{const k=m.find(L=>L.id===I.accountId);return s.jsxs(je,{children:[s.jsxs(F,{children:[k==null?void 0:k.accountCode," - ",k==null?void 0:k.accountName]}),s.jsx(F,{children:k==null?void 0:k.accountType}),s.jsx(F,{className:"text-right",children:s.jsx(Y,{type:"number",step:"0.01",className:"text-right w-32 ml-auto",value:I.balance,onChange:L=>w(I.accountId,parseFloat(L.target.value)||0)})}),s.jsx(F,{children:s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>x(I.accountId),children:"x"})})]},I.accountId)})})]})})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(K,{variant:"outline",onClick:()=>i(1),className:"gap-2",children:[s.jsx(ya,{className:"h-4 w-4"}),"Back"]}),s.jsxs(K,{onClick:()=>i(3),disabled:l.length===0,className:"gap-2",children:["Next: Review",s.jsx(BT,{className:"h-4 w-4"})]})]})]}),r===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsxs(ne,{children:[s.jsx(re,{children:"Step 3: Review & Post"}),s.jsx(wt,{children:"Review your opening balances and verify the accounting equation"})]}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Assets"}),s.jsx(re,{className:"text-2xl",children:de(S)})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Liabilities"}),s.jsx(re,{className:"text-2xl",children:de(P)})]})}),s.jsx(Z,{children:s.jsxs(ne,{className:"pb-2",children:[s.jsx(wt,{children:"Total Equity"}),s.jsx(re,{className:"text-2xl",children:de(_)})]})})]}),s.jsx("div",{className:`p-4 rounded-lg border-2 ${T?"bg-green-50 border-green-500":"bg-amber-50 border-amber-500"}`,children:T?s.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[s.jsx(Gw,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Equation is balanced!"}),s.jsx("div",{className:"text-sm",children:"Assets = Liabilities + Equity"})]})]}):s.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[s.jsx(ks,{className:"h-5 w-5 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Equation is not balanced"}),s.jsxs("div",{className:"text-sm",children:["Difference: ",de(Math.abs(g))]}),s.jsx("div",{className:"text-sm mt-1",children:"This will be automatically balanced to Retained Earnings when posted."})]})]})}),s.jsxs(Hu,{children:[s.jsx(ks,{className:"h-4 w-4"}),s.jsxs(Ku,{children:["Once posted, these opening balances will create a journal entry dated ",a,". Make sure this is correct before proceeding."]})]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(K,{variant:"outline",onClick:()=>i(2),className:"gap-2",children:[s.jsx(ya,{className:"h-4 w-4"}),"Back"]}),s.jsx(K,{onClick:E,disabled:y.isPending||l.length===0,children:y.isPending?"Posting...":"Post Opening Balances"})]})]})]})}const Ntt=new Set(["super_admin","admin","hr_manager","financial_manager","accountant"]),Ra=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},V0=t=>{const e=String(t||"").toLowerCase();return["approved","present","active","resolved"].includes(e)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":["pending"].includes(e)?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":["rejected","cancelled","terminated"].includes(e)?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":["suspension","suspended"].includes(e)?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-slate-100 text-slate-800 dark:bg-slate-900 dark:text-slate-200"};function Stt(){const{user:t}=dt(),{data:e}=$s(),n=Jt(),r=Ntt.has(String(e||"")),[i,a]=j.useState({employeeId:"self",leaveTypeId:"",startDate:new Date().toISOString().slice(0,10),endDate:new Date().toISOString().slice(0,10),reason:""}),[o,l]=j.useState({employeeId:"",leaveTypeId:"",year:new Date().getFullYear(),entitledDays:0,carriedForwardDays:0,accruedDays:0,usedDays:0,note:""}),[c,u]=j.useState({employeeId:"self",attendanceDate:new Date().toISOString().slice(0,10),status:"present",totalHours:8,overtimeHours:0,notes:""}),[d,h]=j.useState({employeeId:"",actionType:"warning",severity:"medium",incidentDate:new Date().toISOString().slice(0,10),reason:"",description:""}),{data:f}=Ee({queryKey:["hr-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const D=await ze.getPrimaryMembershipByUser(t.id);return(D==null?void 0:D.companyId)??null},enabled:!!t}),{data:m=[]}=Ee({queryKey:["hr-employees",f],queryFn:async()=>f?(await Pe(Ce(Se(ae,ee.EMPLOYEES),ge("companyId","==",f)))).docs.map(R=>{const W=R.data();return{id:R.id,fullName:String(W.fullName??W.full_name??"Employee"),userId:W.userId??W.user_id??null,status:String(W.employmentStatus??W.employment_status??"active")}}).sort((R,W)=>R.fullName.localeCompare(W.fullName)):[],enabled:!!f}),v=j.useMemo(()=>{const D=new Map;return m.forEach(R=>D.set(R.id,R)),D},[m]),p=j.useMemo(()=>t?m.find(D=>D.userId===t.id)??null:null,[m,t]),{data:y=[]}=Ee({queryKey:["hr-leave-types",f],queryFn:async()=>f?(await Pe(Ce(Se(ae,ee.LEAVE_TYPES),ge("companyId","==",f)))).docs.map(R=>{const W=R.data();return{id:R.id,name:String(W.name??""),code:String(W.code??""),defaultDays:Ra(W.defaultDaysPerYear??W.default_days_per_year,0),isActive:!!(W.isActive??W.is_active??!0)}}).sort((R,W)=>R.name.localeCompare(W.name)):[],enabled:!!f}),b=j.useMemo(()=>{const D=new Map;return y.forEach(R=>D.set(R.id,R)),D},[y]),{data:x=[]}=Ee({queryKey:["hr-leave-requests",f,m,y],queryFn:async()=>f?(await Pe(Ce(Se(ae,ee.LEAVE_REQUESTS),ge("companyId","==",f)))).docs.map(R=>{var Ae,z;const W=R.data(),J=String(W.employeeId??W.employee_id??""),oe=String(W.leaveTypeId??W.leave_type_id??"");return{id:R.id,employeeId:J,employeeName:((Ae=v.get(J))==null?void 0:Ae.fullName)??J,leaveTypeId:oe,leaveTypeName:((z=b.get(oe))==null?void 0:z.name)??oe,startDate:String(W.startDate??W.start_date??""),endDate:String(W.endDate??W.end_date??""),totalDays:Ra(W.totalDays??W.total_days??0),reason:String(W.reason??""),status:String(W.status??"pending"),requestedBy:W.requestedBy??W.requested_by??null}}).sort((R,W)=>W.startDate.localeCompare(R.startDate)):[],enabled:!!f}),{data:w=[]}=Ee({queryKey:["hr-attendance-records",f,m],queryFn:async()=>f?(await Pe(Ce(Se(ae,ee.ATTENDANCE_RECORDS),ge("companyId","==",f)))).docs.map(R=>{var oe;const W=R.data(),J=String(W.employeeId??W.employee_id??"");return{id:R.id,employeeId:J,employeeName:((oe=v.get(J))==null?void 0:oe.fullName)??J,attendanceDate:String(W.attendanceDate??W.attendance_date??""),status:String(W.status??"present"),totalHours:Ra(W.totalHours??W.total_hours,0),overtimeHours:Ra(W.overtimeHours??W.overtime_hours,0),isManual:!!(W.isManual??W.is_manual??!1)}}).sort((R,W)=>W.attendanceDate.localeCompare(R.attendanceDate)):[],enabled:!!f}),{data:C=[]}=Ee({queryKey:["hr-disciplinary-records",f,m],queryFn:async()=>f?(await Pe(Ce(Se(ae,ee.DISCIPLINARY_RECORDS),ge("companyId","==",f)))).docs.map(R=>{var oe;const W=R.data(),J=String(W.employeeId??W.employee_id??"");return{id:R.id,employeeId:J,employeeName:((oe=v.get(J))==null?void 0:oe.fullName)??J,actionType:String(W.actionType??W.action_type??""),severity:String(W.severity??"medium"),incidentDate:String(W.incidentDate??W.incident_date??""),reason:String(W.reason??""),status:String(W.status??"active")}}).sort((R,W)=>W.incidentDate.localeCompare(R.incidentDate)):[],enabled:!!f}),S=qe({mutationFn:async()=>{if(!f)throw new Error("No active company context");return Nc.seedDefaultLeaveTypes({companyId:f})},onSuccess:()=>{G.success("Default leave types seeded."),n.invalidateQueries({queryKey:["hr-leave-types",f]})},onError:D=>G.error(D.message)}),P=qe({mutationFn:async()=>{if(!f)throw new Error("No active company context");if(!i.leaveTypeId)throw new Error("Leave type is required.");if(!i.reason.trim())throw new Error("Reason is required.");const D={companyId:f,leaveTypeId:i.leaveTypeId,startDate:i.startDate,endDate:i.endDate,reason:i.reason.trim()};return r&&i.employeeId&&i.employeeId!=="self"&&(D.employeeId=i.employeeId),Nc.submitLeaveRequest(D)},onSuccess:()=>{G.success("Leave request submitted."),a(D=>({...D,leaveTypeId:"",startDate:new Date().toISOString().slice(0,10),endDate:new Date().toISOString().slice(0,10),reason:""})),n.invalidateQueries({queryKey:["hr-leave-requests",f]})},onError:D=>G.error(D.message)}),_=qe({mutationFn:async({leaveRequestId:D,action:R})=>{if(!f)throw new Error("No active company context");return Nc.reviewLeaveRequest({companyId:f,leaveRequestId:D,action:R})},onSuccess:(D,R)=>{G.success(`Leave request ${R.action}d.`),n.invalidateQueries({queryKey:["hr-leave-requests",f]})},onError:D=>G.error(D.message)}),g=qe({mutationFn:async()=>{if(!f)throw new Error("No active company context");if(!o.employeeId||!o.leaveTypeId)throw new Error("Employee and leave type are required.");return Nc.setLeaveBalance({companyId:f,employeeId:o.employeeId,leaveTypeId:o.leaveTypeId,year:o.year,entitledDays:o.entitledDays,carriedForwardDays:o.carriedForwardDays,accruedDays:o.accruedDays,usedDays:o.usedDays,note:o.note||void 0})},onSuccess:()=>G.success("Leave balance saved."),onError:D=>G.error(D.message)}),T=qe({mutationFn:async D=>{if(!f)throw new Error("No active company context");const R={companyId:f,action:D};return r&&c.employeeId&&c.employeeId!=="self"&&(R.employeeId=c.employeeId),Nc.clockAttendance(R)},onSuccess:(D,R)=>{G.success(R==="clock_in"?"Clock-in recorded.":"Clock-out recorded."),n.invalidateQueries({queryKey:["hr-attendance-records",f]})},onError:D=>G.error(D.message)}),E=qe({mutationFn:async()=>{if(!f)throw new Error("No active company context");if(!r)throw new Error("Only HR managers can adjust attendance.");if(!c.employeeId||c.employeeId==="self")throw new Error("Employee is required for manual adjustment.");return Nc.adjustAttendance({companyId:f,employeeId:c.employeeId,attendanceDate:c.attendanceDate,status:c.status,totalHours:c.totalHours,overtimeHours:c.overtimeHours,notes:c.notes||void 0})},onSuccess:()=>{G.success("Attendance adjusted."),n.invalidateQueries({queryKey:["hr-attendance-records",f]})},onError:D=>G.error(D.message)}),A=qe({mutationFn:async()=>{if(!f)throw new Error("No active company context");if(!d.employeeId||!d.reason.trim())throw new Error("Employee and reason are required.");return Nc.logDisciplinaryRecord({companyId:f,employeeId:d.employeeId,actionType:d.actionType,severity:d.severity,incidentDate:d.incidentDate,effectiveFrom:d.incidentDate,reason:d.reason.trim(),description:d.description.trim()||void 0})},onSuccess:()=>{G.success("Disciplinary record logged."),h({employeeId:"",actionType:"warning",severity:"medium",incidentDate:new Date().toISOString().slice(0,10),reason:"",description:""}),n.invalidateQueries({queryKey:["hr-disciplinary-records",f]}),n.invalidateQueries({queryKey:["hr-employees",f]})},onError:D=>G.error(D.message)}),I=qe({mutationFn:async({recordId:D,resolutionStatus:R})=>{if(!f)throw new Error("No active company context");return Nc.resolveDisciplinaryRecord({companyId:f,recordId:D,resolutionStatus:R})},onSuccess:(D,R)=>{G.success(`Record ${R.resolutionStatus}.`),n.invalidateQueries({queryKey:["hr-disciplinary-records",f]}),n.invalidateQueries({queryKey:["hr-employees",f]})},onError:D=>G.error(D.message)}),k=x.filter(D=>D.status.toLowerCase()==="pending").length,L=C.filter(D=>D.status.toLowerCase()==="active").length,B=new Date().toISOString().slice(0,10),U=w.filter(D=>D.attendanceDate===B).length,V=D=>r?!0:D.requestedBy===(t==null?void 0:t.id);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR Operations"}),s.jsx("p",{className:"text-muted-foreground",children:"Leave, attendance, and disciplinary workflows."})]}),r&&s.jsx(K,{variant:"outline",onClick:()=>S.mutate(),disabled:S.isPending,children:"Seed Default Leave Types"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Employees"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Pending Leave"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:k})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Attendance Today"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:U})})]}),s.jsxs(Z,{children:[s.jsx(ne,{className:"pb-2",children:s.jsx(re,{className:"text-sm font-medium",children:"Active Discipline"})}),s.jsx(se,{children:s.jsx("div",{className:"text-2xl font-bold",children:L})})]})]}),s.jsxs(Tb,{defaultValue:"leave",className:"space-y-4",children:[s.jsxs(xg,{className:"grid w-full grid-cols-3 md:w-[520px]",children:[s.jsx(wi,{value:"leave",children:"Leave"}),s.jsx(wi,{value:"attendance",children:"Attendance"}),s.jsx(wi,{value:"disciplinary",children:"Disciplinary"})]}),s.jsx(ji,{value:"leave",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Leave Types"})}),s.jsx(se,{children:s.jsx("div",{className:"max-h-[380px] overflow-auto rounded-md border",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Name"}),s.jsx(H,{children:"Code"}),s.jsx(H,{className:"text-right",children:"Days"}),s.jsx(H,{children:"Status"})]})}),s.jsxs(Dt,{children:[y.map(D=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:D.name}),s.jsx(F,{children:D.code}),s.jsx(F,{className:"text-right",children:D.defaultDays}),s.jsx(F,{children:s.jsx(De,{className:V0(D.isActive?"active":"inactive"),children:D.isActive?"Active":"Inactive"})})]},D.id)),y.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:4,className:"py-8 text-center text-muted-foreground",children:"No leave types found."})})]})]})})})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Leave Requests"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 rounded-md border p-3",children:[r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Employee"}),s.jsxs(gt,{value:i.employeeId,onValueChange:D=>a(R=>({...R,employeeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Self or select employee"})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"self",children:"Self"}),m.map(D=>s.jsx(ye,{value:D.id,children:D.fullName},D.id))]})]})]}),!r&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requesting as: ",(p==null?void 0:p.fullName)||"linked employee profile"]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Leave Type"}),s.jsxs(gt,{value:i.leaveTypeId,onValueChange:D=>a(R=>({...R,leaveTypeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select leave type"})}),s.jsx(pt,{children:y.filter(D=>D.isActive).map(D=>s.jsx(ye,{value:D.id,children:D.name},D.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Start Date"}),s.jsx(Y,{type:"date",value:i.startDate,onChange:D=>a(R=>({...R,startDate:D.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"End Date"}),s.jsx(Y,{type:"date",value:i.endDate,onChange:D=>a(R=>({...R,endDate:D.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Reason"}),s.jsx(Pn,{value:i.reason,onChange:D=>a(R=>({...R,reason:D.target.value})),placeholder:"Reason for leave"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{onClick:()=>P.mutate(),disabled:P.isPending,children:"Submit Leave Request"})})]}),r&&s.jsxs("div",{className:"space-y-3 rounded-md border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Set Leave Balance"}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Employee"}),s.jsxs(gt,{value:o.employeeId,onValueChange:D=>l(R=>({...R,employeeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select employee"})}),s.jsx(pt,{children:m.map(D=>s.jsx(ye,{value:D.id,children:D.fullName},D.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Leave Type"}),s.jsxs(gt,{value:o.leaveTypeId,onValueChange:D=>l(R=>({...R,leaveTypeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select leave type"})}),s.jsx(pt,{children:y.map(D=>s.jsx(ye,{value:D.id,children:D.name},D.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Year"}),s.jsx(Y,{type:"number",value:o.year,onChange:D=>l(R=>({...R,year:Ra(D.target.value,new Date().getFullYear())}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Entitled"}),s.jsx(Y,{type:"number",value:o.entitledDays,onChange:D=>l(R=>({...R,entitledDays:Ra(D.target.value,0)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Carry Forward"}),s.jsx(Y,{type:"number",value:o.carriedForwardDays,onChange:D=>l(R=>({...R,carriedForwardDays:Ra(D.target.value,0)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Accrued"}),s.jsx(Y,{type:"number",value:o.accruedDays,onChange:D=>l(R=>({...R,accruedDays:Ra(D.target.value,0)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Used"}),s.jsx(Y,{type:"number",value:o.usedDays,onChange:D=>l(R=>({...R,usedDays:Ra(D.target.value,0)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Note"}),s.jsx(Y,{value:o.note,onChange:D=>l(R=>({...R,note:D.target.value})),placeholder:"Optional"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{onClick:()=>g.mutate(),disabled:g.isPending,children:"Save Leave Balance"})})]}),s.jsx("div",{className:"max-h-[300px] overflow-auto rounded-md border",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"Type"}),s.jsx(H,{children:"Period"}),s.jsx(H,{className:"text-right",children:"Days"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[x.map(D=>s.jsxs(je,{children:[s.jsx(F,{className:"font-medium",children:D.employeeName}),s.jsx(F,{children:D.leaveTypeName}),s.jsxs(F,{children:[D.startDate," to ",D.endDate]}),s.jsx(F,{className:"text-right",children:D.totalDays}),s.jsx(F,{children:s.jsx(De,{className:V0(D.status),children:D.status})}),s.jsxs(F,{className:"text-right",children:[D.status.toLowerCase()==="pending"&&r&&s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{size:"sm",variant:"outline",onClick:()=>_.mutate({leaveRequestId:D.id,action:"approve"}),children:"Approve"}),s.jsx(K,{size:"sm",variant:"destructive",onClick:()=>_.mutate({leaveRequestId:D.id,action:"reject"}),children:"Reject"})]}),D.status.toLowerCase()==="pending"&&!r&&V(D)&&s.jsx(K,{size:"sm",variant:"outline",onClick:()=>_.mutate({leaveRequestId:D.id,action:"cancel"}),children:"Cancel"})]})]},D.id)),x.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No leave requests found."})})]})]})})]})]})]})}),s.jsx(ji,{value:"attendance",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Attendance Actions"})}),s.jsxs(se,{className:"space-y-4",children:[r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Employee"}),s.jsxs(gt,{value:c.employeeId,onValueChange:D=>u(R=>({...R,employeeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Self or employee"})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"self",children:"Self"}),m.map(D=>s.jsx(ye,{value:D.id,children:D.fullName},D.id))]})]})]}),!r&&!p&&s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"No employee profile is linked to your user."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(K,{onClick:()=>T.mutate("clock_in"),disabled:T.isPending||!r&&!p,children:"Clock In"}),s.jsx(K,{variant:"outline",onClick:()=>T.mutate("clock_out"),disabled:T.isPending||!r&&!p,children:"Clock Out"})]}),r&&s.jsxs("div",{className:"space-y-3 rounded-md border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Manual Attendance Adjustment"}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Date"}),s.jsx(Y,{type:"date",value:c.attendanceDate,onChange:D=>u(R=>({...R,attendanceDate:D.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Status"}),s.jsxs(gt,{value:c.status,onValueChange:D=>u(R=>({...R,status:D})),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"present",children:"Present"}),s.jsx(ye,{value:"absent",children:"Absent"}),s.jsx(ye,{value:"leave",children:"Leave"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Total Hours"}),s.jsx(Y,{type:"number",value:c.totalHours,onChange:D=>u(R=>({...R,totalHours:Ra(D.target.value,0)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Overtime Hours"}),s.jsx(Y,{type:"number",value:c.overtimeHours,onChange:D=>u(R=>({...R,overtimeHours:Ra(D.target.value,0)}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Notes"}),s.jsx(Y,{value:c.notes,onChange:D=>u(R=>({...R,notes:D.target.value})),placeholder:"Manual adjustment note"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{onClick:()=>E.mutate(),disabled:E.isPending,children:"Save Adjustment"})})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Attendance Records"})}),s.jsx(se,{children:s.jsx("div",{className:"max-h-[520px] overflow-auto rounded-md border",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"Status"}),s.jsx(H,{className:"text-right",children:"Hours"}),s.jsx(H,{className:"text-right",children:"OT"}),s.jsx(H,{children:"Source"})]})}),s.jsxs(Dt,{children:[w.map(D=>s.jsxs(je,{children:[s.jsx(F,{children:D.attendanceDate}),s.jsx(F,{className:"font-medium",children:D.employeeName}),s.jsx(F,{children:s.jsx(De,{className:V0(D.status),children:D.status})}),s.jsx(F,{className:"text-right",children:D.totalHours.toFixed(2)}),s.jsx(F,{className:"text-right",children:D.overtimeHours.toFixed(2)}),s.jsx(F,{children:D.isManual?"Manual":"Clock"})]},D.id)),w.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No attendance records found."})})]})]})})})]})]})}),s.jsx(ji,{value:"disciplinary",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Log Disciplinary Record"})}),s.jsxs(se,{className:"space-y-4",children:[!r&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Read-only view. HR manager/admin roles can log and resolve records."}),r&&s.jsxs("div",{className:"space-y-3 rounded-md border p-3",children:[s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Employee"}),s.jsxs(gt,{value:d.employeeId,onValueChange:D=>h(R=>({...R,employeeId:D})),children:[s.jsx(mt,{children:s.jsx(yt,{placeholder:"Select employee"})}),s.jsx(pt,{children:m.map(D=>s.jsx(ye,{value:D.id,children:D.fullName},D.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Action"}),s.jsxs(gt,{value:d.actionType,onValueChange:D=>h(R=>({...R,actionType:D})),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"warning",children:"Warning"}),s.jsx(ye,{value:"suspension",children:"Suspension"}),s.jsx(ye,{value:"termination",children:"Termination"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Severity"}),s.jsxs(gt,{value:d.severity,onValueChange:D=>h(R=>({...R,severity:D})),children:[s.jsx(mt,{children:s.jsx(yt,{})}),s.jsxs(pt,{children:[s.jsx(ye,{value:"low",children:"Low"}),s.jsx(ye,{value:"medium",children:"Medium"}),s.jsx(ye,{value:"high",children:"High"}),s.jsx(ye,{value:"critical",children:"Critical"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Incident Date"}),s.jsx(Y,{type:"date",value:d.incidentDate,onChange:D=>h(R=>({...R,incidentDate:D.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Reason"}),s.jsx(Pn,{value:d.reason,onChange:D=>h(R=>({...R,reason:D.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(X,{children:"Description"}),s.jsx(Pn,{value:d.description,onChange:D=>h(R=>({...R,description:D.target.value}))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{onClick:()=>A.mutate(),disabled:A.isPending,children:"Log Record"})})]})]})]}),s.jsxs(Z,{children:[s.jsx(ne,{children:s.jsx(re,{className:"text-base",children:"Disciplinary Records"})}),s.jsx(se,{children:s.jsx("div",{className:"max-h-[520px] overflow-auto rounded-md border",children:s.jsxs(Rt,{children:[s.jsx(Ot,{children:s.jsxs(je,{children:[s.jsx(H,{children:"Date"}),s.jsx(H,{children:"Employee"}),s.jsx(H,{children:"Action"}),s.jsx(H,{children:"Severity"}),s.jsx(H,{children:"Status"}),s.jsx(H,{children:"Reason"}),s.jsx(H,{className:"text-right",children:"Actions"})]})}),s.jsxs(Dt,{children:[C.map(D=>s.jsxs(je,{children:[s.jsx(F,{children:D.incidentDate}),s.jsx(F,{className:"font-medium",children:D.employeeName}),s.jsx(F,{children:D.actionType}),s.jsx(F,{children:D.severity}),s.jsx(F,{children:s.jsx(De,{className:V0(D.status),children:D.status})}),s.jsx(F,{className:"max-w-[220px] truncate",children:D.reason}),s.jsx(F,{className:"text-right",children:r&&D.status.toLowerCase()==="active"&&s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(K,{size:"sm",variant:"outline",onClick:()=>I.mutate({recordId:D.id,resolutionStatus:"resolved"}),children:"Resolve"}),s.jsx(K,{size:"sm",variant:"destructive",onClick:()=>I.mutate({recordId:D.id,resolutionStatus:"cancelled"}),children:"Cancel"})]})})]},D.id)),C.length===0&&s.jsx(je,{children:s.jsx(F,{colSpan:7,className:"py-8 text-center text-muted-foreground",children:"No disciplinary records found."})})]})]})})})]})]})})]})]})}const Ett=j.lazy(()=>Fx(()=>import("./FinancialReports-CfqtHNBA.js"),[])),Att=j.lazy(()=>Fx(()=>import("./PayrollReports-D273DInX.js"),[])),Ttt=j.lazy(()=>Fx(()=>import("./AuditLogs-Ca2avw64.js"),[])),Ctt=j.lazy(()=>Fx(()=>import("./JournalEntries-C7XY-D9-.js"),[])),Ptt=j.lazy(()=>Fx(()=>import("./ChartOfAccounts-ByJ41Pvq.js"),[])),Itt=new Tde({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),ly=s.jsx("div",{className:"py-10",children:s.jsx(mm,{message:"Loading page..."})}),ktt=()=>s.jsx(awe,{children:s.jsx(Rde,{client:Itt,children:s.jsxs(nW,{children:[s.jsx(Kle,{}),s.jsx(Sce,{}),s.jsx(Bhe,{basename:"/",children:s.jsx(iwe,{children:s.jsxs(Rhe,{children:[s.jsx(xt,{path:"/",element:s.jsx(att,{})}),s.jsx(xt,{path:"/auth",element:s.jsx(CPe,{})}),s.jsx(xt,{path:"/accept-invitation",element:s.jsx(PPe,{})}),s.jsx(xt,{path:"/setup",element:s.jsx(Et,{children:s.jsx(stt,{})})}),s.jsx(xt,{path:"/dashboard",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(cJe,{})})})}),s.jsx(xt,{path:"/invoices",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(dJe,{})})})})}),s.jsx(xt,{path:"/invoices/new",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(fJe,{})})})})}),s.jsx(xt,{path:"/customers",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(xet,{})})})})}),s.jsx(xt,{path:"/estimates",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Aet,{})})})})}),s.jsx(xt,{path:"/quotations/new",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(_et,{})})})})}),s.jsx(xt,{path:"/sales-orders",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(jet,{})})})})}),s.jsx(xt,{path:"/vendors",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Cet,{})})})})}),s.jsx(xt,{path:"/bills",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Iet,{})})})})}),s.jsx(xt,{path:"/purchase-orders",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ket,{})})})})}),s.jsx(xt,{path:"/expenses",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Met,{})})})})}),s.jsx(xt,{path:"/products",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(jtt,{})})})})}),s.jsx(xt,{path:"/inventory",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx($et,{})})})})}),s.jsx(xt,{path:"/bank-accounts",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Fet,{})})})})}),s.jsx(xt,{path:"/reconciliation",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(qet,{})})})})}),s.jsx(xt,{path:"/employees",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(mJe,{})})})})}),s.jsx(xt,{path:"/employees/new",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(_Je,{})})})})}),s.jsx(xt,{path:"/employees/:id/edit",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(EJe,{})})})})}),s.jsx(xt,{path:"/employees/bulk-upload",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(TJe,{})})})})}),s.jsx(xt,{path:"/employees/:id/payroll-setup",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ytt,{})})})})}),s.jsx(xt,{path:"/payroll",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(kJe,{})})})})}),s.jsx(xt,{path:"/payroll/new",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(MJe,{})})})})}),s.jsx(xt,{path:"/payroll/:id",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(XJe,{})})})})}),s.jsx(xt,{path:"/payroll/:id/approve",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(JJe,{})})})})}),s.jsx(xt,{path:"/payroll/:runId/payslip/:employeeId",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ZJe,{})})})})}),s.jsx(xt,{path:"/advances",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(tet,{})})})})}),s.jsx(xt,{path:"/time-tracking",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Wet,{})})})})}),s.jsx(xt,{path:"/hr-operations",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Stt,{})})})})}),s.jsx(xt,{path:"/projects",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Ket,{})})})})}),s.jsx(xt,{path:"/projects/:projectId/expenses",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Yet,{})})})})}),s.jsx(xt,{path:"/projects/:projectId/activity-log",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(Xet,{})})})})}),s.jsx(xt,{path:"/donors",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ott,{})})})})}),s.jsx(xt,{path:"/accounts-payable",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ltt,{})})})})}),s.jsx(xt,{path:"/accounts-receivable",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ctt,{})})})})}),s.jsx(xt,{path:"/company-settings",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin"],children:s.jsx(ez,{})})})})}),s.jsx(xt,{path:"/reports",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(j.Suspense,{fallback:ly,children:s.jsx(Ett,{})})})})})}),s.jsx(xt,{path:"/payroll-reports",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(j.Suspense,{fallback:ly,children:s.jsx(Att,{})})})})})}),s.jsx(xt,{path:"/zra-compliance",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(iet,{})})})})}),s.jsx(xt,{path:"/tax-calculator",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(aet,{})})})})}),s.jsx(xt,{path:"/payroll-settings",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin"],children:s.jsx(btt,{})})})})}),s.jsx(xt,{path:"/settings",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(ez,{})})})})}),s.jsx(xt,{path:"/users",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin"],children:s.jsx(Het,{})})})})}),s.jsx(xt,{path:"/audit-logs",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin","auditor"],children:s.jsx(j.Suspense,{fallback:ly,children:s.jsx(Ttt,{})})})})})}),s.jsx(xt,{path:"/fixed-assets",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(utt,{})})})})}),s.jsx(xt,{path:"/asset-depreciation",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(htt,{})})})})}),s.jsx(xt,{path:"/financial-periods",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper"],children:s.jsx(ptt,{})})})})}),s.jsx(xt,{path:"/journal-entries",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(j.Suspense,{fallback:ly,children:s.jsx(Ctt,{})})})})})}),s.jsx(xt,{path:"/chart-of-accounts",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{children:s.jsx(j.Suspense,{fallback:ly,children:s.jsx(Ptt,{})})})})})}),s.jsx(xt,{path:"/opening-balances",element:s.jsx(Et,{children:s.jsx(Ct,{children:s.jsx(kt,{allowedRoles:["super_admin","admin","financial_manager","accountant"],children:s.jsx(_tt,{})})})})}),s.jsx(xt,{path:"*",element:s.jsx(Let,{})})]})})})]})})});I9(document.getElementById("root")).render(s.jsx(ktt,{}));export{De as $,vt as A,K as B,ks as C,Rs as D,oz as E,dr as F,Se as G,Pe as H,Y as I,Ce as J,ge as K,mm as L,so as M,de as N,ee as O,ae as P,Ts as Q,p8 as R,wh as S,Tb as T,Ds as U,gt as V,mt as W,yt as X,pt as Y,ye as Z,Vi as _,_e as a,Jt as a0,qe as a1,Ms as a2,Nn as a3,G as a4,wt as a5,Joe as a6,mn as a7,Pl as a8,Qoe as a9,Jn as aa,Kn as ab,Gn as ac,Yn as ad,ns as ae,Pn as af,x1 as ag,l8 as ah,ole as ai,es as aj,Ie as ak,fr as al,et as am,Ee as b,Le as c,ze as d,vv as e,Z as f,ne as g,re as h,se as i,s as j,X as k,xg as l,wi as m,va as n,o8 as o,ji as p,Rt as q,j as r,Ot as s,je as t,dt as u,H as v,Dt as w,F as x,jn as y,Fn as z};
